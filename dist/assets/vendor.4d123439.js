var B3=Object.defineProperty,z3=Object.defineProperties;var G3=Object.getOwnPropertyDescriptors;var dh=Object.getOwnPropertySymbols;var z_=Object.prototype.hasOwnProperty,G_=Object.prototype.propertyIsEnumerable;var H_=(n,e,t)=>e in n?B3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ht=(n,e)=>{for(var t in e||(e={}))z_.call(e,t)&&H_(n,t,e[t]);if(dh)for(var t of dh(e))G_.call(e,t)&&H_(n,t,e[t]);return n},Dn=(n,e)=>z3(n,G3(e));var mr=(n,e)=>{var t={};for(var r in n)z_.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&dh)for(var r of dh(n))e.indexOf(r)<0&&G_.call(n,r)&&(t[r]=n[r]);return t};var Bg=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ge={exports:{}},Tt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var V_=Object.getOwnPropertySymbols,H3=Object.prototype.hasOwnProperty,V3=Object.prototype.propertyIsEnumerable;function W3(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function j3(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var zg=j3()?Object.assign:function(n,e){for(var t,r=W3(n),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)H3.call(t,o)&&(r[o]=t[o]);if(V_){i=V_(t);for(var a=0;a<i.length;a++)V3.call(t,i[a])&&(r[i[a]]=t[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg=zg,yl=60103,W_=60106;Tt.Fragment=60107;Tt.StrictMode=60108;Tt.Profiler=60114;var j_=60109,X_=60110,q_=60112;Tt.Suspense=60113;var Y_=60115,J_=60116;if(typeof Symbol=="function"&&Symbol.for){var fi=Symbol.for;yl=fi("react.element"),W_=fi("react.portal"),Tt.Fragment=fi("react.fragment"),Tt.StrictMode=fi("react.strict_mode"),Tt.Profiler=fi("react.profiler"),j_=fi("react.provider"),X_=fi("react.context"),q_=fi("react.forward_ref"),Tt.Suspense=fi("react.suspense"),Y_=fi("react.memo"),J_=fi("react.lazy")}var Z_=typeof Symbol=="function"&&Symbol.iterator;function X3(n){return n===null||typeof n!="object"?null:(n=Z_&&n[Z_]||n["@@iterator"],typeof n=="function"?n:null)}function Pc(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K_={};function xl(n,e,t){this.props=n,this.context=e,this.refs=K_,this.updater=t||Q_}xl.prototype.isReactComponent={};xl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error(Pc(85));this.updater.enqueueSetState(this,n,e,"setState")};xl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function $_(){}$_.prototype=xl.prototype;function Hg(n,e,t){this.props=n,this.context=e,this.refs=K_,this.updater=t||Q_}var Vg=Hg.prototype=new $_;Vg.constructor=Hg;Gg(Vg,xl.prototype);Vg.isPureReactComponent=!0;var Wg={current:null},ew=Object.prototype.hasOwnProperty,tw={key:!0,ref:!0,__self:!0,__source:!0};function nw(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ew.call(e,r)&&!tw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yl,type:n,key:s,ref:o,props:i,_owner:Wg.current}}function q3(n,e){return{$$typeof:yl,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function jg(n){return typeof n=="object"&&n!==null&&n.$$typeof===yl}function Y3(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var rw=/\/+/g;function Xg(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Y3(""+n.key):e.toString(36)}function hh(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case yl:case W_:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Xg(o,0):r,Array.isArray(i)?(t="",n!=null&&(t=n.replace(rw,"$&/")+"/"),hh(i,e,t,"",function(u){return u})):i!=null&&(jg(i)&&(i=q3(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rw,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Xg(s,a);o+=hh(s,e,t,l,i)}else if(l=X3(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Xg(s,a++),o+=hh(s,e,t,l,i);else if(s==="object")throw e=""+n,Error(Pc(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e));return o}function ph(n,e,t){if(n==null)return n;var r=[],i=0;return hh(n,r,"","",function(s){return e.call(t,s,i++)}),r}function J3(n){if(n._status===-1){var e=n._result;e=e(),n._status=0,n._result=e,e.then(function(t){n._status===0&&(t=t.default,n._status=1,n._result=t)},function(t){n._status===0&&(n._status=2,n._result=t)})}if(n._status===1)return n._result;throw n._result}var iw={current:null};function ds(){var n=iw.current;if(n===null)throw Error(Pc(321));return n}var Z3={ReactCurrentDispatcher:iw,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Wg,IsSomeRendererActing:{current:!1},assign:Gg};Tt.Children={map:ph,forEach:function(n,e,t){ph(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ph(n,function(){e++}),e},toArray:function(n){return ph(n,function(e){return e})||[]},only:function(n){if(!jg(n))throw Error(Pc(143));return n}};Tt.Component=xl;Tt.PureComponent=Hg;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z3;Tt.cloneElement=function(n,e,t){if(n==null)throw Error(Pc(267,n));var r=Gg({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wg.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)ew.call(e,l)&&!tw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yl,type:n.type,key:i,ref:s,props:r,_owner:o}};Tt.createContext=function(n,e){return e===void 0&&(e=null),n={$$typeof:X_,_calculateChangedBits:e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider={$$typeof:j_,_context:n},n.Consumer=n};Tt.createElement=nw;Tt.createFactory=function(n){var e=nw.bind(null,n);return e.type=n,e};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(n){return{$$typeof:q_,render:n}};Tt.isValidElement=jg;Tt.lazy=function(n){return{$$typeof:J_,_payload:{_status:-1,_result:n},_init:J3}};Tt.memo=function(n,e){return{$$typeof:Y_,type:n,compare:e===void 0?null:e}};Tt.useCallback=function(n,e){return ds().useCallback(n,e)};Tt.useContext=function(n,e){return ds().useContext(n,e)};Tt.useDebugValue=function(){};Tt.useEffect=function(n,e){return ds().useEffect(n,e)};Tt.useImperativeHandle=function(n,e,t){return ds().useImperativeHandle(n,e,t)};Tt.useLayoutEffect=function(n,e){return ds().useLayoutEffect(n,e)};Tt.useMemo=function(n,e){return ds().useMemo(n,e)};Tt.useReducer=function(n,e,t){return ds().useReducer(n,e,t)};Tt.useRef=function(n){return ds().useRef(n)};Tt.useState=function(n){return ds().useState(n)};Tt.version="17.0.2";ge.exports=Tt;var di=ge.exports,Ic={exports:{}},Jr={},_l={exports:{}},sw={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var e,t,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,u=null,h=function(){if(l!==null)try{var V=n.unstable_now();l(!0,V),l=null}catch(te){throw setTimeout(h,0),te}};e=function(V){l!==null?setTimeout(e,0,V):(l=V,setTimeout(h,0))},t=function(V,te){u=setTimeout(V,te)},r=function(){clearTimeout(u)},n.unstable_shouldYield=function(){return!1},i=n.unstable_forceFrameRate=function(){}}else{var m=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var p=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof p!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,_=null,w=-1,v=5,g=0;n.unstable_shouldYield=function(){return n.unstable_now()>=g},i=function(){},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<V?Math.floor(1e3/V):5};var M=new MessageChannel,S=M.port2;M.port1.onmessage=function(){if(_!==null){var V=n.unstable_now();g=V+v;try{_(!0,V)?S.postMessage(null):(y=!1,_=null)}catch(te){throw S.postMessage(null),te}}else y=!1},e=function(V){_=V,y||(y=!0,S.postMessage(null))},t=function(V,te){w=m(function(){V(n.unstable_now())},te)},r=function(){d(w),w=-1}}function b(V,te){var q=V.length;V.push(te);e:for(;;){var re=q-1>>>1,ye=V[re];if(ye!==void 0&&0<L(ye,te))V[re]=te,V[q]=ye,q=re;else break e}}function C(V){return V=V[0],V===void 0?null:V}function T(V){var te=V[0];if(te!==void 0){var q=V.pop();if(q!==te){V[0]=q;e:for(var re=0,ye=V.length;re<ye;){var $=2*(re+1)-1,Te=V[$],Le=$+1,Ee=V[Le];if(Te!==void 0&&0>L(Te,q))Ee!==void 0&&0>L(Ee,Te)?(V[re]=Ee,V[Le]=q,re=Le):(V[re]=Te,V[$]=q,re=$);else if(Ee!==void 0&&0>L(Ee,q))V[re]=Ee,V[Le]=q,re=Le;else break e}}return te}return null}function L(V,te){var q=V.sortIndex-te.sortIndex;return q!==0?q:V.id-te.id}var P=[],O=[],D=1,k=null,F=3,B=!1,W=!1,H=!1;function X(V){for(var te=C(O);te!==null;){if(te.callback===null)T(O);else if(te.startTime<=V)T(O),te.sortIndex=te.expirationTime,b(P,te);else break;te=C(O)}}function ue(V){if(H=!1,X(V),!W)if(C(P)!==null)W=!0,e(Me);else{var te=C(O);te!==null&&t(ue,te.startTime-V)}}function Me(V,te){W=!1,H&&(H=!1,r()),B=!0;var q=F;try{for(X(te),k=C(P);k!==null&&(!(k.expirationTime>te)||V&&!n.unstable_shouldYield());){var re=k.callback;if(typeof re=="function"){k.callback=null,F=k.priorityLevel;var ye=re(k.expirationTime<=te);te=n.unstable_now(),typeof ye=="function"?k.callback=ye:k===C(P)&&T(P),X(te)}else T(P);k=C(P)}if(k!==null)var $=!0;else{var Te=C(O);Te!==null&&t(ue,Te.startTime-te),$=!1}return $}finally{k=null,F=q,B=!1}}var Ae=i;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){W||B||(W=!0,e(Me))},n.unstable_getCurrentPriorityLevel=function(){return F},n.unstable_getFirstCallbackNode=function(){return C(P)},n.unstable_next=function(V){switch(F){case 1:case 2:case 3:var te=3;break;default:te=F}var q=F;F=te;try{return V()}finally{F=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=Ae,n.unstable_runWithPriority=function(V,te){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var q=F;F=V;try{return te()}finally{F=q}},n.unstable_scheduleCallback=function(V,te,q){var re=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,V){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=q+ye,V={id:D++,callback:te,priorityLevel:V,startTime:q,expirationTime:ye,sortIndex:-1},q>re?(V.sortIndex=q,b(O,V),C(P)===null&&V===C(O)&&(H?r():H=!0,t(ue,q-re))):(V.sortIndex=ye,b(P,V),W||B||(W=!0,e(Me))),V},n.unstable_wrapCallback=function(V){var te=F;return function(){var q=F;F=te;try{return V.apply(this,arguments)}finally{F=q}}}})(sw);_l.exports=sw;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=ge.exports,Yt=zg,Un=_l.exports;function Ne(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!mh)throw Error(Ne(227));var ow=new Set,Dc={};function da(n,e){wl(n,e),wl(n+"Capture",e)}function wl(n,e){for(Dc[n]=e,n=0;n<e.length;n++)ow.add(e[n])}var hs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Q3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aw=Object.prototype.hasOwnProperty,lw={},uw={};function K3(n){return aw.call(uw,n)?!0:aw.call(lw,n)?!1:Q3.test(n)?uw[n]=!0:(lw[n]=!0,!1)}function $3(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function eL(n,e,t,r){if(e===null||typeof e=="undefined"||$3(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gr(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Xn[n]=new gr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Xn[e]=new gr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Xn[n]=new gr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Xn[n]=new gr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Xn[n]=new gr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Xn[n]=new gr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Xn[n]=new gr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Xn[n]=new gr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Xn[n]=new gr(n,5,!1,n.toLowerCase(),null,!1,!1)});var qg=/[\-:]([a-z])/g;function Yg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qg,Yg);Xn[e]=new gr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qg,Yg);Xn[e]=new gr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qg,Yg);Xn[e]=new gr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Xn[n]=new gr(n,1,!1,n.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Xn[n]=new gr(n,1,!1,n.toLowerCase(),null,!0,!0)});function Jg(n,e,t,r){var i=Xn.hasOwnProperty(e)?Xn[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(eL(e,t,i,r)&&(t=null),r||i===null?K3(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ha=mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=60103,pa=60106,no=60107,Zg=60108,kc=60114,Qg=60109,Kg=60110,gh=60112,Nc=60113,vh=60120,yh=60115,$g=60116,ev=60121,tv=60128,cw=60129,nv=60130,rv=60131;if(typeof Symbol=="function"&&Symbol.for){var Bn=Symbol.for;Fc=Bn("react.element"),pa=Bn("react.portal"),no=Bn("react.fragment"),Zg=Bn("react.strict_mode"),kc=Bn("react.profiler"),Qg=Bn("react.provider"),Kg=Bn("react.context"),gh=Bn("react.forward_ref"),Nc=Bn("react.suspense"),vh=Bn("react.suspense_list"),yh=Bn("react.memo"),$g=Bn("react.lazy"),ev=Bn("react.block"),Bn("react.scope"),tv=Bn("react.opaque.id"),cw=Bn("react.debug_trace_mode"),nv=Bn("react.offscreen"),rv=Bn("react.legacy_hidden")}var fw=typeof Symbol=="function"&&Symbol.iterator;function Oc(n){return n===null||typeof n!="object"?null:(n=fw&&n[fw]||n["@@iterator"],typeof n=="function"?n:null)}var iv;function Uc(n){if(iv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);iv=e&&e[1]||""}return`
`+iv+n}var sv=!1;function xh(n,e){if(!n||sv)return"";sv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(n,[],e)}else{try{e.call()}catch(l){r=l}n.call(e.prototype)}else{try{throw Error()}catch(l){r=l}n()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{sv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Uc(n):""}function tL(n){switch(n.tag){case 5:return Uc(n.type);case 16:return Uc("Lazy");case 13:return Uc("Suspense");case 19:return Uc("SuspenseList");case 0:case 2:case 15:return n=xh(n.type,!1),n;case 11:return n=xh(n.type.render,!1),n;case 22:return n=xh(n.type._render,!1),n;case 1:return n=xh(n.type,!0),n;default:return""}}function Sl(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case no:return"Fragment";case pa:return"Portal";case kc:return"Profiler";case Zg:return"StrictMode";case Nc:return"Suspense";case vh:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Kg:return(n.displayName||"Context")+".Consumer";case Qg:return(n._context.displayName||"Context")+".Provider";case gh:var e=n.render;return e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case yh:return Sl(n.type);case ev:return Sl(n._render);case $g:e=n._payload,n=n._init;try{return Sl(n(e))}catch{}}return null}function ro(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function dw(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function nL(n){var e=dw(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _h(n){n._valueTracker||(n._valueTracker=nL(n))}function hw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=dw(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function wh(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function ov(n,e){var t=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function pw(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ro(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mw(n,e){e=e.checked,e!=null&&Jg(n,"checked",e,!1)}function av(n,e){mw(n,e);var t=ro(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?lv(n,e.type,t):e.hasOwnProperty("defaultValue")&&lv(n,e.type,ro(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function gw(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function lv(n,e,t){(e!=="number"||wh(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}function rL(n){var e="";return mh.Children.forEach(n,function(t){t!=null&&(e+=t)}),e}function uv(n,e){return n=Yt({children:void 0},e),(e=rL(e.children))&&(n.children=e),n}function Ml(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ro(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function cv(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vw(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ne(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Ne(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ro(t)}}function yw(n,e){var t=ro(e.value),r=ro(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function xw(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}var fv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function _w(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dv(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_w(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sh,ww=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!==fv.svg||"innerHTML"in n)n.innerHTML=e;else{for(Sh=Sh||document.createElement("div"),Sh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Bc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var zc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iL=["Webkit","ms","Moz","O"];Object.keys(zc).forEach(function(n){iL.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),zc[e]=zc[n]})});function Sw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||zc.hasOwnProperty(n)&&zc[n]?(""+e).trim():e+"px"}function Mw(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Sw(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var sL=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hv(n,e){if(e){if(sL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function pv(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function mv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gv=null,El=null,Tl=null;function Ew(n){if(n=of(n)){if(typeof gv!="function")throw Error(Ne(280));var e=n.stateNode;e&&(e=zh(e),gv(n.stateNode,n.type,e))}}function Tw(n){El?Tl?Tl.push(n):Tl=[n]:El=n}function bw(){if(El){var n=El,e=Tl;if(Tl=El=null,Ew(n),e)for(n=0;n<e.length;n++)Ew(e[n])}}function vv(n,e){return n(e)}function Aw(n,e,t,r,i){return n(e,t,r,i)}function yv(){}var Cw=vv,ma=!1,xv=!1;function _v(){(El!==null||Tl!==null)&&(yv(),bw())}function oL(n,e,t){if(xv)return n(e,t);xv=!0;try{return Cw(n,e,t)}finally{xv=!1,_v()}}function Gc(n,e){var t=n.stateNode;if(t===null)return null;var r=zh(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ne(231,e,typeof t));return t}var wv=!1;if(hs)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){wv=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{wv=!1}function aL(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Vc=!1,Mh=null,Eh=!1,Sv=null,lL={onError:function(n){Vc=!0,Mh=n}};function uL(n,e,t,r,i,s,o,a,l){Vc=!1,Mh=null,aL.apply(lL,arguments)}function cL(n,e,t,r,i,s,o,a,l){if(uL.apply(this,arguments),Vc){if(Vc){var u=Mh;Vc=!1,Mh=null}else throw Error(Ne(198));Eh||(Eh=!0,Sv=u)}}function ga(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&1026)!=0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Lw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Rw(n){if(ga(n)!==n)throw Error(Ne(188))}function fL(n){var e=n.alternate;if(!e){if(e=ga(n),e===null)throw Error(Ne(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Rw(i),n;if(s===r)return Rw(i),e;s=s.sibling}throw Error(Ne(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ne(189))}}if(t.alternate!==r)throw Error(Ne(190))}if(t.tag!==3)throw Error(Ne(188));return t.stateNode.current===t?n:e}function Pw(n){if(n=fL(n),!n)return null;for(var e=n;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===n)break;for(;!e.sibling;){if(!e.return||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Iw(n,e){for(var t=n.alternate;e!==null;){if(e===n||e===t)return!0;e=e.return}return!1}var Dw,Mv,Fw,kw,Ev=!1,ki=[],io=null,so=null,oo=null,Wc=new Map,jc=new Map,Xc=[],Nw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tv(n,e,t,r,i){return{blockedOn:n,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[r]}}function Ow(n,e){switch(n){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(e.pointerId)}}function qc(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n=Tv(e,t,r,i,s),e!==null&&(e=of(e),e!==null&&Mv(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function dL(n,e,t,r,i){switch(e){case"focusin":return io=qc(io,n,e,t,r,i),!0;case"dragenter":return so=qc(so,n,e,t,r,i),!0;case"mouseover":return oo=qc(oo,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Wc.set(s,qc(Wc.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jc.set(s,qc(jc.get(s)||null,n,e,t,r,i)),!0}return!1}function hL(n){var e=va(n.target);if(e!==null){var t=ga(e);if(t!==null){if(e=t.tag,e===13){if(e=Lw(t),e!==null){n.blockedOn=e,kw(n.lanePriority,function(){Un.unstable_runWithPriority(n.priority,function(){Fw(t)})});return}}else if(e===3&&t.stateNode.hydrate){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Th(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Pv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null)return e=of(t),e!==null&&Mv(e),n.blockedOn=t,!1;e.shift()}return!0}function Uw(n,e,t){Th(n)&&t.delete(e)}function pL(){for(Ev=!1;0<ki.length;){var n=ki[0];if(n.blockedOn!==null){n=of(n.blockedOn),n!==null&&Dw(n);break}for(var e=n.targetContainers;0<e.length;){var t=Pv(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null){n.blockedOn=t;break}e.shift()}n.blockedOn===null&&ki.shift()}io!==null&&Th(io)&&(io=null),so!==null&&Th(so)&&(so=null),oo!==null&&Th(oo)&&(oo=null),Wc.forEach(Uw),jc.forEach(Uw)}function Yc(n,e){n.blockedOn===e&&(n.blockedOn=null,Ev||(Ev=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,pL)))}function Bw(n){function e(i){return Yc(i,n)}if(0<ki.length){Yc(ki[0],n);for(var t=1;t<ki.length;t++){var r=ki[t];r.blockedOn===n&&(r.blockedOn=null)}}for(io!==null&&Yc(io,n),so!==null&&Yc(so,n),oo!==null&&Yc(oo,n),Wc.forEach(e),jc.forEach(e),t=0;t<Xc.length;t++)r=Xc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Xc.length&&(t=Xc[0],t.blockedOn===null);)hL(t),t.blockedOn===null&&Xc.shift()}function bh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var bl={animationend:bh("Animation","AnimationEnd"),animationiteration:bh("Animation","AnimationIteration"),animationstart:bh("Animation","AnimationStart"),transitionend:bh("Transition","TransitionEnd")},bv={},zw={};hs&&(zw=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function Ah(n){if(bv[n])return bv[n];if(!bl[n])return n;var e=bl[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in zw)return bv[n]=e[t];return n}var Gw=Ah("animationend"),Hw=Ah("animationiteration"),Vw=Ah("animationstart"),Ww=Ah("transitionend"),jw=new Map,Av=new Map,mL=["abort","abort",Gw,"animationEnd",Hw,"animationIteration",Vw,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ww,"transitionEnd","waiting","waiting"];function Cv(n,e){for(var t=0;t<n.length;t+=2){var r=n[t],i=n[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Av.set(r,e),jw.set(r,i),da(i,[r])}}var gL=Un.unstable_now;gL();var Bt=8;function Al(n){if((1&n)!=0)return Bt=15,1;if((2&n)!=0)return Bt=14,2;if((4&n)!=0)return Bt=13,4;var e=24&n;return e!==0?(Bt=12,e):(n&32)!=0?(Bt=11,32):(e=192&n,e!==0?(Bt=10,e):(n&256)!=0?(Bt=9,256):(e=3584&n,e!==0?(Bt=8,e):(n&4096)!=0?(Bt=7,4096):(e=4186112&n,e!==0?(Bt=6,e):(e=62914560&n,e!==0?(Bt=5,e):n&67108864?(Bt=4,67108864):(n&134217728)!=0?(Bt=3,134217728):(e=805306368&n,e!==0?(Bt=2,e):(1073741824&n)!=0?(Bt=1,1073741824):(Bt=8,n))))))}function vL(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function yL(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ne(358,n))}}function Jc(n,e){var t=n.pendingLanes;if(t===0)return Bt=0;var r=0,i=0,s=n.expiredLanes,o=n.suspendedLanes,a=n.pingedLanes;if(s!==0)r=s,i=Bt=15;else if(s=t&134217727,s!==0){var l=s&~o;l!==0?(r=Al(l),i=Bt):(a&=s,a!==0&&(r=Al(a),i=Bt))}else s=t&~o,s!==0?(r=Al(s),i=Bt):a!==0&&(r=Al(a),i=Bt);if(r===0)return 0;if(r=31-ao(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)==0){if(Al(e),i<=Bt)return e;Bt=i}if(e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ao(e),i=1<<t,r|=n[t],e&=~i;return r}function Xw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ch(n,e){switch(n){case 15:return 1;case 14:return 2;case 12:return n=Cl(24&~e),n===0?Ch(10,e):n;case 10:return n=Cl(192&~e),n===0?Ch(8,e):n;case 8:return n=Cl(3584&~e),n===0&&(n=Cl(4186112&~e),n===0&&(n=512)),n;case 2:return e=Cl(805306368&~e),e===0&&(e=268435456),e}throw Error(Ne(358,n))}function Cl(n){return n&-n}function Lv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Lh(n,e,t){n.pendingLanes|=e;var r=e-1;n.suspendedLanes&=r,n.pingedLanes&=r,n=n.eventTimes,e=31-ao(e),n[e]=t}var ao=Math.clz32?Math.clz32:wL,xL=Math.log,_L=Math.LN2;function wL(n){return n===0?32:31-(xL(n)/_L|0)|0}var SL=Un.unstable_UserBlockingPriority,ML=Un.unstable_runWithPriority,Rh=!0;function EL(n,e,t,r){ma||yv();var i=Rv,s=ma;ma=!0;try{Aw(i,n,e,t,r)}finally{(ma=s)||_v()}}function TL(n,e,t,r){ML(SL,Rv.bind(null,n,e,t,r))}function Rv(n,e,t,r){if(Rh){var i;if((i=(e&4)==0)&&0<ki.length&&-1<Nw.indexOf(n))n=Tv(null,n,e,t,r),ki.push(n);else{var s=Pv(n,e,t,r);if(s===null)i&&Ow(n,r);else{if(i){if(-1<Nw.indexOf(n)){n=Tv(s,n,e,t,r),ki.push(n);return}if(dL(s,n,e,t,r))return;Ow(n,r)}SS(n,e,r,null,t)}}}}function Pv(n,e,t,r){var i=mv(r);if(i=va(i),i!==null){var s=ga(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=Lw(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return SS(n,e,r,i,t),null}var lo=null,Iv=null,Ph=null;function qw(){if(Ph)return Ph;var n,e=Iv,t=e.length,r,i="value"in lo?lo.value:lo.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Ph=i.slice(n,1<r?1-r:void 0)}function Ih(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Dh(){return!0}function Yw(){return!1}function Fr(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dh:Yw,this.isPropagationStopped=Yw,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dh)},persist:function(){},isPersistent:Dh}),e}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dv=Fr(Ll),Zc=Yt({},Ll,{view:0,detail:0}),bL=Fr(Zc),Fv,kv,Qc,Fh=Yt({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ov,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Qc&&(Qc&&n.type==="mousemove"?(Fv=n.screenX-Qc.screenX,kv=n.screenY-Qc.screenY):kv=Fv=0,Qc=n),Fv)},movementY:function(n){return"movementY"in n?n.movementY:kv}}),Jw=Fr(Fh),AL=Yt({},Fh,{dataTransfer:0}),CL=Fr(AL),LL=Yt({},Zc,{relatedTarget:0}),Nv=Fr(LL),RL=Yt({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),PL=Fr(RL),IL=Yt({},Ll,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),DL=Fr(IL),FL=Yt({},Ll,{data:0}),Zw=Fr(FL),kL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UL(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=OL[n])?!!e[n]:!1}function Ov(){return UL}var BL=Yt({},Zc,{key:function(n){if(n.key){var e=kL[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ih(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?NL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ov,charCode:function(n){return n.type==="keypress"?Ih(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ih(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zL=Fr(BL),GL=Yt({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qw=Fr(GL),HL=Yt({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ov}),VL=Fr(HL),WL=Yt({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),jL=Fr(WL),XL=Yt({},Fh,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qL=Fr(XL),YL=[9,13,27,32],Uv=hs&&"CompositionEvent"in window,Kc=null;hs&&"documentMode"in document&&(Kc=document.documentMode);var JL=hs&&"TextEvent"in window&&!Kc,Kw=hs&&(!Uv||Kc&&8<Kc&&11>=Kc),$w=String.fromCharCode(32),eS=!1;function tS(n,e){switch(n){case"keyup":return YL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rl=!1;function ZL(n,e){switch(n){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(eS=!0,$w);case"textInput":return n=e.data,n===$w&&eS?null:n;default:return null}}function QL(n,e){if(Rl)return n==="compositionend"||!Uv&&tS(n,e)?(n=qw(),Ph=Iv=lo=null,Rl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kw&&e.locale!=="ko"?null:e.data;default:return null}}var KL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!KL[n.type]:e==="textarea"}function iS(n,e,t,r){Tw(r),e=Nh(e,"onChange"),0<e.length&&(t=new Dv("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var $c=null,ef=null;function $L(n){vS(n,0)}function kh(n){var e=kl(n);if(hw(e))return n}function eR(n,e){if(n==="change")return e}var sS=!1;if(hs){var Bv;if(hs){var zv="oninput"in document;if(!zv){var oS=document.createElement("div");oS.setAttribute("oninput","return;"),zv=typeof oS.oninput=="function"}Bv=zv}else Bv=!1;sS=Bv&&(!document.documentMode||9<document.documentMode)}function aS(){$c&&($c.detachEvent("onpropertychange",lS),ef=$c=null)}function lS(n){if(n.propertyName==="value"&&kh(ef)){var e=[];if(iS(e,ef,n,mv(n)),n=$L,ma)n(e);else{ma=!0;try{vv(n,e)}finally{ma=!1,_v()}}}}function tR(n,e,t){n==="focusin"?(aS(),$c=e,ef=t,$c.attachEvent("onpropertychange",lS)):n==="focusout"&&aS()}function nR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kh(ef)}function rR(n,e){if(n==="click")return kh(e)}function iR(n,e){if(n==="input"||n==="change")return kh(e)}function sR(n,e){return n===e&&(n!==0||1/n==1/e)||n!==n&&e!==e}var Zr=typeof Object.is=="function"?Object.is:sR,oR=Object.prototype.hasOwnProperty;function tf(n,e){if(Zr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!oR.call(e,t[r])||!Zr(n[t[r]],e[t[r]]))return!1;return!0}function uS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cS(n,e){var t=uS(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=uS(t)}}function fS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dS(){for(var n=window,e=wh();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wh(n.document)}return e}function Gv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var aR=hs&&"documentMode"in document&&11>=document.documentMode,Pl=null,Hv=null,nf=null,Vv=!1;function hS(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Vv||Pl==null||Pl!==wh(r)||(r=Pl,"selectionStart"in r&&Gv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nf&&tf(nf,r)||(nf=r,r=Nh(Hv,"onSelect"),0<r.length&&(e=new Dv("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Pl)))}Cv("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Cv("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Cv(mL,2);for(var pS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wv=0;Wv<pS.length;Wv++)Av.set(pS[Wv],0);wl("onMouseEnter",["mouseout","mouseover"]);wl("onMouseLeave",["mouseout","mouseover"]);wl("onPointerEnter",["pointerout","pointerover"]);wl("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mS=new Set("cancel close invalid load scroll toggle".split(" ").concat(rf));function gS(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,cL(r,e,void 0,n),n.currentTarget=null}function vS(n,e){e=(e&4)!=0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;gS(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;gS(i,a,u),s=l}}}if(Eh)throw n=Sv,Eh=!1,Sv=null,n}function Wt(n,e){var t=CS(e),r=n+"__bubble";t.has(r)||(wS(e,n,2,!1),t.add(r))}var yS="_reactListening"+Math.random().toString(36).slice(2);function xS(n){n[yS]||(n[yS]=!0,ow.forEach(function(e){mS.has(e)||_S(e,!1,n,null),_S(e,!0,n,null)}))}function _S(n,e,t,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=t;if(n==="selectionchange"&&t.nodeType!==9&&(s=t.ownerDocument),r!==null&&!e&&mS.has(n)){if(n!=="scroll")return;i|=2,s=r}var o=CS(s),a=n+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),wS(s,n,i,e),o.add(a))}function wS(n,e,t,r){var i=Av.get(e);switch(i===void 0?2:i){case 0:i=EL;break;case 1:i=TL;break;default:i=Rv}t=i.bind(null,e,t,n),i=void 0,!wv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function SS(n,e,t,r,i){var s=r;if((e&1)==0&&(e&2)==0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=va(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}oL(function(){var u=s,h=mv(t),m=[];e:{var d=jw.get(n);if(d!==void 0){var p=Dv,y=n;switch(n){case"keypress":if(Ih(t)===0)break e;case"keydown":case"keyup":p=zL;break;case"focusin":y="focus",p=Nv;break;case"focusout":y="blur",p=Nv;break;case"beforeblur":case"afterblur":p=Nv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Jw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=CL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=VL;break;case Gw:case Hw:case Vw:p=PL;break;case Ww:p=jL;break;case"scroll":p=bL;break;case"wheel":p=qL;break;case"copy":case"cut":case"paste":p=DL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qw}var _=(e&4)!=0,w=!_&&n==="scroll",v=_?d!==null?d+"Capture":null:d;_=[];for(var g=u,M;g!==null;){M=g;var S=M.stateNode;if(M.tag===5&&S!==null&&(M=S,v!==null&&(S=Gc(g,v),S!=null&&_.push(sf(g,S,M)))),w)break;g=g.return}0<_.length&&(d=new p(d,y,null,t,h),m.push({event:d,listeners:_}))}}if((e&7)==0){e:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&(e&16)==0&&(y=t.relatedTarget||t.fromElement)&&(va(y)||y[Fl]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(y=t.relatedTarget||t.toElement,p=u,y=y?va(y):null,y!==null&&(w=ga(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(_=Jw,S="onMouseLeave",v="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(_=Qw,S="onPointerLeave",v="onPointerEnter",g="pointer"),w=p==null?d:kl(p),M=y==null?d:kl(y),d=new _(S,g+"leave",p,t,h),d.target=w,d.relatedTarget=M,S=null,va(h)===u&&(_=new _(v,g+"enter",y,t,h),_.target=M,_.relatedTarget=w,S=_),w=S,p&&y)t:{for(_=p,v=y,g=0,M=_;M;M=Il(M))g++;for(M=0,S=v;S;S=Il(S))M++;for(;0<g-M;)_=Il(_),g--;for(;0<M-g;)v=Il(v),M--;for(;g--;){if(_===v||v!==null&&_===v.alternate)break t;_=Il(_),v=Il(v)}_=null}else _=null;p!==null&&MS(m,d,p,_,!1),y!==null&&w!==null&&MS(m,w,y,_,!0)}}e:{if(d=u?kl(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var b=eR;else if(rS(d))if(sS)b=iR;else{b=nR;var C=tR}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=rR);if(b&&(b=b(n,u))){iS(m,b,t,h);break e}C&&C(n,d,u),n==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&lv(d,"number",d.value)}switch(C=u?kl(u):window,n){case"focusin":(rS(C)||C.contentEditable==="true")&&(Pl=C,Hv=u,nf=null);break;case"focusout":nf=Hv=Pl=null;break;case"mousedown":Vv=!0;break;case"contextmenu":case"mouseup":case"dragend":Vv=!1,hS(m,t,h);break;case"selectionchange":if(aR)break;case"keydown":case"keyup":hS(m,t,h)}var T;if(Uv)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Rl?tS(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(Kw&&t.locale!=="ko"&&(Rl||L!=="onCompositionStart"?L==="onCompositionEnd"&&Rl&&(T=qw()):(lo=h,Iv="value"in lo?lo.value:lo.textContent,Rl=!0)),C=Nh(u,L),0<C.length&&(L=new Zw(L,n,null,t,h),m.push({event:L,listeners:C}),T?L.data=T:(T=nS(t),T!==null&&(L.data=T)))),(T=JL?ZL(n,t):QL(n,t))&&(u=Nh(u,"onBeforeInput"),0<u.length&&(h=new Zw("onBeforeInput","beforeinput",null,t,h),m.push({event:h,listeners:u}),h.data=T))}vS(m,e)})}function sf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Nh(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gc(n,t),s!=null&&r.unshift(sf(n,s,i)),s=Gc(n,e),s!=null&&r.push(sf(n,s,i))),n=n.return}return r}function Il(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function MS(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Gc(t,s),l!=null&&o.unshift(sf(t,l,a))):i||(l=Gc(t,s),l!=null&&o.push(sf(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}function Oh(){}var jv=null,Xv=null;function ES(n,e){switch(n){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function qv(n,e){return n==="textarea"||n==="option"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var TS=typeof setTimeout=="function"?setTimeout:void 0,lR=typeof clearTimeout=="function"?clearTimeout:void 0;function Yv(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function Dl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break}return n}function bS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Jv=0;function uR(n){return{$$typeof:tv,toString:n,valueOf:n}}var Uh=Math.random().toString(36).slice(2),uo="__reactFiber$"+Uh,Bh="__reactProps$"+Uh,Fl="__reactContainer$"+Uh,AS="__reactEvents$"+Uh;function va(n){var e=n[uo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Fl]||t[uo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=bS(n);n!==null;){if(t=n[uo])return t;n=bS(n)}return e}n=t,t=n.parentNode}return null}function of(n){return n=n[uo]||n[Fl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function kl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ne(33))}function zh(n){return n[Bh]||null}function CS(n){var e=n[AS];return e===void 0&&(e=n[AS]=new Set),e}var Zv=[],Nl=-1;function co(n){return{current:n}}function jt(n){0>Nl||(n.current=Zv[Nl],Zv[Nl]=null,Nl--)}function sn(n,e){Nl++,Zv[Nl]=n.current,n.current=e}var fo={},nr=co(fo),br=co(!1),ya=fo;function Ol(n,e){var t=n.type.contextTypes;if(!t)return fo;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ar(n){return n=n.childContextTypes,n!=null}function Gh(){jt(br),jt(nr)}function LS(n,e,t){if(nr.current!==fo)throw Error(Ne(168));sn(nr,e),sn(br,t)}function RS(n,e,t){var r=n.stateNode;if(n=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(Ne(108,Sl(e)||"Unknown",i));return Yt({},t,r)}function Hh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fo,ya=nr.current,sn(nr,n),sn(br,br.current),!0}function PS(n,e,t){var r=n.stateNode;if(!r)throw Error(Ne(169));t?(n=RS(n,e,ya),r.__reactInternalMemoizedMergedChildContext=n,jt(br),jt(nr),sn(nr,n)):jt(br),sn(br,t)}var Qv=null,xa=null,cR=Un.unstable_runWithPriority,Kv=Un.unstable_scheduleCallback,$v=Un.unstable_cancelCallback,fR=Un.unstable_shouldYield,IS=Un.unstable_requestPaint,e0=Un.unstable_now,dR=Un.unstable_getCurrentPriorityLevel,Vh=Un.unstable_ImmediatePriority,DS=Un.unstable_UserBlockingPriority,FS=Un.unstable_NormalPriority,kS=Un.unstable_LowPriority,NS=Un.unstable_IdlePriority,t0={},hR=IS!==void 0?IS:function(){},ps=null,Wh=null,n0=!1,OS=e0(),rr=1e4>OS?e0:function(){return e0()-OS};function Ul(){switch(dR()){case Vh:return 99;case DS:return 98;case FS:return 97;case kS:return 96;case NS:return 95;default:throw Error(Ne(332))}}function US(n){switch(n){case 99:return Vh;case 98:return DS;case 97:return FS;case 96:return kS;case 95:return NS;default:throw Error(Ne(332))}}function _a(n,e){return n=US(n),cR(n,e)}function af(n,e,t){return n=US(n),Kv(n,e,t)}function Ni(){if(Wh!==null){var n=Wh;Wh=null,$v(n)}BS()}function BS(){if(!n0&&ps!==null){n0=!0;var n=0;try{var e=ps;_a(99,function(){for(;n<e.length;n++){var t=e[n];do t=t(!0);while(t!==null)}}),ps=null}catch(t){throw ps!==null&&(ps=ps.slice(n+1)),Kv(Vh,Ni),t}finally{n0=!1}}}var pR=ha.ReactCurrentBatchConfig;function hi(n,e){if(n&&n.defaultProps){e=Yt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var jh=co(null),Xh=null,Bl=null,qh=null;function r0(){qh=Bl=Xh=null}function i0(n){var e=jh.current;jt(jh),n.type._context._currentValue=e}function zS(n,e){for(;n!==null;){var t=n.alternate;if((n.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else n.childLanes|=e,t!==null&&(t.childLanes|=e);n=n.return}}function zl(n,e){Xh=n,qh=Bl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!=0&&(pi=!0),n.firstContext=null)}function Qr(n,e){if(qh!==n&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(qh=n,e=1073741823),e={context:n,observedBits:e,next:null},Bl===null){if(Xh===null)throw Error(Ne(308));Bl=e,Xh.dependencies={lanes:0,firstContext:e,responders:null}}else Bl=Bl.next=e;return n._currentValue}var ho=!1;function s0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function GS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function po(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function mo(n,e){if(n=n.updateQueue,n!==null){n=n.shared;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}}function HS(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function lf(n,e,t,r){var i=n.updateQueue;ho=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;if(h!==null){h=h.updateQueue;var m=h.lastBaseUpdate;m!==o&&(m===null?h.firstBaseUpdate=u:m.next=u,h.lastBaseUpdate=l)}}if(s!==null){m=i.baseState,o=0,h=u=l=null;do{a=s.lane;var d=s.eventTime;if((r&a)===a){h!==null&&(h=h.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=n,y=s;switch(a=e,d=t,y.tag){case 1:if(p=y.payload,typeof p=="function"){m=p.call(d,m,a);break e}m=p;break e;case 3:p.flags=p.flags&-4097|64;case 0:if(p=y.payload,a=typeof p=="function"?p.call(d,m,a):p,a==null)break e;m=Yt({},m,a);break e;case 2:ho=!0}}s.callback!==null&&(n.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else d={eventTime:d,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=d,l=m):h=h.next=d,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);h===null&&(l=m),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,_f|=o,n.lanes=o,n.memoizedState=m}}function VS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ne(191,i));i.call(r)}}}var WS=new mh.Component().refs;function Yh(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Yt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Jh={isMounted:function(n){return(n=n._reactInternals)?ga(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=kr(),i=yo(n),s=po(r,i);s.payload=e,t!=null&&(s.callback=t),mo(n,s),xo(n,i,r)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=kr(),i=yo(n),s=po(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),mo(n,s),xo(n,i,r)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=kr(),r=yo(n),i=po(t,r);i.tag=2,e!=null&&(i.callback=e),mo(n,i),xo(n,r,t)}};function jS(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!tf(t,r)||!tf(i,s):!0}function XS(n,e,t){var r=!1,i=fo,s=e.contextType;return typeof s=="object"&&s!==null?s=Qr(s):(i=Ar(e)?ya:nr.current,r=e.contextTypes,s=(r=r!=null)?Ol(n,i):fo),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jh,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function qS(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Jh.enqueueReplaceState(e,e.state,null)}function o0(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=WS,s0(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qr(s):(s=Ar(e)?ya:nr.current,i.context=Ol(n,s)),lf(n,t,i,r),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yh(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jh.enqueueReplaceState(i,i.state,null),lf(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4)}var Zh=Array.isArray;function uf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ne(309));var r=t.stateNode}if(!r)throw Error(Ne(147,n));var i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===WS&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof n!="string")throw Error(Ne(284));if(!t._owner)throw Error(Ne(290,n))}return n}function Qh(n,e){if(n.type!=="textarea")throw Error(Ne(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function YS(n){function e(w,v){if(n){var g=w.lastEffect;g!==null?(g.nextEffect=v,w.lastEffect=v):w.firstEffect=w.lastEffect=v,v.nextEffect=null,v.flags=8}}function t(w,v){if(!n)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=So(w,v),w.index=0,w.sibling=null,w}function s(w,v,g){return w.index=g,n?(g=w.alternate,g!==null?(g=g.index,g<v?(w.flags=2,v):g):(w.flags=2,v)):v}function o(w){return n&&w.alternate===null&&(w.flags=2),w}function a(w,v,g,M){return v===null||v.tag!==6?(v=H0(g,w.mode,M),v.return=w,v):(v=i(v,g),v.return=w,v)}function l(w,v,g,M){return v!==null&&v.elementType===g.type?(M=i(v,g.props),M.ref=uf(w,v,g),M.return=w,M):(M=mp(g.type,g.key,g.props,null,w.mode,M),M.ref=uf(w,v,g),M.return=w,M)}function u(w,v,g,M){return v===null||v.tag!==4||v.stateNode.containerInfo!==g.containerInfo||v.stateNode.implementation!==g.implementation?(v=V0(g,w.mode,M),v.return=w,v):(v=i(v,g.children||[]),v.return=w,v)}function h(w,v,g,M,S){return v===null||v.tag!==7?(v=Yl(g,w.mode,M,S),v.return=w,v):(v=i(v,g),v.return=w,v)}function m(w,v,g){if(typeof v=="string"||typeof v=="number")return v=H0(""+v,w.mode,g),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fc:return g=mp(v.type,v.key,v.props,null,w.mode,g),g.ref=uf(w,null,v),g.return=w,g;case pa:return v=V0(v,w.mode,g),v.return=w,v}if(Zh(v)||Oc(v))return v=Yl(v,w.mode,g,null),v.return=w,v;Qh(w,v)}return null}function d(w,v,g,M){var S=v!==null?v.key:null;if(typeof g=="string"||typeof g=="number")return S!==null?null:a(w,v,""+g,M);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Fc:return g.key===S?g.type===no?h(w,v,g.props.children,M,S):l(w,v,g,M):null;case pa:return g.key===S?u(w,v,g,M):null}if(Zh(g)||Oc(g))return S!==null?null:h(w,v,g,M,null);Qh(w,g)}return null}function p(w,v,g,M,S){if(typeof M=="string"||typeof M=="number")return w=w.get(g)||null,a(v,w,""+M,S);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Fc:return w=w.get(M.key===null?g:M.key)||null,M.type===no?h(v,w,M.props.children,S,M.key):l(v,w,M,S);case pa:return w=w.get(M.key===null?g:M.key)||null,u(v,w,M,S)}if(Zh(M)||Oc(M))return w=w.get(g)||null,h(v,w,M,S,null);Qh(v,M)}return null}function y(w,v,g,M){for(var S=null,b=null,C=v,T=v=0,L=null;C!==null&&T<g.length;T++){C.index>T?(L=C,C=null):L=C.sibling;var P=d(w,C,g[T],M);if(P===null){C===null&&(C=L);break}n&&C&&P.alternate===null&&e(w,C),v=s(P,v,T),b===null?S=P:b.sibling=P,b=P,C=L}if(T===g.length)return t(w,C),S;if(C===null){for(;T<g.length;T++)C=m(w,g[T],M),C!==null&&(v=s(C,v,T),b===null?S=C:b.sibling=C,b=C);return S}for(C=r(w,C);T<g.length;T++)L=p(C,w,T,g[T],M),L!==null&&(n&&L.alternate!==null&&C.delete(L.key===null?T:L.key),v=s(L,v,T),b===null?S=L:b.sibling=L,b=L);return n&&C.forEach(function(O){return e(w,O)}),S}function _(w,v,g,M){var S=Oc(g);if(typeof S!="function")throw Error(Ne(150));if(g=S.call(g),g==null)throw Error(Ne(151));for(var b=S=null,C=v,T=v=0,L=null,P=g.next();C!==null&&!P.done;T++,P=g.next()){C.index>T?(L=C,C=null):L=C.sibling;var O=d(w,C,P.value,M);if(O===null){C===null&&(C=L);break}n&&C&&O.alternate===null&&e(w,C),v=s(O,v,T),b===null?S=O:b.sibling=O,b=O,C=L}if(P.done)return t(w,C),S;if(C===null){for(;!P.done;T++,P=g.next())P=m(w,P.value,M),P!==null&&(v=s(P,v,T),b===null?S=P:b.sibling=P,b=P);return S}for(C=r(w,C);!P.done;T++,P=g.next())P=p(C,w,T,P.value,M),P!==null&&(n&&P.alternate!==null&&C.delete(P.key===null?T:P.key),v=s(P,v,T),b===null?S=P:b.sibling=P,b=P);return n&&C.forEach(function(D){return e(w,D)}),S}return function(w,v,g,M){var S=typeof g=="object"&&g!==null&&g.type===no&&g.key===null;S&&(g=g.props.children);var b=typeof g=="object"&&g!==null;if(b)switch(g.$$typeof){case Fc:e:{for(b=g.key,S=v;S!==null;){if(S.key===b){switch(S.tag){case 7:if(g.type===no){t(w,S.sibling),v=i(S,g.props.children),v.return=w,w=v;break e}break;default:if(S.elementType===g.type){t(w,S.sibling),v=i(S,g.props),v.ref=uf(w,S,g),v.return=w,w=v;break e}}t(w,S);break}else e(w,S);S=S.sibling}g.type===no?(v=Yl(g.props.children,w.mode,M,g.key),v.return=w,w=v):(M=mp(g.type,g.key,g.props,null,w.mode,M),M.ref=uf(w,v,g),M.return=w,w=M)}return o(w);case pa:e:{for(S=g.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===g.containerInfo&&v.stateNode.implementation===g.implementation){t(w,v.sibling),v=i(v,g.children||[]),v.return=w,w=v;break e}else{t(w,v);break}else e(w,v);v=v.sibling}v=V0(g,w.mode,M),v.return=w,w=v}return o(w)}if(typeof g=="string"||typeof g=="number")return g=""+g,v!==null&&v.tag===6?(t(w,v.sibling),v=i(v,g),v.return=w,w=v):(t(w,v),v=H0(g,w.mode,M),v.return=w,w=v),o(w);if(Zh(g))return y(w,v,g,M);if(Oc(g))return _(w,v,g,M);if(b&&Qh(w,g),typeof g=="undefined"&&!S)switch(w.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ne(152,Sl(w.type)||"Component"))}return t(w,v)}}var Kh=YS(!0),JS=YS(!1),cf={},Oi=co(cf),ff=co(cf),df=co(cf);function wa(n){if(n===cf)throw Error(Ne(174));return n}function a0(n,e){switch(sn(df,e),sn(ff,n),sn(Oi,cf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dv(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=dv(e,n)}jt(Oi),sn(Oi,e)}function Gl(){jt(Oi),jt(ff),jt(df)}function ZS(n){wa(df.current);var e=wa(Oi.current),t=dv(e,n.type);e!==t&&(sn(ff,n),sn(Oi,t))}function l0(n){ff.current===n&&(jt(Oi),jt(ff))}var on=co(0);function $h(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ms=null,go=null,Ui=!1;function QS(n,e){var t=ei(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=n,t.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t}function KS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function u0(n){if(Ui){var e=go;if(e){var t=e;if(!KS(n,e)){if(e=Dl(t.nextSibling),!e||!KS(n,e)){n.flags=n.flags&-1025|2,Ui=!1,ms=n;return}QS(ms,t)}ms=n,go=Dl(e.firstChild)}else n.flags=n.flags&-1025|2,Ui=!1,ms=n}}function $S(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ms=n}function ep(n){if(n!==ms)return!1;if(!Ui)return $S(n),Ui=!0,!1;var e=n.type;if(n.tag!==5||e!=="head"&&e!=="body"&&!qv(e,n.memoizedProps))for(e=go;e;)QS(n,e),e=Dl(e.nextSibling);if($S(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ne(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){go=Dl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}go=null}}else go=ms?Dl(n.stateNode.nextSibling):null;return!0}function c0(){go=ms=null,Ui=!1}var Hl=[];function f0(){for(var n=0;n<Hl.length;n++)Hl[n]._workInProgressVersionPrimary=null;Hl.length=0}var hf=ha.ReactCurrentDispatcher,Kr=ha.ReactCurrentBatchConfig,pf=0,vn=null,ir=null,qn=null,tp=!1,mf=!1;function Cr(){throw Error(Ne(321))}function d0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Zr(n[t],e[t]))return!1;return!0}function h0(n,e,t,r,i,s){if(pf=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hf.current=n===null||n.memoizedState===null?gR:vR,n=t(r,i),mf){s=0;do{if(mf=!1,!(25>s))throw Error(Ne(301));s+=1,qn=ir=null,e.updateQueue=null,hf.current=yR,n=t(r,i)}while(mf)}if(hf.current=sp,e=ir!==null&&ir.next!==null,pf=0,qn=ir=vn=null,tp=!1,e)throw Error(Ne(300));return n}function Sa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?vn.memoizedState=qn=n:qn=qn.next=n,qn}function Ma(){if(ir===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=ir.next;var e=qn===null?vn.memoizedState:qn.next;if(e!==null)qn=e,ir=n;else{if(n===null)throw Error(Ne(310));ir=n,n={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},qn===null?vn.memoizedState=qn=n:qn=qn.next=n}return qn}function Bi(n,e){return typeof e=="function"?e(n):e}function gf(n){var e=Ma(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=ir,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=o=s=null,l=i;do{var u=l.lane;if((pf&u)===u)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===n?l.eagerState:n(r,l.action);else{var h={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=h,s=r):a=a.next=h,vn.lanes|=u,_f|=u}l=l.next}while(l!==null&&l!==i);a===null?s=r:a.next=o,Zr(r,e.memoizedState)||(pi=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function vf(n){var e=Ma(),t=e.queue;if(t===null)throw Error(Ne(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Zr(s,e.memoizedState)||(pi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function eM(n,e,t){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?n=i===r:(n=n.mutableReadLanes,(n=(pf&n)===n)&&(e._workInProgressVersionPrimary=r,Hl.push(e))),n)return t(e._source);throw Hl.push(e),Error(Ne(350))}function tM(n,e,t,r){var i=vr;if(i===null)throw Error(Ne(349));var s=e._getVersion,o=s(e._source),a=hf.current,l=a.useState(function(){return eM(i,e,t)}),u=l[1],h=l[0];l=qn;var m=n.memoizedState,d=m.refs,p=d.getSnapshot,y=m.source;m=m.subscribe;var _=vn;return n.memoizedState={refs:d,source:e,subscribe:r},a.useEffect(function(){d.getSnapshot=t,d.setSnapshot=u;var w=s(e._source);if(!Zr(o,w)){w=t(e._source),Zr(h,w)||(u(w),w=yo(_),i.mutableReadLanes|=w&i.pendingLanes),w=i.mutableReadLanes,i.entangledLanes|=w;for(var v=i.entanglements,g=w;0<g;){var M=31-ao(g),S=1<<M;v[M]|=w,g&=~S}}},[t,e,r]),a.useEffect(function(){return r(e._source,function(){var w=d.getSnapshot,v=d.setSnapshot;try{v(w(e._source));var g=yo(_);i.mutableReadLanes|=g&i.pendingLanes}catch(M){v(function(){throw M})}})},[e,r]),Zr(p,t)&&Zr(y,e)&&Zr(m,r)||(n={pending:null,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:h},n.dispatch=u=v0.bind(null,vn,n),l.queue=n,l.baseQueue=null,h=eM(i,e,t),l.memoizedState=l.baseState=h),h}function nM(n,e,t){var r=Ma();return tM(r,n,e,t)}function yf(n){var e=Sa();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n=e.queue={pending:null,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:n},n=n.dispatch=v0.bind(null,vn,n),[e.memoizedState,n]}function np(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null},vn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function rM(n){var e=Sa();return n={current:n},e.memoizedState=n}function rp(){return Ma().memoizedState}function p0(n,e,t,r){var i=Sa();vn.flags|=n,i.memoizedState=np(1|e,t,void 0,r===void 0?null:r)}function m0(n,e,t,r){var i=Ma();r=r===void 0?null:r;var s=void 0;if(ir!==null){var o=ir.memoizedState;if(s=o.destroy,r!==null&&d0(r,o.deps)){np(e,t,s,r);return}}vn.flags|=n,i.memoizedState=np(1|e,t,s,r)}function iM(n,e){return p0(516,4,n,e)}function ip(n,e){return m0(516,4,n,e)}function sM(n,e){return m0(4,2,n,e)}function oM(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function aM(n,e,t){return t=t!=null?t.concat([n]):null,m0(4,2,oM.bind(null,e,n),t)}function g0(){}function lM(n,e){var t=Ma();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&d0(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function uM(n,e){var t=Ma();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&d0(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function mR(n,e){var t=Ul();_a(98>t?98:t,function(){n(!0)}),_a(97<t?97:t,function(){var r=Kr.transition;Kr.transition=1;try{n(!1),e()}finally{Kr.transition=r}})}function v0(n,e,t){var r=kr(),i=yo(n),s={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=n.alternate,n===vn||o!==null&&o===vn)mf=tp=!0;else{if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,t);if(s.eagerReducer=o,s.eagerState=l,Zr(l,a))return}catch{}finally{}xo(n,i,r)}}var sp={readContext:Qr,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useOpaqueIdentifier:Cr,unstable_isNewReconciler:!1},gR={readContext:Qr,useCallback:function(n,e){return Sa().memoizedState=[n,e===void 0?null:e],n},useContext:Qr,useEffect:iM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,p0(4,2,oM.bind(null,e,n),t)},useLayoutEffect:function(n,e){return p0(4,2,n,e)},useMemo:function(n,e){var t=Sa();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Sa();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n=r.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},n=n.dispatch=v0.bind(null,vn,n),[r.memoizedState,n]},useRef:rM,useState:yf,useDebugValue:g0,useDeferredValue:function(n){var e=yf(n),t=e[0],r=e[1];return iM(function(){var i=Kr.transition;Kr.transition=1;try{r(n)}finally{Kr.transition=i}},[n]),t},useTransition:function(){var n=yf(!1),e=n[0];return n=mR.bind(null,n[1]),rM(n),[n,e]},useMutableSource:function(n,e,t){var r=Sa();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:n,subscribe:t},tM(r,n,e,t)},useOpaqueIdentifier:function(){if(Ui){var n=!1,e=uR(function(){throw n||(n=!0,t("r:"+(Jv++).toString(36))),Error(Ne(355))}),t=yf(e)[1];return(vn.mode&2)==0&&(vn.flags|=516,np(5,function(){t("r:"+(Jv++).toString(36))},void 0,null)),e}return e="r:"+(Jv++).toString(36),yf(e),e},unstable_isNewReconciler:!1},vR={readContext:Qr,useCallback:lM,useContext:Qr,useEffect:ip,useImperativeHandle:aM,useLayoutEffect:sM,useMemo:uM,useReducer:gf,useRef:rp,useState:function(){return gf(Bi)},useDebugValue:g0,useDeferredValue:function(n){var e=gf(Bi),t=e[0],r=e[1];return ip(function(){var i=Kr.transition;Kr.transition=1;try{r(n)}finally{Kr.transition=i}},[n]),t},useTransition:function(){var n=gf(Bi)[0];return[rp().current,n]},useMutableSource:nM,useOpaqueIdentifier:function(){return gf(Bi)[0]},unstable_isNewReconciler:!1},yR={readContext:Qr,useCallback:lM,useContext:Qr,useEffect:ip,useImperativeHandle:aM,useLayoutEffect:sM,useMemo:uM,useReducer:vf,useRef:rp,useState:function(){return vf(Bi)},useDebugValue:g0,useDeferredValue:function(n){var e=vf(Bi),t=e[0],r=e[1];return ip(function(){var i=Kr.transition;Kr.transition=1;try{r(n)}finally{Kr.transition=i}},[n]),t},useTransition:function(){var n=vf(Bi)[0];return[rp().current,n]},useMutableSource:nM,useOpaqueIdentifier:function(){return vf(Bi)[0]},unstable_isNewReconciler:!1},xR=ha.ReactCurrentOwner,pi=!1;function Lr(n,e,t,r){e.child=n===null?JS(e,null,t,r):Kh(e,n.child,t,r)}function cM(n,e,t,r,i){t=t.render;var s=e.ref;return zl(e,i),r=h0(n,e,t,r,s,i),n!==null&&!pi?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,gs(n,e,i)):(e.flags|=1,Lr(n,e,r,i),e.child)}function fM(n,e,t,r,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!z0(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,dM(n,e,o,r,i,s)):(n=mp(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}return o=n.child,(i&s)==0&&(i=o.memoizedProps,t=t.compare,t=t!==null?t:tf,t(i,r)&&n.ref===e.ref)?gs(n,e,s):(e.flags|=1,n=So(o,r),n.ref=e.ref,n.return=e,e.child=n)}function dM(n,e,t,r,i,s){if(n!==null&&tf(n.memoizedProps,r)&&n.ref===e.ref)if(pi=!1,(s&i)!=0)(n.flags&16384)!=0&&(pi=!0);else return e.lanes=n.lanes,gs(n,e,s);return x0(n,e,t,r,s)}function y0(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},pp(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},pp(e,s!==null?s.baseLanes:t);else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n},pp(e,n),null;else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,pp(e,r);return Lr(n,e,i,t),e.child}function hM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=128)}function x0(n,e,t,r,i){var s=Ar(t)?ya:nr.current;return s=Ol(e,s),zl(e,i),t=h0(n,e,t,r,s,i),n!==null&&!pi?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,gs(n,e,i)):(e.flags|=1,Lr(n,e,t,i),e.child)}function pM(n,e,t,r,i){if(Ar(t)){var s=!0;Hh(e)}else s=!1;if(zl(e,i),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),XS(e,t,r),o0(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Qr(u):(u=Ar(t)?ya:nr.current,u=Ol(e,u));var h=t.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&qS(e,o,r,u),ho=!1;var d=e.memoizedState;o.state=d,lf(e,r,o,i),l=e.memoizedState,a!==r||d!==l||br.current||ho?(typeof h=="function"&&(Yh(e,t,h,r),l=e.memoizedState),(a=ho||jS(e,t,a,r,d,l,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,GS(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:hi(e.type,a),o.props=u,m=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Qr(l):(l=Ar(t)?ya:nr.current,l=Ol(e,l));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||d!==l)&&qS(e,o,r,l),ho=!1,d=e.memoizedState,o.state=d,lf(e,r,o,i);var y=e.memoizedState;a!==m||d!==y||br.current||ho?(typeof p=="function"&&(Yh(e,t,p,r),y=e.memoizedState),(u=ho||jS(e,t,u,r,d,y,l))?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=256),r=!1)}return _0(n,e,t,r,s,i)}function _0(n,e,t,r,i,s){hM(n,e);var o=(e.flags&64)!=0;if(!r&&!o)return i&&PS(e,t,!1),gs(n,e,s);r=e.stateNode,xR.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Kh(e,n.child,null,s),e.child=Kh(e,null,a,s)):Lr(n,e,a,s),e.memoizedState=r.state,i&&PS(e,t,!0),e.child}function mM(n){var e=n.stateNode;e.pendingContext?LS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&LS(n,e.context,!1),a0(n,e.containerInfo)}var op={dehydrated:null,retryLane:0};function gM(n,e,t){var r=e.pendingProps,i=on.current,s=!1,o;return(o=(e.flags&64)!=0)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!=0),o?(s=!0,e.flags&=-65):n!==null&&n.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),sn(on,i&1),n===null?(r.fallback!==void 0&&u0(e),n=r.children,i=r.fallback,s?(n=vM(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=op,n):typeof r.unstable_expectedLoadTime=="number"?(n=vM(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=op,e.lanes=33554432,n):(t=G0({mode:"visible",children:n},e.mode,t,null),t.return=e,e.child=t)):n.memoizedState!==null?s?(r=xM(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=op,r):(t=yM(n,e,r.children,t),e.memoizedState=null,t):s?(r=xM(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=op,r):(t=yM(n,e,r.children,t),e.memoizedState=null,t)}function vM(n,e,t,r){var i=n.mode,s=n.child;return e={mode:"hidden",children:e},(i&2)==0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=G0(e,i,0,null),t=Yl(t,i,r,null),s.return=n,t.return=n,s.sibling=t,n.child=s,t}function yM(n,e,t,r){var i=n.child;return n=i.sibling,t=So(i,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=r),t.return=e,t.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,e.firstEffect=e.lastEffect=n),e.child=t}function xM(n,e,t,r,i){var s=e.mode,o=n.child;n=o.sibling;var a={mode:"hidden",children:t};return(s&2)==0&&e.child!==o?(t=e.child,t.childLanes=0,t.pendingProps=a,o=t.lastEffect,o!==null?(e.firstEffect=t.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):t=So(o,a),n!==null?r=So(n,r):(r=Yl(r,s,i,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function _M(n,e){n.lanes|=e;var t=n.alternate;t!==null&&(t.lanes|=e),zS(n.return,e)}function w0(n,e,t,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i,o.lastEffect=s)}function wM(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lr(n,e,r.children,t),r=on.current,(r&2)!=0)r=r&1|2,e.flags|=64;else{if(n!==null&&(n.flags&64)!=0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_M(n,t);else if(n.tag===19)_M(n,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(sn(on,r),(e.mode&2)==0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&$h(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),w0(e,!1,i,t,s,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&$h(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}w0(e,!0,t,null,s,e.lastEffect);break;case"together":w0(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function gs(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),_f|=e.lanes,(t&e.childLanes)!=0){if(n!==null&&e.child!==n.child)throw Error(Ne(153));if(e.child!==null){for(n=e.child,t=So(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=So(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var SM,S0,MM,EM;SM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};S0=function(){};MM=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,wa(Oi.current);var s=null;switch(t){case"input":i=ov(n,i),r=ov(n,r),s=[];break;case"option":i=uv(n,i),r=uv(n,r),s=[];break;case"select":i=Yt({},i,{value:void 0}),r=Yt({},r,{value:void 0}),s=[];break;case"textarea":i=cv(n,i),r=cv(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Oh)}hv(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Wt("scroll",n),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===tv?l.toString():(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};EM=function(n,e,t,r){t!==r&&(e.flags|=4)};function xf(n,e){if(!Ui)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function _R(n,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ar(e.type)&&Gh(),null;case 3:return Gl(),jt(br),jt(nr),f0(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ep(e)?e.flags|=4:r.hydrate||(e.flags|=256)),S0(e),null;case 5:l0(e);var i=wa(df.current);if(t=e.type,n!==null&&e.stateNode!=null)MM(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(Ne(166));return null}if(n=wa(Oi.current),ep(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[uo]=e,r[Bh]=s,t){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(n=0;n<rf.length;n++)Wt(rf[n],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":pw(r,s),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wt("invalid",r);break;case"textarea":vw(r,s),Wt("invalid",r)}hv(t,s),n=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(n=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(n=["children",""+i]):Dc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Wt("scroll",r));switch(t){case"input":_h(r),gw(r,s,!0);break;case"textarea":_h(r),xw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Oh)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,n===fv.html&&(n=_w(t)),n===fv.html?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[uo]=e,n[Bh]=r,SM(n,e,!1,!1),e.stateNode=n,o=pv(t,r),t){case"dialog":Wt("cancel",n),Wt("close",n),i=r;break;case"iframe":case"object":case"embed":Wt("load",n),i=r;break;case"video":case"audio":for(i=0;i<rf.length;i++)Wt(rf[i],n);i=r;break;case"source":Wt("error",n),i=r;break;case"img":case"image":case"link":Wt("error",n),Wt("load",n),i=r;break;case"details":Wt("toggle",n),i=r;break;case"input":pw(n,r),i=ov(n,r),Wt("invalid",n);break;case"option":i=uv(n,r);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Yt({},r,{value:void 0}),Wt("invalid",n);break;case"textarea":vw(n,r),i=cv(n,r),Wt("invalid",n);break;default:i=r}hv(t,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Mw(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ww(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Bc(n,l):typeof l=="number"&&Bc(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Wt("scroll",n):l!=null&&Jg(n,s,l,o))}switch(t){case"input":_h(n),gw(n,r,!1);break;case"textarea":_h(n),xw(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ro(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ml(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ml(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Oh)}ES(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(n&&e.stateNode!=null)EM(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ne(166));t=wa(df.current),wa(Oi.current),ep(e)?(r=e.stateNode,t=e.memoizedProps,r[uo]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[uo]=e,e.stateNode=r)}return null;case 13:return jt(on),r=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(r=r!==null,t=!1,n===null?e.memoizedProps.fallback!==void 0&&ep(e):t=n.memoizedState!==null,r&&!t&&(e.mode&2)!=0&&(n===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(on.current&1)!=0?Yn===0&&(Yn=3):((Yn===0||Yn===3)&&(Yn=4),vr===null||(_f&134217727)==0&&(Wl&134217727)==0||Xl(vr,sr))),(r||t)&&(e.flags|=4),null);case 4:return Gl(),S0(e),n===null&&xS(e.stateNode.containerInfo),null;case 10:return i0(e),null;case 17:return Ar(e.type)&&Gh(),null;case 19:if(jt(on),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!=0,o=r.rendering,o===null)if(s)xf(r,!1);else{if(Yn!==0||n!==null&&(n.flags&64)!=0)for(n=e.child;n!==null;){if(o=$h(n),o!==null){for(e.flags|=64,xf(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return sn(on,on.current&1|2),e.child}n=n.sibling}r.tail!==null&&rr()>D0&&(e.flags|=64,s=!0,xf(r,!1),e.lanes=33554432)}else{if(!s)if(n=$h(o),n!==null){if(e.flags|=64,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xf(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ui)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*rr()-r.renderingStartTime>D0&&t!==1073741824&&(e.flags|=64,s=!0,xf(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=rr(),t.sibling=null,e=on.current,sn(on,s?e&1|2:e&1),t):null;case 23:case 24:return B0(),n!==null&&n.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Ne(156,e.tag))}function wR(n){switch(n.tag){case 1:Ar(n.type)&&Gh();var e=n.flags;return e&4096?(n.flags=e&-4097|64,n):null;case 3:if(Gl(),jt(br),jt(nr),f0(),e=n.flags,(e&64)!=0)throw Error(Ne(285));return n.flags=e&-4097|64,n;case 5:return l0(n),null;case 13:return jt(on),e=n.flags,e&4096?(n.flags=e&-4097|64,n):null;case 19:return jt(on),null;case 4:return Gl(),null;case 10:return i0(n),null;case 23:case 24:return B0(),null;default:return null}}function M0(n,e){try{var t="",r=e;do t+=tL(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i}}function E0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var SR=typeof WeakMap=="function"?WeakMap:Map;function TM(n,e,t){t=po(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){up||(up=!0,F0=r),E0(n,e)},t}function bM(n,e,t){t=po(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return E0(n,e),r(i)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(zi===null?zi=new Set([this]):zi.add(this),E0(n,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}var MR=typeof WeakSet=="function"?WeakSet:Set;function AM(n){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){wo(n,t)}else e.current=null}function ER(n,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&n!==null){var t=n.memoizedProps,r=n.memoizedState;n=e.stateNode,e=n.getSnapshotBeforeUpdate(e.elementType===e.type?t:hi(e.type,t),r),n.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Yv(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Ne(163))}function TR(n,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{if((n.tag&3)==3){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{var i=n;r=i.next,i=i.tag,(i&4)!=0&&(i&1)!=0&&(HM(t,n),DR(t,n)),n=r}while(n!==e)}return;case 1:n=t.stateNode,t.flags&4&&(e===null?n.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:hi(t.type,e.memoizedProps),n.componentDidUpdate(r,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&VS(t,e,n);return;case 3:if(e=t.updateQueue,e!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}VS(t,e,n)}return;case 5:n=t.stateNode,e===null&&t.flags&4&&ES(t.type,t.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&Bw(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ne(163))}function CM(n,e){for(var t=n;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=Sw("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function LM(n,e){if(xa&&typeof xa.onCommitFiberUnmount=="function")try{xa.onCommitFiberUnmount(Qv,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var t=n=n.next;do{var r=t,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!=0)HM(e,t);else{r=e;try{i()}catch(s){wo(r,s)}}t=t.next}while(t!==n)}break;case 1:if(AM(e),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){wo(e,s)}break;case 5:AM(e);break;case 4:DM(n,e)}}function RM(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function PM(n){return n.tag===5||n.tag===3||n.tag===4}function IM(n){e:{for(var e=n.return;e!==null;){if(PM(e))break e;e=e.return}throw Error(Ne(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(Ne(161))}t.flags&16&&(Bc(e,""),t.flags&=-17);e:t:for(t=n;;){for(;t.sibling===null;){if(t.return===null||PM(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?T0(n,t,e):b0(n,t,e)}function T0(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Oh));else if(r!==4&&(n=n.child,n!==null))for(T0(n,e,t),n=n.sibling;n!==null;)T0(n,e,t),n=n.sibling}function b0(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(b0(n,e,t),n=n.sibling;n!==null;)b0(n,e,t),n=n.sibling}function DM(n,e){for(var t=e,r=!1,i,s;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(Ne(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var o=n,a=t,l=a;;)if(LM(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=i,a=t.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,s=!0,t.child.return=t,t=t.child;continue}}else if(LM(n,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function A0(n,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)==3&&(n=r.destroy,r.destroy=void 0,n!==void 0&&n()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var i=n!==null?n.memoizedProps:r;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(t[Bh]=r,n==="input"&&r.type==="radio"&&r.name!=null&&mw(t,r),pv(n,i),e=pv(n,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?Mw(t,a):o==="dangerouslySetInnerHTML"?ww(t,a):o==="children"?Bc(t,a):Jg(t,o,a,e)}switch(n){case"input":av(t,r);break;case"textarea":yw(t,r);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?Ml(t,!!r.multiple,s,!1):n!==!!r.multiple&&(r.defaultValue!=null?Ml(t,!!r.multiple,r.defaultValue,!0):Ml(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Ne(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,Bw(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(I0=rr(),CM(e.child,!0)),FM(e);return;case 19:FM(e);return;case 17:return;case 23:case 24:CM(e,e.memoizedState!==null);return}throw Error(Ne(163))}function FM(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new MR),e.forEach(function(r){var i=NR.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function bR(n,e){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var AR=Math.ceil,ap=ha.ReactCurrentDispatcher,C0=ha.ReactCurrentOwner,it=0,vr=null,Fn=null,sr=0,Ea=0,L0=co(0),Yn=0,lp=null,Vl=0,_f=0,Wl=0,R0=0,P0=null,I0=0,D0=1/0;function jl(){D0=rr()+500}var Ve=null,up=!1,F0=null,zi=null,vo=!1,wf=null,Sf=90,k0=[],N0=[],vs=null,Mf=0,O0=null,cp=-1,ys=0,fp=0,Ef=null,dp=!1;function kr(){return(it&48)!=0?rr():cp!==-1?cp:cp=rr()}function yo(n){if(n=n.mode,(n&2)==0)return 1;if((n&4)==0)return Ul()===99?1:2;if(ys===0&&(ys=Vl),pR.transition!==0){fp!==0&&(fp=P0!==null?P0.pendingLanes:0),n=ys;var e=4186112&~fp;return e&=-e,e===0&&(n=4186112&~n,e=n&-n,e===0&&(e=8192)),e}return n=Ul(),(it&4)!=0&&n===98?n=Ch(12,ys):(n=vL(n),n=Ch(n,ys)),n}function xo(n,e,t){if(50<Mf)throw Mf=0,O0=null,Error(Ne(185));if(n=hp(n,e),n===null)return null;Lh(n,e,t),n===vr&&(Wl|=e,Yn===4&&Xl(n,sr));var r=Ul();e===1?(it&8)!=0&&(it&48)==0?U0(n):($r(n,t),it===0&&(jl(),Ni())):((it&4)==0||r!==98&&r!==99||(vs===null?vs=new Set([n]):vs.add(n)),$r(n,t)),P0=n}function hp(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function $r(n,e){for(var t=n.callbackNode,r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var a=31-ao(o),l=1<<a,u=s[a];if(u===-1){if((l&r)==0||(l&i)!=0){u=e,Al(l);var h=Bt;s[a]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=e&&(n.expiredLanes|=l);o&=~l}if(r=Jc(n,n===vr?sr:0),e=Bt,r===0)t!==null&&(t!==t0&&$v(t),n.callbackNode=null,n.callbackPriority=0);else{if(t!==null){if(n.callbackPriority===e)return;t!==t0&&$v(t)}e===15?(t=U0.bind(null,n),ps===null?(ps=[t],Wh=Kv(Vh,BS)):ps.push(t),t=t0):e===14?t=af(99,U0.bind(null,n)):(t=yL(e),t=af(t,kM.bind(null,n))),n.callbackPriority=e,n.callbackNode=t}}function kM(n){if(cp=-1,fp=ys=0,(it&48)!=0)throw Error(Ne(327));var e=n.callbackNode;if(_o()&&n.callbackNode!==e)return null;var t=Jc(n,n===vr?sr:0);if(t===0)return null;var r=t,i=it;it|=16;var s=BM();(vr!==n||sr!==r)&&(jl(),ql(n,r));do try{RR();break}catch(a){UM(n,a)}while(1);if(r0(),ap.current=s,it=i,Fn!==null?r=0:(vr=null,sr=0,r=Yn),(Vl&Wl)!=0)ql(n,0);else if(r!==0){if(r===2&&(it|=64,n.hydrate&&(n.hydrate=!1,Yv(n.containerInfo)),t=Xw(n),t!==0&&(r=Tf(n,t))),r===1)throw e=lp,ql(n,0),Xl(n,t),$r(n,rr()),e;switch(n.finishedWork=n.current.alternate,n.finishedLanes=t,r){case 0:case 1:throw Error(Ne(345));case 2:Ta(n);break;case 3:if(Xl(n,t),(t&62914560)===t&&(r=I0+500-rr(),10<r)){if(Jc(n,0)!==0)break;if(i=n.suspendedLanes,(i&t)!==t){kr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=TS(Ta.bind(null,n),r);break}Ta(n);break;case 4:if(Xl(n,t),(t&4186112)===t)break;for(r=n.eventTimes,i=-1;0<t;){var o=31-ao(t);s=1<<o,o=r[o],o>i&&(i=o),t&=~s}if(t=i,t=rr()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*AR(t/1960))-t,10<t){n.timeoutHandle=TS(Ta.bind(null,n),t);break}Ta(n);break;case 5:Ta(n);break;default:throw Error(Ne(329))}}return $r(n,rr()),n.callbackNode===e?kM.bind(null,n):null}function Xl(n,e){for(e&=~R0,e&=~Wl,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ao(e),r=1<<t;n[t]=-1,e&=~r}}function U0(n){if((it&48)!=0)throw Error(Ne(327));if(_o(),n===vr&&(n.expiredLanes&sr)!=0){var e=sr,t=Tf(n,e);(Vl&Wl)!=0&&(e=Jc(n,e),t=Tf(n,e))}else e=Jc(n,0),t=Tf(n,e);if(n.tag!==0&&t===2&&(it|=64,n.hydrate&&(n.hydrate=!1,Yv(n.containerInfo)),e=Xw(n),e!==0&&(t=Tf(n,e))),t===1)throw t=lp,ql(n,0),Xl(n,e),$r(n,rr()),t;return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ta(n),$r(n,rr()),null}function CR(){if(vs!==null){var n=vs;vs=null,n.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,$r(e,rr())})}Ni()}function NM(n,e){var t=it;it|=1;try{return n(e)}finally{it=t,it===0&&(jl(),Ni())}}function OM(n,e){var t=it;it&=-2,it|=8;try{return n(e)}finally{it=t,it===0&&(jl(),Ni())}}function pp(n,e){sn(L0,Ea),Ea|=e,Vl|=e}function B0(){Ea=L0.current,jt(L0)}function ql(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,lR(t)),Fn!==null)for(t=Fn.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gh();break;case 3:Gl(),jt(br),jt(nr),f0();break;case 5:l0(r);break;case 4:Gl();break;case 13:jt(on);break;case 19:jt(on);break;case 10:i0(r);break;case 23:case 24:B0()}t=t.return}vr=n,Fn=So(n.current,null),sr=Ea=Vl=e,Yn=0,lp=null,R0=Wl=_f=0}function UM(n,e){do{var t=Fn;try{if(r0(),hf.current=sp,tp){for(var r=vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tp=!1}if(pf=0,qn=ir=vn=null,mf=!1,C0.current=null,t===null||t.return===null){Yn=1,lp=e,Fn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=sr,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((a.mode&2)==0){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var m=(on.current&1)!=0,d=o;do{var p;if(p=d.tag===13){var y=d.memoizedState;if(y!==null)p=y.dehydrated!==null;else{var _=d.memoizedProps;p=_.fallback===void 0?!1:_.unstable_avoidThisFallback!==!0?!0:!m}}if(p){var w=d.updateQueue;if(w===null){var v=new Set;v.add(u),d.updateQueue=v}else w.add(u);if((d.mode&2)==0){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var g=po(-1,1);g.tag=2,mo(a,g)}a.lanes|=1;break e}l=void 0,a=e;var M=s.pingCache;if(M===null?(M=s.pingCache=new SR,l=new Set,M.set(u,l)):(l=M.get(u),l===void 0&&(l=new Set,M.set(u,l))),!l.has(a)){l.add(a);var S=kR.bind(null,s,u,a);u.then(S,S)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);l=Error((Sl(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Yn!==5&&(Yn=2),l=M0(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,e&=-e,d.lanes|=e;var b=TM(d,s,e);HS(d,b);break e;case 1:s=l;var C=d.type,T=d.stateNode;if((d.flags&64)==0&&(typeof C.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(zi===null||!zi.has(T)))){d.flags|=4096,e&=-e,d.lanes|=e;var L=bM(d,s,e);HS(d,L);break e}}d=d.return}while(d!==null)}GM(t)}catch(P){e=P,Fn===t&&t!==null&&(Fn=t=t.return);continue}break}while(1)}function BM(){var n=ap.current;return ap.current=sp,n===null?sp:n}function Tf(n,e){var t=it;it|=16;var r=BM();vr===n&&sr===e||ql(n,e);do try{LR();break}catch(i){UM(n,i)}while(1);if(r0(),it=t,ap.current=r,Fn!==null)throw Error(Ne(261));return vr=null,sr=0,Yn}function LR(){for(;Fn!==null;)zM(Fn)}function RR(){for(;Fn!==null&&!fR();)zM(Fn)}function zM(n){var e=WM(n.alternate,n,Ea);n.memoizedProps=n.pendingProps,e===null?GM(n):Fn=e,C0.current=null}function GM(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&2048)==0){if(t=_R(t,e,Ea),t!==null){Fn=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(Ea&1073741824)!=0||(t.mode&4)==0){for(var r=0,i=t.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=r}n!==null&&(n.flags&2048)==0&&(n.firstEffect===null&&(n.firstEffect=e.firstEffect),e.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(t=wR(e),t!==null){t.flags&=2047,Fn=t;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}if(e=e.sibling,e!==null){Fn=e;return}Fn=e=n}while(e!==null);Yn===0&&(Yn=5)}function Ta(n){var e=Ul();return _a(99,PR.bind(null,n,e)),null}function PR(n,e){do _o();while(wf!==null);if((it&48)!=0)throw Error(Ne(327));var t=n.finishedWork;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ne(177));n.callbackNode=null;var r=t.lanes|t.childLanes,i=r,s=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;for(var o=n.eventTimes,a=n.expirationTimes;0<s;){var l=31-ao(s),u=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~u}if(vs!==null&&(r&24)==0&&vs.has(n)&&vs.delete(n),n===vr&&(Fn=vr=null,sr=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(i=it,it|=32,C0.current=null,jv=Rh,o=dS(),Gv(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&u.rangeCount!==0){a=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var h=0,m=-1,d=-1,p=0,y=0,_=o,w=null;t:for(;;){for(var v;_!==a||s!==0&&_.nodeType!==3||(m=h+s),_!==l||u!==0&&_.nodeType!==3||(d=h+u),_.nodeType===3&&(h+=_.nodeValue.length),(v=_.firstChild)!==null;)w=_,_=v;for(;;){if(_===o)break t;if(w===a&&++p===s&&(m=h),w===l&&++y===u&&(d=h),(v=_.nextSibling)!==null)break;_=w,w=_.parentNode}_=v}a=m===-1||d===-1?null:{start:m,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;Xv={focusedElem:o,selectionRange:a},Rh=!1,Ef=null,dp=!1,Ve=r;do try{IR()}catch(P){if(Ve===null)throw Error(Ne(330));wo(Ve,P),Ve=Ve.nextEffect}while(Ve!==null);Ef=null,Ve=r;do try{for(o=n;Ve!==null;){var g=Ve.flags;if(g&16&&Bc(Ve.stateNode,""),g&128){var M=Ve.alternate;if(M!==null){var S=M.ref;S!==null&&(typeof S=="function"?S(null):S.current=null)}}switch(g&1038){case 2:IM(Ve),Ve.flags&=-3;break;case 6:IM(Ve),Ve.flags&=-3,A0(Ve.alternate,Ve);break;case 1024:Ve.flags&=-1025;break;case 1028:Ve.flags&=-1025,A0(Ve.alternate,Ve);break;case 4:A0(Ve.alternate,Ve);break;case 8:a=Ve,DM(o,a);var b=a.alternate;RM(a),b!==null&&RM(b)}Ve=Ve.nextEffect}}catch(P){if(Ve===null)throw Error(Ne(330));wo(Ve,P),Ve=Ve.nextEffect}while(Ve!==null);if(S=Xv,M=dS(),g=S.focusedElem,o=S.selectionRange,M!==g&&g&&g.ownerDocument&&fS(g.ownerDocument.documentElement,g)){for(o!==null&&Gv(g)&&(M=o.start,S=o.end,S===void 0&&(S=M),"selectionStart"in g?(g.selectionStart=M,g.selectionEnd=Math.min(S,g.value.length)):(S=(M=g.ownerDocument||document)&&M.defaultView||window,S.getSelection&&(S=S.getSelection(),a=g.textContent.length,b=Math.min(o.start,a),o=o.end===void 0?b:Math.min(o.end,a),!S.extend&&b>o&&(a=o,o=b,b=a),a=cS(g,b),s=cS(g,o),a&&s&&(S.rangeCount!==1||S.anchorNode!==a.node||S.anchorOffset!==a.offset||S.focusNode!==s.node||S.focusOffset!==s.offset)&&(M=M.createRange(),M.setStart(a.node,a.offset),S.removeAllRanges(),b>o?(S.addRange(M),S.extend(s.node,s.offset)):(M.setEnd(s.node,s.offset),S.addRange(M)))))),M=[],S=g;S=S.parentNode;)S.nodeType===1&&M.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<M.length;g++)S=M[g],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}Rh=!!jv,Xv=jv=null,n.current=t,Ve=r;do try{for(g=n;Ve!==null;){var C=Ve.flags;if(C&36&&TR(g,Ve.alternate,Ve),C&128){M=void 0;var T=Ve.ref;if(T!==null){var L=Ve.stateNode;switch(Ve.tag){case 5:M=L;break;default:M=L}typeof T=="function"?T(M):T.current=M}}Ve=Ve.nextEffect}}catch(P){if(Ve===null)throw Error(Ne(330));wo(Ve,P),Ve=Ve.nextEffect}while(Ve!==null);Ve=null,hR(),it=i}else n.current=t;if(vo)vo=!1,wf=n,Sf=e;else for(Ve=r;Ve!==null;)e=Ve.nextEffect,Ve.nextEffect=null,Ve.flags&8&&(C=Ve,C.sibling=null,C.stateNode=null),Ve=e;if(r=n.pendingLanes,r===0&&(zi=null),r===1?n===O0?Mf++:(Mf=0,O0=n):Mf=0,t=t.stateNode,xa&&typeof xa.onCommitFiberRoot=="function")try{xa.onCommitFiberRoot(Qv,t,void 0,(t.current.flags&64)==64)}catch{}if($r(n,rr()),up)throw up=!1,n=F0,F0=null,n;return(it&8)!=0||Ni(),null}function IR(){for(;Ve!==null;){var n=Ve.alternate;dp||Ef===null||((Ve.flags&8)!=0?Iw(Ve,Ef)&&(dp=!0):Ve.tag===13&&bR(n,Ve)&&Iw(Ve,Ef)&&(dp=!0));var e=Ve.flags;(e&256)!=0&&ER(n,Ve),(e&512)==0||vo||(vo=!0,af(97,function(){return _o(),null})),Ve=Ve.nextEffect}}function _o(){if(Sf!==90){var n=97<Sf?97:Sf;return Sf=90,_a(n,FR)}return!1}function DR(n,e){k0.push(e,n),vo||(vo=!0,af(97,function(){return _o(),null}))}function HM(n,e){N0.push(e,n),vo||(vo=!0,af(97,function(){return _o(),null}))}function FR(){if(wf===null)return!1;var n=wf;if(wf=null,(it&48)!=0)throw Error(Ne(331));var e=it;it|=32;var t=N0;N0=[];for(var r=0;r<t.length;r+=2){var i=t[r],s=t[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(Ne(330));wo(s,l)}}for(t=k0,k0=[],r=0;r<t.length;r+=2){i=t[r],s=t[r+1];try{var a=i.create;i.destroy=a()}catch(l){if(s===null)throw Error(Ne(330));wo(s,l)}}for(a=n.current.firstEffect;a!==null;)n=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=n;return it=e,Ni(),!0}function VM(n,e,t){e=M0(t,e),e=TM(n,e,1),mo(n,e),e=kr(),n=hp(n,1),n!==null&&(Lh(n,1,e),$r(n,e))}function wo(n,e){if(n.tag===3)VM(n,n,e);else for(var t=n.return;t!==null;){if(t.tag===3){VM(t,n,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r))){n=M0(e,n);var i=bM(t,n,1);if(mo(t,i),i=kr(),t=hp(t,1),t!==null)Lh(t,1,i),$r(t,i);else if(typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r)))try{r.componentDidCatch(e,n)}catch{}break}}t=t.return}}function kR(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=kr(),n.pingedLanes|=n.suspendedLanes&t,vr===n&&(sr&t)===t&&(Yn===4||Yn===3&&(sr&62914560)===sr&&500>rr()-I0?ql(n,0):R0|=t),$r(n,e)}function NR(n,e){var t=n.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=n.mode,(e&2)==0?e=1:(e&4)==0?e=Ul()===99?1:2:(ys===0&&(ys=Vl),e=Cl(62914560&~ys),e===0&&(e=4194304))),t=kr(),n=hp(n,e),n!==null&&(Lh(n,e,t),$r(n,t))}var WM;WM=function(n,e,t){var r=e.lanes;if(n!==null)if(n.memoizedProps!==e.pendingProps||br.current)pi=!0;else if((t&r)!=0)pi=(n.flags&16384)!=0;else{switch(pi=!1,e.tag){case 3:mM(e),c0();break;case 5:ZS(e);break;case 1:Ar(e.type)&&Hh(e);break;case 4:a0(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;sn(jh,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?gM(n,e,t):(sn(on,on.current&1),e=gs(n,e,t),e!==null?e.sibling:null);sn(on,on.current&1);break;case 19:if(r=(t&e.childLanes)!=0,(n.flags&64)!=0){if(r)return wM(n,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),sn(on,on.current),r)break;return null;case 23:case 24:return e.lanes=0,y0(n,e,t)}return gs(n,e,t)}else pi=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,i=Ol(e,nr.current),zl(e,t),i=h0(null,e,r,n,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(r)){var s=!0;Hh(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,s0(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&Yh(e,r,o,n),i.updater=Jh,e.stateNode=i,i._reactInternals=e,o0(e,r,n,t),e=_0(null,e,r,!0,s,t)}else e.tag=0,Lr(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=UR(i),n=hi(i,n),s){case 0:e=x0(null,e,i,n,t);break e;case 1:e=pM(null,e,i,n,t);break e;case 11:e=cM(null,e,i,n,t);break e;case 14:e=fM(null,e,i,hi(i.type,n),r,t);break e}throw Error(Ne(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),x0(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),pM(n,e,r,i,t);case 3:if(mM(e),r=e.updateQueue,n===null||r===null)throw Error(Ne(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,GS(n,e),lf(e,r,null,t),r=e.memoizedState.element,r===i)c0(),e=gs(n,e,t);else{if(i=e.stateNode,(s=i.hydrate)&&(go=Dl(e.stateNode.containerInfo.firstChild),ms=e,s=Ui=!0),s){if(n=i.mutableSourceEagerHydrationData,n!=null)for(i=0;i<n.length;i+=2)s=n[i],s._workInProgressVersionPrimary=n[i+1],Hl.push(s);for(t=JS(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Lr(n,e,r,t),c0();e=e.child}return e;case 5:return ZS(e),n===null&&u0(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,qv(r,i)?o=null:s!==null&&qv(r,s)&&(e.flags|=16),hM(n,e),Lr(n,e,o,t),e.child;case 6:return n===null&&u0(e),null;case 13:return gM(n,e,t);case 4:return a0(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Kh(e,null,r,t):Lr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),cM(n,e,r,i,t);case 7:return Lr(n,e,e.pendingProps,t),e.child;case 8:return Lr(n,e,e.pendingProps.children,t),e.child;case 12:return Lr(n,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(sn(jh,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=Zr(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!br.current){e=gs(n,e,t);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r&&(u.observedBits&s)!=0){a.tag===1&&(u=po(-1,t&-t),u.tag=2,mo(a,u)),a.lanes|=t,u=a.alternate,u!==null&&(u.lanes|=t),zS(a.return,t),l.lanes|=t;break}u=u.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Lr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,zl(e,t),i=Qr(i,s.unstable_observedBits),r=r(i),e.flags|=1,Lr(n,e,r,t),e.child;case 14:return i=e.type,s=hi(i,e.pendingProps),s=hi(i.type,s),fM(n,e,i,s,r,t);case 15:return dM(n,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ar(r)?(n=!0,Hh(e)):n=!1,zl(e,t),XS(e,r,i),o0(e,r,i,t),_0(null,e,r,!0,n,t);case 19:return wM(n,e,t);case 23:return y0(n,e,t);case 24:return y0(n,e,t)}throw Error(Ne(156,e.tag))};function OR(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(n,e,t,r){return new OR(n,e,t,r)}function z0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function UR(n){if(typeof n=="function")return z0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===gh)return 11;if(n===yh)return 14}return 2}function So(n,e){var t=n.alternate;return t===null?(t=ei(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function mp(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")z0(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case no:return Yl(t.children,i,s,e);case cw:o=8,i|=16;break;case Zg:o=8,i|=1;break;case kc:return n=ei(12,t,e,i|8),n.elementType=kc,n.type=kc,n.lanes=s,n;case Nc:return n=ei(13,t,e,i),n.type=Nc,n.elementType=Nc,n.lanes=s,n;case vh:return n=ei(19,t,e,i),n.elementType=vh,n.lanes=s,n;case nv:return G0(t,i,s,e);case rv:return n=ei(24,t,e,i),n.elementType=rv,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Qg:o=10;break e;case Kg:o=9;break e;case gh:o=11;break e;case yh:o=14;break e;case $g:o=16,r=null;break e;case ev:o=22;break e}throw Error(Ne(130,n==null?n:typeof n,""))}return e=ei(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Yl(n,e,t,r){return n=ei(7,n,r,e),n.lanes=t,n}function G0(n,e,t,r){return n=ei(23,n,r,e),n.elementType=nv,n.lanes=t,n}function H0(n,e,t){return n=ei(6,n,null,e),n.lanes=t,n}function V0(n,e,t){return e=ei(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function BR(n,e,t){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Lv(0),this.expirationTimes=Lv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lv(0),this.mutableSourceEagerHydrationData=null}function zR(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pa,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function gp(n,e,t,r){var i=e.current,s=kr(),o=yo(i);e:if(t){t=t._reactInternals;t:{if(ga(t)!==t||t.tag!==1)throw Error(Ne(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Ar(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(Ne(171))}if(t.tag===1){var l=t.type;if(Ar(l)){t=RS(t,l,a);break e}}t=a}else t=fo;return e.context===null?e.context=t:e.pendingContext=t,e=po(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),mo(i,e),xo(i,o,s),o}function W0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jM(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function j0(n,e){jM(n,e),(n=n.alternate)&&jM(n,e)}function GR(){return null}function X0(n,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new BR(n,e,t!=null&&t.hydrate===!0),e=ei(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,s0(e),n[Fl]=t.current,xS(n.nodeType===8?n.parentNode:n),r)for(n=0;n<r.length;n++){e=r[n];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}X0.prototype.render=function(n){gp(n,this._internalRoot,null,null)};X0.prototype.unmount=function(){var n=this._internalRoot,e=n.containerInfo;gp(null,n,null,function(){e[Fl]=null})};function bf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HR(n,e){if(e||(e=n?n.nodeType===9?n.documentElement:n.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=n.lastChild;)n.removeChild(t);return new X0(n,0,e?{hydrate:!0}:void 0)}function vp(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var u=W0(o);a.call(u)}}gp(e,o,n,i)}else{if(s=t._reactRootContainer=HR(t,r),o=s._internalRoot,typeof i=="function"){var l=i;i=function(){var u=W0(o);l.call(u)}}OM(function(){gp(e,o,n,i)})}return W0(o)}Dw=function(n){if(n.tag===13){var e=kr();xo(n,4,e),j0(n,4)}};Mv=function(n){if(n.tag===13){var e=kr();xo(n,67108864,e),j0(n,67108864)}};Fw=function(n){if(n.tag===13){var e=kr(),t=yo(n);xo(n,t,e),j0(n,t)}};kw=function(n,e){return e()};gv=function(n,e,t){switch(e){case"input":if(av(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=zh(r);if(!i)throw Error(Ne(90));hw(r),av(r,i)}}}break;case"textarea":yw(n,t);break;case"select":e=t.value,e!=null&&Ml(n,!!t.multiple,e,!1)}};vv=NM;Aw=function(n,e,t,r,i){var s=it;it|=4;try{return _a(98,n.bind(null,e,t,r,i))}finally{it=s,it===0&&(jl(),Ni())}};yv=function(){(it&49)==0&&(CR(),_o())};Cw=function(n,e){var t=it;it|=2;try{return n(e)}finally{it=t,it===0&&(jl(),Ni())}};function XM(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bf(e))throw Error(Ne(200));return zR(n,e,null,t)}var VR={Events:[of,kl,zh,Tw,bw,_o,{current:!1}]},Af={findFiberByHostInstance:va,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},WR={bundleType:Af.bundleType,version:Af.version,rendererPackageName:Af.rendererPackageName,rendererConfig:Af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Pw(n),n===null?null:n.stateNode},findFiberByHostInstance:Af.findFiberByHostInstance||GR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yp.isDisabled&&yp.supportsFiber)try{Qv=yp.inject(WR),xa=yp}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VR;Jr.createPortal=XM;Jr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ne(188)):Error(Ne(268,Object.keys(n)));return n=Pw(e),n=n===null?null:n.stateNode,n};Jr.flushSync=function(n,e){var t=it;if((t&48)!=0)return n(e);it|=1;try{if(n)return _a(99,n.bind(null,e))}finally{it=t,Ni()}};Jr.hydrate=function(n,e,t){if(!bf(e))throw Error(Ne(200));return vp(null,n,e,!0,t)};Jr.render=function(n,e,t){if(!bf(e))throw Error(Ne(200));return vp(null,n,e,!1,t)};Jr.unmountComponentAtNode=function(n){if(!bf(n))throw Error(Ne(40));return n._reactRootContainer?(OM(function(){vp(null,null,n,!1,function(){n._reactRootContainer=null,n[Fl]=null})}),!0):!1};Jr.unstable_batchedUpdates=NM;Jr.unstable_createPortal=function(n,e){return XM(n,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Jr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!bf(t))throw Error(Ne(200));if(n==null||n._reactInternals===void 0)throw Error(Ne(38));return vp(n,e,t,!1,r)};Jr.version="17.0.2";function qM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qM)}catch(n){console.error(n)}}qM(),Ic.exports=Jr;var B5=Ic.exports;function ba(){return ba=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ba.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const q0="134",jR={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},XR={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YM=0,Y0=1,JM=2,qR=3,YR=0,J0=1,Z0=2,Jl=3,Mo=0,yn=1,xs=2,Q0=1,JR=2,_s=0,Zl=1,K0=2,$0=3,ey=4,ZM=5,Aa=100,QM=101,KM=102,ty=103,ny=104,$M=200,eE=201,tE=202,nE=203,ry=204,iy=205,rE=206,iE=207,sE=208,oE=209,aE=210,lE=0,uE=1,cE=2,xp=3,fE=4,dE=5,hE=6,pE=7,Cf=0,mE=1,gE=2,ws=0,vE=1,yE=2,xE=3,sy=4,_E=5,_p=300,Ca=301,La=302,Lf=303,Rf=304,Ql=306,Pf=307,Eo=1e3,zn=1001,Kl=1002,xn=1003,If=1004,ZR=1004,Df=1005,QR=1005,Kt=1006,wp=1007,KR=1007,Ss=1008,$R=1008,Ms=1009,wE=1010,SE=1011,Ff=1012,ME=1013,kf=1014,Gi=1015,Ra=1016,EE=1017,TE=1018,bE=1019,$l=1020,AE=1021,To=1022,Gn=1023,CE=1024,LE=1025,RE=Gn,Pa=1026,eu=1027,PE=1028,IE=1029,DE=1030,FE=1031,kE=1032,NE=1033,oy=33776,ay=33777,ly=33778,uy=33779,cy=35840,fy=35841,dy=35842,hy=35843,OE=36196,py=37492,my=37496,UE=37808,BE=37809,zE=37810,GE=37811,HE=37812,VE=37813,WE=37814,jE=37815,XE=37816,qE=37817,YE=37818,JE=37819,ZE=37820,QE=37821,KE=36492,$E=37840,eT=37841,tT=37842,nT=37843,rT=37844,iT=37845,sT=37846,oT=37847,aT=37848,lT=37849,uT=37850,cT=37851,fT=37852,dT=37853,hT=2200,pT=2201,mT=2202,tu=2300,Ia=2301,Sp=2302,Da=2400,Fa=2401,Nf=2402,Mp=2500,gy=2501,gT=0,vT=1,vy=2,kn=3e3,Nr=3001,Ep=3007,Tp=3002,yT=3003,yy=3004,xy=3005,_y=3006,xT=3200,wy=3201,bo=0,_T=1,eP=0,bp=7680,tP=7681,nP=7682,rP=7683,iP=34055,sP=34056,oP=5386,aP=512,lP=513,uP=514,cP=515,fP=516,dP=517,hP=518,wT=519,nu=35044,ru=35048,pP=35040,mP=35045,gP=35049,vP=35041,yP=35046,xP=35050,_P=35042,wP="100",Sy="300 es";class Es{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}let Ap=1234567;const ka=Math.PI/180,Of=180/Math.PI,Jn=[];for(let n=0;n<256;n++)Jn[n]=(n<16?"0":"")+n.toString(16);const SP=typeof crypto!="undefined"&&"randomUUID"in crypto;function Or(){if(SP)return crypto.randomUUID().toUpperCase();const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Jn[n&255]+Jn[n>>8&255]+Jn[n>>16&255]+Jn[n>>24&255]+"-"+Jn[e&255]+Jn[e>>8&255]+"-"+Jn[e>>16&15|64]+Jn[e>>24&255]+"-"+Jn[t&63|128]+Jn[t>>8&255]+"-"+Jn[t>>16&255]+Jn[t>>24&255]+Jn[r&255]+Jn[r>>8&255]+Jn[r>>16&255]+Jn[r>>24&255]).toUpperCase()}function Zn(n,e,t){return Math.max(e,Math.min(t,n))}function My(n,e){return(n%e+e)%e}function MP(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function EP(n,e,t){return n!==e?(t-n)/(e-n):0}function Uf(n,e,t){return(1-t)*n+t*e}function TP(n,e,t,r){return Uf(n,e,1-Math.exp(-t*r))}function bP(n,e=1){return e-Math.abs(My(n,e*2)-e)}function AP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function CP(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function LP(n,e){return n+Math.floor(Math.random()*(e-n+1))}function RP(n,e){return n+Math.random()*(e-n)}function PP(n){return n*(.5-Math.random())}function IP(n){return n!==void 0&&(Ap=n%2147483647),Ap=Ap*16807%2147483647,(Ap-1)/2147483646}function DP(n){return n*ka}function FP(n){return n*Of}function Ey(n){return(n&n-1)==0&&n!==0}function ST(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function MT(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function kP(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),h=o((e+r)/2),m=s((e-r)/2),d=o((e-r)/2),p=s((r-e)/2),y=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*m,l*d,a*u);break;case"YZY":n.set(l*d,a*h,l*m,a*u);break;case"ZXZ":n.set(l*m,l*d,a*h,a*u);break;case"XZX":n.set(a*h,l*y,l*p,a*u);break;case"YXY":n.set(l*p,a*h,l*y,a*u);break;case"ZYZ":n.set(l*y,l*p,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var Ty=Object.freeze({__proto__:null,DEG2RAD:ka,RAD2DEG:Of,generateUUID:Or,clamp:Zn,euclideanModulo:My,mapLinear:MP,inverseLerp:EP,lerp:Uf,damp:TP,pingpong:bP,smoothstep:AP,smootherstep:CP,randInt:LP,randFloat:RP,randFloatSpread:PP,seededRandom:IP,degToRad:DP,radToDeg:FP,isPowerOfTwo:Ey,ceilPowerOfTwo:ST,floorPowerOfTwo:MT,setQuaternionFromProperEuler:kP});class Se{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Se.prototype.isVector2=!0;class Ln{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],h=r[4],m=r[7],d=r[2],p=r[5],y=r[8],_=i[0],w=i[3],v=i[6],g=i[1],M=i[4],S=i[7],b=i[2],C=i[5],T=i[8];return s[0]=o*_+a*g+l*b,s[3]=o*w+a*M+l*C,s[6]=o*v+a*S+l*T,s[1]=u*_+h*g+m*b,s[4]=u*w+h*M+m*C,s[7]=u*v+h*S+m*T,s[2]=d*_+p*g+y*b,s[5]=d*w+p*M+y*C,s[8]=d*v+p*S+y*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-r*s*h+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],m=h*o-a*u,d=a*l-h*s,p=u*s-o*l,y=t*m+r*d+i*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/y;return e[0]=m*_,e[1]=(i*u-h*r)*_,e[2]=(a*r-i*o)*_,e[3]=d*_,e[4]=(h*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=p*_,e[7]=(r*l-u*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],u=i[4],h=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*u,i[6]=t*a+r*h,i[1]=-r*s+t*l,i[4]=-r*o+t*u,i[7]=-r*a+t*h,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Ln.prototype.isMatrix3=!0;function ET(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,r=n.length;t<r;++t)n[t]>e&&(e=n[t]);return e}const NP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function iu(n,e){return new NP[n](e)}function Cp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function TT(n,e=0){let t=3735928559^e,r=1103547991^e;for(let i=0,s;i<n.length;i++)s=n.charCodeAt(i),t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}let su;class Na{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{su===void 0&&(su=Cp("canvas")),su.width=e.width,su.height=e.height;const r=su.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=su}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let OP=0;class an extends Es{constructor(e=an.DEFAULT_IMAGE,t=an.DEFAULT_MAPPING,r=zn,i=zn,s=Kt,o=Ss,a=Gn,l=Ms,u=1,h=kn){super();Object.defineProperty(this,"id",{value:OP++}),this.uuid=Or(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Se(0,0),this.repeat=new Se(1,1),this.center=new Se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ln,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Or()),!t&&e.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(by(i[o].image)):s.push(by(i[o]))}else s=by(i);e.images[i.uuid]={uuid:i.uuid,url:s}}r.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_p)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Eo:e.x=e.x-Math.floor(e.x);break;case zn:e.x=e.x<0?0:1;break;case Kl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Eo:e.y=e.y-Math.floor(e.y);break;case zn:e.y=e.y<0?0:1;break;case Kl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}an.DEFAULT_IMAGE=void 0;an.DEFAULT_MAPPING=_p;an.prototype.isTexture=!0;function by(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?Na.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ct{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const o=.01,a=.1,l=e.elements,u=l[0],h=l[4],m=l[8],d=l[1],p=l[5],y=l[9],_=l[2],w=l[6],v=l[10];if(Math.abs(h-d)<o&&Math.abs(m-_)<o&&Math.abs(y-w)<o){if(Math.abs(h+d)<a&&Math.abs(m+_)<a&&Math.abs(y+w)<a&&Math.abs(u+p+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,S=(p+1)/2,b=(v+1)/2,C=(h+d)/4,T=(m+_)/4,L=(y+w)/4;return M>S&&M>b?M<o?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(M),i=C/r,s=T/r):S>b?S<o?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=C/i,s=L/i):b<o?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=T/s,i=L/s),this.set(r,i,s,t),this}let g=Math.sqrt((w-y)*(w-y)+(m-_)*(m-_)+(d-h)*(d-h));return Math.abs(g)<.001&&(g=1),this.x=(w-y)/g,this.y=(m-_)/g,this.z=(d-h)/g,this.w=Math.acos((u+p+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Ct.prototype.isVector4=!0;class mi extends Es{constructor(e,t,r={}){super();this.width=e,this.height=t,this.depth=1,this.scissor=new Ct(0,0,e,t),this.scissorTest=!1,this.viewport=new Ct(0,0,e,t),this.texture=new an(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Kt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=ht({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}mi.prototype.isWebGLRenderTarget=!0;class bT extends mi{constructor(e,t,r){super(e,t);const i=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=i.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}bT.prototype.isWebGLMultipleRenderTargets=!0;class Ay extends mi{constructor(e,t,r){super(e,t,r);this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Ay.prototype.isWebGLMultisampleRenderTarget=!0;class Hn{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],h=r[i+2],m=r[i+3];const d=s[o+0],p=s[o+1],y=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=m;return}if(a===1){e[t+0]=d,e[t+1]=p,e[t+2]=y,e[t+3]=_;return}if(m!==_||l!==d||u!==p||h!==y){let w=1-a;const v=l*d+u*p+h*y+m*_,g=v>=0?1:-1,M=1-v*v;if(M>Number.EPSILON){const b=Math.sqrt(M),C=Math.atan2(b,v*g);w=Math.sin(w*C)/b,a=Math.sin(a*C)/b}const S=a*g;if(l=l*w+d*S,u=u*w+p*S,h=h*w+y*S,m=m*w+_*S,w===1-a){const b=1/Math.sqrt(l*l+u*u+h*h+m*m);l*=b,u*=b,h*=b,m*=b}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=m}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],h=r[i+3],m=s[o],d=s[o+1],p=s[o+2],y=s[o+3];return e[t]=a*y+h*m+l*p-u*d,e[t+1]=l*y+h*d+u*m-a*p,e[t+2]=u*y+h*p+a*d-l*m,e[t+3]=h*y-a*m-l*d-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),h=a(i/2),m=a(s/2),d=l(r/2),p=l(i/2),y=l(s/2);switch(o){case"XYZ":this._x=d*h*m+u*p*y,this._y=u*p*m-d*h*y,this._z=u*h*y+d*p*m,this._w=u*h*m-d*p*y;break;case"YXZ":this._x=d*h*m+u*p*y,this._y=u*p*m-d*h*y,this._z=u*h*y-d*p*m,this._w=u*h*m+d*p*y;break;case"ZXY":this._x=d*h*m-u*p*y,this._y=u*p*m+d*h*y,this._z=u*h*y+d*p*m,this._w=u*h*m-d*p*y;break;case"ZYX":this._x=d*h*m-u*p*y,this._y=u*p*m+d*h*y,this._z=u*h*y-d*p*m,this._w=u*h*m+d*p*y;break;case"YZX":this._x=d*h*m+u*p*y,this._y=u*p*m+d*h*y,this._z=u*h*y-d*p*m,this._w=u*h*m-d*p*y;break;case"XZY":this._x=d*h*m-u*p*y,this._y=u*p*m-d*h*y,this._z=u*h*y+d*p*m,this._w=u*h*m+d*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],m=t[10],d=r+a+m;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(h-l)*p,this._y=(s-u)*p,this._z=(o-i)*p}else if(r>a&&r>m){const p=2*Math.sqrt(1+r-a-m);this._w=(h-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+u)/p}else if(a>m){const p=2*Math.sqrt(1+a-r-m);this._w=(s-u)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+h)/p}else{const p=2*Math.sqrt(1+m-r-a);this._w=(o-i)/p,this._x=(s+u)/p,this._y=(l+h)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=r*h+o*a+i*u-s*l,this._y=i*h+o*l+s*a-r*u,this._z=s*h+o*u+r*l-i*a,this._w=o*h-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),m=Math.sin((1-t)*h)/u,d=Math.sin(t*h)/u;return this._w=o*m+this._w*d,this._x=r*m+this._x*d,this._y=i*m+this._y*d,this._z=s*m+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Hn.prototype.isQuaternion=!0;class N{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(AT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(AT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,h=l*r+a*t-s*i,m=l*i+s*r-o*t,d=-s*t-o*r-a*i;return this.x=u*l+d*-s+h*-a-m*-o,this.y=h*l+d*-o+m*-s-u*-a,this.z=m*l+d*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Cy.copy(this).projectOnVector(e),this.sub(Cy)}reflect(e){return this.sub(Cy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}N.prototype.isVector3=!0;const Cy=new N,AT=new Hn;class yr{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const h=e[l],m=e[l+1],d=e[l+2];h<t&&(t=h),m<r&&(r=m),d<i&&(i=d),h>s&&(s=h),m>o&&(o=m),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const h=e.getX(l),m=e.getY(l),d=e.getZ(l);h<t&&(t=h),m<r&&(r=m),d<i&&(i=d),h>s&&(s=h),m>o&&(o=m),d>a&&(a=d)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Bf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Ly.copy(t.boundingBox),Ly.applyMatrix4(e.matrixWorld),this.union(Ly));const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bf),Bf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zf),Lp.subVectors(this.max,zf),ou.subVectors(e.a,zf),au.subVectors(e.b,zf),lu.subVectors(e.c,zf),Ao.subVectors(au,ou),Co.subVectors(lu,au),Oa.subVectors(ou,lu);let t=[0,-Ao.z,Ao.y,0,-Co.z,Co.y,0,-Oa.z,Oa.y,Ao.z,0,-Ao.x,Co.z,0,-Co.x,Oa.z,0,-Oa.x,-Ao.y,Ao.x,0,-Co.y,Co.x,0,-Oa.y,Oa.x,0];return!Ry(t,ou,au,lu,Lp)||(t=[1,0,0,0,1,0,0,0,1],!Ry(t,ou,au,lu,Lp))?!1:(Rp.crossVectors(Ao,Co),t=[Rp.x,Rp.y,Rp.z],Ry(t,ou,au,lu,Lp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Bf.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Bf).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ts),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}yr.prototype.isBox3=!0;const Ts=[new N,new N,new N,new N,new N,new N,new N,new N],Bf=new N,Ly=new yr,ou=new N,au=new N,lu=new N,Ao=new N,Co=new N,Oa=new N,zf=new N,Lp=new N,Rp=new N,Ua=new N;function Ry(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ua.fromArray(n,s);const a=i.x*Math.abs(Ua.x)+i.y*Math.abs(Ua.y)+i.z*Math.abs(Ua.z),l=e.dot(Ua),u=t.dot(Ua),h=r.dot(Ua);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const UP=new yr,CT=new N,Py=new N,Iy=new N;class Hi{constructor(e=new N,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):UP.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Iy.subVectors(e,this.center);const t=Iy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Iy.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return Py.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(CT.copy(e.center).add(Py)),this.expandByPoint(CT.copy(e.center).sub(Py)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const bs=new N,Dy=new N,Pp=new N,Lo=new N,Fy=new N,Ip=new N,ky=new N;class Ro{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=bs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(bs.copy(this.direction).multiplyScalar(t).add(this.origin),bs.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Dy.copy(e).add(t).multiplyScalar(.5),Pp.copy(t).sub(e).normalize(),Lo.copy(this.origin).sub(Dy);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Pp),a=Lo.dot(this.direction),l=-Lo.dot(Pp),u=Lo.lengthSq(),h=Math.abs(1-o*o);let m,d,p,y;if(h>0)if(m=o*l-a,d=o*a-l,y=s*h,m>=0)if(d>=-y)if(d<=y){const _=1/h;m*=_,d*=_,p=m*(m+o*d+2*a)+d*(o*m+d+2*l)+u}else d=s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+u;else d=-s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+u;else d<=-y?(m=Math.max(0,-(-o*s+a)),d=m>0?-s:Math.min(Math.max(-s,-l),s),p=-m*m+d*(d+2*l)+u):d<=y?(m=0,d=Math.min(Math.max(-s,-l),s),p=d*(d+2*l)+u):(m=Math.max(0,-(o*s+a)),d=m>0?s:Math.min(Math.max(-s,-l),s),p=-m*m+d*(d+2*l)+u);else d=o>0?-s:s,m=Math.max(0,-(o*d+a)),p=-m*m+d*(d+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(m).add(this.origin),i&&i.copy(Pp).multiplyScalar(d).add(Dy),p}intersectSphere(e,t){bs.subVectors(e.center,this.origin);const r=bs.dot(this.direction),i=bs.dot(bs)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,m=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),m>=0?(a=(e.min.z-d.z)*m,l=(e.max.z-d.z)*m):(a=(e.max.z-d.z)*m,l=(e.min.z-d.z)*m),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,bs)!==null}intersectTriangle(e,t,r,i,s){Fy.subVectors(t,e),Ip.subVectors(r,e),ky.crossVectors(Fy,Ip);let o=this.direction.dot(ky),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Lo.subVectors(this.origin,e);const l=a*this.direction.dot(Ip.crossVectors(Lo,Ip));if(l<0)return null;const u=a*this.direction.dot(Fy.cross(Lo));if(u<0||l+u>o)return null;const h=-a*Lo.dot(ky);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class qe{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,u,h,m,d,p,y,_,w){const v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=u,v[6]=h,v[10]=m,v[14]=d,v[3]=p,v[7]=y,v[11]=_,v[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new qe().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/uu.setFromMatrixColumn(e,0).length(),s=1/uu.setFromMatrixColumn(e,1).length(),o=1/uu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const d=o*h,p=o*m,y=a*h,_=a*m;t[0]=l*h,t[4]=-l*m,t[8]=u,t[1]=p+y*u,t[5]=d-_*u,t[9]=-a*l,t[2]=_-d*u,t[6]=y+p*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*h,p=l*m,y=u*h,_=u*m;t[0]=d+_*a,t[4]=y*a-p,t[8]=o*u,t[1]=o*m,t[5]=o*h,t[9]=-a,t[2]=p*a-y,t[6]=_+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*h,p=l*m,y=u*h,_=u*m;t[0]=d-_*a,t[4]=-o*m,t[8]=y+p*a,t[1]=p+y*a,t[5]=o*h,t[9]=_-d*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*h,p=o*m,y=a*h,_=a*m;t[0]=l*h,t[4]=y*u-p,t[8]=d*u+_,t[1]=l*m,t[5]=_*u+d,t[9]=p*u-y,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,p=o*u,y=a*l,_=a*u;t[0]=l*h,t[4]=_-d*m,t[8]=y*m+p,t[1]=m,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=p*m+y,t[10]=d-_*m}else if(e.order==="XZY"){const d=o*l,p=o*u,y=a*l,_=a*u;t[0]=l*h,t[4]=-m,t[8]=u*h,t[1]=d*m+_,t[5]=o*h,t[9]=p*m-y,t[2]=y*m-p,t[6]=a*h,t[10]=_*m+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BP,e,zP)}lookAt(e,t,r){const i=this.elements;return Ur.subVectors(e,t),Ur.lengthSq()===0&&(Ur.z=1),Ur.normalize(),Po.crossVectors(r,Ur),Po.lengthSq()===0&&(Math.abs(r.z)===1?Ur.x+=1e-4:Ur.z+=1e-4,Ur.normalize(),Po.crossVectors(r,Ur)),Po.normalize(),Dp.crossVectors(Ur,Po),i[0]=Po.x,i[4]=Dp.x,i[8]=Ur.x,i[1]=Po.y,i[5]=Dp.y,i[9]=Ur.y,i[2]=Po.z,i[6]=Dp.z,i[10]=Ur.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],h=r[1],m=r[5],d=r[9],p=r[13],y=r[2],_=r[6],w=r[10],v=r[14],g=r[3],M=r[7],S=r[11],b=r[15],C=i[0],T=i[4],L=i[8],P=i[12],O=i[1],D=i[5],k=i[9],F=i[13],B=i[2],W=i[6],H=i[10],X=i[14],ue=i[3],Me=i[7],Ae=i[11],V=i[15];return s[0]=o*C+a*O+l*B+u*ue,s[4]=o*T+a*D+l*W+u*Me,s[8]=o*L+a*k+l*H+u*Ae,s[12]=o*P+a*F+l*X+u*V,s[1]=h*C+m*O+d*B+p*ue,s[5]=h*T+m*D+d*W+p*Me,s[9]=h*L+m*k+d*H+p*Ae,s[13]=h*P+m*F+d*X+p*V,s[2]=y*C+_*O+w*B+v*ue,s[6]=y*T+_*D+w*W+v*Me,s[10]=y*L+_*k+w*H+v*Ae,s[14]=y*P+_*F+w*X+v*V,s[3]=g*C+M*O+S*B+b*ue,s[7]=g*T+M*D+S*W+b*Me,s[11]=g*L+M*k+S*H+b*Ae,s[15]=g*P+M*F+S*X+b*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],m=e[6],d=e[10],p=e[14],y=e[3],_=e[7],w=e[11],v=e[15];return y*(+s*l*m-i*u*m-s*a*d+r*u*d+i*a*p-r*l*p)+_*(+t*l*p-t*u*d+s*o*d-i*o*p+i*u*h-s*l*h)+w*(+t*u*m-t*a*p-s*o*m+r*o*p+s*a*h-r*u*h)+v*(-i*a*h-t*l*m+t*a*d+i*o*m-r*o*d+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],m=e[9],d=e[10],p=e[11],y=e[12],_=e[13],w=e[14],v=e[15],g=m*w*u-_*d*u+_*l*p-a*w*p-m*l*v+a*d*v,M=y*d*u-h*w*u-y*l*p+o*w*p+h*l*v-o*d*v,S=h*_*u-y*m*u+y*a*p-o*_*p-h*a*v+o*m*v,b=y*m*l-h*_*l-y*a*d+o*_*d+h*a*w-o*m*w,C=t*g+r*M+i*S+s*b;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=g*T,e[1]=(_*d*s-m*w*s-_*i*p+r*w*p+m*i*v-r*d*v)*T,e[2]=(a*w*s-_*l*s+_*i*u-r*w*u-a*i*v+r*l*v)*T,e[3]=(m*l*s-a*d*s-m*i*u+r*d*u+a*i*p-r*l*p)*T,e[4]=M*T,e[5]=(h*w*s-y*d*s+y*i*p-t*w*p-h*i*v+t*d*v)*T,e[6]=(y*l*s-o*w*s-y*i*u+t*w*u+o*i*v-t*l*v)*T,e[7]=(o*d*s-h*l*s+h*i*u-t*d*u-o*i*p+t*l*p)*T,e[8]=S*T,e[9]=(y*m*s-h*_*s-y*r*p+t*_*p+h*r*v-t*m*v)*T,e[10]=(o*_*s-y*a*s+y*r*u-t*_*u-o*r*v+t*a*v)*T,e[11]=(h*a*s-o*m*s-h*r*u+t*m*u+o*r*p-t*a*p)*T,e[12]=b*T,e[13]=(h*_*i-y*m*i+y*r*d-t*_*d-h*r*w+t*m*w)*T,e[14]=(y*a*i-o*_*i-y*r*l+t*_*l+o*r*w-t*a*w)*T,e[15]=(o*m*i-h*a*i+h*r*l-t*m*l-o*r*d+t*a*d)*T,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+r,h*l-i*o,0,u*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,m=a+a,d=s*u,p=s*h,y=s*m,_=o*h,w=o*m,v=a*m,g=l*u,M=l*h,S=l*m,b=r.x,C=r.y,T=r.z;return i[0]=(1-(_+v))*b,i[1]=(p+S)*b,i[2]=(y-M)*b,i[3]=0,i[4]=(p-S)*C,i[5]=(1-(d+v))*C,i[6]=(w+g)*C,i[7]=0,i[8]=(y+M)*T,i[9]=(w-g)*T,i[10]=(1-(d+_))*T,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=uu.set(i[0],i[1],i[2]).length();const o=uu.set(i[4],i[5],i[6]).length(),a=uu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],gi.copy(this);const u=1/s,h=1/o,m=1/a;return gi.elements[0]*=u,gi.elements[1]*=u,gi.elements[2]*=u,gi.elements[4]*=h,gi.elements[5]*=h,gi.elements[6]*=h,gi.elements[8]*=m,gi.elements[9]*=m,gi.elements[10]*=m,t.setFromRotationMatrix(gi),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),m=(r+i)/(r-i),d=-(o+s)/(o-s),p=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=m,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),h=1/(o-s),m=(t+e)*l,d=(r+i)*u,p=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-m,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}qe.prototype.isMatrix4=!0;const uu=new N,gi=new qe,BP=new N(0,0,0),zP=new N(1,1,1),Po=new N,Dp=new N,Ur=new N,LT=new qe,RT=new Hn;class Io{constructor(e=0,t=0,r=0,i=Io.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],h=i[9],m=i[2],d=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(Zn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Zn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-m,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Zn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Zn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return LT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return RT.setFromEuler(this),this.setFromQuaternion(RT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new N(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Io.prototype.isEuler=!0;Io.DefaultOrder="XYZ";Io.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class cu{constructor(){this.mask=1|0}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}}let GP=0;const PT=new N,fu=new Hn,As=new qe,Fp=new N,Gf=new N,HP=new N,VP=new Hn,IT=new N(1,0,0),DT=new N(0,1,0),FT=new N(0,0,1),WP={type:"added"},kT={type:"removed"};class mt extends Es{constructor(){super();Object.defineProperty(this,"id",{value:GP++}),this.uuid=Or(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mt.DefaultUp.clone();const e=new N,t=new Io,r=new Hn,i=new N(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new qe},normalMatrix:{value:new Ln}}),this.matrix=new qe,this.matrixWorld=new qe,this.matrixAutoUpdate=mt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new cu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fu.setFromAxisAngle(e,t),this.quaternion.multiply(fu),this}rotateOnWorldAxis(e,t){return fu.setFromAxisAngle(e,t),this.quaternion.premultiply(fu),this}rotateX(e){return this.rotateOnAxis(IT,e)}rotateY(e){return this.rotateOnAxis(DT,e)}rotateZ(e){return this.rotateOnAxis(FT,e)}translateOnAxis(e,t){return PT.copy(e).applyQuaternion(this.quaternion),this.position.add(PT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(IT,e)}translateY(e){return this.translateOnAxis(DT,e)}translateZ(e){return this.translateOnAxis(FT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(As.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Fp.copy(e):Fp.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Gf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?As.lookAt(Gf,Fp,this.up):As.lookAt(Fp,Gf,this.up),this.quaternion.setFromRotationMatrix(As),i&&(As.extractRotation(i.matrixWorld),fu.setFromRotationMatrix(As),this.quaternion.premultiply(fu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(WP)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(kT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(kT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),As.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),As.multiply(e.parent.matrixWorld)),e.applyMatrix4(As),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gf,e,HP),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gf,VP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const m=l[u];s(e.shapes,m)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),m=o(e.shapes),d=o(e.skeletons),p=o(e.animations);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),d.length>0&&(r.skeletons=d),p.length>0&&(r.animations=p)}return r.object=i,r;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}mt.DefaultUp=new N(0,1,0);mt.DefaultMatrixAutoUpdate=!0;mt.prototype.isObject3D=!0;const vi=new N,Cs=new N,Ny=new N,Ls=new N,du=new N,hu=new N,NT=new N,Oy=new N,Uy=new N,By=new N;class _n{constructor(e=new N,t=new N,r=new N){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),vi.subVectors(e,t),i.cross(vi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){vi.subVectors(i,t),Cs.subVectors(r,t),Ny.subVectors(e,t);const o=vi.dot(vi),a=vi.dot(Cs),l=vi.dot(Ny),u=Cs.dot(Cs),h=Cs.dot(Ny),m=o*u-a*a;if(m===0)return s.set(-2,-1,-1);const d=1/m,p=(u*l-a*h)*d,y=(o*h-a*l)*d;return s.set(1-p-y,y,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ls),Ls.x>=0&&Ls.y>=0&&Ls.x+Ls.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ls),l.set(0,0),l.addScaledVector(s,Ls.x),l.addScaledVector(o,Ls.y),l.addScaledVector(a,Ls.z),l}static isFrontFacing(e,t,r,i){return vi.subVectors(r,t),Cs.subVectors(e,t),vi.cross(Cs).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vi.subVectors(this.c,this.b),Cs.subVectors(this.a,this.b),vi.cross(Cs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _n.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return _n.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return _n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;du.subVectors(i,r),hu.subVectors(s,r),Oy.subVectors(e,r);const l=du.dot(Oy),u=hu.dot(Oy);if(l<=0&&u<=0)return t.copy(r);Uy.subVectors(e,i);const h=du.dot(Uy),m=hu.dot(Uy);if(h>=0&&m<=h)return t.copy(i);const d=l*m-h*u;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(du,o);By.subVectors(e,s);const p=du.dot(By),y=hu.dot(By);if(y>=0&&p<=y)return t.copy(s);const _=p*u-l*y;if(_<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(r).addScaledVector(hu,a);const w=h*y-p*m;if(w<=0&&m-h>=0&&p-y>=0)return NT.subVectors(s,i),a=(m-h)/(m-h+(p-y)),t.copy(i).addScaledVector(NT,a);const v=1/(w+_+d);return o=_*v,a=d*v,t.copy(r).addScaledVector(du,o).addScaledVector(hu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let jP=0;class wn extends Es{constructor(){super();Object.defineProperty(this,"id",{value:jP++}),this.uuid=Or(),this.name="",this.type="Material",this.fog=!0,this.blending=Zl,this.side=Mo,this.vertexColors=!1,this.opacity=1,this.format=Gn,this.transparent=!1,this.blendSrc=ry,this.blendDst=iy,this.blendEquation=Aa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=xp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=bp,this.stencilZFail=bp,this.stencilZPass=bp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===Q0;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Zl&&(r.blending=this.blending),this.side!==Mo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.format!==Gn&&(r.format=this.format),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}wn.prototype.isMaterial=!0;const OT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yi={h:0,s:0,l:0},kp={h:0,s:0,l:0};function zy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Gy(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Hy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class ke{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=My(e,1),t=Zn(t,0,1),r=Zn(r,0,1),t===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+t):r+t-r*t,s=2*r-i;this.r=zy(s,i,e+1/3),this.g=zy(s,i,e),this.b=zy(s,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(a,l,u)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=OT[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Gy(e.r),this.g=Gy(e.g),this.b=Gy(e.b),this}copyLinearToSRGB(e){return this.r=Hy(e.r),this.g=Hy(e.g),this.b=Hy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,r=this.g,i=this.b,s=Math.max(t,r,i),o=Math.min(t,r,i);let a,l;const u=(o+s)/2;if(o===s)a=0,l=0;else{const h=s-o;switch(l=u<=.5?h/(s+o):h/(2-s-o),s){case t:a=(r-i)/h+(r<i?6:0);break;case r:a=(i-t)/h+2;break;case i:a=(t-r)/h+4;break}a/=6}return e.h=a,e.s=l,e.l=u,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(yi),yi.h+=e,yi.s+=t,yi.l+=r,this.setHSL(yi.h,yi.s,yi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(yi),e.getHSL(kp);const r=Uf(yi.h,kp.h,t),i=Uf(yi.s,kp.s,t),s=Uf(yi.l,kp.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ke.NAMES=OT;ke.prototype.isColor=!0;ke.prototype.r=1;ke.prototype.g=1;ke.prototype.b=1;class Qn extends wn{constructor(e){super();this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Qn.prototype.isMeshBasicMaterial=!0;const zt=new N,Np=new Se;class _t{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=nu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new ke),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Se),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new N),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ct),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Np.fromBufferAttribute(this,t),Np.applyMatrix3(e),this.setXY(t,Np.x,Np.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)zt.fromBufferAttribute(this,t),zt.applyMatrix3(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.applyMatrix4(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.applyNormalMatrix(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)zt.x=this.getX(t),zt.y=this.getY(t),zt.z=this.getZ(t),zt.transformDirection(e),this.setXYZ(t,zt.x,zt.y,zt.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==nu&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}_t.prototype.isBufferAttribute=!0;class UT extends _t{constructor(e,t,r){super(new Int8Array(e),t,r)}}class BT extends _t{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class zT extends _t{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class GT extends _t{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Op extends _t{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class HT extends _t{constructor(e,t,r){super(new Int32Array(e),t,r)}}class Up extends _t{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class VT extends _t{constructor(e,t,r){super(new Uint16Array(e),t,r)}}VT.prototype.isFloat16BufferAttribute=!0;class Ye extends _t{constructor(e,t,r){super(new Float32Array(e),t,r)}}class WT extends _t{constructor(e,t,r){super(new Float64Array(e),t,r)}}let XP=0;const ti=new qe,Vy=new mt,pu=new N,Br=new yr,Hf=new yr,Vn=new N;class et extends Es{constructor(){super();Object.defineProperty(this,"id",{value:XP++}),this.uuid=Or(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ET(e)>65535?Up:Op)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Ln().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ti.makeRotationFromQuaternion(e),this.applyMatrix4(ti),this}rotateX(e){return ti.makeRotationX(e),this.applyMatrix4(ti),this}rotateY(e){return ti.makeRotationY(e),this.applyMatrix4(ti),this}rotateZ(e){return ti.makeRotationZ(e),this.applyMatrix4(ti),this}translate(e,t,r){return ti.makeTranslation(e,t,r),this.applyMatrix4(ti),this}scale(e,t,r){return ti.makeScale(e,t,r),this.applyMatrix4(ti),this}lookAt(e){return Vy.lookAt(e),Vy.updateMatrix(),this.applyMatrix4(Vy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pu).negate(),this.translate(pu.x,pu.y,pu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ye(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new yr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Br.setFromBufferAttribute(s),this.morphTargetsRelative?(Vn.addVectors(this.boundingBox.min,Br.min),this.boundingBox.expandByPoint(Vn),Vn.addVectors(this.boundingBox.max,Br.max),this.boundingBox.expandByPoint(Vn)):(this.boundingBox.expandByPoint(Br.min),this.boundingBox.expandByPoint(Br.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(e){const r=this.boundingSphere.center;if(Br.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Hf.setFromBufferAttribute(a),this.morphTargetsRelative?(Vn.addVectors(Br.min,Hf.min),Br.expandByPoint(Vn),Vn.addVectors(Br.max,Hf.max),Br.expandByPoint(Vn)):(Br.expandByPoint(Hf.min),Br.expandByPoint(Hf.max))}Br.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Vn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Vn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Vn.fromBufferAttribute(a,u),l&&(pu.fromBufferAttribute(e,u),Vn.add(pu)),i=Math.max(i,r.distanceToSquared(Vn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new _t(new Float32Array(4*a),4));const l=t.tangent.array,u=[],h=[];for(let O=0;O<a;O++)u[O]=new N,h[O]=new N;const m=new N,d=new N,p=new N,y=new Se,_=new Se,w=new Se,v=new N,g=new N;function M(O,D,k){m.fromArray(i,O*3),d.fromArray(i,D*3),p.fromArray(i,k*3),y.fromArray(o,O*2),_.fromArray(o,D*2),w.fromArray(o,k*2),d.sub(m),p.sub(m),_.sub(y),w.sub(y);const F=1/(_.x*w.y-w.x*_.y);!isFinite(F)||(v.copy(d).multiplyScalar(w.y).addScaledVector(p,-_.y).multiplyScalar(F),g.copy(p).multiplyScalar(_.x).addScaledVector(d,-w.x).multiplyScalar(F),u[O].add(v),u[D].add(v),u[k].add(v),h[O].add(g),h[D].add(g),h[k].add(g))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let O=0,D=S.length;O<D;++O){const k=S[O],F=k.start,B=k.count;for(let W=F,H=F+B;W<H;W+=3)M(r[W+0],r[W+1],r[W+2])}const b=new N,C=new N,T=new N,L=new N;function P(O){T.fromArray(s,O*3),L.copy(T);const D=u[O];b.copy(D),b.sub(T.multiplyScalar(T.dot(D))).normalize(),C.crossVectors(L,D);const F=C.dot(h[O])<0?-1:1;l[O*4]=b.x,l[O*4+1]=b.y,l[O*4+2]=b.z,l[O*4+3]=F}for(let O=0,D=S.length;O<D;++O){const k=S[O],F=k.start,B=k.count;for(let W=F,H=F+B;W<H;W+=3)P(r[W+0]),P(r[W+1]),P(r[W+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new _t(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,p=r.count;d<p;d++)r.setXYZ(d,0,0,0);const i=new N,s=new N,o=new N,a=new N,l=new N,u=new N,h=new N,m=new N;if(e)for(let d=0,p=e.count;d<p;d+=3){const y=e.getX(d+0),_=e.getX(d+1),w=e.getX(d+2);i.fromBufferAttribute(t,y),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,w),h.subVectors(o,s),m.subVectors(i,s),h.cross(m),a.fromBufferAttribute(r,y),l.fromBufferAttribute(r,_),u.fromBufferAttribute(r,w),a.add(h),l.add(h),u.add(h),r.setXYZ(y,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(w,u.x,u.y,u.z)}else for(let d=0,p=t.count;d<p;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),m.subVectors(i,s),h.cross(m),r.setXYZ(d+0,h.x,h.y,h.z),r.setXYZ(d+1,h.x,h.y,h.z),r.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const o=r[i].array,a=e.attributes[i],l=a.array,u=a.itemSize*t,h=Math.min(l.length,o.length-u);for(let m=0,d=u;m<h;m++,d++)o[d]=l[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Vn.fromBufferAttribute(e,t),Vn.normalize(),e.setXYZ(t,Vn.x,Vn.y,Vn.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,m=a.normalized,d=new u.constructor(l.length*h);let p=0,y=0;for(let _=0,w=l.length;_<w;_++){a.isInterleavedBufferAttribute?p=l[_]*a.data.stride+a.offset:p=l[_]*h;for(let v=0;v<h;v++)d[y++]=u[p++]}return new _t(d,h,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new et,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,m=u.length;h<m;h++){const d=u[h],p=e(d,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let m=0,d=u.length;m<d;m++){const p=u[m];h.push(p.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],m=s[u];for(let d=0,p=m.length;d<p;d++)h.push(m[d].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const m=o[u];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}et.prototype.isBufferGeometry=!0;const jT=new qe,mu=new Ro,Wy=new Hi,Do=new N,Fo=new N,ko=new N,jy=new N,Xy=new N,qy=new N,Bp=new N,zp=new N,Gp=new N,Hp=new Se,Vp=new Se,Wp=new Se,Yy=new N,jp=new N;class Gt extends mt{constructor(e=new et,t=new Qn){super();this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),Wy.copy(r.boundingSphere),Wy.applyMatrix4(s),e.ray.intersectsSphere(Wy)===!1)||(jT.copy(s).invert(),mu.copy(e.ray).applyMatrix4(jT),r.boundingBox!==null&&mu.intersectsBox(r.boundingBox)===!1))return;let o;if(r.isBufferGeometry){const a=r.index,l=r.attributes.position,u=r.morphAttributes.position,h=r.morphTargetsRelative,m=r.attributes.uv,d=r.attributes.uv2,p=r.groups,y=r.drawRange;if(a!==null)if(Array.isArray(i))for(let _=0,w=p.length;_<w;_++){const v=p[_],g=i[v.materialIndex],M=Math.max(v.start,y.start),S=Math.min(a.count,Math.min(v.start+v.count,y.start+y.count));for(let b=M,C=S;b<C;b+=3){const T=a.getX(b),L=a.getX(b+1),P=a.getX(b+2);o=Xp(this,g,e,mu,l,u,h,m,d,T,L,P),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const _=Math.max(0,y.start),w=Math.min(a.count,y.start+y.count);for(let v=_,g=w;v<g;v+=3){const M=a.getX(v),S=a.getX(v+1),b=a.getX(v+2);o=Xp(this,i,e,mu,l,u,h,m,d,M,S,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let _=0,w=p.length;_<w;_++){const v=p[_],g=i[v.materialIndex],M=Math.max(v.start,y.start),S=Math.min(l.count,Math.min(v.start+v.count,y.start+y.count));for(let b=M,C=S;b<C;b+=3){const T=b,L=b+1,P=b+2;o=Xp(this,g,e,mu,l,u,h,m,d,T,L,P),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const _=Math.max(0,y.start),w=Math.min(l.count,y.start+y.count);for(let v=_,g=w;v<g;v+=3){const M=v,S=v+1,b=v+2;o=Xp(this,i,e,mu,l,u,h,m,d,M,S,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Gt.prototype.isMesh=!0;function qP(n,e,t,r,i,s,o,a){let l;if(e.side===yn?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==xs,a),l===null)return null;jp.copy(a),jp.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(jp);return u<t.near||u>t.far?null:{distance:u,point:jp.clone(),object:n}}function Xp(n,e,t,r,i,s,o,a,l,u,h,m){Do.fromBufferAttribute(i,u),Fo.fromBufferAttribute(i,h),ko.fromBufferAttribute(i,m);const d=n.morphTargetInfluences;if(s&&d){Bp.set(0,0,0),zp.set(0,0,0),Gp.set(0,0,0);for(let y=0,_=s.length;y<_;y++){const w=d[y],v=s[y];w!==0&&(jy.fromBufferAttribute(v,u),Xy.fromBufferAttribute(v,h),qy.fromBufferAttribute(v,m),o?(Bp.addScaledVector(jy,w),zp.addScaledVector(Xy,w),Gp.addScaledVector(qy,w)):(Bp.addScaledVector(jy.sub(Do),w),zp.addScaledVector(Xy.sub(Fo),w),Gp.addScaledVector(qy.sub(ko),w)))}Do.add(Bp),Fo.add(zp),ko.add(Gp)}n.isSkinnedMesh&&(n.boneTransform(u,Do),n.boneTransform(h,Fo),n.boneTransform(m,ko));const p=qP(n,e,t,r,Do,Fo,ko,Yy);if(p){a&&(Hp.fromBufferAttribute(a,u),Vp.fromBufferAttribute(a,h),Wp.fromBufferAttribute(a,m),p.uv=_n.getUV(Yy,Do,Fo,ko,Hp,Vp,Wp,new Se)),l&&(Hp.fromBufferAttribute(l,u),Vp.fromBufferAttribute(l,h),Wp.fromBufferAttribute(l,m),p.uv2=_n.getUV(Yy,Do,Fo,ko,Hp,Vp,Wp,new Se));const y={a:u,b:h,c:m,normal:new N,materialIndex:0};_n.getNormal(Do,Fo,ko,y.normal),p.face=y}return p}class Vi extends et{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],m=[];let d=0,p=0;y("z","y","x",-1,-1,r,t,e,o,s,0),y("z","y","x",1,-1,r,t,-e,o,s,1),y("x","z","y",1,1,e,r,t,i,o,2),y("x","z","y",1,-1,e,r,-t,i,o,3),y("x","y","z",1,-1,e,t,r,i,s,4),y("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ye(u,3)),this.setAttribute("normal",new Ye(h,3)),this.setAttribute("uv",new Ye(m,2));function y(_,w,v,g,M,S,b,C,T,L,P){const O=S/T,D=b/L,k=S/2,F=b/2,B=C/2,W=T+1,H=L+1;let X=0,ue=0;const Me=new N;for(let Ae=0;Ae<H;Ae++){const V=Ae*D-F;for(let te=0;te<W;te++){const q=te*O-k;Me[_]=q*g,Me[w]=V*M,Me[v]=B,u.push(Me.x,Me.y,Me.z),Me[_]=0,Me[w]=0,Me[v]=C>0?1:-1,h.push(Me.x,Me.y,Me.z),m.push(te/T),m.push(1-Ae/L),X+=1}}for(let Ae=0;Ae<L;Ae++)for(let V=0;V<T;V++){const te=d+V+W*Ae,q=d+V+W*(Ae+1),re=d+(V+1)+W*(Ae+1),ye=d+(V+1)+W*Ae;l.push(te,q,ye),l.push(q,re,ye),ue+=6}a.addGroup(p,ue,P),p+=ue,d+=X}}static fromJSON(e){return new Vi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function or(n){const e={};for(let t=0;t<n.length;t++){const r=gu(n[t]);for(const i in r)e[i]=r[i]}return e}const Jy={clone:gu,merge:or};var YP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Rs extends wn{constructor(e){super();this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=YP,this.fragmentShader=JP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}Rs.prototype.isShaderMaterial=!0;class Ba extends mt{constructor(){super();this.type="Camera",this.matrixWorldInverse=new qe,this.projectionMatrix=new qe,this.projectionMatrixInverse=new qe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Ba.prototype.isCamera=!0;class ln extends Ba{constructor(e=50,t=1,r=.1,i=2e3){super();this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Of*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ka*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Of*2*Math.atan(Math.tan(ka*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ka*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}ln.prototype.isPerspectiveCamera=!0;const vu=90,yu=1;class qp extends mt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new ln(vu,yu,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new N(1,0,0)),this.add(i);const s=new ln(vu,yu,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new N(-1,0,0)),this.add(s);const o=new ln(vu,yu,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new N(0,1,0)),this.add(o);const a=new ln(vu,yu,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new N(0,-1,0)),this.add(a);const l=new ln(vu,yu,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new N(0,0,1)),this.add(l);const u=new ln(vu,yu,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new N(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,h=e.xr.enabled,m=e.getRenderTarget();e.xr.enabled=!1;const d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(m),e.xr.enabled=h}}class xu extends an{constructor(e,t,r,i,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:Ca;super(e,t,r,i,s,o,a,l,u,h);this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}xu.prototype.isCubeTexture=!0;class Yp extends mi{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new xu(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Kt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Gn,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Vi(5,5,5),s=new Rs({name:"CubemapFromEquirect",uniforms:gu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:yn,blending:_s});s.uniforms.tEquirect.value=t;const o=new Gt(i,s),a=t.minFilter;return t.minFilter===Ss&&(t.minFilter=Kt),new qp(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}Yp.prototype.isWebGLCubeRenderTarget=!0;const Zy=new N,ZP=new N,QP=new Ln;class Wi{constructor(e=new N(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Zy.subVectors(r,t).cross(ZP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Zy),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||QP.getNormalMatrix(e),i=this.coplanarPoint(Zy).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Wi.prototype.isPlane=!0;const _u=new Hi,Jp=new N;class Vf{constructor(e=new Wi,t=new Wi,r=new Wi,i=new Wi,s=new Wi,o=new Wi){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],h=r[6],m=r[7],d=r[8],p=r[9],y=r[10],_=r[11],w=r[12],v=r[13],g=r[14],M=r[15];return t[0].setComponents(a-i,m-l,_-d,M-w).normalize(),t[1].setComponents(a+i,m+l,_+d,M+w).normalize(),t[2].setComponents(a+s,m+u,_+p,M+v).normalize(),t[3].setComponents(a-s,m-u,_-p,M-v).normalize(),t[4].setComponents(a-o,m-h,_-y,M-g).normalize(),t[5].setComponents(a+o,m+h,_+y,M+g).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),_u.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_u)}intersectsSprite(e){return _u.center.set(0,0,0),_u.radius=.7071067811865476,_u.applyMatrix4(e.matrixWorld),this.intersectsSphere(_u)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Jp.x=i.normal.x>0?e.max.x:e.min.x,Jp.y=i.normal.y>0?e.max.y:e.min.y,Jp.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Jp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function XT(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function KP(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,h){const m=u.array,d=u.usage,p=n.createBuffer();n.bindBuffer(h,p),n.bufferData(h,m,d),u.onUploadCallback();let y=5126;return m instanceof Float32Array?y=5126:m instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):m instanceof Uint16Array?u.isFloat16BufferAttribute?t?y=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):y=5123:m instanceof Int16Array?y=5122:m instanceof Uint32Array?y=5125:m instanceof Int32Array?y=5124:m instanceof Int8Array?y=5120:(m instanceof Uint8Array||m instanceof Uint8ClampedArray)&&(y=5121),{buffer:p,type:y,bytesPerElement:m.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,m){const d=h.array,p=h.updateRange;n.bindBuffer(m,u),p.count===-1?n.bufferSubData(m,0,d):(t?n.bufferSubData(m,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):n.bufferSubData(m,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1)}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h&&(n.deleteBuffer(h.buffer),r.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const m=r.get(u);m===void 0?r.set(u,i(u,h)):m.version<u.version&&(s(m.buffer,u,h),m.version=u.version)}return{get:o,remove:a,update:l}}class ji extends et{constructor(e=1,t=1,r=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,h=l+1,m=e/a,d=t/l,p=[],y=[],_=[],w=[];for(let v=0;v<h;v++){const g=v*d-o;for(let M=0;M<u;M++){const S=M*m-s;y.push(S,-g,0),_.push(0,0,1),w.push(M/a),w.push(1-v/l)}}for(let v=0;v<l;v++)for(let g=0;g<a;g++){const M=g+u*v,S=g+u*(v+1),b=g+1+u*(v+1),C=g+1+u*v;p.push(M,S,C),p.push(S,b,C)}this.setIndex(p),this.setAttribute("position",new Ye(y,3)),this.setAttribute("normal",new Ye(_,3)),this.setAttribute("uv",new Ye(w,2))}static fromJSON(e){return new ji(e.width,e.height,e.widthSegments,e.heightSegments)}}var $P=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,eI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tI=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,nI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,iI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sI="vec3 transformed = vec3( position );",oI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,aI=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,lI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,fI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,hI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,pI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,gI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,vI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,yI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xI=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_I=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,wI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,SI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,MI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,EI="gl_FragColor = linearToOutputTexel( gl_FragColor );",TI=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,bI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,CI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,LI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,II=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,DI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,FI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,NI=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,OI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UI=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,BI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,zI=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,GI=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HI=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,VI=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,WI=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,jI=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,XI=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qI=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,YI=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,JI=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,ZI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,QI=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KI=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,$I=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,eD=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,tD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,nD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,rD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,sD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,oD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,aD=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,lD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,uD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,cD=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,pD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,mD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,gD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,vD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,yD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,xD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,_D=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,wD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,SD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,MD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ED=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,TD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,bD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,AD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,CD=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,LD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,RD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,PD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ID=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,DD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ND=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,OD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,UD=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,BD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,zD=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,GD=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,HD=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,VD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,WD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,jD=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,XD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YD=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZD=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,QD=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,KD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,$D=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,eF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,tF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,nF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sF=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,oF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aF=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lF=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,hF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mF=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gF=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_F=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wF=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SF=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,MF=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,EF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,gt={alphamap_fragment:$P,alphamap_pars_fragment:eI,alphatest_fragment:tI,alphatest_pars_fragment:nI,aomap_fragment:rI,aomap_pars_fragment:iI,begin_vertex:sI,beginnormal_vertex:oI,bsdfs:aI,bumpmap_pars_fragment:lI,clipping_planes_fragment:uI,clipping_planes_pars_fragment:cI,clipping_planes_pars_vertex:fI,clipping_planes_vertex:dI,color_fragment:hI,color_pars_fragment:pI,color_pars_vertex:mI,color_vertex:gI,common:vI,cube_uv_reflection_fragment:yI,defaultnormal_vertex:xI,displacementmap_pars_vertex:_I,displacementmap_vertex:wI,emissivemap_fragment:SI,emissivemap_pars_fragment:MI,encodings_fragment:EI,encodings_pars_fragment:TI,envmap_fragment:bI,envmap_common_pars_fragment:AI,envmap_pars_fragment:CI,envmap_pars_vertex:LI,envmap_physical_pars_fragment:zI,envmap_vertex:RI,fog_vertex:PI,fog_pars_vertex:II,fog_fragment:DI,fog_pars_fragment:FI,gradientmap_pars_fragment:kI,lightmap_fragment:NI,lightmap_pars_fragment:OI,lights_lambert_vertex:UI,lights_pars_begin:BI,lights_toon_fragment:GI,lights_toon_pars_fragment:HI,lights_phong_fragment:VI,lights_phong_pars_fragment:WI,lights_physical_fragment:jI,lights_physical_pars_fragment:XI,lights_fragment_begin:qI,lights_fragment_maps:YI,lights_fragment_end:JI,logdepthbuf_fragment:ZI,logdepthbuf_pars_fragment:QI,logdepthbuf_pars_vertex:KI,logdepthbuf_vertex:$I,map_fragment:eD,map_pars_fragment:tD,map_particle_fragment:nD,map_particle_pars_fragment:rD,metalnessmap_fragment:iD,metalnessmap_pars_fragment:sD,morphnormal_vertex:oD,morphtarget_pars_vertex:aD,morphtarget_vertex:lD,normal_fragment_begin:uD,normal_fragment_maps:cD,normal_pars_fragment:fD,normal_pars_vertex:dD,normal_vertex:hD,normalmap_pars_fragment:pD,clearcoat_normal_fragment_begin:mD,clearcoat_normal_fragment_maps:gD,clearcoat_pars_fragment:vD,output_fragment:yD,packing:xD,premultiplied_alpha_fragment:_D,project_vertex:wD,dithering_fragment:SD,dithering_pars_fragment:MD,roughnessmap_fragment:ED,roughnessmap_pars_fragment:TD,shadowmap_pars_fragment:bD,shadowmap_pars_vertex:AD,shadowmap_vertex:CD,shadowmask_pars_fragment:LD,skinbase_vertex:RD,skinning_pars_vertex:PD,skinning_vertex:ID,skinnormal_vertex:DD,specularmap_fragment:FD,specularmap_pars_fragment:kD,tonemapping_fragment:ND,tonemapping_pars_fragment:OD,transmission_fragment:UD,transmission_pars_fragment:BD,uv_pars_fragment:zD,uv_pars_vertex:GD,uv_vertex:HD,uv2_pars_fragment:VD,uv2_pars_vertex:WD,uv2_vertex:jD,worldpos_vertex:XD,background_vert:qD,background_frag:YD,cube_vert:JD,cube_frag:ZD,depth_vert:QD,depth_frag:KD,distanceRGBA_vert:$D,distanceRGBA_frag:eF,equirect_vert:tF,equirect_frag:nF,linedashed_vert:rF,linedashed_frag:iF,meshbasic_vert:sF,meshbasic_frag:oF,meshlambert_vert:aF,meshlambert_frag:lF,meshmatcap_vert:uF,meshmatcap_frag:cF,meshnormal_vert:fF,meshnormal_frag:dF,meshphong_vert:hF,meshphong_frag:pF,meshphysical_vert:mF,meshphysical_frag:gF,meshtoon_vert:vF,meshtoon_frag:yF,points_vert:xF,points_frag:_F,shadow_vert:wF,shadow_frag:SF,sprite_vert:MF,sprite_frag:EF},Ue={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ln},uv2Transform:{value:new Ln},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ln}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new Se(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ln}}},xi={basic:{uniforms:or([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.fog]),vertexShader:gt.meshbasic_vert,fragmentShader:gt.meshbasic_frag},lambert:{uniforms:or([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.fog,Ue.lights,{emissive:{value:new ke(0)}}]),vertexShader:gt.meshlambert_vert,fragmentShader:gt.meshlambert_frag},phong:{uniforms:or([Ue.common,Ue.specularmap,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,Ue.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:gt.meshphong_vert,fragmentShader:gt.meshphong_frag},standard:{uniforms:or([Ue.common,Ue.envmap,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.roughnessmap,Ue.metalnessmap,Ue.fog,Ue.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag},toon:{uniforms:or([Ue.common,Ue.aomap,Ue.lightmap,Ue.emissivemap,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.gradientmap,Ue.fog,Ue.lights,{emissive:{value:new ke(0)}}]),vertexShader:gt.meshtoon_vert,fragmentShader:gt.meshtoon_frag},matcap:{uniforms:or([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,Ue.fog,{matcap:{value:null}}]),vertexShader:gt.meshmatcap_vert,fragmentShader:gt.meshmatcap_frag},points:{uniforms:or([Ue.points,Ue.fog]),vertexShader:gt.points_vert,fragmentShader:gt.points_frag},dashed:{uniforms:or([Ue.common,Ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gt.linedashed_vert,fragmentShader:gt.linedashed_frag},depth:{uniforms:or([Ue.common,Ue.displacementmap]),vertexShader:gt.depth_vert,fragmentShader:gt.depth_frag},normal:{uniforms:or([Ue.common,Ue.bumpmap,Ue.normalmap,Ue.displacementmap,{opacity:{value:1}}]),vertexShader:gt.meshnormal_vert,fragmentShader:gt.meshnormal_frag},sprite:{uniforms:or([Ue.sprite,Ue.fog]),vertexShader:gt.sprite_vert,fragmentShader:gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ln},t2D:{value:null}},vertexShader:gt.background_vert,fragmentShader:gt.background_frag},cube:{uniforms:or([Ue.envmap,{opacity:{value:1}}]),vertexShader:gt.cube_vert,fragmentShader:gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gt.equirect_vert,fragmentShader:gt.equirect_frag},distanceRGBA:{uniforms:or([Ue.common,Ue.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gt.distanceRGBA_vert,fragmentShader:gt.distanceRGBA_frag},shadow:{uniforms:or([Ue.lights,Ue.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:gt.shadow_vert,fragmentShader:gt.shadow_frag}};xi.physical={uniforms:or([xi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Se(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Se},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null}}]),vertexShader:gt.meshphysical_vert,fragmentShader:gt.meshphysical_frag};function TF(n,e,t,r,i){const s=new ke(0);let o=0,a,l,u=null,h=0,m=null;function d(y,_){let w=!1,v=_.isScene===!0?_.background:null;v&&v.isTexture&&(v=e.get(v));const g=n.xr,M=g.getSession&&g.getSession();M&&M.environmentBlendMode==="additive"&&(v=null),v===null?p(s,o):v&&v.isColor&&(p(v,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Ql)?(l===void 0&&(l=new Gt(new Vi(1,1,1),new Rs({name:"BackgroundCubeMaterial",uniforms:gu(xi.cube.uniforms),vertexShader:xi.cube.vertexShader,fragmentShader:xi.cube.fragmentShader,side:yn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(S,b,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,(u!==v||h!==v.version||m!==n.toneMapping)&&(l.material.needsUpdate=!0,u=v,h=v.version,m=n.toneMapping),y.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(a===void 0&&(a=new Gt(new ji(2,2),new Rs({name:"BackgroundMaterial",uniforms:gu(xi.background.uniforms),vertexShader:xi.background.vertexShader,fragmentShader:xi.background.fragmentShader,side:Mo,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=v,v.matrixAutoUpdate===!0&&v.updateMatrix(),a.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||h!==v.version||m!==n.toneMapping)&&(a.material.needsUpdate=!0,u=v,h=v.version,m=n.toneMapping),y.unshift(a,a.geometry,a.material,0,0,null))}function p(y,_){t.buffers.color.setClear(y.r,y.g,y.b,_,i)}return{getClearColor:function(){return s},setClearColor:function(y,_=1){s.set(y),o=_,p(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(y){o=y,p(s,o)},render:d}}function bF(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=_(null);let u=l;function h(F,B,W,H,X){let ue=!1;if(o){const Me=y(H,W,B);u!==Me&&(u=Me,d(u.object)),ue=w(H,X),ue&&v(H,X)}else{const Me=B.wireframe===!0;(u.geometry!==H.id||u.program!==W.id||u.wireframe!==Me)&&(u.geometry=H.id,u.program=W.id,u.wireframe=Me,ue=!0)}F.isInstancedMesh===!0&&(ue=!0),X!==null&&t.update(X,34963),ue&&(T(F,B,W,H),X!==null&&n.bindBuffer(34963,t.get(X).buffer))}function m(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(F){return r.isWebGL2?n.bindVertexArray(F):s.bindVertexArrayOES(F)}function p(F){return r.isWebGL2?n.deleteVertexArray(F):s.deleteVertexArrayOES(F)}function y(F,B,W){const H=W.wireframe===!0;let X=a[F.id];X===void 0&&(X={},a[F.id]=X);let ue=X[B.id];ue===void 0&&(ue={},X[B.id]=ue);let Me=ue[H];return Me===void 0&&(Me=_(m()),ue[H]=Me),Me}function _(F){const B=[],W=[],H=[];for(let X=0;X<i;X++)B[X]=0,W[X]=0,H[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:W,attributeDivisors:H,object:F,attributes:{},index:null}}function w(F,B){const W=u.attributes,H=F.attributes;let X=0;for(const ue in H){const Me=W[ue],Ae=H[ue];if(Me===void 0||Me.attribute!==Ae||Me.data!==Ae.data)return!0;X++}return u.attributesNum!==X||u.index!==B}function v(F,B){const W={},H=F.attributes;let X=0;for(const ue in H){const Me=H[ue],Ae={};Ae.attribute=Me,Me.data&&(Ae.data=Me.data),W[ue]=Ae,X++}u.attributes=W,u.attributesNum=X,u.index=B}function g(){const F=u.newAttributes;for(let B=0,W=F.length;B<W;B++)F[B]=0}function M(F){S(F,0)}function S(F,B){const W=u.newAttributes,H=u.enabledAttributes,X=u.attributeDivisors;W[F]=1,H[F]===0&&(n.enableVertexAttribArray(F),H[F]=1),X[F]!==B&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](F,B),X[F]=B)}function b(){const F=u.newAttributes,B=u.enabledAttributes;for(let W=0,H=B.length;W<H;W++)B[W]!==F[W]&&(n.disableVertexAttribArray(W),B[W]=0)}function C(F,B,W,H,X,ue){r.isWebGL2===!0&&(W===5124||W===5125)?n.vertexAttribIPointer(F,B,W,X,ue):n.vertexAttribPointer(F,B,W,H,X,ue)}function T(F,B,W,H){if(r.isWebGL2===!1&&(F.isInstancedMesh||H.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;g();const X=H.attributes,ue=W.getAttributes(),Me=B.defaultAttributeValues;for(const Ae in ue){const V=ue[Ae];if(V.location>=0){let te=X[Ae];if(te===void 0&&(Ae==="instanceMatrix"&&F.instanceMatrix&&(te=F.instanceMatrix),Ae==="instanceColor"&&F.instanceColor&&(te=F.instanceColor)),te!==void 0){const q=te.normalized,re=te.itemSize,ye=t.get(te);if(ye===void 0)continue;const $=ye.buffer,Te=ye.type,Le=ye.bytesPerElement;if(te.isInterleavedBufferAttribute){const Ee=te.data,Re=Ee.stride,Ce=te.offset;if(Ee&&Ee.isInstancedInterleavedBuffer){for(let ce=0;ce<V.locationSize;ce++)S(V.location+ce,Ee.meshPerAttribute);F.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let ce=0;ce<V.locationSize;ce++)M(V.location+ce);n.bindBuffer(34962,$);for(let ce=0;ce<V.locationSize;ce++)C(V.location+ce,re/V.locationSize,Te,q,Re*Le,(Ce+re/V.locationSize*ce)*Le)}else{if(te.isInstancedBufferAttribute){for(let Ee=0;Ee<V.locationSize;Ee++)S(V.location+Ee,te.meshPerAttribute);F.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let Ee=0;Ee<V.locationSize;Ee++)M(V.location+Ee);n.bindBuffer(34962,$);for(let Ee=0;Ee<V.locationSize;Ee++)C(V.location+Ee,re/V.locationSize,Te,q,re*Le,re/V.locationSize*Ee*Le)}}else if(Me!==void 0){const q=Me[Ae];if(q!==void 0)switch(q.length){case 2:n.vertexAttrib2fv(V.location,q);break;case 3:n.vertexAttrib3fv(V.location,q);break;case 4:n.vertexAttrib4fv(V.location,q);break;default:n.vertexAttrib1fv(V.location,q)}}}}b()}function L(){D();for(const F in a){const B=a[F];for(const W in B){const H=B[W];for(const X in H)p(H[X].object),delete H[X];delete B[W]}delete a[F]}}function P(F){if(a[F.id]===void 0)return;const B=a[F.id];for(const W in B){const H=B[W];for(const X in H)p(H[X].object),delete H[X];delete B[W]}delete a[F.id]}function O(F){for(const B in a){const W=a[B];if(W[F.id]===void 0)continue;const H=W[F.id];for(const X in H)p(H[X].object),delete H[X];delete W[F.id]}}function D(){k(),u!==l&&(u=l,d(u.object))}function k(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:D,resetDefaultState:k,dispose:L,releaseStatesOfGeometry:P,releaseStatesOfProgram:O,initAttributes:g,enableAttribute:M,disableUnusedAttributes:b}}function AF(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,h){n.drawArrays(s,u,h),t.update(h,s,1)}function l(u,h,m){if(m===0)return;let d,p;if(i)d=n,p="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,u,h,m),t.update(h,s,m)}this.setMode=o,this.render=a,this.renderInstances=l}function CF(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(T){if(T==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,m=n.getParameter(34930),d=n.getParameter(35660),p=n.getParameter(3379),y=n.getParameter(34076),_=n.getParameter(34921),w=n.getParameter(36347),v=n.getParameter(36348),g=n.getParameter(36349),M=d>0,S=o||e.has("OES_texture_float"),b=M&&S,C=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:m,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:w,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:M,floatFragmentTextures:S,floatVertexTextures:b,maxSamples:C}}function LF(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Wi,a=new Ln,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(m,d,p){const y=m.length!==0||d||r!==0||i;return i=d,t=h(m,p,0),r=m.length,y},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,u()},this.setState=function(m,d,p){const y=m.clippingPlanes,_=m.clipIntersection,w=m.clipShadows,v=n.get(m);if(!i||y===null||y.length===0||s&&!w)s?h(null):u();else{const g=s?0:r,M=g*4;let S=v.clippingState||null;l.value=S,S=h(y,d,M,p);for(let b=0;b!==M;++b)S[b]=t[b];v.clippingState=S,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=g}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(m,d,p,y){const _=m!==null?m.length:0;let w=null;if(_!==0){if(w=l.value,y!==!0||w===null){const v=p+_*4,g=d.matrixWorldInverse;a.getNormalMatrix(g),(w===null||w.length<v)&&(w=new Float32Array(v));for(let M=0,S=p;M!==_;++M,S+=4)o.copy(m[M]).applyMatrix4(g,a),o.normal.toArray(w,S),w[S+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,w}}function RF(n){let e=new WeakMap;function t(o,a){return a===Lf?o.mapping=Ca:a===Rf&&(o.mapping=La),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Lf||a===Rf)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=n.getRenderTarget(),h=new Yp(l.height/2);return h.fromEquirectangularTexture(n,o),e.set(o,h),n.setRenderTarget(u),o.addEventListener("dispose",i),t(h.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ps extends Ba{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Ps.prototype.isOrthographicCamera=!0;class wu extends Rs{constructor(e){super(e);this.type="RawShaderMaterial"}}wu.prototype.isRawShaderMaterial=!0;const Su=4,No=8,Xi=Math.pow(2,No),qT=[.125,.215,.35,.446,.526,.582],YT=No-Su+1+qT.length,Mu=20,Oo={[kn]:0,[Nr]:1,[Tp]:2,[yy]:3,[xy]:4,[_y]:5,[Ep]:6},Qy=new Ps,{_lodPlanes:Wf,_sizeLods:JT,_sigmas:Zp}=IF(),ZT=new ke;let Ky=null;const za=(1+Math.sqrt(5))/2,Eu=1/za,QT=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,za,Eu),new N(0,za,-Eu),new N(Eu,0,za),new N(-Eu,0,za),new N(za,Eu,0),new N(-za,Eu,0)];class KT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=DF(Mu),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Ky=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=tb(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=eb(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Wf.length;e++)Wf[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Ky),e.scissorTest=!1,Qp(e,0,0,e.width,e.height)}_fromTexture(e){Ky=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:xn,minFilter:xn,generateMipmaps:!1,type:Ms,format:RE,encoding:PF(e)?e.encoding:Tp,depthBuffer:!1},r=$T(t);return r.depthBuffer=!e,this._pingPongRenderTarget=$T(t),r}_compileMaterial(e){const t=new Gt(Wf[0],e);this._renderer.compile(t,Qy)}_sceneToCubeUV(e,t,r,i){const s=90,o=1,a=new ln(s,o,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,m=h.autoClear,d=h.outputEncoding,p=h.toneMapping;h.getClearColor(ZT),h.toneMapping=ws,h.outputEncoding=kn,h.autoClear=!1;const y=new Qn({name:"PMREM.Background",side:yn,depthWrite:!1,depthTest:!1}),_=new Gt(new Vi,y);let w=!1;const v=e.background;v?v.isColor&&(y.color.copy(v),e.background=null,w=!0):(y.color.copy(ZT),w=!0);for(let g=0;g<6;g++){const M=g%3;M==0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):M==1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g])),Qp(i,M*Xi,g>2?Xi:0,Xi,Xi),h.setRenderTarget(i),w&&h.render(_,a),h.render(e,a)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=p,h.outputEncoding=d,h.autoClear=m,e.background=v}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===Gn&&t.type===Ms&&t.encoding===Nr?e.value=Oo[kn]:e.value=Oo[t.encoding]}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ca||e.mapping===La;i?this._cubemapShader==null&&(this._cubemapShader=tb()):this._equirectShader==null&&(this._equirectShader=eb());const s=i?this._cubemapShader:this._equirectShader,o=new Gt(Wf[0],s),a=s.uniforms;a.envMap.value=e,i||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),Qp(t,0,0,3*Xi,2*Xi),r.setRenderTarget(t),r.render(o,Qy)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<YT;i++){const s=Math.sqrt(Zp[i]*Zp[i]-Zp[i-1]*Zp[i-1]),o=QT[(i-1)%QT.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,m=new Gt(Wf[i],u),d=u.uniforms,p=JT[r]-1,y=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Mu-1),_=s/y,w=isFinite(s)?1+Math.floor(h*_):Mu;w>Mu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Mu}`);const v=[];let g=0;for(let C=0;C<Mu;++C){const T=C/_,L=Math.exp(-T*T/2);v.push(L),C==0?g+=L:C<w&&(g+=2*L)}for(let C=0;C<v.length;C++)v[C]=v[C]/g;d.envMap.value=e.texture,d.samples.value=w,d.weights.value=v,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a),d.dTheta.value=y,d.mipInt.value=No-r,this._setEncoding(d.inputEncoding,e.texture),this._setEncoding(d.outputEncoding,e.texture);const M=JT[i],S=3*Math.max(0,Xi-2*M),b=(i===0?0:2*Xi)+2*M*(i>No-Su?i-No+Su:0);Qp(t,S,b,3*M,2*M),l.setRenderTarget(t),l.render(m,Qy)}}function PF(n){return n===void 0||n.type!==Ms?!1:n.encoding===kn||n.encoding===Nr||n.encoding===Ep}function IF(){const n=[],e=[],t=[];let r=No;for(let i=0;i<YT;i++){const s=Math.pow(2,r);e.push(s);let o=1/s;i>No-Su?o=qT[i-No+Su-1]:i==0&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,u=1+a/2,h=[l,l,u,l,u,u,l,l,u,u,l,u],m=6,d=6,p=3,y=2,_=1,w=new Float32Array(p*d*m),v=new Float32Array(y*d*m),g=new Float32Array(_*d*m);for(let S=0;S<m;S++){const b=S%3*2/3-1,C=S>2?0:-1,T=[b,C,0,b+2/3,C,0,b+2/3,C+1,0,b,C,0,b+2/3,C+1,0,b,C+1,0];w.set(T,p*d*S),v.set(h,y*d*S);const L=[S,S,S,S,S,S];g.set(L,_*d*S)}const M=new et;M.setAttribute("position",new _t(w,p)),M.setAttribute("uv",new _t(v,y)),M.setAttribute("faceIndex",new _t(g,_)),n.push(M),r>Su&&r--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function $T(n){const e=new mi(3*Xi,3*Xi,n);return e.texture.mapping=Ql,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Qp(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function DF(n){const e=new Float32Array(n),t=new N(0,1,0);return new wu({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Oo[kn]},outputEncoding:{value:Oo[kn]}},vertexShader:$y(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${ex()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function eb(){const n=new Se(1,1);return new wu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Oo[kn]},outputEncoding:{value:Oo[kn]}},vertexShader:$y(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${ex()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function tb(){return new wu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Oo[kn]},outputEncoding:{value:Oo[kn]}},vertexShader:$y(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${ex()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:_s,depthTest:!1,depthWrite:!1})}function $y(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ex(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function FF(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping,u=l===Lf||l===Rf,h=l===Ca||l===La;if(u||h){if(e.has(a))return e.get(a).texture;{const m=a.image;if(u&&m&&m.height>0||h&&m&&i(m)){const d=n.getRenderTarget();t===null&&(t=new KT(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),n.setRenderTarget(d),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function kF(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function NF(n,e,t,r){const i={},s=new WeakMap;function o(m){const d=m.target;d.index!==null&&e.remove(d.index);for(const y in d.attributes)e.remove(d.attributes[y]);d.removeEventListener("dispose",o),delete i[d.id];const p=s.get(d);p&&(e.remove(p),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(m,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(m){const d=m.attributes;for(const y in d)e.update(d[y],34962);const p=m.morphAttributes;for(const y in p){const _=p[y];for(let w=0,v=_.length;w<v;w++)e.update(_[w],34962)}}function u(m){const d=[],p=m.index,y=m.attributes.position;let _=0;if(p!==null){const g=p.array;_=p.version;for(let M=0,S=g.length;M<S;M+=3){const b=g[M+0],C=g[M+1],T=g[M+2];d.push(b,C,C,T,T,b)}}else{const g=y.array;_=y.version;for(let M=0,S=g.length/3-1;M<S;M+=3){const b=M+0,C=M+1,T=M+2;d.push(b,C,C,T,T,b)}}const w=new(ET(d)>65535?Up:Op)(d,1);w.version=_;const v=s.get(m);v&&e.remove(v),s.set(m,w)}function h(m){const d=s.get(m);if(d){const p=m.index;p!==null&&d.version<p.version&&u(m)}else u(m);return s.get(m)}return{get:a,update:l,getWireframeAttribute:h}}function OF(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,l;function u(d){a=d.type,l=d.bytesPerElement}function h(d,p){n.drawElements(s,p,a,d*l),t.update(p,s,1)}function m(d,p,y){if(y===0)return;let _,w;if(i)_=n,w="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[w](s,p,a,d*l,y),t.update(p,s,y)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=m}function UF(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}class Kp extends an{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=xn,this.minFilter=xn,this.wrapR=zn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Kp.prototype.isDataTexture2DArray=!0;function BF(n,e){return n[0]-e[0]}function zF(n,e){return Math.abs(e[1])-Math.abs(n[1])}function nb(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function GF(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new N,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,m,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=h.morphAttributes.position.length;let _=s.get(h);if(_===void 0||_.count!==y){_!==void 0&&_.texture.dispose();const g=h.morphAttributes.normal!==void 0,M=h.morphAttributes.position,S=h.morphAttributes.normal||[],b=h.attributes.position.count,C=g===!0?2:1;let T=b*C,L=1;T>e.maxTextureSize&&(L=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const P=new Float32Array(T*L*4*y),O=new Kp(P,T,L,y);O.format=Gn,O.type=Gi;const D=C*4;for(let k=0;k<y;k++){const F=M[k],B=S[k],W=T*L*4*k;for(let H=0;H<F.count;H++){o.fromBufferAttribute(F,H),F.normalized===!0&&nb(o,F);const X=H*D;P[W+X+0]=o.x,P[W+X+1]=o.y,P[W+X+2]=o.z,P[W+X+3]=0,g===!0&&(o.fromBufferAttribute(B,H),B.normalized===!0&&nb(o,B),P[W+X+4]=o.x,P[W+X+5]=o.y,P[W+X+6]=o.z,P[W+X+7]=0)}}_={count:y,texture:O,size:new Se(T,L)},s.set(h,_)}let w=0;for(let g=0;g<p.length;g++)w+=p[g];const v=h.morphTargetsRelative?1:1-w;d.getUniforms().setValue(n,"morphTargetBaseInfluence",v),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const y=p===void 0?0:p.length;let _=r[h.id];if(_===void 0||_.length!==y){_=[];for(let S=0;S<y;S++)_[S]=[S,0];r[h.id]=_}for(let S=0;S<y;S++){const b=_[S];b[0]=S,b[1]=p[S]}_.sort(zF);for(let S=0;S<8;S++)S<y&&_[S][1]?(a[S][0]=_[S][0],a[S][1]=_[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(BF);const w=h.morphAttributes.position,v=h.morphAttributes.normal;let g=0;for(let S=0;S<8;S++){const b=a[S],C=b[0],T=b[1];C!==Number.MAX_SAFE_INTEGER&&T?(w&&h.getAttribute("morphTarget"+S)!==w[C]&&h.setAttribute("morphTarget"+S,w[C]),v&&h.getAttribute("morphNormal"+S)!==v[C]&&h.setAttribute("morphNormal"+S,v[C]),i[S]=T,g+=T):(w&&h.hasAttribute("morphTarget"+S)===!0&&h.deleteAttribute("morphTarget"+S),v&&h.hasAttribute("morphNormal"+S)===!0&&h.deleteAttribute("morphNormal"+S),i[S]=0)}const M=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",M),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function HF(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,h=l.geometry,m=e.get(l,h);return i.get(m)!==u&&(e.update(m),i.set(m,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),m}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class tx extends an{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=xn,this.minFilter=xn,this.wrapR=zn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}tx.prototype.isDataTexture3D=!0;const rb=new an,VF=new Kp,WF=new tx,ib=new xu,sb=[],ob=[],ab=new Float32Array(16),lb=new Float32Array(9),ub=new Float32Array(4);function Tu(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=sb[i];if(s===void 0&&(s=new Float32Array(i),sb[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function xr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ar(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function cb(n,e){let t=ob[e];t===void 0&&(t=new Int32Array(e),ob[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function jF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function XF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xr(t,e))return;n.uniform2fv(this.addr,e),ar(t,e)}}function qF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(xr(t,e))return;n.uniform3fv(this.addr,e),ar(t,e)}}function YF(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xr(t,e))return;n.uniform4fv(this.addr,e),ar(t,e)}}function JF(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ar(t,e)}else{if(xr(t,r))return;ub.set(r),n.uniformMatrix2fv(this.addr,!1,ub),ar(t,r)}}function ZF(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ar(t,e)}else{if(xr(t,r))return;lb.set(r),n.uniformMatrix3fv(this.addr,!1,lb),ar(t,r)}}function QF(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ar(t,e)}else{if(xr(t,r))return;ab.set(r),n.uniformMatrix4fv(this.addr,!1,ab),ar(t,r)}}function KF(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function $F(n,e){const t=this.cache;xr(t,e)||(n.uniform2iv(this.addr,e),ar(t,e))}function ek(n,e){const t=this.cache;xr(t,e)||(n.uniform3iv(this.addr,e),ar(t,e))}function tk(n,e){const t=this.cache;xr(t,e)||(n.uniform4iv(this.addr,e),ar(t,e))}function nk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function rk(n,e){const t=this.cache;xr(t,e)||(n.uniform2uiv(this.addr,e),ar(t,e))}function ik(n,e){const t=this.cache;xr(t,e)||(n.uniform3uiv(this.addr,e),ar(t,e))}function sk(n,e){const t=this.cache;xr(t,e)||(n.uniform4uiv(this.addr,e),ar(t,e))}function ok(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.safeSetTexture2D(e||rb,i)}function ak(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||WF,i)}function lk(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.safeSetTextureCube(e||ib,i)}function uk(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||VF,i)}function ck(n){switch(n){case 5126:return jF;case 35664:return XF;case 35665:return qF;case 35666:return YF;case 35674:return JF;case 35675:return ZF;case 35676:return QF;case 5124:case 35670:return KF;case 35667:case 35671:return $F;case 35668:case 35672:return ek;case 35669:case 35673:return tk;case 5125:return nk;case 36294:return rk;case 36295:return ik;case 36296:return sk;case 35678:case 36198:case 36298:case 36306:case 35682:return ok;case 35679:case 36299:case 36307:return ak;case 35680:case 36300:case 36308:case 36293:return lk;case 36289:case 36303:case 36311:case 36292:return uk}}function fk(n,e){n.uniform1fv(this.addr,e)}function dk(n,e){const t=Tu(e,this.size,2);n.uniform2fv(this.addr,t)}function hk(n,e){const t=Tu(e,this.size,3);n.uniform3fv(this.addr,t)}function pk(n,e){const t=Tu(e,this.size,4);n.uniform4fv(this.addr,t)}function mk(n,e){const t=Tu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function gk(n,e){const t=Tu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function vk(n,e){const t=Tu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function yk(n,e){n.uniform1iv(this.addr,e)}function xk(n,e){n.uniform2iv(this.addr,e)}function _k(n,e){n.uniform3iv(this.addr,e)}function wk(n,e){n.uniform4iv(this.addr,e)}function Sk(n,e){n.uniform1uiv(this.addr,e)}function Mk(n,e){n.uniform2uiv(this.addr,e)}function Ek(n,e){n.uniform3uiv(this.addr,e)}function Tk(n,e){n.uniform4uiv(this.addr,e)}function bk(n,e,t){const r=e.length,i=cb(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.safeSetTexture2D(e[s]||rb,i[s])}function Ak(n,e,t){const r=e.length,i=cb(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.safeSetTextureCube(e[s]||ib,i[s])}function Ck(n){switch(n){case 5126:return fk;case 35664:return dk;case 35665:return hk;case 35666:return pk;case 35674:return mk;case 35675:return gk;case 35676:return vk;case 5124:case 35670:return yk;case 35667:case 35671:return xk;case 35668:case 35672:return _k;case 35669:case 35673:return wk;case 5125:return Sk;case 36294:return Mk;case 36295:return Ek;case 36296:return Tk;case 35678:case 36198:case 36298:case 36306:case 35682:return bk;case 35680:case 36300:case 36308:case 36293:return Ak}}function Lk(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=ck(e.type)}function fb(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=Ck(e.type)}fb.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),ar(e,n)};function db(n){this.id=n,this.seq=[],this.map={}}db.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const nx=/(\w+)(\])?(\[|\.)?/g;function hb(n,e){n.seq.push(e),n.map[e.id]=e}function Rk(n,e,t){const r=n.name,i=r.length;for(nx.lastIndex=0;;){const s=nx.exec(r),o=nx.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){hb(t,u===void 0?new Lk(a,n,e):new fb(a,n,e));break}else{let m=t.map[a];m===void 0&&(m=new db(a),hb(t,m)),t=m}}}function Uo(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r),s=n.getUniformLocation(e,i.name);Rk(i,s,this)}}Uo.prototype.setValue=function(n,e,t,r){const i=this.map[e];i!==void 0&&i.setValue(n,t,r)};Uo.prototype.setOptional=function(n,e,t){const r=e[t];r!==void 0&&this.setValue(n,t,r)};Uo.upload=function(n,e,t,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,r)}};Uo.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.id in e&&t.push(s)}return t};function pb(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let Pk=0;function Ik(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function mb(n){switch(n){case kn:return["Linear","( value )"];case Nr:return["sRGB","( value )"];case Tp:return["RGBE","( value )"];case yy:return["RGBM","( value, 7.0 )"];case xy:return["RGBM","( value, 16.0 )"];case _y:return["RGBD","( value, 256.0 )"];case Ep:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case yT:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function gb(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();return r&&i===""?"":t.toUpperCase()+`

`+i+`

`+Ik(n.getShaderSource(e))}function Ga(n,e){const t=mb(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function Dk(n,e){const t=mb(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Fk(n,e){let t;switch(e){case vE:t="Linear";break;case yE:t="Reinhard";break;case xE:t="OptimizedCineon";break;case sy:t="ACESFilmic";break;case _E:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function kk(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jf).join(`
`)}function Nk(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Ok(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function jf(n){return n!==""}function vb(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Uk=/^[ \t]*#include +<([\w\d./]+)>/gm;function rx(n){return n.replace(Uk,Bk)}function Bk(n,e){const t=gt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return rx(t)}const zk=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Gk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xb(n){return n.replace(Gk,_b).replace(zk,Hk)}function Hk(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_b(n,e,t,r)}function _b(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function wb(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Vk(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===J0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Z0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Jl&&(e="SHADOWMAP_TYPE_VSM"),e}function Wk(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ca:case La:e="ENVMAP_TYPE_CUBE";break;case Ql:case Pf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jk(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case La:case Pf:e="ENVMAP_MODE_REFRACTION";break}return e}function Xk(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Cf:e="ENVMAP_BLENDING_MULTIPLY";break;case mE:e="ENVMAP_BLENDING_MIX";break;case gE:e="ENVMAP_BLENDING_ADD";break}return e}function qk(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Vk(t),u=Wk(t),h=jk(t),m=Xk(t),d=n.gammaFactor>0?n.gammaFactor:1,p=t.isWebGL2?"":kk(t),y=Nk(s),_=i.createProgram();let w,v,g=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=[y].filter(jf).join(`
`),w.length>0&&(w+=`
`),v=[p,y].filter(jf).join(`
`),v.length>0&&(v+=`
`)):(w=[wb(t),"#define SHADER_NAME "+t.shaderName,y,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jf).join(`
`),v=[p,wb(t),"#define SHADER_NAME "+t.shaderName,y,"#define GAMMA_FACTOR "+d,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ws?"#define TONE_MAPPING":"",t.toneMapping!==ws?gt.tonemapping_pars_fragment:"",t.toneMapping!==ws?Fk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===To?"#define OPAQUE":"",gt.encodings_pars_fragment,t.map?Ga("mapTexelToLinear",t.mapEncoding):"",t.matcap?Ga("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Ga("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Ga("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?Ga("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?Ga("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?Ga("lightMapTexelToLinear",t.lightMapEncoding):"",Dk("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jf).join(`
`)),o=rx(o),o=vb(o,t),o=yb(o,t),a=rx(a),a=vb(a,t),a=yb(a,t),o=xb(o),a=xb(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,v=["#define varying in",t.glslVersion===Sy?"":"out highp vec4 pc_fragColor;",t.glslVersion===Sy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const M=g+w+o,S=g+v+a,b=pb(i,35633,M),C=pb(i,35632,S);if(i.attachShader(_,b),i.attachShader(_,C),t.index0AttributeName!==void 0?i.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),n.debug.checkShaderErrors){const P=i.getProgramInfoLog(_).trim(),O=i.getShaderInfoLog(b).trim(),D=i.getShaderInfoLog(C).trim();let k=!0,F=!0;if(i.getProgramParameter(_,35714)===!1){k=!1;const B=gb(i,b,"vertex"),W=gb(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,35715)+`

Program Info Log: `+P+`
`+B+`
`+W)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(O===""||D==="")&&(F=!1);F&&(this.diagnostics={runnable:k,programLog:P,vertexShader:{log:O,prefix:w},fragmentShader:{log:D,prefix:v}})}i.deleteShader(b),i.deleteShader(C);let T;this.getUniforms=function(){return T===void 0&&(T=new Uo(i,_)),T};let L;return this.getAttributes=function(){return L===void 0&&(L=Ok(i,_)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=Pk++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=b,this.fragmentShader=C,this}function Yk(n,e,t,r,i,s,o){const a=[],l=i.isWebGL2,u=i.logarithmicDepthBuffer,h=i.floatVertexTextures,m=i.maxVertexUniforms,d=i.vertexTextures;let p=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},_=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function w(T){const P=T.skeleton.bones;if(h)return 1024;{const D=Math.floor((m-20)/4),k=Math.min(D,P.length);return k<P.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+P.length+" bones. This GPU supports "+k+"."),0):k}}function v(T){let L;return T&&T.isTexture?L=T.encoding:T&&T.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),L=T.texture.encoding):L=kn,l&&T&&T.isTexture&&T.format===Gn&&T.type===Ms&&T.encoding===Nr&&(L=kn),L}function g(T,L,P,O,D){const k=O.fog,F=T.isMeshStandardMaterial?O.environment:null,B=(T.isMeshStandardMaterial?t:e).get(T.envMap||F),W=y[T.type],H=D.isSkinnedMesh?w(D):0;T.precision!==null&&(p=i.getMaxPrecision(T.precision),p!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",p,"instead."));let X,ue;if(W){const q=xi[W];X=q.vertexShader,ue=q.fragmentShader}else X=T.vertexShader,ue=T.fragmentShader;const Me=n.getRenderTarget(),Ae=T.alphaTest>0,V=T.clearcoat>0;return{isWebGL2:l,shaderID:W,shaderName:T.type,vertexShader:X,fragmentShader:ue,defines:T.defines,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:p,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:d,outputEncoding:Me!==null?v(Me.texture):n.outputEncoding,map:!!T.map,mapEncoding:v(T.map),matcap:!!T.matcap,matcapEncoding:v(T.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:v(B),envMapCubeUV:!!B&&(B.mapping===Ql||B.mapping===Pf),lightMap:!!T.lightMap,lightMapEncoding:v(T.lightMap),aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,emissiveMapEncoding:v(T.emissiveMap),bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===_T,tangentSpaceNormalMap:T.normalMapType===bo,clearcoat:V,clearcoatMap:V&&!!T.clearcoatMap,clearcoatRoughnessMap:V&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:V&&!!T.clearcoatNormalMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,specularColorMapEncoding:v(T.specularColorMap),alphaMap:!!T.alphaMap,alphaTest:Ae,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenColorMapEncoding:v(T.sheenColorMap),sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!D.geometry&&!!D.geometry.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!D.geometry&&!!D.geometry.attributes.color&&D.geometry.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||T.sheenRoughnessMap,uvsVertexOnly:!(!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatNormalMap||T.transmission>0||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheen>0||!!T.sheenColorMap||!!T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!k,useFog:T.fog,fogExp2:k&&k.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:u,skinning:D.isSkinnedMesh===!0&&H>0,maxBones:H,useVertexTexture:h,morphTargets:!!D.geometry&&!!D.geometry.morphAttributes.position,morphNormals:!!D.geometry&&!!D.geometry.morphAttributes.normal,morphTargetsCount:!!D.geometry&&!!D.geometry.morphAttributes.position?D.geometry.morphAttributes.position.length:0,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:T.format,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:ws,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===xs,flipSided:T.side===yn,depthPacking:T.depthPacking!==void 0?T.depthPacking:!1,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function M(T){const L=[];if(T.shaderID?L.push(T.shaderID):(L.push(TT(T.fragmentShader)),L.push(TT(T.vertexShader))),T.defines!==void 0)for(const P in T.defines)L.push(P),L.push(T.defines[P]);if(T.isRawShaderMaterial===!1){for(let P=0;P<_.length;P++)L.push(T[_[P]]);L.push(n.outputEncoding),L.push(n.gammaFactor)}return L.push(T.customProgramCacheKey),L.join()}function S(T){const L=y[T.type];let P;if(L){const O=xi[L];P=Jy.clone(O.uniforms)}else P=T.uniforms;return P}function b(T,L){let P;for(let O=0,D=a.length;O<D;O++){const k=a[O];if(k.cacheKey===L){P=k,++P.usedTimes;break}}return P===void 0&&(P=new qk(n,L,T,s),a.push(P)),P}function C(T){if(--T.usedTimes==0){const L=a.indexOf(T);a[L]=a[a.length-1],a.pop(),T.destroy()}}return{getParameters:g,getProgramCacheKey:M,getUniforms:S,acquireProgram:b,releaseProgram:C,programs:a}}function Jk(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Zk(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Sb(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Mb(n){const e=[];let t=0;const r=[],i=[],s=[],o={id:-1};function a(){t=0,r.length=0,i.length=0,s.length=0}function l(p,y,_,w,v,g){let M=e[t];const S=n.get(_);return M===void 0?(M={id:p.id,object:p,geometry:y,material:_,program:S.program||o,groupOrder:w,renderOrder:p.renderOrder,z:v,group:g},e[t]=M):(M.id=p.id,M.object=p,M.geometry=y,M.material=_,M.program=S.program||o,M.groupOrder=w,M.renderOrder=p.renderOrder,M.z=v,M.group=g),t++,M}function u(p,y,_,w,v,g){const M=l(p,y,_,w,v,g);_.transmission>0?i.push(M):_.transparent===!0?s.push(M):r.push(M)}function h(p,y,_,w,v,g){const M=l(p,y,_,w,v,g);_.transmission>0?i.unshift(M):_.transparent===!0?s.unshift(M):r.unshift(M)}function m(p,y){r.length>1&&r.sort(p||Zk),i.length>1&&i.sort(y||Sb),s.length>1&&s.sort(y||Sb)}function d(){for(let p=t,y=e.length;p<y;p++){const _=e[p];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.program=null,_.group=null}}return{opaque:r,transmissive:i,transparent:s,init:a,push:u,unshift:h,finish:d,sort:m}}function Qk(n){let e=new WeakMap;function t(i,s){let o;return e.has(i)===!1?(o=new Mb(n),e.set(i,[o])):s>=e.get(i).length?(o=new Mb(n),e.get(i).push(o)):o=e.get(i)[s],o}function r(){e=new WeakMap}return{get:t,dispose:r}}function Kk(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new ke};break;case"SpotLight":t={position:new N,direction:new N,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":t={color:new ke,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function $k(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Se,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let eN=0;function tN(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function nN(n,e){const t=new Kk,r=$k(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let h=0;h<9;h++)i.probe.push(new N);const s=new N,o=new qe,a=new qe;function l(h,m){let d=0,p=0,y=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let _=0,w=0,v=0,g=0,M=0,S=0,b=0,C=0;h.sort(tN);const T=m!==!0?Math.PI:1;for(let P=0,O=h.length;P<O;P++){const D=h[P],k=D.color,F=D.intensity,B=D.distance,W=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)d+=k.r*F*T,p+=k.g*F*T,y+=k.b*F*T;else if(D.isLightProbe)for(let H=0;H<9;H++)i.probe[H].addScaledVector(D.sh.coefficients[H],F);else if(D.isDirectionalLight){const H=t.get(D);if(H.color.copy(D.color).multiplyScalar(D.intensity*T),D.castShadow){const X=D.shadow,ue=r.get(D);ue.shadowBias=X.bias,ue.shadowNormalBias=X.normalBias,ue.shadowRadius=X.radius,ue.shadowMapSize=X.mapSize,i.directionalShadow[_]=ue,i.directionalShadowMap[_]=W,i.directionalShadowMatrix[_]=D.shadow.matrix,S++}i.directional[_]=H,_++}else if(D.isSpotLight){const H=t.get(D);if(H.position.setFromMatrixPosition(D.matrixWorld),H.color.copy(k).multiplyScalar(F*T),H.distance=B,H.coneCos=Math.cos(D.angle),H.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),H.decay=D.decay,D.castShadow){const X=D.shadow,ue=r.get(D);ue.shadowBias=X.bias,ue.shadowNormalBias=X.normalBias,ue.shadowRadius=X.radius,ue.shadowMapSize=X.mapSize,i.spotShadow[v]=ue,i.spotShadowMap[v]=W,i.spotShadowMatrix[v]=D.shadow.matrix,C++}i.spot[v]=H,v++}else if(D.isRectAreaLight){const H=t.get(D);H.color.copy(k).multiplyScalar(F),H.halfWidth.set(D.width*.5,0,0),H.halfHeight.set(0,D.height*.5,0),i.rectArea[g]=H,g++}else if(D.isPointLight){const H=t.get(D);if(H.color.copy(D.color).multiplyScalar(D.intensity*T),H.distance=D.distance,H.decay=D.decay,D.castShadow){const X=D.shadow,ue=r.get(D);ue.shadowBias=X.bias,ue.shadowNormalBias=X.normalBias,ue.shadowRadius=X.radius,ue.shadowMapSize=X.mapSize,ue.shadowCameraNear=X.camera.near,ue.shadowCameraFar=X.camera.far,i.pointShadow[w]=ue,i.pointShadowMap[w]=W,i.pointShadowMatrix[w]=D.shadow.matrix,b++}i.point[w]=H,w++}else if(D.isHemisphereLight){const H=t.get(D);H.skyColor.copy(D.color).multiplyScalar(F*T),H.groundColor.copy(D.groundColor).multiplyScalar(F*T),i.hemi[M]=H,M++}}g>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_FLOAT_1,i.rectAreaLTC2=Ue.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ue.LTC_HALF_1,i.rectAreaLTC2=Ue.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=p,i.ambient[2]=y;const L=i.hash;(L.directionalLength!==_||L.pointLength!==w||L.spotLength!==v||L.rectAreaLength!==g||L.hemiLength!==M||L.numDirectionalShadows!==S||L.numPointShadows!==b||L.numSpotShadows!==C)&&(i.directional.length=_,i.spot.length=v,i.rectArea.length=g,i.point.length=w,i.hemi.length=M,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=b,i.spotShadowMatrix.length=C,L.directionalLength=_,L.pointLength=w,L.spotLength=v,L.rectAreaLength=g,L.hemiLength=M,L.numDirectionalShadows=S,L.numPointShadows=b,L.numSpotShadows=C,i.version=eN++)}function u(h,m){let d=0,p=0,y=0,_=0,w=0;const v=m.matrixWorldInverse;for(let g=0,M=h.length;g<M;g++){const S=h[g];if(S.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),d++}else if(S.isSpotLight){const b=i.spot[y];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(v),y++}else if(S.isRectAreaLight){const b=i.rectArea[_];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(v),a.identity(),o.copy(S.matrixWorld),o.premultiply(v),a.extractRotation(o),b.halfWidth.set(S.width*.5,0,0),b.halfHeight.set(0,S.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),_++}else if(S.isPointLight){const b=i.point[p];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(v),p++}else if(S.isHemisphereLight){const b=i.hemi[w];b.direction.setFromMatrixPosition(S.matrixWorld),b.direction.transformDirection(v),b.direction.normalize(),w++}}}return{setup:l,setupView:u,state:i}}function Eb(n,e){const t=new nN(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(m){r.push(m)}function a(m){i.push(m)}function l(m){t.setup(r,m)}function u(m){t.setupView(r,m)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function rN(n,e){let t=new WeakMap;function r(s,o=0){let a;return t.has(s)===!1?(a=new Eb(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new Eb(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function i(){t=new WeakMap}return{get:r,dispose:i}}class Xf extends wn{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=xT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Xf.prototype.isMeshDepthMaterial=!0;class qf extends wn{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new N,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}qf.prototype.isMeshDistanceMaterial=!0;const iN=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sN=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Tb(n,e,t){let r=new Vf;const i=new Se,s=new Se,o=new Ct,a=new Xf({depthPacking:wy}),l=new qf,u={},h=t.maxTextureSize,m={0:yn,1:Mo,2:xs},d=new Rs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Se},radius:{value:4}},vertexShader:iN,fragmentShader:sN}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const y=new et;y.setAttribute("position",new _t(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Gt(y,d),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=J0,this.render=function(S,b,C){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||S.length===0)return;const T=n.getRenderTarget(),L=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),O=n.state;O.setBlending(_s),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);for(let D=0,k=S.length;D<k;D++){const F=S[D],B=F.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const W=B.getFrameExtents();if(i.multiply(W),s.copy(B.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/W.x),i.x=s.x*W.x,B.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/W.y),i.y=s.y*W.y,B.mapSize.y=s.y)),B.map===null&&!B.isPointLightShadow&&this.type===Jl){const X={minFilter:Kt,magFilter:Kt,format:Gn};B.map=new mi(i.x,i.y,X),B.map.texture.name=F.name+".shadowMap",B.mapPass=new mi(i.x,i.y,X),B.camera.updateProjectionMatrix()}if(B.map===null){const X={minFilter:xn,magFilter:xn,format:Gn};B.map=new mi(i.x,i.y,X),B.map.texture.name=F.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const H=B.getViewportCount();for(let X=0;X<H;X++){const ue=B.getViewport(X);o.set(s.x*ue.x,s.y*ue.y,s.x*ue.z,s.y*ue.w),O.viewport(o),B.updateMatrices(F,X),r=B.getFrustum(),M(b,C,B.camera,F,this.type)}!B.isPointLightShadow&&this.type===Jl&&v(B,C),B.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(T,L,P)};function v(S,b){const C=e.update(_);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,p.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(b,null,C,d,_,null),p.uniforms.shadow_pass.value=S.mapPass.texture,p.uniforms.resolution.value=S.mapSize,p.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(b,null,C,p,_,null)}function g(S,b,C,T,L,P,O){let D=null;const k=T.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(k!==void 0?D=k:D=T.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const F=D.uuid,B=C.uuid;let W=u[F];W===void 0&&(W={},u[F]=W);let H=W[B];H===void 0&&(H=D.clone(),W[B]=H),D=H}return D.visible=C.visible,D.wireframe=C.wireframe,O===Jl?D.side=C.shadowSide!==null?C.shadowSide:C.side:D.side=C.shadowSide!==null?C.shadowSide:m[C.side],D.alphaMap=C.alphaMap,D.alphaTest=C.alphaTest,D.clipShadows=C.clipShadows,D.clippingPlanes=C.clippingPlanes,D.clipIntersection=C.clipIntersection,D.displacementMap=C.displacementMap,D.displacementScale=C.displacementScale,D.displacementBias=C.displacementBias,D.wireframeLinewidth=C.wireframeLinewidth,D.linewidth=C.linewidth,T.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(T.matrixWorld),D.nearDistance=L,D.farDistance=P),D}function M(S,b,C,T,L){if(S.visible===!1)return;if(S.layers.test(b.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&L===Jl)&&(!S.frustumCulled||r.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,S.matrixWorld);const D=e.update(S),k=S.material;if(Array.isArray(k)){const F=D.groups;for(let B=0,W=F.length;B<W;B++){const H=F[B],X=k[H.materialIndex];if(X&&X.visible){const ue=g(S,D,X,T,C.near,C.far,L);n.renderBufferDirect(C,null,D,ue,S,H)}}}else if(k.visible){const F=g(S,D,k,T,C.near,C.far,L);n.renderBufferDirect(C,null,D,F,S,null)}}const O=S.children;for(let D=0,k=O.length;D<k;D++)M(O[D],b,C,T,L)}}function oN(n,e,t){const r=t.isWebGL2;function i(){let j=!1;const K=new Ct;let ie=null;const De=new Ct(0,0,0,0);return{setMask:function(Ie){ie!==Ie&&!j&&(n.colorMask(Ie,Ie,Ie,Ie),ie=Ie)},setLocked:function(Ie){j=Ie},setClear:function(Ie,We,ft,je,Xe){Xe===!0&&(Ie*=je,We*=je,ft*=je),K.set(Ie,We,ft,je),De.equals(K)===!1&&(n.clearColor(Ie,We,ft,je),De.copy(K))},reset:function(){j=!1,ie=null,De.set(-1,0,0,0)}}}function s(){let j=!1,K=null,ie=null,De=null;return{setTest:function(Ie){Ie?re(2929):ye(2929)},setMask:function(Ie){K!==Ie&&!j&&(n.depthMask(Ie),K=Ie)},setFunc:function(Ie){if(ie!==Ie){if(Ie)switch(Ie){case lE:n.depthFunc(512);break;case uE:n.depthFunc(519);break;case cE:n.depthFunc(513);break;case xp:n.depthFunc(515);break;case fE:n.depthFunc(514);break;case dE:n.depthFunc(518);break;case hE:n.depthFunc(516);break;case pE:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ie=Ie}},setLocked:function(Ie){j=Ie},setClear:function(Ie){De!==Ie&&(n.clearDepth(Ie),De=Ie)},reset:function(){j=!1,K=null,ie=null,De=null}}}function o(){let j=!1,K=null,ie=null,De=null,Ie=null,We=null,ft=null,je=null,Xe=null;return{setTest:function(nt){j||(nt?re(2960):ye(2960))},setMask:function(nt){K!==nt&&!j&&(n.stencilMask(nt),K=nt)},setFunc:function(nt,ut,Ft){(ie!==nt||De!==ut||Ie!==Ft)&&(n.stencilFunc(nt,ut,Ft),ie=nt,De=ut,Ie=Ft)},setOp:function(nt,ut,Ft){(We!==nt||ft!==ut||je!==Ft)&&(n.stencilOp(nt,ut,Ft),We=nt,ft=ut,je=Ft)},setLocked:function(nt){j=nt},setClear:function(nt){Xe!==nt&&(n.clearStencil(nt),Xe=nt)},reset:function(){j=!1,K=null,ie=null,De=null,Ie=null,We=null,ft=null,je=null,Xe=null}}}const a=new i,l=new s,u=new o;let h={},m=null,d={},p=null,y=!1,_=null,w=null,v=null,g=null,M=null,S=null,b=null,C=!1,T=null,L=null,P=null,O=null,D=null;const k=n.getParameter(35661);let F=!1,B=0;const W=n.getParameter(7938);W.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(W)[1]),F=B>=1):W.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),F=B>=2);let H=null,X={};const ue=n.getParameter(3088),Me=n.getParameter(2978),Ae=new Ct().fromArray(ue),V=new Ct().fromArray(Me);function te(j,K,ie){const De=new Uint8Array(4),Ie=n.createTexture();n.bindTexture(j,Ie),n.texParameteri(j,10241,9728),n.texParameteri(j,10240,9728);for(let We=0;We<ie;We++)n.texImage2D(K+We,0,6408,1,1,0,6408,5121,De);return Ie}const q={};q[3553]=te(3553,3553,1),q[34067]=te(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),re(2929),l.setFunc(xp),xe(!1),_e(Y0),re(2884),Ce(_s);function re(j){h[j]!==!0&&(n.enable(j),h[j]=!0)}function ye(j){h[j]!==!1&&(n.disable(j),h[j]=!1)}function $(j){j!==m&&(n.bindFramebuffer(36160,j),m=j)}function Te(j,K){return K===null&&m!==null&&(K=m),d[j]!==K?(n.bindFramebuffer(j,K),d[j]=K,r&&(j===36009&&(d[36160]=K),j===36160&&(d[36009]=K)),!0):!1}function Le(j){return p!==j?(n.useProgram(j),p=j,!0):!1}const Ee={[Aa]:32774,[QM]:32778,[KM]:32779};if(r)Ee[ty]=32775,Ee[ny]=32776;else{const j=e.get("EXT_blend_minmax");j!==null&&(Ee[ty]=j.MIN_EXT,Ee[ny]=j.MAX_EXT)}const Re={[$M]:0,[eE]:1,[tE]:768,[ry]:770,[aE]:776,[sE]:774,[rE]:772,[nE]:769,[iy]:771,[oE]:775,[iE]:773};function Ce(j,K,ie,De,Ie,We,ft,je){if(j===_s){y===!0&&(ye(3042),y=!1);return}if(y===!1&&(re(3042),y=!0),j!==ZM){if(j!==_||je!==C){if((w!==Aa||M!==Aa)&&(n.blendEquation(32774),w=Aa,M=Aa),je)switch(j){case Zl:n.blendFuncSeparate(1,771,1,771);break;case K0:n.blendFunc(1,1);break;case $0:n.blendFuncSeparate(0,0,769,771);break;case ey:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case Zl:n.blendFuncSeparate(770,771,1,771);break;case K0:n.blendFunc(770,1);break;case $0:n.blendFunc(0,769);break;case ey:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}v=null,g=null,S=null,b=null,_=j,C=je}return}Ie=Ie||K,We=We||ie,ft=ft||De,(K!==w||Ie!==M)&&(n.blendEquationSeparate(Ee[K],Ee[Ie]),w=K,M=Ie),(ie!==v||De!==g||We!==S||ft!==b)&&(n.blendFuncSeparate(Re[ie],Re[De],Re[We],Re[ft]),v=ie,g=De,S=We,b=ft),_=j,C=null}function ce(j,K){j.side===xs?ye(2884):re(2884);let ie=j.side===yn;K&&(ie=!ie),xe(ie),j.blending===Zl&&j.transparent===!1?Ce(_s):Ce(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.premultipliedAlpha),l.setFunc(j.depthFunc),l.setTest(j.depthTest),l.setMask(j.depthWrite),a.setMask(j.colorWrite);const De=j.stencilWrite;u.setTest(De),De&&(u.setMask(j.stencilWriteMask),u.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),u.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),be(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?re(32926):ye(32926)}function xe(j){T!==j&&(j?n.frontFace(2304):n.frontFace(2305),T=j)}function _e(j){j!==YM?(re(2884),j!==L&&(j===Y0?n.cullFace(1029):j===JM?n.cullFace(1028):n.cullFace(1032))):ye(2884),L=j}function Pe(j){j!==P&&(F&&n.lineWidth(j),P=j)}function be(j,K,ie){j?(re(32823),(O!==K||D!==ie)&&(n.polygonOffset(K,ie),O=K,D=ie)):ye(32823)}function G(j){j?re(3089):ye(3089)}function I(j){j===void 0&&(j=33984+k-1),H!==j&&(n.activeTexture(j),H=j)}function Q(j,K){H===null&&I();let ie=X[H];ie===void 0&&(ie={type:void 0,texture:void 0},X[H]=ie),(ie.type!==j||ie.texture!==K)&&(n.bindTexture(j,K||q[j]),ie.type=j,ie.texture=K)}function ae(){const j=X[H];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function Z(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function fe(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function le(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function se(j){Ae.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),Ae.copy(j))}function pe(j){V.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),V.copy(j))}function ve(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},H=null,X={},m=null,d={},p=null,y=!1,_=null,w=null,v=null,g=null,M=null,S=null,b=null,C=!1,T=null,L=null,P=null,O=null,D=null,Ae.set(0,0,n.canvas.width,n.canvas.height),V.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:re,disable:ye,bindFramebuffer:Te,bindXRFramebuffer:$,useProgram:Le,setBlending:Ce,setMaterial:ce,setFlipSided:xe,setCullFace:_e,setLineWidth:Pe,setPolygonOffset:be,setScissorTest:G,activeTexture:I,bindTexture:Q,unbindTexture:ae,compressedTexImage2D:Z,texImage2D:fe,texImage3D:le,scissor:se,viewport:pe,reset:ve}}function aN(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,m=i.maxSamples,d=new WeakMap;let p,y=!1;try{y=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(G,I){return y?new OffscreenCanvas(G,I):Cp("canvas")}function w(G,I,Q,ae){let Z=1;if((G.width>ae||G.height>ae)&&(Z=ae/Math.max(G.width,G.height)),Z<1||I===!0)if(typeof HTMLImageElement!="undefined"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&G instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&G instanceof ImageBitmap){const fe=I?MT:Math.floor,le=fe(Z*G.width),se=fe(Z*G.height);p===void 0&&(p=_(le,se));const pe=Q?_(le,se):p;return pe.width=le,pe.height=se,pe.getContext("2d").drawImage(G,0,0,le,se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+le+"x"+se+")."),pe}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function v(G){return Ey(G.width)&&Ey(G.height)}function g(G){return a?!1:G.wrapS!==zn||G.wrapT!==zn||G.minFilter!==xn&&G.minFilter!==Kt}function M(G,I){return G.generateMipmaps&&I&&G.minFilter!==xn&&G.minFilter!==Kt}function S(G,I,Q,ae,Z=1){n.generateMipmap(G);const fe=r.get(I);fe.__maxMipLevel=Math.log2(Math.max(Q,ae,Z))}function b(G,I,Q,ae){if(a===!1)return I;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Z=I;return I===6403&&(Q===5126&&(Z=33326),Q===5131&&(Z=33325),Q===5121&&(Z=33321)),I===6407&&(Q===5126&&(Z=34837),Q===5131&&(Z=34843),Q===5121&&(Z=32849)),I===6408&&(Q===5126&&(Z=34836),Q===5131&&(Z=34842),Q===5121&&(Z=ae===Nr?35907:32856)),(Z===33325||Z===33326||Z===34842||Z===34836)&&e.get("EXT_color_buffer_float"),Z}function C(G){return G===xn||G===If||G===Df?9728:9729}function T(G){const I=G.target;I.removeEventListener("dispose",T),P(I),I.isVideoTexture&&d.delete(I),o.memory.textures--}function L(G){const I=G.target;I.removeEventListener("dispose",L),O(I)}function P(G){const I=r.get(G);I.__webglInit!==void 0&&(n.deleteTexture(I.__webglTexture),r.remove(G))}function O(G){const I=G.texture,Q=r.get(G),ae=r.get(I);if(!!G){if(ae.__webglTexture!==void 0&&(n.deleteTexture(ae.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let Z=0;Z<6;Z++)n.deleteFramebuffer(Q.__webglFramebuffer[Z]),Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer[Z]);else n.deleteFramebuffer(Q.__webglFramebuffer),Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer&&n.deleteRenderbuffer(Q.__webglColorRenderbuffer),Q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Q.__webglDepthRenderbuffer);if(G.isWebGLMultipleRenderTargets)for(let Z=0,fe=I.length;Z<fe;Z++){const le=r.get(I[Z]);le.__webglTexture&&(n.deleteTexture(le.__webglTexture),o.memory.textures--),r.remove(I[Z])}r.remove(I),r.remove(G)}}let D=0;function k(){D=0}function F(){const G=D;return G>=l&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+l),D+=1,G}function B(G,I){const Q=r.get(G);if(G.isVideoTexture&&ce(G),G.version>0&&Q.__version!==G.version){const ae=G.image;if(ae===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(Q,G,I);return}}t.activeTexture(33984+I),t.bindTexture(3553,Q.__webglTexture)}function W(G,I){const Q=r.get(G);if(G.version>0&&Q.__version!==G.version){te(Q,G,I);return}t.activeTexture(33984+I),t.bindTexture(35866,Q.__webglTexture)}function H(G,I){const Q=r.get(G);if(G.version>0&&Q.__version!==G.version){te(Q,G,I);return}t.activeTexture(33984+I),t.bindTexture(32879,Q.__webglTexture)}function X(G,I){const Q=r.get(G);if(G.version>0&&Q.__version!==G.version){q(Q,G,I);return}t.activeTexture(33984+I),t.bindTexture(34067,Q.__webglTexture)}const ue={[Eo]:10497,[zn]:33071,[Kl]:33648},Me={[xn]:9728,[If]:9984,[Df]:9986,[Kt]:9729,[wp]:9985,[Ss]:9987};function Ae(G,I,Q){if(Q?(n.texParameteri(G,10242,ue[I.wrapS]),n.texParameteri(G,10243,ue[I.wrapT]),(G===32879||G===35866)&&n.texParameteri(G,32882,ue[I.wrapR]),n.texParameteri(G,10240,Me[I.magFilter]),n.texParameteri(G,10241,Me[I.minFilter])):(n.texParameteri(G,10242,33071),n.texParameteri(G,10243,33071),(G===32879||G===35866)&&n.texParameteri(G,32882,33071),(I.wrapS!==zn||I.wrapT!==zn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,10240,C(I.magFilter)),n.texParameteri(G,10241,C(I.minFilter)),I.minFilter!==xn&&I.minFilter!==Kt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ae=e.get("EXT_texture_filter_anisotropic");if(I.type===Gi&&e.has("OES_texture_float_linear")===!1||a===!1&&I.type===Ra&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||r.get(I).__currentAnisotropy)&&(n.texParameterf(G,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,i.getMaxAnisotropy())),r.get(I).__currentAnisotropy=I.anisotropy)}}function V(G,I){G.__webglInit===void 0&&(G.__webglInit=!0,I.addEventListener("dispose",T),G.__webglTexture=n.createTexture(),o.memory.textures++)}function te(G,I,Q){let ae=3553;I.isDataTexture2DArray&&(ae=35866),I.isDataTexture3D&&(ae=32879),V(G,I),t.activeTexture(33984+Q),t.bindTexture(ae,G.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const Z=g(I)&&v(I.image)===!1,fe=w(I.image,Z,!1,h),le=v(fe)||a,se=s.convert(I.format);let pe=s.convert(I.type),ve=b(I.internalFormat,se,pe,I.encoding);Ae(ae,I,le);let j;const K=I.mipmaps;if(I.isDepthTexture)ve=6402,a?I.type===Gi?ve=36012:I.type===kf?ve=33190:I.type===$l?ve=35056:ve=33189:I.type===Gi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Pa&&ve===6402&&I.type!==Ff&&I.type!==kf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Ff,pe=s.convert(I.type)),I.format===eu&&ve===6402&&(ve=34041,I.type!==$l&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=$l,pe=s.convert(I.type))),t.texImage2D(3553,0,ve,fe.width,fe.height,0,se,pe,null);else if(I.isDataTexture)if(K.length>0&&le){for(let ie=0,De=K.length;ie<De;ie++)j=K[ie],t.texImage2D(3553,ie,ve,j.width,j.height,0,se,pe,j.data);I.generateMipmaps=!1,G.__maxMipLevel=K.length-1}else t.texImage2D(3553,0,ve,fe.width,fe.height,0,se,pe,fe.data),G.__maxMipLevel=0;else if(I.isCompressedTexture){for(let ie=0,De=K.length;ie<De;ie++)j=K[ie],I.format!==Gn&&I.format!==To?se!==null?t.compressedTexImage2D(3553,ie,ve,j.width,j.height,0,j.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ie,ve,j.width,j.height,0,se,pe,j.data);G.__maxMipLevel=K.length-1}else if(I.isDataTexture2DArray)t.texImage3D(35866,0,ve,fe.width,fe.height,fe.depth,0,se,pe,fe.data),G.__maxMipLevel=0;else if(I.isDataTexture3D)t.texImage3D(32879,0,ve,fe.width,fe.height,fe.depth,0,se,pe,fe.data),G.__maxMipLevel=0;else if(K.length>0&&le){for(let ie=0,De=K.length;ie<De;ie++)j=K[ie],t.texImage2D(3553,ie,ve,se,pe,j);I.generateMipmaps=!1,G.__maxMipLevel=K.length-1}else t.texImage2D(3553,0,ve,se,pe,fe),G.__maxMipLevel=0;M(I,le)&&S(ae,I,fe.width,fe.height),G.__version=I.version,I.onUpdate&&I.onUpdate(I)}function q(G,I,Q){if(I.image.length!==6)return;V(G,I),t.activeTexture(33984+Q),t.bindTexture(34067,G.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const ae=I&&(I.isCompressedTexture||I.image[0].isCompressedTexture),Z=I.image[0]&&I.image[0].isDataTexture,fe=[];for(let ie=0;ie<6;ie++)!ae&&!Z?fe[ie]=w(I.image[ie],!1,!0,u):fe[ie]=Z?I.image[ie].image:I.image[ie];const le=fe[0],se=v(le)||a,pe=s.convert(I.format),ve=s.convert(I.type),j=b(I.internalFormat,pe,ve,I.encoding);Ae(34067,I,se);let K;if(ae){for(let ie=0;ie<6;ie++){K=fe[ie].mipmaps;for(let De=0;De<K.length;De++){const Ie=K[De];I.format!==Gn&&I.format!==To?pe!==null?t.compressedTexImage2D(34069+ie,De,j,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ie,De,j,Ie.width,Ie.height,0,pe,ve,Ie.data)}}G.__maxMipLevel=K.length-1}else{K=I.mipmaps;for(let ie=0;ie<6;ie++)if(Z){t.texImage2D(34069+ie,0,j,fe[ie].width,fe[ie].height,0,pe,ve,fe[ie].data);for(let De=0;De<K.length;De++){const We=K[De].image[ie].image;t.texImage2D(34069+ie,De+1,j,We.width,We.height,0,pe,ve,We.data)}}else{t.texImage2D(34069+ie,0,j,pe,ve,fe[ie]);for(let De=0;De<K.length;De++){const Ie=K[De];t.texImage2D(34069+ie,De+1,j,pe,ve,Ie.image[ie])}}G.__maxMipLevel=K.length}M(I,se)&&S(34067,I,le.width,le.height),G.__version=I.version,I.onUpdate&&I.onUpdate(I)}function re(G,I,Q,ae,Z){const fe=s.convert(Q.format),le=s.convert(Q.type),se=b(Q.internalFormat,fe,le,Q.encoding);Z===32879||Z===35866?t.texImage3D(Z,0,se,I.width,I.height,I.depth,0,fe,le,null):t.texImage2D(Z,0,se,I.width,I.height,0,fe,le,null),t.bindFramebuffer(36160,G),n.framebufferTexture2D(36160,ae,Z,r.get(Q).__webglTexture,0),t.bindFramebuffer(36160,null)}function ye(G,I,Q){if(n.bindRenderbuffer(36161,G),I.depthBuffer&&!I.stencilBuffer){let ae=33189;if(Q){const Z=I.depthTexture;Z&&Z.isDepthTexture&&(Z.type===Gi?ae=36012:Z.type===kf&&(ae=33190));const fe=Ce(I);n.renderbufferStorageMultisample(36161,fe,ae,I.width,I.height)}else n.renderbufferStorage(36161,ae,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,G)}else if(I.depthBuffer&&I.stencilBuffer){if(Q){const ae=Ce(I);n.renderbufferStorageMultisample(36161,ae,35056,I.width,I.height)}else n.renderbufferStorage(36161,34041,I.width,I.height);n.framebufferRenderbuffer(36160,33306,36161,G)}else{const ae=I.isWebGLMultipleRenderTargets===!0?I.texture[0]:I.texture,Z=s.convert(ae.format),fe=s.convert(ae.type),le=b(ae.internalFormat,Z,fe,ae.encoding);if(Q){const se=Ce(I);n.renderbufferStorageMultisample(36161,se,le,I.width,I.height)}else n.renderbufferStorage(36161,le,I.width,I.height)}n.bindRenderbuffer(36161,null)}function $(G,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,G),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),B(I.depthTexture,0);const ae=r.get(I.depthTexture).__webglTexture;if(I.depthTexture.format===Pa)n.framebufferTexture2D(36160,36096,3553,ae,0);else if(I.depthTexture.format===eu)n.framebufferTexture2D(36160,33306,3553,ae,0);else throw new Error("Unknown depthTexture format")}function Te(G){const I=r.get(G),Q=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");$(I.__webglFramebuffer,G)}else if(Q){I.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)t.bindFramebuffer(36160,I.__webglFramebuffer[ae]),I.__webglDepthbuffer[ae]=n.createRenderbuffer(),ye(I.__webglDepthbuffer[ae],G,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),ye(I.__webglDepthbuffer,G,!1);t.bindFramebuffer(36160,null)}function Le(G){const I=G.texture,Q=r.get(G),ae=r.get(I);G.addEventListener("dispose",L),G.isWebGLMultipleRenderTargets!==!0&&(ae.__webglTexture=n.createTexture(),ae.__version=I.version,o.memory.textures++);const Z=G.isWebGLCubeRenderTarget===!0,fe=G.isWebGLMultipleRenderTargets===!0,le=G.isWebGLMultisampleRenderTarget===!0,se=I.isDataTexture3D||I.isDataTexture2DArray,pe=v(G)||a;if(a&&I.format===To&&(I.type===Gi||I.type===Ra)&&(I.format=Gn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Z){Q.__webglFramebuffer=[];for(let ve=0;ve<6;ve++)Q.__webglFramebuffer[ve]=n.createFramebuffer()}else if(Q.__webglFramebuffer=n.createFramebuffer(),fe)if(i.drawBuffers){const ve=G.texture;for(let j=0,K=ve.length;j<K;j++){const ie=r.get(ve[j]);ie.__webglTexture===void 0&&(ie.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(le)if(a){Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,Q.__webglColorRenderbuffer);const ve=s.convert(I.format),j=s.convert(I.type),K=b(I.internalFormat,ve,j,I.encoding),ie=Ce(G);n.renderbufferStorageMultisample(36161,ie,K,G.width,G.height),t.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,Q.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),G.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(Q.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Z){t.bindTexture(34067,ae.__webglTexture),Ae(34067,I,pe);for(let ve=0;ve<6;ve++)re(Q.__webglFramebuffer[ve],G,I,36064,34069+ve);M(I,pe)&&S(34067,I,G.width,G.height),t.unbindTexture()}else if(fe){const ve=G.texture;for(let j=0,K=ve.length;j<K;j++){const ie=ve[j],De=r.get(ie);t.bindTexture(3553,De.__webglTexture),Ae(3553,ie,pe),re(Q.__webglFramebuffer,G,ie,36064+j,3553),M(ie,pe)&&S(3553,ie,G.width,G.height)}t.unbindTexture()}else{let ve=3553;se&&(a?ve=I.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ve,ae.__webglTexture),Ae(ve,I,pe),re(Q.__webglFramebuffer,G,I,36064,ve),M(I,pe)&&S(ve,I,G.width,G.height,G.depth),t.unbindTexture()}G.depthBuffer&&Te(G)}function Ee(G){const I=v(G)||a,Q=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let ae=0,Z=Q.length;ae<Z;ae++){const fe=Q[ae];if(M(fe,I)){const le=G.isWebGLCubeRenderTarget?34067:3553,se=r.get(fe).__webglTexture;t.bindTexture(le,se),S(le,fe,G.width,G.height),t.unbindTexture()}}}function Re(G){if(G.isWebGLMultisampleRenderTarget)if(a){const I=G.width,Q=G.height;let ae=16384;G.depthBuffer&&(ae|=256),G.stencilBuffer&&(ae|=1024);const Z=r.get(G);t.bindFramebuffer(36008,Z.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Z.__webglFramebuffer),n.blitFramebuffer(0,0,I,Q,0,0,I,Q,ae,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Z.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Ce(G){return a&&G.isWebGLMultisampleRenderTarget?Math.min(m,G.samples):0}function ce(G){const I=o.render.frame;d.get(G)!==I&&(d.set(G,I),G.update())}let xe=!1,_e=!1;function Pe(G,I){G&&G.isWebGLRenderTarget&&(xe===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),xe=!0),G=G.texture),B(G,I)}function be(G,I){G&&G.isWebGLCubeRenderTarget&&(_e===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),_e=!0),G=G.texture),X(G,I)}this.allocateTextureUnit=F,this.resetTextureUnits=k,this.setTexture2D=B,this.setTexture2DArray=W,this.setTexture3D=H,this.setTextureCube=X,this.setupRenderTarget=Le,this.updateRenderTargetMipmap=Ee,this.updateMultisampleRenderTarget=Re,this.safeSetTexture2D=Pe,this.safeSetTextureCube=be}function bb(n,e,t){const r=t.isWebGL2;function i(s){let o;if(s===Ms)return 5121;if(s===EE)return 32819;if(s===TE)return 32820;if(s===bE)return 33635;if(s===wE)return 5120;if(s===SE)return 5122;if(s===Ff)return 5123;if(s===ME)return 5124;if(s===kf)return 5125;if(s===Gi)return 5126;if(s===Ra)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===AE)return 6406;if(s===To)return 6407;if(s===Gn)return 6408;if(s===CE)return 6409;if(s===LE)return 6410;if(s===Pa)return 6402;if(s===eu)return 34041;if(s===PE)return 6403;if(s===IE)return 36244;if(s===DE)return 33319;if(s===FE)return 33320;if(s===kE)return 36248;if(s===NE)return 36249;if(s===oy||s===ay||s===ly||s===uy)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===oy)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ay)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ly)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===uy)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===cy||s===fy||s===dy||s===hy)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===cy)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===fy)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===dy)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===hy)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===OE)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===py||s===my)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===py)return o.COMPRESSED_RGB8_ETC2;if(s===my)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===UE||s===BE||s===zE||s===GE||s===HE||s===VE||s===WE||s===jE||s===XE||s===qE||s===YE||s===JE||s===ZE||s===QE||s===$E||s===eT||s===tT||s===nT||s===rT||s===iT||s===sT||s===oT||s===aT||s===lT||s===uT||s===cT||s===fT||s===dT)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===KE)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===$l)return r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class ix extends ln{constructor(e=[]){super();this.cameras=e}}ix.prototype.isArrayCamera=!0;class _i extends mt{constructor(){super();this.type="Group"}}_i.prototype.isGroup=!0;const lN={type:"move"};class sx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _i,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _i,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _i,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(i=t.getPose(e.targetRaySpace,r),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(lN))),u&&e.hand){o=!0;for(const _ of e.hand.values()){const w=t.getJointPose(_,r);if(u.joints[_.jointName]===void 0){const g=new _i;g.matrixAutoUpdate=!1,g.visible=!1,u.joints[_.jointName]=g,u.add(g)}const v=u.joints[_.jointName];w!==null&&(v.matrix.fromArray(w.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=w.radius),v.visible=w!==null}const h=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],d=h.position.distanceTo(m.position),p=.02,y=.005;u.inputState.pinching&&d>p+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=p-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}}class uN extends Es{constructor(e,t){super();const r=this,i=e.state;let s=null,o=1,a=null,l="local-floor",u=null,h=null,m=null,d=null,p=null,y=!1,_=null,w=null,v=null,g=null,M=null,S=null;const b=[],C=new Map,T=new ln;T.layers.enable(1),T.viewport=new Ct;const L=new ln;L.layers.enable(2),L.viewport=new Ct;const P=[T,L],O=new ix;O.layers.enable(1),O.layers.enable(2);let D=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let re=b[q];return re===void 0&&(re=new sx,b[q]=re),re.getTargetRaySpace()},this.getControllerGrip=function(q){let re=b[q];return re===void 0&&(re=new sx,b[q]=re),re.getGripSpace()},this.getHand=function(q){let re=b[q];return re===void 0&&(re=new sx,b[q]=re),re.getHandSpace()};function F(q){const re=C.get(q.inputSource);re&&re.dispatchEvent({type:q.type,data:q.inputSource})}function B(){C.forEach(function(q,re){q.disconnect(re)}),C.clear(),D=null,k=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),m&&t.deleteFramebuffer(m),_&&t.deleteFramebuffer(_),w&&t.deleteRenderbuffer(w),v&&t.deleteRenderbuffer(v),m=null,_=null,w=null,v=null,p=null,d=null,h=null,s=null,te.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){o=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){l=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(q){if(s=q,s!==null){s.addEventListener("select",F),s.addEventListener("selectstart",F),s.addEventListener("selectend",F),s.addEventListener("squeeze",F),s.addEventListener("squeezestart",F),s.addEventListener("squeezeend",F),s.addEventListener("end",B),s.addEventListener("inputsourceschange",W);const re=t.getContextAttributes();if(re.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const ye={antialias:re.antialias,alpha:re.alpha,depth:re.depth,stencil:re.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(s,t,ye),s.updateRenderState({baseLayer:p})}else if(t instanceof WebGLRenderingContext){const ye={antialias:!0,alpha:re.alpha,depth:re.depth,stencil:re.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(s,t,ye),s.updateRenderState({layers:[p]})}else{y=re.antialias;let ye=null;re.depth&&(S=256,re.stencil&&(S|=1024),M=re.stencil?33306:36096,ye=re.stencil?35056:33190);const $={colorFormat:re.alpha?32856:32849,depthFormat:ye,scaleFactor:o};h=new XRWebGLBinding(s,t),d=h.createProjectionLayer($),m=t.createFramebuffer(),s.updateRenderState({layers:[d]}),y&&(_=t.createFramebuffer(),w=t.createRenderbuffer(),t.bindRenderbuffer(36161,w),t.renderbufferStorageMultisample(36161,4,32856,d.textureWidth,d.textureHeight),i.bindFramebuffer(36160,_),t.framebufferRenderbuffer(36160,36064,36161,w),t.bindRenderbuffer(36161,null),ye!==null&&(v=t.createRenderbuffer(),t.bindRenderbuffer(36161,v),t.renderbufferStorageMultisample(36161,4,ye,d.textureWidth,d.textureHeight),t.framebufferRenderbuffer(36160,M,36161,v),t.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(l),te.setContext(s),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function W(q){const re=s.inputSources;for(let ye=0;ye<b.length;ye++)C.set(re[ye],b[ye]);for(let ye=0;ye<q.removed.length;ye++){const $=q.removed[ye],Te=C.get($);Te&&(Te.dispatchEvent({type:"disconnected",data:$}),C.delete($))}for(let ye=0;ye<q.added.length;ye++){const $=q.added[ye],Te=C.get($);Te&&Te.dispatchEvent({type:"connected",data:$})}}const H=new N,X=new N;function ue(q,re,ye){H.setFromMatrixPosition(re.matrixWorld),X.setFromMatrixPosition(ye.matrixWorld);const $=H.distanceTo(X),Te=re.projectionMatrix.elements,Le=ye.projectionMatrix.elements,Ee=Te[14]/(Te[10]-1),Re=Te[14]/(Te[10]+1),Ce=(Te[9]+1)/Te[5],ce=(Te[9]-1)/Te[5],xe=(Te[8]-1)/Te[0],_e=(Le[8]+1)/Le[0],Pe=Ee*xe,be=Ee*_e,G=$/(-xe+_e),I=G*-xe;re.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(I),q.translateZ(G),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const Q=Ee+G,ae=Re+G,Z=Pe-I,fe=be+($-I),le=Ce*Re/ae*Q,se=ce*Re/ae*Q;q.projectionMatrix.makePerspective(Z,fe,le,se,Q,ae)}function Me(q,re){re===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(re.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(s===null)return;O.near=L.near=T.near=q.near,O.far=L.far=T.far=q.far,(D!==O.near||k!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),D=O.near,k=O.far);const re=q.parent,ye=O.cameras;Me(O,re);for(let Te=0;Te<ye.length;Te++)Me(ye[Te],re);O.matrixWorld.decompose(O.position,O.quaternion,O.scale),q.position.copy(O.position),q.quaternion.copy(O.quaternion),q.scale.copy(O.scale),q.matrix.copy(O.matrix),q.matrixWorld.copy(O.matrixWorld);const $=q.children;for(let Te=0,Le=$.length;Te<Le;Te++)$[Te].updateMatrixWorld(!0);ye.length===2?ue(O,T,L):O.projectionMatrix.copy(T.projectionMatrix)},this.getCamera=function(){return O},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(p!==null)return p.fixedFoveation},this.setFoveation=function(q){d!==null&&(d.fixedFoveation=q),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=q)};let Ae=null;function V(q,re){if(u=re.getViewerPose(a),g=re,u!==null){const $=u.views;p!==null&&i.bindXRFramebuffer(p.framebuffer);let Te=!1;$.length!==O.cameras.length&&(O.cameras.length=0,Te=!0);for(let Le=0;Le<$.length;Le++){const Ee=$[Le];let Re=null;if(p!==null)Re=p.getViewport(Ee);else{const ce=h.getViewSubImage(d,Ee);i.bindXRFramebuffer(m),ce.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,M,3553,ce.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,ce.colorTexture,0),Re=ce.viewport}const Ce=P[Le];Ce.matrix.fromArray(Ee.transform.matrix),Ce.projectionMatrix.fromArray(Ee.projectionMatrix),Ce.viewport.set(Re.x,Re.y,Re.width,Re.height),Le===0&&O.matrix.copy(Ce.matrix),Te===!0&&O.cameras.push(Ce)}y&&(i.bindXRFramebuffer(_),S!==null&&t.clear(S))}const ye=s.inputSources;for(let $=0;$<b.length;$++){const Te=b[$],Le=ye[$];Te.update(Le,re,a)}if(Ae&&Ae(q,re),y){const $=d.textureWidth,Te=d.textureHeight;i.bindFramebuffer(36008,_),i.bindFramebuffer(36009,m),t.invalidateFramebuffer(36008,[M]),t.invalidateFramebuffer(36009,[M]),t.blitFramebuffer(0,0,$,Te,0,0,$,Te,16384,9728),t.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,_)}g=null}const te=new XT;te.setAnimationLoop(V),this.setAnimationLoop=function(q){Ae=q},this.dispose=function(){}}}function cN(n){function e(v,g){v.fogColor.value.copy(g.color),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function t(v,g,M,S,b){g.isMeshBasicMaterial?r(v,g):g.isMeshLambertMaterial?(r(v,g),l(v,g)):g.isMeshToonMaterial?(r(v,g),h(v,g)):g.isMeshPhongMaterial?(r(v,g),u(v,g)):g.isMeshStandardMaterial?(r(v,g),g.isMeshPhysicalMaterial?d(v,g,b):m(v,g)):g.isMeshMatcapMaterial?(r(v,g),p(v,g)):g.isMeshDepthMaterial?(r(v,g),y(v,g)):g.isMeshDistanceMaterial?(r(v,g),_(v,g)):g.isMeshNormalMaterial?(r(v,g),w(v,g)):g.isLineBasicMaterial?(i(v,g),g.isLineDashedMaterial&&s(v,g)):g.isPointsMaterial?o(v,g,M,S):g.isSpriteMaterial?a(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.specularMap&&(v.specularMap.value=g.specularMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const M=n.get(g).envMap;if(M){v.envMap.value=M,v.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio;const C=n.get(M).__maxMipLevel;C!==void 0&&(v.maxMipLevel.value=C)}g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity);let S;g.map?S=g.map:g.specularMap?S=g.specularMap:g.displacementMap?S=g.displacementMap:g.normalMap?S=g.normalMap:g.bumpMap?S=g.bumpMap:g.roughnessMap?S=g.roughnessMap:g.metalnessMap?S=g.metalnessMap:g.alphaMap?S=g.alphaMap:g.emissiveMap?S=g.emissiveMap:g.clearcoatMap?S=g.clearcoatMap:g.clearcoatNormalMap?S=g.clearcoatNormalMap:g.clearcoatRoughnessMap?S=g.clearcoatRoughnessMap:g.specularIntensityMap?S=g.specularIntensityMap:g.specularColorMap?S=g.specularColorMap:g.transmissionMap?S=g.transmissionMap:g.thicknessMap?S=g.thicknessMap:g.sheenColorMap?S=g.sheenColorMap:g.sheenRoughnessMap&&(S=g.sheenRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix));let b;g.aoMap?b=g.aoMap:g.lightMap&&(b=g.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uv2Transform.value.copy(b.matrix))}function i(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity}function s(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function o(v,g,M,S){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*M,v.scale.value=S*.5,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let b;g.map?b=g.map:g.alphaMap&&(b=g.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map),g.alphaMap&&(v.alphaMap.value=g.alphaMap),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);let M;g.map?M=g.map:g.alphaMap&&(M=g.alphaMap),M!==void 0&&(M.matrixAutoUpdate===!0&&M.updateMatrix(),v.uvTransform.value.copy(M.matrix))}function l(v,g){g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===yn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===yn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function h(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===yn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===yn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function m(v,g){v.roughness.value=g.roughness,v.metalness.value=g.metalness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===yn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===yn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),n.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function d(v,g,M){m(v,g),v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),v.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===yn&&v.clearcoatNormalScale.value.negate())),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap)}function p(v,g){g.matcap&&(v.matcap.value=g.matcap),g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===yn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===yn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function y(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}function _(v,g){g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),v.referencePosition.value.copy(g.referencePosition),v.nearDistance.value=g.nearDistance,v.farDistance.value=g.farDistance}function w(v,g){g.bumpMap&&(v.bumpMap.value=g.bumpMap,v.bumpScale.value=g.bumpScale,g.side===yn&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,v.normalScale.value.copy(g.normalScale),g.side===yn&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function fN(){const n=Cp("canvas");return n.style.display="block",n}function It(n={}){const e=n.canvas!==void 0?n.canvas:fN(),t=n.context!==void 0?n.context:null,r=n.alpha!==void 0?n.alpha:!1,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,u=n.powerPreference!==void 0?n.powerPreference:"default",h=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let m=null,d=null;const p=[],y=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=kn,this.physicallyCorrectLights=!1,this.toneMapping=ws,this.toneMappingExposure=1;const _=this;let w=!1,v=0,g=0,M=null,S=-1,b=null;const C=new Ct,T=new Ct;let L=null,P=e.width,O=e.height,D=1,k=null,F=null;const B=new Ct(0,0,P,O),W=new Ct(0,0,P,O);let H=!1;const X=[],ue=new Vf;let Me=!1,Ae=!1,V=null;const te=new qe,q=new N,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ye(){return M===null?D:1}let $=t;function Te(U,ee){for(let de=0;de<U.length;de++){const oe=U[de],we=e.getContext(oe,ee);if(we!==null)return we}return null}try{const U={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",je,!1),$===null){const ee=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&ee.shift(),$=Te(ee,U),$===null)throw Te(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Le,Ee,Re,Ce,ce,xe,_e,Pe,be,G,I,Q,ae,Z,fe,le,se,pe,ve,j,K,ie,De;function Ie(){Le=new kF($),Ee=new CF($,Le,n),Le.init(Ee),ie=new bb($,Le,Ee),Re=new oN($,Le,Ee),X[0]=1029,Ce=new UF($),ce=new Jk,xe=new aN($,Le,Re,ce,Ee,ie,Ce),_e=new RF(_),Pe=new FF(_),be=new KP($,Ee),De=new bF($,Le,be,Ee),G=new NF($,be,Ce,De),I=new HF($,G,be,Ce),ve=new GF($,Ee,xe),le=new LF(ce),Q=new Yk(_,_e,Pe,Le,Ee,De,le),ae=new cN(ce),Z=new Qk(ce),fe=new rN(Le,Ee),pe=new TF(_,_e,Re,I,a),se=new Tb(_,I,Ee),j=new AF($,Le,Ce,Ee),K=new OF($,Le,Ce,Ee),Ce.programs=Q.programs,_.capabilities=Ee,_.extensions=Le,_.properties=ce,_.renderLists=Z,_.shadowMap=se,_.state=Re,_.info=Ce}Ie();const We=new uN(_,$);this.xr=We,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const U=Le.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Le.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(U){U!==void 0&&(D=U,this.setSize(P,O,!1))},this.getSize=function(U){return U.set(P,O)},this.setSize=function(U,ee,de){if(We.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=U,O=ee,e.width=Math.floor(U*D),e.height=Math.floor(ee*D),de!==!1&&(e.style.width=U+"px",e.style.height=ee+"px"),this.setViewport(0,0,U,ee)},this.getDrawingBufferSize=function(U){return U.set(P*D,O*D).floor()},this.setDrawingBufferSize=function(U,ee,de){P=U,O=ee,D=de,e.width=Math.floor(U*de),e.height=Math.floor(ee*de),this.setViewport(0,0,U,ee)},this.getCurrentViewport=function(U){return U.copy(C)},this.getViewport=function(U){return U.copy(B)},this.setViewport=function(U,ee,de,oe){U.isVector4?B.set(U.x,U.y,U.z,U.w):B.set(U,ee,de,oe),Re.viewport(C.copy(B).multiplyScalar(D).floor())},this.getScissor=function(U){return U.copy(W)},this.setScissor=function(U,ee,de,oe){U.isVector4?W.set(U.x,U.y,U.z,U.w):W.set(U,ee,de,oe),Re.scissor(T.copy(W).multiplyScalar(D).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(U){Re.setScissorTest(H=U)},this.setOpaqueSort=function(U){k=U},this.setTransparentSort=function(U){F=U},this.getClearColor=function(U){return U.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(U,ee,de){let oe=0;(U===void 0||U)&&(oe|=16384),(ee===void 0||ee)&&(oe|=256),(de===void 0||de)&&(oe|=1024),$.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",je,!1),Z.dispose(),fe.dispose(),ce.dispose(),_e.dispose(),Pe.dispose(),I.dispose(),De.dispose(),We.dispose(),We.removeEventListener("sessionstart",Dt),We.removeEventListener("sessionend",Pr),V&&(V.dispose(),V=null),fr.stop()};function ft(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const U=Ce.autoReset,ee=se.enabled,de=se.autoUpdate,oe=se.needsUpdate,we=se.type;Ie(),Ce.autoReset=U,se.enabled=ee,se.autoUpdate=de,se.needsUpdate=oe,se.type=we}function Xe(U){const ee=U.target;ee.removeEventListener("dispose",Xe),nt(ee)}function nt(U){ut(U),ce.remove(U)}function ut(U){const ee=ce.get(U).programs;ee!==void 0&&ee.forEach(function(de){Q.releaseProgram(de)})}this.renderBufferDirect=function(U,ee,de,oe,we,Je){ee===null&&(ee=re);const $e=we.isMesh&&we.matrixWorld.determinant()<0,Ze=Tn(U,ee,de,oe,we);Re.setMaterial(oe,$e);let lt=de.index;const St=de.attributes.position;if(lt===null){if(St===void 0||St.count===0)return}else if(lt.count===0)return;let dt=1;oe.wireframe===!0&&(lt=G.getWireframeAttribute(de),dt=2),De.setup(we,oe,Ze,de,lt);let ct,bt=j;lt!==null&&(ct=be.get(lt),bt=K,bt.setIndex(ct));const Ir=lt!==null?lt.count:St.count,pt=de.drawRange.start*dt,wr=de.drawRange.count*dt,yt=Je!==null?Je.start*dt:0,bn=Je!==null?Je.count*dt:1/0,Fe=Math.max(pt,yt),xt=Math.min(Ir,pt+wr,yt+bn)-1,Rn=Math.max(0,xt-Fe+1);if(Rn!==0){if(we.isMesh)oe.wireframe===!0?(Re.setLineWidth(oe.wireframeLinewidth*ye()),bt.setMode(1)):bt.setMode(4);else if(we.isLine){let at=oe.linewidth;at===void 0&&(at=1),Re.setLineWidth(at*ye()),we.isLineSegments?bt.setMode(1):we.isLineLoop?bt.setMode(2):bt.setMode(3)}else we.isPoints?bt.setMode(0):we.isSprite&&bt.setMode(4);if(we.isInstancedMesh)bt.renderInstances(Fe,Rn,we.count);else if(de.isInstancedBufferGeometry){const at=Math.min(de.instanceCount,de._maxInstanceCount);bt.renderInstances(Fe,Rn,at)}else bt.render(Fe,Rn)}},this.compile=function(U,ee){d=fe.get(U),d.init(),y.push(d),U.traverseVisible(function(de){de.isLight&&de.layers.test(ee.layers)&&(d.pushLight(de),de.castShadow&&d.pushShadow(de))}),d.setupLights(_.physicallyCorrectLights),U.traverse(function(de){const oe=de.material;if(oe)if(Array.isArray(oe))for(let we=0;we<oe.length;we++){const Je=oe[we];En(Je,U,de)}else En(oe,U,de)}),y.pop(),d=null};let Ft=null;function Ot(U){Ft&&Ft(U)}function Dt(){fr.stop()}function Pr(){fr.start()}const fr=new XT;fr.setAnimationLoop(Ot),typeof window!="undefined"&&fr.setContext(window),this.setAnimationLoop=function(U){Ft=U,We.setAnimationLoop(U),U===null?fr.stop():fr.start()},We.addEventListener("sessionstart",Dt),We.addEventListener("sessionend",Pr),this.render=function(U,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;U.autoUpdate===!0&&U.updateMatrixWorld(),ee.parent===null&&ee.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(We.cameraAutoUpdate===!0&&We.updateCamera(ee),ee=We.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,ee,M),d=fe.get(U,y.length),d.init(),y.push(d),te.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),ue.setFromProjectionMatrix(te),Ae=this.localClippingEnabled,Me=le.init(this.clippingPlanes,Ae,ee),m=Z.get(U,p.length),m.init(),p.push(m),en(U,ee,0,_.sortObjects),m.finish(),_.sortObjects===!0&&m.sort(k,F),Me===!0&&le.beginShadows();const de=d.state.shadowsArray;if(se.render(de,U,ee),Me===!0&&le.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(m,U),d.setupLights(_.physicallyCorrectLights),ee.isArrayCamera){const oe=ee.cameras;for(let we=0,Je=oe.length;we<Je;we++){const $e=oe[we];Ti(m,U,$e,$e.viewport)}}else Ti(m,U,ee);M!==null&&(xe.updateMultisampleRenderTarget(M),xe.updateRenderTargetMipmap(M)),U.isScene===!0&&U.onAfterRender(_,U,ee),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1),De.resetDefaultState(),S=-1,b=null,y.pop(),y.length>0?d=y[y.length-1]:d=null,p.pop(),p.length>0?m=p[p.length-1]:m=null};function en(U,ee,de,oe){if(U.visible===!1)return;if(U.layers.test(ee.layers)){if(U.isGroup)de=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ee);else if(U.isLight)d.pushLight(U),U.castShadow&&d.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ue.intersectsSprite(U)){oe&&q.setFromMatrixPosition(U.matrixWorld).applyMatrix4(te);const $e=I.update(U),Ze=U.material;Ze.visible&&m.push(U,$e,Ze,de,q.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(U.isSkinnedMesh&&U.skeleton.frame!==Ce.render.frame&&(U.skeleton.update(),U.skeleton.frame=Ce.render.frame),!U.frustumCulled||ue.intersectsObject(U))){oe&&q.setFromMatrixPosition(U.matrixWorld).applyMatrix4(te);const $e=I.update(U),Ze=U.material;if(Array.isArray(Ze)){const lt=$e.groups;for(let St=0,dt=lt.length;St<dt;St++){const ct=lt[St],bt=Ze[ct.materialIndex];bt&&bt.visible&&m.push(U,$e,bt,de,q.z,ct)}}else Ze.visible&&m.push(U,$e,Ze,de,q.z,null)}}const Je=U.children;for(let $e=0,Ze=Je.length;$e<Ze;$e++)en(Je[$e],ee,de,oe)}function Ti(U,ee,de,oe){const we=U.opaque,Je=U.transmissive,$e=U.transparent;d.setupLightsView(de),Je.length>0&&At(we,ee,de),oe&&Re.viewport(C.copy(oe)),we.length>0&&vt(we,ee,de),Je.length>0&&vt(Je,ee,de),$e.length>0&&vt($e,ee,de)}function At(U,ee,de){if(V===null){const $e=o===!0&&Ee.isWebGL2===!0?Ay:mi;V=new $e(1024,1024,{generateMipmaps:!0,type:ie.convert(Ra)!==null?Ra:Ms,minFilter:Ss,magFilter:xn,wrapS:zn,wrapT:zn})}const oe=_.getRenderTarget();_.setRenderTarget(V),_.clear();const we=_.toneMapping;_.toneMapping=ws,vt(U,ee,de),_.toneMapping=we,xe.updateMultisampleRenderTarget(V),xe.updateRenderTargetMipmap(V),_.setRenderTarget(oe)}function vt(U,ee,de){const oe=ee.isScene===!0?ee.overrideMaterial:null;for(let we=0,Je=U.length;we<Je;we++){const $e=U[we],Ze=$e.object,lt=$e.geometry,St=oe===null?$e.material:oe,dt=$e.group;Ze.layers.test(de.layers)&&tn(Ze,ee,de,lt,St,dt)}}function tn(U,ee,de,oe,we,Je){U.onBeforeRender(_,ee,de,oe,we,Je),U.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),we.onBeforeRender(_,ee,de,oe,U,Je),we.transparent===!0&&we.side===xs?(we.side=yn,we.needsUpdate=!0,_.renderBufferDirect(de,ee,oe,we,U,Je),we.side=Mo,we.needsUpdate=!0,_.renderBufferDirect(de,ee,oe,we,U,Je),we.side=xs):_.renderBufferDirect(de,ee,oe,we,U,Je),U.onAfterRender(_,ee,de,oe,we,Je)}function En(U,ee,de){ee.isScene!==!0&&(ee=re);const oe=ce.get(U),we=d.state.lights,Je=d.state.shadowsArray,$e=we.state.version,Ze=Q.getParameters(U,we.state,Je,ee,de),lt=Q.getProgramCacheKey(Ze);let St=oe.programs;oe.environment=U.isMeshStandardMaterial?ee.environment:null,oe.fog=ee.fog,oe.envMap=(U.isMeshStandardMaterial?Pe:_e).get(U.envMap||oe.environment),St===void 0&&(U.addEventListener("dispose",Xe),St=new Map,oe.programs=St);let dt=St.get(lt);if(dt!==void 0){if(oe.currentProgram===dt&&oe.lightsStateVersion===$e)return Lt(U,Ze),dt}else Ze.uniforms=Q.getUniforms(U),U.onBuild(de,Ze,_),U.onBeforeCompile(Ze,_),dt=Q.acquireProgram(Ze,lt),St.set(lt,dt),oe.uniforms=Ze.uniforms;const ct=oe.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(ct.clippingPlanes=le.uniform),Lt(U,Ze),oe.needsLights=nn(U),oe.lightsStateVersion=$e,oe.needsLights&&(ct.ambientLightColor.value=we.state.ambient,ct.lightProbe.value=we.state.probe,ct.directionalLights.value=we.state.directional,ct.directionalLightShadows.value=we.state.directionalShadow,ct.spotLights.value=we.state.spot,ct.spotLightShadows.value=we.state.spotShadow,ct.rectAreaLights.value=we.state.rectArea,ct.ltc_1.value=we.state.rectAreaLTC1,ct.ltc_2.value=we.state.rectAreaLTC2,ct.pointLights.value=we.state.point,ct.pointLightShadows.value=we.state.pointShadow,ct.hemisphereLights.value=we.state.hemi,ct.directionalShadowMap.value=we.state.directionalShadowMap,ct.directionalShadowMatrix.value=we.state.directionalShadowMatrix,ct.spotShadowMap.value=we.state.spotShadowMap,ct.spotShadowMatrix.value=we.state.spotShadowMatrix,ct.pointShadowMap.value=we.state.pointShadowMap,ct.pointShadowMatrix.value=we.state.pointShadowMatrix);const bt=dt.getUniforms(),Ir=Uo.seqWithValue(bt.seq,ct);return oe.currentProgram=dt,oe.uniformsList=Ir,dt}function Lt(U,ee){const de=ce.get(U);de.outputEncoding=ee.outputEncoding,de.instancing=ee.instancing,de.skinning=ee.skinning,de.morphTargets=ee.morphTargets,de.morphNormals=ee.morphNormals,de.morphTargetsCount=ee.morphTargetsCount,de.numClippingPlanes=ee.numClippingPlanes,de.numIntersection=ee.numClipIntersection,de.vertexAlphas=ee.vertexAlphas,de.vertexTangents=ee.vertexTangents}function Tn(U,ee,de,oe,we){ee.isScene!==!0&&(ee=re),xe.resetTextureUnits();const Je=ee.fog,$e=oe.isMeshStandardMaterial?ee.environment:null,Ze=M===null?_.outputEncoding:M.texture.encoding,lt=(oe.isMeshStandardMaterial?Pe:_e).get(oe.envMap||$e),St=oe.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,dt=!!oe.normalMap&&!!de.attributes.tangent,ct=!!de.morphAttributes.position,bt=!!de.morphAttributes.normal,Ir=de.morphAttributes.position?de.morphAttributes.position.length:0,pt=ce.get(oe),wr=d.state.lights;if(Me===!0&&(Ae===!0||U!==b)){const Qt=U===b&&oe.id===S;le.setState(oe,U,Qt)}let yt=!1;oe.version===pt.__version?(pt.needsLights&&pt.lightsStateVersion!==wr.state.version||pt.outputEncoding!==Ze||we.isInstancedMesh&&pt.instancing===!1||!we.isInstancedMesh&&pt.instancing===!0||we.isSkinnedMesh&&pt.skinning===!1||!we.isSkinnedMesh&&pt.skinning===!0||pt.envMap!==lt||oe.fog&&pt.fog!==Je||pt.numClippingPlanes!==void 0&&(pt.numClippingPlanes!==le.numPlanes||pt.numIntersection!==le.numIntersection)||pt.vertexAlphas!==St||pt.vertexTangents!==dt||pt.morphTargets!==ct||pt.morphNormals!==bt||Ee.isWebGL2===!0&&pt.morphTargetsCount!==Ir)&&(yt=!0):(yt=!0,pt.__version=oe.version);let bn=pt.currentProgram;yt===!0&&(bn=En(oe,ee,we));let Fe=!1,xt=!1,Rn=!1;const at=bn.getUniforms(),Zt=pt.uniforms;if(Re.useProgram(bn.program)&&(Fe=!0,xt=!0,Rn=!0),oe.id!==S&&(S=oe.id,xt=!0),Fe||b!==U){if(at.setValue($,"projectionMatrix",U.projectionMatrix),Ee.logarithmicDepthBuffer&&at.setValue($,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),b!==U&&(b=U,xt=!0,Rn=!0),oe.isShaderMaterial||oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshStandardMaterial||oe.envMap){const Qt=at.map.cameraPosition;Qt!==void 0&&Qt.setValue($,q.setFromMatrixPosition(U.matrixWorld))}(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&at.setValue($,"isOrthographic",U.isOrthographicCamera===!0),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial||oe.isShadowMaterial||we.isSkinnedMesh)&&at.setValue($,"viewMatrix",U.matrixWorldInverse)}if(we.isSkinnedMesh){at.setOptional($,we,"bindMatrix"),at.setOptional($,we,"bindMatrixInverse");const Qt=we.skeleton;Qt&&(Ee.floatVertexTextures?(Qt.boneTexture===null&&Qt.computeBoneTexture(),at.setValue($,"boneTexture",Qt.boneTexture,xe),at.setValue($,"boneTextureSize",Qt.boneTextureSize)):at.setOptional($,Qt,"boneMatrices"))}return!!de&&(de.morphAttributes.position!==void 0||de.morphAttributes.normal!==void 0)&&ve.update(we,de,oe,bn),(xt||pt.receiveShadow!==we.receiveShadow)&&(pt.receiveShadow=we.receiveShadow,at.setValue($,"receiveShadow",we.receiveShadow)),xt&&(at.setValue($,"toneMappingExposure",_.toneMappingExposure),pt.needsLights&&dr(Zt,Rn),Je&&oe.fog&&ae.refreshFogUniforms(Zt,Je),ae.refreshMaterialUniforms(Zt,oe,D,O,V),Uo.upload($,pt.uniformsList,Zt,xe)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(Uo.upload($,pt.uniformsList,Zt,xe),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&at.setValue($,"center",we.center),at.setValue($,"modelViewMatrix",we.modelViewMatrix),at.setValue($,"normalMatrix",we.normalMatrix),at.setValue($,"modelMatrix",we.matrixWorld),bn}function dr(U,ee){U.ambientLightColor.needsUpdate=ee,U.lightProbe.needsUpdate=ee,U.directionalLights.needsUpdate=ee,U.directionalLightShadows.needsUpdate=ee,U.pointLights.needsUpdate=ee,U.pointLightShadows.needsUpdate=ee,U.spotLights.needsUpdate=ee,U.spotLightShadows.needsUpdate=ee,U.rectAreaLights.needsUpdate=ee,U.hemisphereLights.needsUpdate=ee}function nn(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return M},this.setRenderTarget=function(U,ee=0,de=0){M=U,v=ee,g=de,U&&ce.get(U).__webglFramebuffer===void 0&&xe.setupRenderTarget(U);let oe=null,we=!1,Je=!1;if(U){const Ze=U.texture;(Ze.isDataTexture3D||Ze.isDataTexture2DArray)&&(Je=!0);const lt=ce.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(oe=lt[ee],we=!0):U.isWebGLMultisampleRenderTarget?oe=ce.get(U).__webglMultisampledFramebuffer:oe=lt,C.copy(U.viewport),T.copy(U.scissor),L=U.scissorTest}else C.copy(B).multiplyScalar(D).floor(),T.copy(W).multiplyScalar(D).floor(),L=H;if(Re.bindFramebuffer(36160,oe)&&Ee.drawBuffers){let Ze=!1;if(U)if(U.isWebGLMultipleRenderTargets){const lt=U.texture;if(X.length!==lt.length||X[0]!==36064){for(let St=0,dt=lt.length;St<dt;St++)X[St]=36064+St;X.length=lt.length,Ze=!0}}else(X.length!==1||X[0]!==36064)&&(X[0]=36064,X.length=1,Ze=!0);else(X.length!==1||X[0]!==1029)&&(X[0]=1029,X.length=1,Ze=!0);Ze&&(Ee.isWebGL2?$.drawBuffers(X):Le.get("WEBGL_draw_buffers").drawBuffersWEBGL(X))}if(Re.viewport(C),Re.scissor(T),Re.setScissorTest(L),we){const Ze=ce.get(U.texture);$.framebufferTexture2D(36160,36064,34069+ee,Ze.__webglTexture,de)}else if(Je){const Ze=ce.get(U.texture),lt=ee||0;$.framebufferTextureLayer(36160,36064,Ze.__webglTexture,de||0,lt)}S=-1},this.readRenderTargetPixels=function(U,ee,de,oe,we,Je,$e){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ze=ce.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&$e!==void 0&&(Ze=Ze[$e]),Ze){Re.bindFramebuffer(36160,Ze);try{const lt=U.texture,St=lt.format,dt=lt.type;if(St!==Gn&&ie.convert(St)!==$.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ct=dt===Ra&&(Le.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&Le.has("EXT_color_buffer_float"));if(dt!==Ms&&ie.convert(dt)!==$.getParameter(35738)&&!(dt===Gi&&(Ee.isWebGL2||Le.has("OES_texture_float")||Le.has("WEBGL_color_buffer_float")))&&!ct){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$.checkFramebufferStatus(36160)===36053?ee>=0&&ee<=U.width-oe&&de>=0&&de<=U.height-we&&$.readPixels(ee,de,oe,we,ie.convert(St),ie.convert(dt),Je):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const lt=M!==null?ce.get(M).__webglFramebuffer:null;Re.bindFramebuffer(36160,lt)}}},this.copyFramebufferToTexture=function(U,ee,de=0){const oe=Math.pow(2,-de),we=Math.floor(ee.image.width*oe),Je=Math.floor(ee.image.height*oe);let $e=ie.convert(ee.format);Ee.isWebGL2&&($e===6407&&($e=32849),$e===6408&&($e=32856)),xe.setTexture2D(ee,0),$.copyTexImage2D(3553,de,$e,U.x,U.y,we,Je,0),Re.unbindTexture()},this.copyTextureToTexture=function(U,ee,de,oe=0){const we=ee.image.width,Je=ee.image.height,$e=ie.convert(de.format),Ze=ie.convert(de.type);xe.setTexture2D(de,0),$.pixelStorei(37440,de.flipY),$.pixelStorei(37441,de.premultiplyAlpha),$.pixelStorei(3317,de.unpackAlignment),ee.isDataTexture?$.texSubImage2D(3553,oe,U.x,U.y,we,Je,$e,Ze,ee.image.data):ee.isCompressedTexture?$.compressedTexSubImage2D(3553,oe,U.x,U.y,ee.mipmaps[0].width,ee.mipmaps[0].height,$e,ee.mipmaps[0].data):$.texSubImage2D(3553,oe,U.x,U.y,$e,Ze,ee.image),oe===0&&de.generateMipmaps&&$.generateMipmap(3553),Re.unbindTexture()},this.copyTextureToTexture3D=function(U,ee,de,oe,we=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Je=U.max.x-U.min.x+1,$e=U.max.y-U.min.y+1,Ze=U.max.z-U.min.z+1,lt=ie.convert(oe.format),St=ie.convert(oe.type);let dt;if(oe.isDataTexture3D)xe.setTexture3D(oe,0),dt=32879;else if(oe.isDataTexture2DArray)xe.setTexture2DArray(oe,0),dt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei(37440,oe.flipY),$.pixelStorei(37441,oe.premultiplyAlpha),$.pixelStorei(3317,oe.unpackAlignment);const ct=$.getParameter(3314),bt=$.getParameter(32878),Ir=$.getParameter(3316),pt=$.getParameter(3315),wr=$.getParameter(32877),yt=de.isCompressedTexture?de.mipmaps[0]:de.image;$.pixelStorei(3314,yt.width),$.pixelStorei(32878,yt.height),$.pixelStorei(3316,U.min.x),$.pixelStorei(3315,U.min.y),$.pixelStorei(32877,U.min.z),de.isDataTexture||de.isDataTexture3D?$.texSubImage3D(dt,we,ee.x,ee.y,ee.z,Je,$e,Ze,lt,St,yt.data):de.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(dt,we,ee.x,ee.y,ee.z,Je,$e,Ze,lt,yt.data)):$.texSubImage3D(dt,we,ee.x,ee.y,ee.z,Je,$e,Ze,lt,St,yt),$.pixelStorei(3314,ct),$.pixelStorei(32878,bt),$.pixelStorei(3316,Ir),$.pixelStorei(3315,pt),$.pixelStorei(32877,wr),we===0&&oe.generateMipmaps&&$.generateMipmap(dt),Re.unbindTexture()},this.initTexture=function(U){xe.setTexture2D(U,0),Re.unbindTexture()},this.resetState=function(){v=0,g=0,M=null,Re.reset(),De.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}It.prototype.isWebGLRenderer=!0;class Ab extends It{}Ab.prototype.isWebGL1Renderer=!0;class Yf{constructor(e,t=25e-5){this.name="",this.color=new ke(e),this.density=t}clone(){return new Yf(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Yf.prototype.isFogExp2=!0;class Jf{constructor(e,t=1,r=1e3){this.name="",this.color=new ke(e),this.near=t,this.far=r}clone(){return new Jf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Jf.prototype.isFog=!0;class Zf extends mt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Zf.prototype.isScene=!0;class Bo{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Or()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Or()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Or()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Bo.prototype.isInterleavedBuffer=!0;const Sn=new N;class Is{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Sn.x=this.getX(t),Sn.y=this.getY(t),Sn.z=this.getZ(t),Sn.applyMatrix4(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Sn.x=this.getX(t),Sn.y=this.getY(t),Sn.z=this.getZ(t),Sn.applyNormalMatrix(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Sn.x=this.getX(t),Sn.y=this.getY(t),Sn.z=this.getZ(t),Sn.transformDirection(e),this.setXYZ(t,Sn.x,Sn.y,Sn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new _t(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Is(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Is.prototype.isInterleavedBufferAttribute=!0;class $p extends wn{constructor(e){super();this.type="SpriteMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}$p.prototype.isSpriteMaterial=!0;let bu;const Qf=new N,Au=new N,Cu=new N,Lu=new Se,Kf=new Se,Cb=new qe,em=new N,$f=new N,tm=new N,Lb=new Se,ox=new Se,Rb=new Se;class nm extends mt{constructor(e){super();if(this.type="Sprite",bu===void 0){bu=new et;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Bo(t,5);bu.setIndex([0,1,2,0,2,3]),bu.setAttribute("position",new Is(r,3,0,!1)),bu.setAttribute("uv",new Is(r,2,3,!1))}this.geometry=bu,this.material=e!==void 0?e:new $p,this.center=new Se(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Au.setFromMatrixScale(this.matrixWorld),Cb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Au.multiplyScalar(-Cu.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;rm(em.set(-.5,-.5,0),Cu,o,Au,i,s),rm($f.set(.5,-.5,0),Cu,o,Au,i,s),rm(tm.set(.5,.5,0),Cu,o,Au,i,s),Lb.set(0,0),ox.set(1,0),Rb.set(1,1);let a=e.ray.intersectTriangle(em,$f,tm,!1,Qf);if(a===null&&(rm($f.set(-.5,.5,0),Cu,o,Au,i,s),ox.set(0,1),a=e.ray.intersectTriangle(em,tm,$f,!1,Qf),a===null))return;const l=e.ray.origin.distanceTo(Qf);l<e.near||l>e.far||t.push({distance:l,point:Qf.clone(),uv:_n.getUV(Qf,em,$f,tm,Lb,ox,Rb,new Se),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}nm.prototype.isSprite=!0;function rm(n,e,t,r,i,s){Lu.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Kf.x=s*Lu.x-i*Lu.y,Kf.y=i*Lu.x+s*Lu.y):Kf.copy(Lu),n.copy(e),n.x+=Kf.x,n.y+=Kf.y,n.applyMatrix4(Cb)}const im=new N,Pb=new N;class Ib extends mt{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){im.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(im);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){im.setFromMatrixPosition(e.matrixWorld),Pb.setFromMatrixPosition(this.matrixWorld);const r=im.distanceTo(Pb)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const Db=new N,Fb=new Ct,kb=new Ct,dN=new N,Nb=new qe;class ed extends Gt{constructor(e,t){super(e,t);this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qe,this.bindMatrixInverse=new qe}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ct,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;Fb.fromBufferAttribute(i.attributes.skinIndex,e),kb.fromBufferAttribute(i.attributes.skinWeight,e),Db.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=kb.getComponent(s);if(o!==0){const a=Fb.getComponent(s);Nb.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(dN.copy(Db).applyMatrix4(Nb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}ed.prototype.isSkinnedMesh=!0;class td extends mt{constructor(){super();this.type="Bone"}}td.prototype.isBone=!0;class zo extends an{constructor(e=null,t=1,r=1,i,s,o,a,l,u=xn,h=xn,m,d){super(null,o,a,l,u,h,i,s,m,d);this.image={data:e,width:t,height:r},this.magFilter=u,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}zo.prototype.isDataTexture=!0;const Ob=new qe,hN=new qe;class nd{constructor(e=[],t=[]){this.uuid=Or(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new qe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new qe;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:hN;Ob.multiplyMatrices(a,t[s]),Ob.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new nd(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ST(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new zo(t,e,e,Gn,Gi);return this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new td),this.bones.push(o),this.boneInverses.push(new qe().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Go extends _t{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));super(e,t,r);this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Go.prototype.isInstancedBufferAttribute=!0;const Ub=new qe,Bb=new qe,sm=[],rd=new Gt;class ax extends Gt{constructor(e,t,r){super(e,t);this.instanceMatrix=new Go(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(rd.geometry=this.geometry,rd.material=this.material,rd.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,Ub),Bb.multiplyMatrices(r,Ub),rd.matrixWorld=Bb,rd.raycast(e,sm);for(let o=0,a=sm.length;o<a;o++){const l=sm[o];l.instanceId=s,l.object=this,t.push(l)}sm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Go(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}ax.prototype.isInstancedMesh=!0;class Nn extends wn{constructor(e){super();this.type="LineBasicMaterial",this.color=new ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Nn.prototype.isLineBasicMaterial=!0;const zb=new N,Gb=new N,Hb=new qe,lx=new Ro,om=new Hi;class qi extends mt{constructor(e=new et,t=new Nn){super();this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)zb.fromBufferAttribute(t,i-1),Gb.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=zb.distanceTo(Gb);e.setAttribute("lineDistance",new Ye(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),om.copy(r.boundingSphere),om.applyMatrix4(i),om.radius+=s,e.ray.intersectsSphere(om)===!1)return;Hb.copy(i).invert(),lx.copy(e.ray).applyMatrix4(Hb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new N,h=new N,m=new N,d=new N,p=this.isLineSegments?2:1;if(r.isBufferGeometry){const y=r.index,w=r.attributes.position;if(y!==null){const v=Math.max(0,o.start),g=Math.min(y.count,o.start+o.count);for(let M=v,S=g-1;M<S;M+=p){const b=y.getX(M),C=y.getX(M+1);if(u.fromBufferAttribute(w,b),h.fromBufferAttribute(w,C),lx.distanceSqToSegment(u,h,d,m)>l)continue;d.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(d);L<e.near||L>e.far||t.push({distance:L,point:m.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,o.start),g=Math.min(w.count,o.start+o.count);for(let M=v,S=g-1;M<S;M+=p){if(u.fromBufferAttribute(w,M),h.fromBufferAttribute(w,M+1),lx.distanceSqToSegment(u,h,d,m)>l)continue;d.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(d);C<e.near||C>e.far||t.push({distance:C,point:m.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}qi.prototype.isLine=!0;const Vb=new N,Wb=new N;class _r extends qi{constructor(e,t){super(e,t);this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)Vb.fromBufferAttribute(t,i),Wb.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+Vb.distanceTo(Wb);e.setAttribute("lineDistance",new Ye(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}_r.prototype.isLineSegments=!0;class am extends qi{constructor(e,t){super(e,t);this.type="LineLoop"}}am.prototype.isLineLoop=!0;class Ho extends wn{constructor(e){super();this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Ho.prototype.isPointsMaterial=!0;const jb=new qe,ux=new Ro,lm=new Hi,um=new N;class Ru extends mt{constructor(e=new et,t=new Ho){super();this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),lm.copy(r.boundingSphere),lm.applyMatrix4(i),lm.radius+=s,e.ray.intersectsSphere(lm)===!1)return;jb.copy(i).invert(),ux.copy(e.ray).applyMatrix4(jb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(r.isBufferGeometry){const u=r.index,m=r.attributes.position;if(u!==null){const d=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let y=d,_=p;y<_;y++){const w=u.getX(y);um.fromBufferAttribute(m,w),Xb(um,w,l,i,e,t,this)}}else{const d=Math.max(0,o.start),p=Math.min(m.count,o.start+o.count);for(let y=d,_=p;y<_;y++)um.fromBufferAttribute(m,y),Xb(um,y,l,i,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Ru.prototype.isPoints=!0;function Xb(n,e,t,r,i,s,o){const a=ux.distanceSqToPoint(n);if(a<t){const l=new N;ux.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class qb extends an{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u);this.format=a!==void 0?a:To,this.minFilter=o!==void 0?o:Kt,this.magFilter=s!==void 0?s:Kt,this.generateMipmaps=!1;const h=this;function m(){h.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}qb.prototype.isVideoTexture=!0;class cx extends an{constructor(e,t,r,i,s,o,a,l,u,h,m,d){super(null,o,a,l,u,h,i,s,m,d);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}cx.prototype.isCompressedTexture=!0;class Yb extends an{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u);this.needsUpdate=!0}}Yb.prototype.isCanvasTexture=!0;class Jb extends an{constructor(e,t,r,i,s,o,a,l,u,h){if(h=h!==void 0?h:Pa,h!==Pa&&h!==eu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Pa&&(r=Ff),r===void 0&&h===eu&&(r=$l);super(null,i,s,o,a,l,h,r,u);this.image={width:e,height:t},this.magFilter=a!==void 0?a:xn,this.minFilter=l!==void 0?l:xn,this.flipY=!1,this.generateMipmaps=!1}}Jb.prototype.isDepthTexture=!0;class Pu extends et{constructor(e=1,t=8,r=0,i=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new N,h=new Se;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let m=0,d=3;m<=t;m++,d+=3){const p=r+m/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[d]/e+1)/2,h.y=(o[d+1]/e+1)/2,l.push(h.x,h.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ye(o,3)),this.setAttribute("normal",new Ye(a,3)),this.setAttribute("uv",new Ye(l,2))}static fromJSON(e){return new Pu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Vo extends et{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const h=[],m=[],d=[],p=[];let y=0;const _=[],w=r/2;let v=0;g(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new Ye(m,3)),this.setAttribute("normal",new Ye(d,3)),this.setAttribute("uv",new Ye(p,2));function g(){const S=new N,b=new N;let C=0;const T=(t-e)/r;for(let L=0;L<=s;L++){const P=[],O=L/s,D=O*(t-e)+e;for(let k=0;k<=i;k++){const F=k/i,B=F*l+a,W=Math.sin(B),H=Math.cos(B);b.x=D*W,b.y=-O*r+w,b.z=D*H,m.push(b.x,b.y,b.z),S.set(W,T,H).normalize(),d.push(S.x,S.y,S.z),p.push(F,1-O),P.push(y++)}_.push(P)}for(let L=0;L<i;L++)for(let P=0;P<s;P++){const O=_[P][L],D=_[P+1][L],k=_[P+1][L+1],F=_[P][L+1];h.push(O,D,F),h.push(D,k,F),C+=6}u.addGroup(v,C,0),v+=C}function M(S){const b=y,C=new Se,T=new N;let L=0;const P=S===!0?e:t,O=S===!0?1:-1;for(let k=1;k<=i;k++)m.push(0,w*O,0),d.push(0,O,0),p.push(.5,.5),y++;const D=y;for(let k=0;k<=i;k++){const B=k/i*l+a,W=Math.cos(B),H=Math.sin(B);T.x=P*H,T.y=w*O,T.z=P*W,m.push(T.x,T.y,T.z),d.push(0,O,0),C.x=W*.5+.5,C.y=H*.5*O+.5,p.push(C.x,C.y),y++}for(let k=0;k<i;k++){const F=b+k,B=D+k;S===!0?h.push(B,B+1,F):h.push(B+1,B,F),L+=3}u.addGroup(v,L,S===!0?1:2),v+=L}}static fromJSON(e){return new Vo(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Iu extends Vo{constructor(e=1,t=1,r=8,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Iu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Yi extends et{constructor(e=[],t=[],r=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),h(),this.setAttribute("position",new Ye(s,3)),this.setAttribute("normal",new Ye(s.slice(),3)),this.setAttribute("uv",new Ye(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(g){const M=new N,S=new N,b=new N;for(let C=0;C<t.length;C+=3)p(t[C+0],M),p(t[C+1],S),p(t[C+2],b),l(M,S,b,g)}function l(g,M,S,b){const C=b+1,T=[];for(let L=0;L<=C;L++){T[L]=[];const P=g.clone().lerp(S,L/C),O=M.clone().lerp(S,L/C),D=C-L;for(let k=0;k<=D;k++)k===0&&L===C?T[L][k]=P:T[L][k]=P.clone().lerp(O,k/D)}for(let L=0;L<C;L++)for(let P=0;P<2*(C-L)-1;P++){const O=Math.floor(P/2);P%2==0?(d(T[L][O+1]),d(T[L+1][O]),d(T[L][O])):(d(T[L][O+1]),d(T[L+1][O+1]),d(T[L+1][O]))}}function u(g){const M=new N;for(let S=0;S<s.length;S+=3)M.x=s[S+0],M.y=s[S+1],M.z=s[S+2],M.normalize().multiplyScalar(g),s[S+0]=M.x,s[S+1]=M.y,s[S+2]=M.z}function h(){const g=new N;for(let M=0;M<s.length;M+=3){g.x=s[M+0],g.y=s[M+1],g.z=s[M+2];const S=w(g)/2/Math.PI+.5,b=v(g)/Math.PI+.5;o.push(S,1-b)}y(),m()}function m(){for(let g=0;g<o.length;g+=6){const M=o[g+0],S=o[g+2],b=o[g+4],C=Math.max(M,S,b),T=Math.min(M,S,b);C>.9&&T<.1&&(M<.2&&(o[g+0]+=1),S<.2&&(o[g+2]+=1),b<.2&&(o[g+4]+=1))}}function d(g){s.push(g.x,g.y,g.z)}function p(g,M){const S=g*3;M.x=e[S+0],M.y=e[S+1],M.z=e[S+2]}function y(){const g=new N,M=new N,S=new N,b=new N,C=new Se,T=new Se,L=new Se;for(let P=0,O=0;P<s.length;P+=9,O+=6){g.set(s[P+0],s[P+1],s[P+2]),M.set(s[P+3],s[P+4],s[P+5]),S.set(s[P+6],s[P+7],s[P+8]),C.set(o[O+0],o[O+1]),T.set(o[O+2],o[O+3]),L.set(o[O+4],o[O+5]),b.copy(g).add(M).add(S).divideScalar(3);const D=w(b);_(C,O+0,g,D),_(T,O+2,M,D),_(L,O+4,S,D)}}function _(g,M,S,b){b<0&&g.x===1&&(o[M]=g.x-1),S.x===0&&S.z===0&&(o[M]=b/2/Math.PI+.5)}function w(g){return Math.atan2(g.z,-g.x)}function v(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}static fromJSON(e){return new Yi(e.vertices,e.indices,e.radius,e.details)}}class Du extends Yi{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Du(e.radius,e.detail)}}const cm=new N,fm=new N,fx=new N,dm=new _n;class dx extends et{constructor(e=null,t=1){super();if(this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(ka*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],m=new Array(3),d={},p=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:_,b:w,c:v}=dm;if(_.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),v.fromBufferAttribute(a,u[2]),dm.getNormal(fx),m[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,m[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let g=0;g<3;g++){const M=(g+1)%3,S=m[g],b=m[M],C=dm[h[g]],T=dm[h[M]],L=`${S}_${b}`,P=`${b}_${S}`;P in d&&d[P]?(fx.dot(d[P].normal)<=s&&(p.push(C.x,C.y,C.z),p.push(T.x,T.y,T.z)),d[P]=null):L in d||(d[L]={index0:u[g],index1:u[M],normal:fx.clone()})}}for(const y in d)if(d[y]){const{index0:_,index1:w}=d[y];cm.fromBufferAttribute(a,_),fm.fromBufferAttribute(a,w),p.push(cm.x,cm.y,cm.z),p.push(fm.x,fm.y,fm.z)}this.setAttribute("position",new Ye(p,3))}}}class zr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],d=r[i+1]-h,p=(o-h)/d;return(i+p)/(s-1)}getTangent(e,t){const r=1e-4;let i=e-r,s=e+r;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Se:new N);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new N,i=[],s=[],o=[],a=new N,l=new qe;for(let p=0;p<=e;p++){const y=p/e;i[p]=this.getTangentAt(y,new N)}s[0]=new N,o[0]=new N;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),m=Math.abs(i[0].y),d=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),m<=u&&(u=m,r.set(0,1,0)),d<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(Zn(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,y))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(Zn(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(i[y],p*y)),o[y].crossVectors(i[y],s[y])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class id extends zr{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Se,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),m=Math.sin(this.aRotation),d=l-this.aX,p=u-this.aY;l=d*h-p*m+this.aX,u=d*m+p*h+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}id.prototype.isEllipseCurve=!0;class hx extends id{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o);this.type="ArcCurve"}}hx.prototype.isArcCurve=!0;function px(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,m){let d=(o-s)/u-(a-s)/(u+h)+(a-o)/h,p=(a-o)/h-(l-o)/(h+m)+(l-a)/m;d*=h,p*=h,i(o,a,d,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const hm=new N,mx=new px,gx=new px,vx=new px;class yx extends zr{constructor(e=[],t=!1,r="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new N){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%s]:(hm.subVectors(i[0],i[1]).add(i[0]),u=hm);const m=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(hm.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=hm),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(m),p),_=Math.pow(m.distanceToSquared(d),p),w=Math.pow(d.distanceToSquared(h),p);_<1e-4&&(_=1),y<1e-4&&(y=_),w<1e-4&&(w=_),mx.initNonuniformCatmullRom(u.x,m.x,d.x,h.x,y,_,w),gx.initNonuniformCatmullRom(u.y,m.y,d.y,h.y,y,_,w),vx.initNonuniformCatmullRom(u.z,m.z,d.z,h.z,y,_,w)}else this.curveType==="catmullrom"&&(mx.initCatmullRom(u.x,m.x,d.x,h.x,this.tension),gx.initCatmullRom(u.y,m.y,d.y,h.y,this.tension),vx.initCatmullRom(u.z,m.z,d.z,h.z,this.tension));return r.set(mx.calc(l),gx.calc(l),vx.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new N().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}yx.prototype.isCatmullRomCurve3=!0;function Zb(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function pN(n,e){const t=1-n;return t*t*e}function mN(n,e){return 2*(1-n)*n*e}function gN(n,e){return n*n*e}function sd(n,e,t,r){return pN(n,e)+mN(n,t)+gN(n,r)}function vN(n,e){const t=1-n;return t*t*t*e}function yN(n,e){const t=1-n;return 3*t*t*n*e}function xN(n,e){return 3*(1-n)*n*n*e}function _N(n,e){return n*n*n*e}function od(n,e,t,r,i){return vN(n,e)+yN(n,t)+xN(n,r)+_N(n,i)}class pm extends zr{constructor(e=new Se,t=new Se,r=new Se,i=new Se){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Se){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(od(e,i.x,s.x,o.x,a.x),od(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}pm.prototype.isCubicBezierCurve=!0;class xx extends zr{constructor(e=new N,t=new N,r=new N,i=new N){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new N){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(od(e,i.x,s.x,o.x,a.x),od(e,i.y,s.y,o.y,a.y),od(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}xx.prototype.isCubicBezierCurve3=!0;class ad extends zr{constructor(e=new Se,t=new Se){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Se){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Se;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}ad.prototype.isLineCurve=!0;class Qb extends zr{constructor(e=new N,t=new N){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new N){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mm extends zr{constructor(e=new Se,t=new Se,r=new Se){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Se){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(sd(e,i.x,s.x,o.x),sd(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}mm.prototype.isQuadraticBezierCurve=!0;class gm extends zr{constructor(e=new N,t=new N,r=new N){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new N){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(sd(e,i.x,s.x,o.x),sd(e,i.y,s.y,o.y),sd(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}gm.prototype.isQuadraticBezierCurve3=!0;class vm extends zr{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new Se){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],h=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return r.set(Zb(a,l.x,u.x,h.x,m.x),Zb(a,l.y,u.y,h.y,m.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Se().fromArray(i))}return this}}vm.prototype.isSplineCurve=!0;var _x=Object.freeze({__proto__:null,ArcCurve:hx,CatmullRomCurve3:yx,CubicBezierCurve:pm,CubicBezierCurve3:xx,EllipseCurve:id,LineCurve:ad,LineCurve3:Qb,QuadraticBezierCurve:mm,QuadraticBezierCurve3:gm,SplineCurve:vm});class Kb extends zr{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ad(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new _x[i.type]().fromJSON(i))}return this}}class ld extends Kb{constructor(e){super();this.type="Path",this.currentPoint=new Se,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new ad(this.currentPoint.clone(),new Se(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new mm(this.currentPoint.clone(),new Se(e,t),new Se(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new pm(this.currentPoint.clone(),new Se(e,t),new Se(r,i),new Se(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new vm(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new id(e,t,r,i,s,o,a,l);if(this.curves.length>0){const m=u.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ji extends ld{constructor(e){super(e);this.uuid=Or(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new ld().fromJSON(i))}return this}}const wN={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=$b(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,m,d,p;if(r&&(s=bN(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(let y=t;y<i;y+=t)m=n[y],d=n[y+1],m<a&&(a=m),d<l&&(l=d),m>u&&(u=m),d>h&&(h=d);p=Math.max(u-a,h-l),p=p!==0?1/p:0}return ud(s,o,t,a,l,p),o}};function $b(n,e,t,r,i){let s,o;if(i===ON(n,e,t,r)>0)for(s=e;s<t;s+=r)o=n2(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=n2(s,n[s],n[s+1],o);return o&&ym(o,o.next)&&(fd(o),o=o.next),o}function Wo(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(ym(t,t.next)||$t(t.prev,t,t.next)===0)){if(fd(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function ud(n,e,t,r,i,s,o){if(!n)return;!o&&s&&PN(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?MN(n,r,i,s):SN(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),fd(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=EN(Wo(n),e,t),ud(n,e,t,r,i,s,2)):o===2&&TN(n,e,t,r,i,s):ud(Wo(n),e,t,r,i,s,1);break}}}function SN(n){const e=n.prev,t=n,r=n.next;if($t(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(Fu(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&$t(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function MN(n,e,t,r){const i=n.prev,s=n,o=n.next;if($t(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,u=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,h=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,m=wx(a,l,e,t,r),d=wx(u,h,e,t,r);let p=n.prevZ,y=n.nextZ;for(;p&&p.z>=m&&y&&y.z<=d;){if(p!==n.prev&&p!==n.next&&Fu(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&$t(p.prev,p,p.next)>=0||(p=p.prevZ,y!==n.prev&&y!==n.next&&Fu(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&$t(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;p&&p.z>=m;){if(p!==n.prev&&p!==n.next&&Fu(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&$t(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=d;){if(y!==n.prev&&y!==n.next&&Fu(i.x,i.y,s.x,s.y,o.x,o.y,y.x,y.y)&&$t(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function EN(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!ym(i,s)&&e2(i,r,r.next,s)&&cd(i,s)&&cd(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),fd(r),fd(r.next),r=n=s),r=r.next}while(r!==n);return Wo(r)}function TN(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&FN(o,a)){let l=t2(o,a);o=Wo(o,o.next),l=Wo(l,l.next),ud(o,e,t,r,i,s),ud(l,e,t,r,i,s);return}a=a.next}o=o.next}while(o!==n)}function bN(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=$b(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(DN(u));for(i.sort(AN),s=0;s<i.length;s++)CN(i[s],t),t=Wo(t,t.next);return t}function AN(n,e){return n.x-e.x}function CN(n,e){if(e=LN(n,e),e){const t=t2(e,n);Wo(e,e.next),Wo(t,t.next)}}function LN(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const d=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=r&&d>s){if(s=d,d===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,u=o.y;let h=1/0,m;t=o;do r>=t.x&&t.x>=l&&r!==t.x&&Fu(i<u?r:s,i,l,u,i<u?s:r,i,t.x,t.y)&&(m=Math.abs(i-t.y)/(r-t.x),cd(t,n)&&(m<h||m===h&&(t.x>o.x||t.x===o.x&&RN(o,t)))&&(o=t,h=m)),t=t.next;while(t!==a);return o}function RN(n,e){return $t(n.prev,n,e.prev)<0&&$t(e.next,n,n.next)<0}function PN(n,e,t,r){let i=n;do i.z===null&&(i.z=wx(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,IN(i)}function IN(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function wx(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function DN(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Fu(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function FN(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!kN(n,e)&&(cd(n,e)&&cd(e,n)&&NN(n,e)&&($t(n.prev,n,e.prev)||$t(n,e.prev,e))||ym(n,e)&&$t(n.prev,n,n.next)>0&&$t(e.prev,e,e.next)>0)}function $t(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ym(n,e){return n.x===e.x&&n.y===e.y}function e2(n,e,t,r){const i=_m($t(n,e,t)),s=_m($t(n,e,r)),o=_m($t(t,r,n)),a=_m($t(t,r,e));return!!(i!==s&&o!==a||i===0&&xm(n,t,e)||s===0&&xm(n,r,e)||o===0&&xm(t,n,r)||a===0&&xm(t,e,r))}function xm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function _m(n){return n>0?1:n<0?-1:0}function kN(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&e2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function cd(n,e){return $t(n.prev,n,n.next)<0?$t(n,e,n.next)>=0&&$t(n,n.prev,e)>=0:$t(n,e,n.prev)<0||$t(n,n.next,e)<0}function NN(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function t2(n,e){const t=new Sx(n.i,n.x,n.y),r=new Sx(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function n2(n,e,t,r){const i=new Sx(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Sx(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ON(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Zi{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Zi.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];r2(e),i2(r,e);let o=e.length;t.forEach(r2);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,i2(r,t[l]);const a=wN.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function r2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function i2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class wi extends et{constructor(e=new Ji([new Se(.5,.5),new Se(-.5,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t={}){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ye(i,3)),this.setAttribute("uv",new Ye(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1;let m=t.depth!==void 0?t.depth:1,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:p-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,g=t.UVGenerator!==void 0?t.UVGenerator:UN;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),m=t.amount);let M,S=!1,b,C,T,L;v&&(M=v.getSpacedPoints(h),S=!0,d=!1,b=v.computeFrenetFrames(h,!1),C=new N,T=new N,L=new N),d||(w=0,p=0,y=0,_=0);const P=a.extractPoints(u);let O=P.shape;const D=P.holes;if(!Zi.isClockWise(O)){O=O.reverse();for(let ce=0,xe=D.length;ce<xe;ce++){const _e=D[ce];Zi.isClockWise(_e)&&(D[ce]=_e.reverse())}}const F=Zi.triangulateShape(O,D),B=O;for(let ce=0,xe=D.length;ce<xe;ce++){const _e=D[ce];O=O.concat(_e)}function W(ce,xe,_e){return xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),xe.clone().multiplyScalar(_e).add(ce)}const H=O.length,X=F.length;function ue(ce,xe,_e){let Pe,be,G;const I=ce.x-xe.x,Q=ce.y-xe.y,ae=_e.x-ce.x,Z=_e.y-ce.y,fe=I*I+Q*Q,le=I*Z-Q*ae;if(Math.abs(le)>Number.EPSILON){const se=Math.sqrt(fe),pe=Math.sqrt(ae*ae+Z*Z),ve=xe.x-Q/se,j=xe.y+I/se,K=_e.x-Z/pe,ie=_e.y+ae/pe,De=((K-ve)*Z-(ie-j)*ae)/(I*Z-Q*ae);Pe=ve+I*De-ce.x,be=j+Q*De-ce.y;const Ie=Pe*Pe+be*be;if(Ie<=2)return new Se(Pe,be);G=Math.sqrt(Ie/2)}else{let se=!1;I>Number.EPSILON?ae>Number.EPSILON&&(se=!0):I<-Number.EPSILON?ae<-Number.EPSILON&&(se=!0):Math.sign(Q)===Math.sign(Z)&&(se=!0),se?(Pe=-Q,be=I,G=Math.sqrt(fe)):(Pe=I,be=Q,G=Math.sqrt(fe/2))}return new Se(Pe/G,be/G)}const Me=[];for(let ce=0,xe=B.length,_e=xe-1,Pe=ce+1;ce<xe;ce++,_e++,Pe++)_e===xe&&(_e=0),Pe===xe&&(Pe=0),Me[ce]=ue(B[ce],B[_e],B[Pe]);const Ae=[];let V,te=Me.concat();for(let ce=0,xe=D.length;ce<xe;ce++){const _e=D[ce];V=[];for(let Pe=0,be=_e.length,G=be-1,I=Pe+1;Pe<be;Pe++,G++,I++)G===be&&(G=0),I===be&&(I=0),V[Pe]=ue(_e[Pe],_e[G],_e[I]);Ae.push(V),te=te.concat(V)}for(let ce=0;ce<w;ce++){const xe=ce/w,_e=p*Math.cos(xe*Math.PI/2),Pe=y*Math.sin(xe*Math.PI/2)+_;for(let be=0,G=B.length;be<G;be++){const I=W(B[be],Me[be],Pe);Te(I.x,I.y,-_e)}for(let be=0,G=D.length;be<G;be++){const I=D[be];V=Ae[be];for(let Q=0,ae=I.length;Q<ae;Q++){const Z=W(I[Q],V[Q],Pe);Te(Z.x,Z.y,-_e)}}}const q=y+_;for(let ce=0;ce<H;ce++){const xe=d?W(O[ce],te[ce],q):O[ce];S?(T.copy(b.normals[0]).multiplyScalar(xe.x),C.copy(b.binormals[0]).multiplyScalar(xe.y),L.copy(M[0]).add(T).add(C),Te(L.x,L.y,L.z)):Te(xe.x,xe.y,0)}for(let ce=1;ce<=h;ce++)for(let xe=0;xe<H;xe++){const _e=d?W(O[xe],te[xe],q):O[xe];S?(T.copy(b.normals[ce]).multiplyScalar(_e.x),C.copy(b.binormals[ce]).multiplyScalar(_e.y),L.copy(M[ce]).add(T).add(C),Te(L.x,L.y,L.z)):Te(_e.x,_e.y,m/h*ce)}for(let ce=w-1;ce>=0;ce--){const xe=ce/w,_e=p*Math.cos(xe*Math.PI/2),Pe=y*Math.sin(xe*Math.PI/2)+_;for(let be=0,G=B.length;be<G;be++){const I=W(B[be],Me[be],Pe);Te(I.x,I.y,m+_e)}for(let be=0,G=D.length;be<G;be++){const I=D[be];V=Ae[be];for(let Q=0,ae=I.length;Q<ae;Q++){const Z=W(I[Q],V[Q],Pe);S?Te(Z.x,Z.y+M[h-1].y,M[h-1].x+_e):Te(Z.x,Z.y,m+_e)}}}re(),ye();function re(){const ce=i.length/3;if(d){let xe=0,_e=H*xe;for(let Pe=0;Pe<X;Pe++){const be=F[Pe];Le(be[2]+_e,be[1]+_e,be[0]+_e)}xe=h+w*2,_e=H*xe;for(let Pe=0;Pe<X;Pe++){const be=F[Pe];Le(be[0]+_e,be[1]+_e,be[2]+_e)}}else{for(let xe=0;xe<X;xe++){const _e=F[xe];Le(_e[2],_e[1],_e[0])}for(let xe=0;xe<X;xe++){const _e=F[xe];Le(_e[0]+H*h,_e[1]+H*h,_e[2]+H*h)}}r.addGroup(ce,i.length/3-ce,0)}function ye(){const ce=i.length/3;let xe=0;$(B,xe),xe+=B.length;for(let _e=0,Pe=D.length;_e<Pe;_e++){const be=D[_e];$(be,xe),xe+=be.length}r.addGroup(ce,i.length/3-ce,1)}function $(ce,xe){let _e=ce.length;for(;--_e>=0;){const Pe=_e;let be=_e-1;be<0&&(be=ce.length-1);for(let G=0,I=h+w*2;G<I;G++){const Q=H*G,ae=H*(G+1),Z=xe+Pe+Q,fe=xe+be+Q,le=xe+be+ae,se=xe+Pe+ae;Ee(Z,fe,le,se)}}}function Te(ce,xe,_e){l.push(ce),l.push(xe),l.push(_e)}function Le(ce,xe,_e){Re(ce),Re(xe),Re(_e);const Pe=i.length/3,be=g.generateTopUV(r,i,Pe-3,Pe-2,Pe-1);Ce(be[0]),Ce(be[1]),Ce(be[2])}function Ee(ce,xe,_e,Pe){Re(ce),Re(xe),Re(Pe),Re(xe),Re(_e),Re(Pe);const be=i.length/3,G=g.generateSideWallUV(r,i,be-6,be-3,be-2,be-1);Ce(G[0]),Ce(G[1]),Ce(G[3]),Ce(G[1]),Ce(G[2]),Ce(G[3])}function Re(ce){i.push(l[ce*3+0]),i.push(l[ce*3+1]),i.push(l[ce*3+2])}function Ce(ce){s.push(ce.x),s.push(ce.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return BN(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new _x[i.type]().fromJSON(i)),new wi(r,e.options)}}const UN={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],h=e[i*3+1];return[new Se(s,o),new Se(a,l),new Se(u,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],h=e[r*3+1],m=e[r*3+2],d=e[i*3],p=e[i*3+1],y=e[i*3+2],_=e[s*3],w=e[s*3+1],v=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new Se(o,1-l),new Se(u,1-m),new Se(d,1-y),new Se(_,1-v)]:[new Se(a,1-l),new Se(h,1-m),new Se(p,1-y),new Se(w,1-v)]}};function BN(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ku extends Yi{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ku(e.radius,e.detail)}}class Nu extends et{constructor(e=[new Se(0,.5),new Se(.5,0),new Se(0,-.5)],t=12,r=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Zn(i,0,Math.PI*2);const s=[],o=[],a=[],l=1/t,u=new N,h=new Se;for(let m=0;m<=t;m++){const d=r+m*l*i,p=Math.sin(d),y=Math.cos(d);for(let _=0;_<=e.length-1;_++)u.x=e[_].x*p,u.y=e[_].y,u.z=e[_].x*y,o.push(u.x,u.y,u.z),h.x=m/t,h.y=_/(e.length-1),a.push(h.x,h.y)}for(let m=0;m<t;m++)for(let d=0;d<e.length-1;d++){const p=d+m*e.length,y=p,_=p+e.length,w=p+e.length+1,v=p+1;s.push(y,_,v),s.push(_,w,v)}if(this.setIndex(s),this.setAttribute("position",new Ye(o,3)),this.setAttribute("uv",new Ye(a,2)),this.computeVertexNormals(),i===Math.PI*2){const m=this.attributes.normal.array,d=new N,p=new N,y=new N,_=t*e.length*3;for(let w=0,v=0;w<e.length;w++,v+=3)d.x=m[v+0],d.y=m[v+1],d.z=m[v+2],p.x=m[_+v+0],p.y=m[_+v+1],p.z=m[_+v+2],y.addVectors(d,p).normalize(),m[v+0]=m[_+v+0]=y.x,m[v+1]=m[_+v+1]=y.y,m[v+2]=m[_+v+2]=y.z}}static fromJSON(e){return new Nu(e.points,e.segments,e.phiStart,e.phiLength)}}class Ha extends Yi{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ha(e.radius,e.detail)}}class Ou extends et{constructor(e=.5,t=1,r=8,i=1,s=0,o=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let m=e;const d=(t-e)/i,p=new N,y=new Se;for(let _=0;_<=i;_++){for(let w=0;w<=r;w++){const v=s+w/r*o;p.x=m*Math.cos(v),p.y=m*Math.sin(v),l.push(p.x,p.y,p.z),u.push(0,0,1),y.x=(p.x/t+1)/2,y.y=(p.y/t+1)/2,h.push(y.x,y.y)}m+=d}for(let _=0;_<i;_++){const w=_*(r+1);for(let v=0;v<r;v++){const g=v+w,M=g,S=g+r+1,b=g+r+2,C=g+1;a.push(M,S,C),a.push(S,b,C)}}this.setIndex(a),this.setAttribute("position",new Ye(l,3)),this.setAttribute("normal",new Ye(u,3)),this.setAttribute("uv",new Ye(h,2))}static fromJSON(e){return new Ou(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Va extends et{constructor(e=new Ji([new Se(0,.5),new Se(-.5,-.5),new Se(.5,-.5)]),t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ye(i,3)),this.setAttribute("normal",new Ye(s,3)),this.setAttribute("uv",new Ye(o,2));function u(h){const m=i.length/3,d=h.extractPoints(t);let p=d.shape;const y=d.holes;Zi.isClockWise(p)===!1&&(p=p.reverse());for(let w=0,v=y.length;w<v;w++){const g=y[w];Zi.isClockWise(g)===!0&&(y[w]=g.reverse())}const _=Zi.triangulateShape(p,y);for(let w=0,v=y.length;w<v;w++){const g=y[w];p=p.concat(g)}for(let w=0,v=p.length;w<v;w++){const g=p[w];i.push(g.x,g.y,0),s.push(0,0,1),o.push(g.x,g.y)}for(let w=0,v=_.length;w<v;w++){const g=_[w],M=g[0]+m,S=g[1]+m,b=g[2]+m;r.push(M,S,b),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return zN(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Va(r,e.curveSegments)}}function zN(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class jo extends et{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const h=[],m=new N,d=new N,p=[],y=[],_=[],w=[];for(let v=0;v<=r;v++){const g=[],M=v/r;let S=0;v==0&&o==0?S=.5/t:v==r&&l==Math.PI&&(S=-.5/t);for(let b=0;b<=t;b++){const C=b/t;m.x=-e*Math.cos(i+C*s)*Math.sin(o+M*a),m.y=e*Math.cos(o+M*a),m.z=e*Math.sin(i+C*s)*Math.sin(o+M*a),y.push(m.x,m.y,m.z),d.copy(m).normalize(),_.push(d.x,d.y,d.z),w.push(C+S,1-M),g.push(u++)}h.push(g)}for(let v=0;v<r;v++)for(let g=0;g<t;g++){const M=h[v][g+1],S=h[v][g],b=h[v+1][g],C=h[v+1][g+1];(v!==0||o>0)&&p.push(M,S,C),(v!==r-1||l<Math.PI)&&p.push(S,b,C)}this.setIndex(p),this.setAttribute("position",new Ye(y,3)),this.setAttribute("normal",new Ye(_,3)),this.setAttribute("uv",new Ye(w,2))}static fromJSON(e){return new jo(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uu extends Yi{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uu(e.radius,e.detail)}}class Bu extends et{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],h=new N,m=new N,d=new N;for(let p=0;p<=r;p++)for(let y=0;y<=i;y++){const _=y/i*s,w=p/r*Math.PI*2;m.x=(e+t*Math.cos(w))*Math.cos(_),m.y=(e+t*Math.cos(w))*Math.sin(_),m.z=t*Math.sin(w),a.push(m.x,m.y,m.z),h.x=e*Math.cos(_),h.y=e*Math.sin(_),d.subVectors(m,h).normalize(),l.push(d.x,d.y,d.z),u.push(y/i),u.push(p/r)}for(let p=1;p<=r;p++)for(let y=1;y<=i;y++){const _=(i+1)*p+y-1,w=(i+1)*(p-1)+y-1,v=(i+1)*(p-1)+y,g=(i+1)*p+y;o.push(_,w,g),o.push(w,v,g)}this.setIndex(o),this.setAttribute("position",new Ye(a,3)),this.setAttribute("normal",new Ye(l,3)),this.setAttribute("uv",new Ye(u,2))}static fromJSON(e){return new Bu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zu extends et{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],h=[],m=new N,d=new N,p=new N,y=new N,_=new N,w=new N,v=new N;for(let M=0;M<=r;++M){const S=M/r*s*Math.PI*2;g(S,s,o,e,p),g(S+.01,s,o,e,y),w.subVectors(y,p),v.addVectors(y,p),_.crossVectors(w,v),v.crossVectors(_,w),_.normalize(),v.normalize();for(let b=0;b<=i;++b){const C=b/i*Math.PI*2,T=-t*Math.cos(C),L=t*Math.sin(C);m.x=p.x+(T*v.x+L*_.x),m.y=p.y+(T*v.y+L*_.y),m.z=p.z+(T*v.z+L*_.z),l.push(m.x,m.y,m.z),d.subVectors(m,p).normalize(),u.push(d.x,d.y,d.z),h.push(M/r),h.push(b/i)}}for(let M=1;M<=r;M++)for(let S=1;S<=i;S++){const b=(i+1)*(M-1)+(S-1),C=(i+1)*M+(S-1),T=(i+1)*M+S,L=(i+1)*(M-1)+S;a.push(b,C,L),a.push(C,T,L)}this.setIndex(a),this.setAttribute("position",new Ye(l,3)),this.setAttribute("normal",new Ye(u,3)),this.setAttribute("uv",new Ye(h,2));function g(M,S,b,C,T){const L=Math.cos(M),P=Math.sin(M),O=b/S*M,D=Math.cos(O);T.x=C*(2+D)*.5*L,T.y=C*(2+D)*P*.5,T.z=C*Math.sin(O)*.5}}static fromJSON(e){return new zu(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gu extends et{constructor(e=new gm(new N(-1,-1,0),new N(-1,1,0),new N(1,1,0)),t=64,r=1,i=8,s=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new N,l=new N,u=new Se;let h=new N;const m=[],d=[],p=[],y=[];_(),this.setIndex(y),this.setAttribute("position",new Ye(m,3)),this.setAttribute("normal",new Ye(d,3)),this.setAttribute("uv",new Ye(p,2));function _(){for(let M=0;M<t;M++)w(M);w(s===!1?t:0),g(),v()}function w(M){h=e.getPointAt(M/t,h);const S=o.normals[M],b=o.binormals[M];for(let C=0;C<=i;C++){const T=C/i*Math.PI*2,L=Math.sin(T),P=-Math.cos(T);l.x=P*S.x+L*b.x,l.y=P*S.y+L*b.y,l.z=P*S.z+L*b.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,m.push(a.x,a.y,a.z)}}function v(){for(let M=1;M<=t;M++)for(let S=1;S<=i;S++){const b=(i+1)*(M-1)+(S-1),C=(i+1)*M+(S-1),T=(i+1)*M+S,L=(i+1)*(M-1)+S;y.push(b,C,L),y.push(C,T,L)}}function g(){for(let M=0;M<=t;M++)for(let S=0;S<=i;S++)u.x=M/t,u.y=S/i,p.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gu(new _x[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Mx extends et{constructor(e=null){super();if(this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new N,s=new N;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const m=l[u],d=m.start,p=m.count;for(let y=d,_=d+p;y<_;y+=3)for(let w=0;w<3;w++){const v=a.getX(y+w),g=a.getX(y+(w+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,g),s2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,m=3*a+(u+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,m),s2(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ye(t,3))}}}function s2(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r,i),!0)}var o2=Object.freeze({__proto__:null,BoxGeometry:Vi,BoxBufferGeometry:Vi,CircleGeometry:Pu,CircleBufferGeometry:Pu,ConeGeometry:Iu,ConeBufferGeometry:Iu,CylinderGeometry:Vo,CylinderBufferGeometry:Vo,DodecahedronGeometry:Du,DodecahedronBufferGeometry:Du,EdgesGeometry:dx,ExtrudeGeometry:wi,ExtrudeBufferGeometry:wi,IcosahedronGeometry:ku,IcosahedronBufferGeometry:ku,LatheGeometry:Nu,LatheBufferGeometry:Nu,OctahedronGeometry:Ha,OctahedronBufferGeometry:Ha,PlaneGeometry:ji,PlaneBufferGeometry:ji,PolyhedronGeometry:Yi,PolyhedronBufferGeometry:Yi,RingGeometry:Ou,RingBufferGeometry:Ou,ShapeGeometry:Va,ShapeBufferGeometry:Va,SphereGeometry:jo,SphereBufferGeometry:jo,TetrahedronGeometry:Uu,TetrahedronBufferGeometry:Uu,TorusGeometry:Bu,TorusBufferGeometry:Bu,TorusKnotGeometry:zu,TorusKnotBufferGeometry:zu,TubeGeometry:Gu,TubeBufferGeometry:Gu,WireframeGeometry:Mx});class Ex extends wn{constructor(e){super();this.type="ShadowMaterial",this.color=new ke(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Ex.prototype.isShadowMaterial=!0;class Wa extends wn{constructor(e){super();this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Wa.prototype.isMeshStandardMaterial=!0;class Ds extends Wa{constructor(e){super();this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Se(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Zn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}Ds.prototype.isMeshPhysicalMaterial=!0;class Tx extends wn{constructor(e){super();this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Tx.prototype.isMeshPhongMaterial=!0;class bx extends wn{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}bx.prototype.isMeshToonMaterial=!0;class Ax extends wn{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}Ax.prototype.isMeshNormalMaterial=!0;class Cx extends wn{constructor(e){super();this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Cx.prototype.isMeshLambertMaterial=!0;class Lx extends wn{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new Se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}Lx.prototype.isMeshMatcapMaterial=!0;class Rx extends Nn{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}Rx.prototype.isLineDashedMaterial=!0;var GN=Object.freeze({__proto__:null,ShadowMaterial:Ex,SpriteMaterial:$p,RawShaderMaterial:wu,ShaderMaterial:Rs,PointsMaterial:Ho,MeshPhysicalMaterial:Ds,MeshStandardMaterial:Wa,MeshPhongMaterial:Tx,MeshToonMaterial:bx,MeshNormalMaterial:Ax,MeshLambertMaterial:Cx,MeshDepthMaterial:Xf,MeshDistanceMaterial:qf,MeshBasicMaterial:Qn,MeshMatcapMaterial:Lx,LineDashedMaterial:Rx,LineBasicMaterial:Nn,Material:wn});const Xt={arraySlice:function(n,e,t){return Xt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),m=[],d=[];for(let p=0;p<u.times.length;++p){const y=u.times[p]*i;if(!(y<t||y>=r)){m.push(u.times[p]);for(let _=0;_<h;++_)d.push(u.values[p*h+_])}}m.length!==0&&(u.times=Xt.convertArray(m,u.times.constructor),u.values=Xt.convertArray(d,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(u===void 0)continue;let h=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);let d=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=p/3);const y=a.times.length-1;let _;if(s<=a.times[0]){const v=h,g=m-h;_=Xt.arraySlice(a.values,v,g)}else if(s>=a.times[y]){const v=y*m+h,g=v+m-h;_=Xt.arraySlice(a.values,v,g)}else{const v=a.createInterpolant(),g=h,M=m-h;v.evaluate(s),_=Xt.arraySlice(v.resultBuffer,g,M)}l==="quaternion"&&new Hn().fromArray(_).normalize().conjugate().toArray(_);const w=u.times.length;for(let v=0;v<w;++v){const g=v*p+d;if(l==="quaternion")Hn.multiplyQuaternionsFlat(u.values,g,_,0,u.values,g);else{const M=p-d*2;for(let S=0;S<M;++S)u.values[g+S]-=_[S]}}}return n.blendMode=gy,n}};class Qi{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,s)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,s,e)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Qi.prototype.beforeStart_=Qi.prototype.copySampleValue_;Qi.prototype.afterEnd_=Qi.prototype.copySampleValue_;class a2 extends Qi{constructor(e,t,r,i){super(e,t,r,i);this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Da,endingEnd:Da}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Fa:s=e,a=2*t-r;break;case Nf:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Fa:o=e,l=2*r-t;break;case Nf:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,m=this._offsetNext,d=this._weightPrev,p=this._weightNext,y=(r-t)/(i-t),_=y*y,w=_*y,v=-d*w+2*d*_-d*y,g=(1+d)*w+(-1.5-2*d)*_+(-.5+d)*y+1,M=(-1-p)*w+(1.5+p)*_+.5*y,S=p*w-p*_;for(let b=0;b!==a;++b)s[b]=v*o[h+b]+g*o[u+b]+M*o[l+b]+S*o[m+b];return s}}class Px extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(r-t)/(i-t),m=1-h;for(let d=0;d!==a;++d)s[d]=o[u+d]*m+o[l+d]*h;return s}}class l2 extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Si{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Xt.convertArray(t,this.TimeBufferType),this.values=Xt.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Xt.convertArray(e.times,Array),values:Xt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new l2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Px(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new a2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tu:t=this.InterpolantFactoryMethodDiscrete;break;case Ia:t=this.InterpolantFactoryMethodLinear;break;case Sp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tu;case this.InterpolantFactoryMethodLinear:return Ia;case this.InterpolantFactoryMethodSmooth:return Sp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Xt.arraySlice(r,s,o),this.values=Xt.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&Xt.isTypedArray(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Xt.arraySlice(this.times),t=Xt.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Sp,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(i)l=!0;else{const m=a*r,d=m-r,p=m+r;for(let y=0;y!==r;++y){const _=t[m+y];if(_!==t[d+y]||_!==t[p+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const m=a*r,d=o*r;for(let p=0;p!==r;++p)t[d+p]=t[m+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=Xt.arraySlice(e,0,o),this.values=Xt.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Xt.arraySlice(this.times,0),t=Xt.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Si.prototype.TimeBufferType=Float32Array;Si.prototype.ValueBufferType=Float32Array;Si.prototype.DefaultInterpolation=Ia;class ja extends Si{}ja.prototype.ValueTypeName="bool";ja.prototype.ValueBufferType=Array;ja.prototype.DefaultInterpolation=tu;ja.prototype.InterpolantFactoryMethodLinear=void 0;ja.prototype.InterpolantFactoryMethodSmooth=void 0;class Ix extends Si{}Ix.prototype.ValueTypeName="color";class Hu extends Si{}Hu.prototype.ValueTypeName="number";class u2 extends Qi{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Hn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Xo extends Si{InterpolantFactoryMethodLinear(e){return new u2(this.times,this.values,this.getValueSize(),e)}}Xo.prototype.ValueTypeName="quaternion";Xo.prototype.DefaultInterpolation=Ia;Xo.prototype.InterpolantFactoryMethodSmooth=void 0;class Xa extends Si{}Xa.prototype.ValueTypeName="string";Xa.prototype.ValueBufferType=Array;Xa.prototype.DefaultInterpolation=tu;Xa.prototype.InterpolantFactoryMethodLinear=void 0;Xa.prototype.InterpolantFactoryMethodSmooth=void 0;class Vu extends Si{}Vu.prototype.ValueTypeName="vector";class Wu{constructor(e,t=-1,r,i=Mp){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Or(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(VN(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Si.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=Xt.getKeyframeOrder(l);l=Xt.sortedArray(l,1,h),u=Xt.sortedArray(u,1,h),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Hu(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const m=h[1];let d=i[m];d||(i[m]=d=[]),d.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(m,d,p,y,_){if(p.length!==0){const w=[],v=[];Xt.flattenJSON(p,w,v,y),w.length!==0&&_.push(new m(d,w,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let m=0;m<u.length;m++){const d=u[m].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let y;for(y=0;y<d.length;y++)if(d[y].morphTargets)for(let _=0;_<d[y].morphTargets.length;_++)p[d[y].morphTargets[_]]=-1;for(const _ in p){const w=[],v=[];for(let g=0;g!==d[y].morphTargets.length;++g){const M=d[y];w.push(M.time),v.push(M.morphTarget===_?1:0)}i.push(new Hu(".morphTargetInfluence["+_+"]",w,v))}l=p.length*(o||1)}else{const p=".bones["+t[m].name+"]";r(Vu,p+".position",d,"pos",i),r(Xo,p+".quaternion",d,"rot",i),r(Vu,p+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function HN(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hu;case"vector":case"vector2":case"vector3":case"vector4":return Vu;case"color":return Ix;case"quaternion":return Xo;case"bool":case"boolean":return ja;case"string":return Xa}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function VN(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=HN(n.type);if(n.times===void 0){const t=[],r=[];Xt.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const qa={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Dx{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,m){return u.push(h,m),this},this.removeHandler=function(h){const m=u.indexOf(h);return m!==-1&&u.splice(m,2),this},this.getHandler=function(h){for(let m=0,d=u.length;m<d;m+=2){const p=u[m],y=u[m+1];if(p.global&&(p.lastIndex=0),p.test(h))return y}return null}}}const c2=new Dx;class Kn{constructor(e){this.manager=e!==void 0?e:c2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Fs={};class Gr extends Kn{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=qa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Fs[e]!==void 0){Fs[e].push({onLoad:t,onProgress:r,onError:i});return}Fs[e]=[],Fs[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(a.status===200||a.status===0){a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=Fs[e],u=a.body.getReader(),h=a.headers.get("Content-Length"),m=h?parseInt(h):0,d=m!==0;let p=0;return new ReadableStream({start(y){_();function _(){u.read().then(({done:w,value:v})=>{if(w)y.close();else{p+=v.byteLength;const g=new ProgressEvent("progress",{lengthComputable:d,loaded:p,total:m});for(let M=0,S=l.length;M<S;M++){const b=l[M];b.onProgress&&b.onProgress(g)}y.enqueue(v),_()}})}}})}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{qa.add(e,a);const l=Fs[e];delete Fs[e];for(let u=0,h=l.length;u<h;u++){const m=l[u];m.onLoad&&m.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=Fs[e];delete Fs[e];for(let u=0,h=l.length;u<h;u++){const m=l[u];m.onError&&m.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WN extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Gr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Wu.parse(e[r]);t.push(i)}return t}}class jN extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new cx,l=new Gr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(m){l.load(e[m],function(d){const p=s.parse(d,!0);o[m]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(a.minFilter=Kt),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let m=0,d=e.length;m<d;++m)h(m);else l.load(e,function(m){const d=s.parse(m,!0);if(d.isCubemap){const p=d.mipmaps.length/d.mipmapCount;for(let y=0;y<p;y++){o[y]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)o[y].mipmaps.push(d.mipmaps[y*d.mipmapCount+_]),o[y].format=d.format,o[y].width=d.width,o[y].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Kt),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class dd extends Kn{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qa.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Cp("img");function l(){h(),qa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(m){h(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class f2 extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=new xu,o=new dd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class d2 extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new zo,a=new Gr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);!u||(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:zn,o.wrapT=u.wrapT!==void 0?u.wrapT:zn,o.magFilter=u.magFilter!==void 0?u.magFilter:Kt,o.minFilter=u.minFilter!==void 0?u.minFilter:Kt,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Ss),u.mipmapCount===1&&(o.minFilter=Kt),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class Fx extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=new an,o=new dd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Mi extends mt{constructor(e,t=1){super();this.type="Light",this.color=new ke(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Mi.prototype.isLight=!0;class kx extends Mi{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.groundColor=new ke(t)}copy(e){return Mi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}kx.prototype.isHemisphereLight=!0;const h2=new qe,p2=new N,m2=new N;class Nx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Se(512,512),this.map=null,this.mapPass=null,this.matrix=new qe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Vf,this._frameExtents=new Se(1,1),this._viewportCount=1,this._viewports=[new Ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;p2.setFromMatrixPosition(e.matrixWorld),t.position.copy(p2),m2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(m2),t.updateMatrixWorld(),h2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h2),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class g2 extends Nx{constructor(){super(new ln(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=Of*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}g2.prototype.isSpotLightShadow=!0;class wm extends Mi{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t);this.type="SpotLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new g2}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}wm.prototype.isSpotLight=!0;const v2=new qe,hd=new N,Ox=new N;class y2 extends Nx{constructor(){super(new ln(90,1,.5,500));this._frameExtents=new Se(4,2),this._viewportCount=6,this._viewports=[new Ct(2,1,1,1),new Ct(0,1,1,1),new Ct(3,1,1,1),new Ct(1,1,1,1),new Ct(3,0,1,1),new Ct(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),hd.setFromMatrixPosition(e.matrixWorld),r.position.copy(hd),Ox.copy(r.position),Ox.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Ox),r.updateMatrixWorld(),i.makeTranslation(-hd.x,-hd.y,-hd.z),v2.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v2)}}y2.prototype.isPointLightShadow=!0;class Sm extends Mi{constructor(e,t,r=0,i=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new y2}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Sm.prototype.isPointLight=!0;class x2 extends Nx{constructor(){super(new Ps(-5,5,5,-5,.5,500))}}x2.prototype.isDirectionalLightShadow=!0;class Mm extends Mi{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.shadow=new x2}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Mm.prototype.isDirectionalLight=!0;class Ux extends Mi{constructor(e,t){super(e,t);this.type="AmbientLight"}}Ux.prototype.isAmbientLight=!0;class Bx extends Mi{constructor(e,t,r=10,i=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}Bx.prototype.isRectAreaLight=!0;class zx{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new N)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}zx.prototype.isSphericalHarmonics3=!0;class pd extends Mi{constructor(e=new zx,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}pd.prototype.isLightProbe=!0;class _2 extends Kn{constructor(e){super(e);this.textures={}}load(e,t,r,i){const s=this,o=new Gr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=new GN[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.format!==void 0&&(i.format=e.format),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new ke().setHex(o.value);break;case"v2":i.uniforms[s].value=new Se().fromArray(o.value);break;case"v3":i.uniforms[s].value=new N().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Ct().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Ln().fromArray(o.value);break;case"m4":i.uniforms[s].value=new qe().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Se().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Se().fromArray(e.clearcoatNormalScale)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}}class Ei{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Em extends et{constructor(){super();this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Em.prototype.isInstancedBufferGeometry=!0;class w2 extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Gr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,y){if(t[y]!==void 0)return t[y];const w=p.interleavedBuffers[y],v=s(p,w.buffer),g=iu(w.type,v),M=new Bo(g,w.stride);return M.uuid=w.uuid,t[y]=M,M}function s(p,y){if(r[y]!==void 0)return r[y];const w=p.arrayBuffers[y],v=new Uint32Array(w).buffer;return r[y]=v,v}const o=e.isInstancedBufferGeometry?new Em:new et,a=e.data.index;if(a!==void 0){const p=iu(a.type,a.array);o.setIndex(new _t(p,1))}const l=e.data.attributes;for(const p in l){const y=l[p];let _;if(y.isInterleavedBufferAttribute){const w=i(e.data,y.data);_=new Is(w,y.itemSize,y.offset,y.normalized)}else{const w=iu(y.type,y.array),v=y.isInstancedBufferAttribute?Go:_t;_=new v(w,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),y.usage!==void 0&&_.setUsage(y.usage),y.updateRange!==void 0&&(_.updateRange.offset=y.updateRange.offset,_.updateRange.count=y.updateRange.count),o.setAttribute(p,_)}const u=e.data.morphAttributes;if(u)for(const p in u){const y=u[p],_=[];for(let w=0,v=y.length;w<v;w++){const g=y[w];let M;if(g.isInterleavedBufferAttribute){const S=i(e.data,g.data);M=new Is(S,g.itemSize,g.offset,g.normalized)}else{const S=iu(g.type,g.array);M=new _t(S,g.itemSize,g.normalized)}g.name!==void 0&&(M.name=g.name),_.push(M)}o.morphAttributes[p]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let p=0,y=m.length;p!==y;++p){const _=m[p];o.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const p=new N;d.center!==void 0&&p.fromArray(d.center),o.boundingSphere=new Hi(p,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class XN extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Ei.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Gr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Ei.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Gr(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let m=!1;for(const d in o)if(o[d]instanceof HTMLImageElement){m=!0;break}m===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Ji().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new nd().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new w2;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in o2?a=o2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new _2;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l.type==="MultiMaterial"){const u=[];for(let h=0;h<l.materials.length;h++){const m=l.materials[h];r[m.uuid]===void 0&&(r[m.uuid]=s.parse(m)),u.push(r[m.uuid])}i[l.uuid]=u}else r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Wu.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(h)}else return l.data?{data:iu(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Dx(t);s=new dd(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const m=e[u],d=m.url;if(Array.isArray(d)){i[m.uuid]=[];for(let p=0,y=d.length;p<y;p++){const _=d[p],w=a(_);w!==null&&(w instanceof HTMLImageElement?i[m.uuid].push(w):i[m.uuid].push(new zo(w.data,w.width,w.height)))}}else{const p=a(m.url);p!==null&&(i[m.uuid]=p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:iu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new dd(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){r[l.uuid]=[];for(let h=0,m=u.length;h<m;h++){const d=u[h],p=await s(d);p!==null&&(p instanceof HTMLImageElement?r[l.uuid].push(p):r[l.uuid].push(new zo(p.data,p.width,p.height)))}}else{const h=await s(l.url);h!==null&&(r[l.uuid]=h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let l;const u=t[a.image];Array.isArray(u)?(l=new xu(u),u.length===6&&(l.needsUpdate=!0)):(u&&u.data?l=new zo(u.data,u.width,u.height):l=new an(u),u&&(l.needsUpdate=!0)),l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=r(a.mapping,qN)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=r(a.wrap[0],S2),l.wrapT=r(a.wrap[1],S2)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=r(a.minFilter,M2)),a.magFilter!==void 0&&(l.magFilter=r(a.magFilter,M2)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(l.userData=a.userData),i[a.uuid]=l}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const p=[];for(let y=0,_=d.length;y<_;y++){const w=d[y];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),p.push(r[w])}return p}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let h,m;switch(e.type){case"Scene":o=new Zf,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ke(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Jf(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Yf(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new ln(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ps(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Ux(e.color,e.intensity);break;case"DirectionalLight":o=new Mm(e.color,e.intensity);break;case"PointLight":o=new Sm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Bx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new wm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new kx(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new pd().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),m=l(e.material),o=new ed(h,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),m=l(e.material),o=new Gt(h,m);break;case"InstancedMesh":h=a(e.geometry),m=l(e.material);const d=e.count,p=e.instanceMatrix,y=e.instanceColor;o=new ax(h,m,d),o.instanceMatrix=new Go(new Float32Array(p.array),16),y!==void 0&&(o.instanceColor=new Go(new Float32Array(y.array),y.itemSize));break;case"LOD":o=new Ib;break;case"Line":o=new qi(a(e.geometry),l(e.material));break;case"LineLoop":o=new am(a(e.geometry),l(e.material));break;case"LineSegments":o=new _r(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Ru(a(e.geometry),l(e.material));break;case"Sprite":o=new nm(l(e.material));break;case"Group":o=new _i;break;case"Bone":o=new td;break;default:o=new mt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let p=0;p<d.length;p++)o.add(this.parseObject(d[p],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let p=0;p<d.length;p++){const y=d[p];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let p=0;p<d.length;p++){const y=d[p],_=o.getObjectByProperty("uuid",y.object);_!==void 0&&o.addLevel(_,y.distance)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const qN={UVMapping:_p,CubeReflectionMapping:Ca,CubeRefractionMapping:La,EquirectangularReflectionMapping:Lf,EquirectangularRefractionMapping:Rf,CubeUVReflectionMapping:Ql,CubeUVRefractionMapping:Pf},S2={RepeatWrapping:Eo,ClampToEdgeWrapping:zn,MirroredRepeatWrapping:Kl},M2={NearestFilter:xn,NearestMipmapNearestFilter:If,NearestMipmapLinearFilter:Df,LinearFilter:Kt,LinearMipmapNearestFilter:wp,LinearMipmapLinearFilter:Ss};class Gx extends Kn{constructor(e){super(e);typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qa.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){qa.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}Gx.prototype.isImageBitmapLoader=!0;let Tm;const Hx={getContext:function(){return Tm===void 0&&(Tm=new(window.AudioContext||window.webkitAudioContext)),Tm},setContext:function(n){Tm=n}};class E2 extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Gr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);Hx.getContext().decodeAudioData(l,function(h){t(h)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class T2 extends pd{constructor(e,t,r=1){super(void 0,r);const i=new ke().set(e),s=new ke().set(t),o=new N(i.r,i.g,i.b),a=new N(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}T2.prototype.isHemisphereLightProbe=!0;class b2 extends pd{constructor(e,t=1){super(void 0,t);const r=new ke().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}b2.prototype.isAmbientLightProbe=!0;const A2=new qe,C2=new qe;class YN{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ln,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ln,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),s=t.eyeSep/2,o=s*t.near/t.focus,a=t.near*Math.tan(ka*t.fov*.5)/t.zoom;let l,u;C2.elements[12]=-s,A2.elements[12]=s,l=-a*t.aspect+o,u=a*t.aspect+o,i.elements[0]=2*t.near/(u-l),i.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(i),l=-a*t.aspect-o,u=a*t.aspect-o,i.elements[0]=2*t.near/(u-l),i.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(C2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(A2)}}class Vx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=L2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=L2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function L2(){return(typeof performance=="undefined"?Date:performance).now()}const Ya=new N,R2=new Hn,JN=new N,Ja=new N;class ZN extends mt{constructor(){super();this.type="AudioListener",this.context=Hx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ya,R2,JN),Ja.set(0,0,-1).applyQuaternion(R2),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ya.x,i),t.positionY.linearRampToValueAtTime(Ya.y,i),t.positionZ.linearRampToValueAtTime(Ya.z,i),t.forwardX.linearRampToValueAtTime(Ja.x,i),t.forwardY.linearRampToValueAtTime(Ja.y,i),t.forwardZ.linearRampToValueAtTime(Ja.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ya.x,Ya.y,Ya.z),t.setOrientation(Ja.x,Ja.y,Ja.z,r.x,r.y,r.z)}}class Wx extends mt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Za=new N,P2=new Hn,QN=new N,Qa=new N;class KN extends Wx{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Za,P2,QN),Qa.set(0,0,1).applyQuaternion(P2);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Za.x,r),t.positionY.linearRampToValueAtTime(Za.y,r),t.positionZ.linearRampToValueAtTime(Za.z,r),t.orientationX.linearRampToValueAtTime(Qa.x,r),t.orientationY.linearRampToValueAtTime(Qa.y,r),t.orientationZ.linearRampToValueAtTime(Qa.z,r)}else t.setPosition(Za.x,Za.y,Za.z),t.setOrientation(Qa.x,Qa.y,Qa.z)}}class I2{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class D2{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Hn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Hn.multiplyQuaternionsFlat(e,o,e,t,e,r),Hn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const jx="\\[\\]\\.:\\/",$N=new RegExp("["+jx+"]","g"),Xx="[^"+jx+"]",eO="[^"+jx.replace("\\.","")+"]",tO=/((?:WC+[\/:])*)/.source.replace("WC",Xx),nO=/(WCOD+)?/.source.replace("WCOD",eO),rO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xx),iO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xx),sO=new RegExp("^"+tO+nO+rO+iO+"$"),oO=["material","materials","bones"];class aO{constructor(e,t,r){const i=r||Et.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Et{constructor(e,t,r){this.path=t,this.parsedPath=r||Et.parseTrackName(t),this.node=Et.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Et.Composite(e,t,r):new Et(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($N,"")}static parseTrackName(e){const t=sO.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);oO.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Et.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Et.Composite=aO;Et.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Et.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Et.prototype.GetterByBindingType=[Et.prototype._getValue_direct,Et.prototype._getValue_array,Et.prototype._getValue_arrayElement,Et.prototype._getValue_toArray];Et.prototype.SetterByBindingTypeAndVersioning=[[Et.prototype._setValue_direct,Et.prototype._setValue_direct_setNeedsUpdate,Et.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_array,Et.prototype._setValue_array_setNeedsUpdate,Et.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_arrayElement,Et.prototype._setValue_arrayElement_setNeedsUpdate,Et.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Et.prototype._setValue_fromArray,Et.prototype._setValue_fromArray_setNeedsUpdate,Et.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class F2{constructor(){this.uuid=Or(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,m=arguments.length;h!==m;++h){const d=arguments[h],p=d.uuid;let y=t[p];if(y===void 0){y=l++,t[p]=y,e.push(d);for(let _=0,w=o;_!==w;++_)s[_].push(new Et(d,r[_],i[_]))}else if(y<u){a=e[y];const _=--u,w=e[_];t[w.uuid]=y,e[y]=w,t[p]=_,e[_]=d;for(let v=0,g=o;v!==g;++v){const M=s[v],S=M[_];let b=M[y];M[y]=S,b===void 0&&(b=new Et(d,r[v],i[v])),M[_]=b}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const m=s++,d=e[m];t[d.uuid]=h,e[h]=d,t[u]=m,e[m]=l;for(let p=0,y=i;p!==y;++p){const _=r[p],w=_[m],v=_[h];_[h]=w,_[m]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,m=t[h];if(m!==void 0)if(delete t[h],m<s){const d=--s,p=e[d],y=--o,_=e[y];t[p.uuid]=m,e[m]=p,t[_.uuid]=d,e[d]=_,e.pop();for(let w=0,v=i;w!==v;++w){const g=r[w],M=g[d],S=g[y];g[m]=M,g[d]=S,g.pop()}}else{const d=--o,p=e[d];d>0&&(t[p.uuid]=m),e[m]=p,e.pop();for(let y=0,_=i;y!==_;++y){const w=r[y];w[m]=w[d],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,m=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(m);for(let d=h,p=l.length;d!==p;++d){const y=l[d];m[d]=new Et(y,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}F2.prototype.isAnimationObjectGroup=!0;class lO{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Da,endingEnd:Da};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;if(l<0||r===0)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case gy:for(let h=0,m=l.length;h!==m;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case Mp:default:for(let h=0,m=l.length;h!==m;++h)l[h].evaluate(o),u[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===mT;if(e===0)return s===-1?i:o&&(s&1)==1?t-i:i;if(r===hT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)==1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Fa,i.endingEnd=Fa):(e?i.endingStart=this.zeroSlopeAtStart?Fa:Da:i.endingStart=Nf,t?i.endingEnd=this.zeroSlopeAtEnd?Fa:Da:i.endingEnd=Nf)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}class k2 extends Es{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let m=0;m!==s;++m){const d=i[m],p=d.name;let y=h[p];if(y!==void 0)o[m]=y;else{if(y=o[m],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,p));continue}const _=t&&t._propertyBindings[m].binding.parsedPath;y=new D2(Et.create(r,p,_),d.ValueTypeName,d.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,p),o[m]=y}a[m].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete m[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount==0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Px(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Wu.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Mp),l!==void 0){const m=l.actionByRoot[s];if(m!==void 0&&m.blendMode===r)return m;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new lO(this,o,t,r);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Wu.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,m=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,m._cacheIndex=h,t[h]=m,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}k2.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class bm{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new bm(this.value.clone===void 0?this.value:this.value.clone())}}class N2 extends Bo{constructor(e,t,r=1){super(e,t);this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}N2.prototype.isInstancedInterleavedBuffer=!0;class O2{constructor(e,t,r,i,s){this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}O2.prototype.isGLBufferAttribute=!0;class qx{constructor(e,t,r=0,i=1/0){this.ray=new Ro(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new cu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Yx(e,this,r,t),r.sort(U2),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Yx(e[i],this,r,t);return r.sort(U2),r}}function U2(n,e){return n.distance-e.distance}function Yx(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)Yx(i[s],e,t,!0)}}class uO{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Zn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class cO{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const B2=new Se;class ju{constructor(e=new Se(1/0,1/0),t=new Se(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=B2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return B2.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ju.prototype.isBox2=!0;const z2=new N,Am=new N;class G2{constructor(e=new N,t=new N){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){z2.subVectors(e,this.start),Am.subVectors(this.end,this.start);const r=Am.dot(Am);let s=Am.dot(z2)/r;return t&&(s=Zn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const H2=new N;class fO extends mt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new et,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Ye(i,3));const s=new Nn({fog:!1,toneMapped:!1});this.cone=new _r(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),H2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(H2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qo=new N,Cm=new qe,Jx=new qe;class V2 extends _r{constructor(e){const t=W2(e),r=new et,i=[],s=[],o=new ke(0,0,1),a=new ke(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ye(i,3)),r.setAttribute("color",new Ye(s,3));const l=new Nn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Jx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Cm.multiplyMatrices(Jx,a.matrixWorld),qo.setFromMatrixPosition(Cm),i.setXYZ(o,qo.x,qo.y,qo.z),Cm.multiplyMatrices(Jx,a.parent.matrixWorld),qo.setFromMatrixPosition(Cm),i.setXYZ(o+1,qo.x,qo.y,qo.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function W2(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,W2(n.children[t]));return e}class dO extends Gt{constructor(e,t,r){const i=new jo(t,4,2),s=new Qn({wireframe:!0,fog:!1,toneMapped:!1});super(i,s);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hO=new N,j2=new ke,X2=new ke;class pO extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new Ha(t);i.rotateY(Math.PI*.5),this.material=new Qn({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new _t(o,3)),this.add(new Gt(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");j2.copy(this.light.color),X2.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?j2:X2;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(hO.setFromMatrixPosition(this.light.matrixWorld).negate())}}class q2 extends _r{constructor(e=10,t=10,r=4473924,i=8947848){r=new ke(r),i=new ke(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let d=0,p=0,y=-a;d<=t;d++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const _=d===s?r:i;_.toArray(u,p),p+=3,_.toArray(u,p),p+=3,_.toArray(u,p),p+=3,_.toArray(u,p),p+=3}const h=new et;h.setAttribute("position",new Ye(l,3)),h.setAttribute("color",new Ye(u,3));const m=new Nn({vertexColors:!0,toneMapped:!1});super(h,m);this.type="GridHelper"}}class mO extends _r{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new ke(s),o=new ke(o);const a=[],l=[];for(let m=0;m<=t;m++){const d=m/t*(Math.PI*2),p=Math.sin(d)*e,y=Math.cos(d)*e;a.push(0,0,0),a.push(p,0,y);const _=m&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let m=0;m<=r;m++){const d=m&1?s:o,p=e-e/r*m;for(let y=0;y<i;y++){let _=y/i*(Math.PI*2),w=Math.sin(_)*p,v=Math.cos(_)*p;a.push(w,0,v),l.push(d.r,d.g,d.b),_=(y+1)/i*(Math.PI*2),w=Math.sin(_)*p,v=Math.cos(_)*p,a.push(w,0,v),l.push(d.r,d.g,d.b)}}const u=new et;u.setAttribute("position",new Ye(a,3)),u.setAttribute("color",new Ye(l,3));const h=new Nn({vertexColors:!0,toneMapped:!1});super(u,h);this.type="PolarGridHelper"}}const Y2=new N,Lm=new N,J2=new N;class gO extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new et;i.setAttribute("position",new Ye([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Nn({fog:!1,toneMapped:!1});this.lightPlane=new qi(i,s),this.add(this.lightPlane),i=new et,i.setAttribute("position",new Ye([0,0,0,0,0,1],3)),this.targetLine=new qi(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Y2.setFromMatrixPosition(this.light.matrixWorld),Lm.setFromMatrixPosition(this.light.target.matrixWorld),J2.subVectors(Lm,Y2),this.lightPlane.lookAt(Lm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lm),this.targetLine.scale.z=J2.length()}}const Rm=new N,un=new Ba;class vO extends _r{constructor(e){const t=new et,r=new Nn({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={},a=new ke(16755200),l=new ke(16711680),u=new ke(43775),h=new ke(16777215),m=new ke(3355443);d("n1","n2",a),d("n2","n4",a),d("n4","n3",a),d("n3","n1",a),d("f1","f2",a),d("f2","f4",a),d("f4","f3",a),d("f3","f1",a),d("n1","f1",a),d("n2","f2",a),d("n3","f3",a),d("n4","f4",a),d("p","n1",l),d("p","n2",l),d("p","n3",l),d("p","n4",l),d("u1","u2",u),d("u2","u3",u),d("u3","u1",u),d("c","t",h),d("p","c",m),d("cn1","cn2",m),d("cn3","cn4",m),d("cf1","cf2",m),d("cf3","cf4",m);function d(y,_,w){p(y,w),p(_,w)}function p(y,_){i.push(0,0,0),s.push(_.r,_.g,_.b),o[y]===void 0&&(o[y]=[]),o[y].push(i.length/3-1)}t.setAttribute("position",new Ye(i,3)),t.setAttribute("color",new Ye(s,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;un.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Mn("c",t,e,un,0,0,-1),Mn("t",t,e,un,0,0,1),Mn("n1",t,e,un,-r,-i,-1),Mn("n2",t,e,un,r,-i,-1),Mn("n3",t,e,un,-r,i,-1),Mn("n4",t,e,un,r,i,-1),Mn("f1",t,e,un,-r,-i,1),Mn("f2",t,e,un,r,-i,1),Mn("f3",t,e,un,-r,i,1),Mn("f4",t,e,un,r,i,1),Mn("u1",t,e,un,r*.7,i*1.1,-1),Mn("u2",t,e,un,-r*.7,i*1.1,-1),Mn("u3",t,e,un,0,i*2,-1),Mn("cf1",t,e,un,-r,0,1),Mn("cf2",t,e,un,r,0,1),Mn("cf3",t,e,un,0,-i,1),Mn("cf4",t,e,un,0,i,1),Mn("cn1",t,e,un,-r,0,-1),Mn("cn2",t,e,un,r,0,-1),Mn("cn3",t,e,un,0,-i,-1),Mn("cn4",t,e,un,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mn(n,e,t,r,i,s,o){Rm.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Rm.x,Rm.y,Rm.z)}}const Pm=new yr;class Z2 extends _r{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new et;s.setIndex(new _t(r,1)),s.setAttribute("position",new _t(i,3));super(s,new Nn({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Pm.setFromObject(this.object),Pm.isEmpty())return;const t=Pm.min,r=Pm.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return _r.prototype.copy.call(this,e),this.object=e.object,this}}class yO extends _r{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new et;s.setIndex(new _t(r,1)),s.setAttribute("position",new Ye(i,3));super(s,new Nn({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class xO extends qi{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new et;o.setAttribute("position",new Ye(s,3)),o.computeBoundingSphere();super(o,new Nn({color:i,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new et;l.setAttribute("position",new Ye(a,3)),l.computeBoundingSphere(),this.add(new Gt(l,new Qn({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?yn:Mo,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Q2=new N;let Im,Zx;class _O extends mt{constructor(e=new N(0,0,1),t=new N(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super();this.type="ArrowHelper",Im===void 0&&(Im=new et,Im.setAttribute("position",new Ye([0,0,0,0,1,0],3)),Zx=new Vo(0,.5,1,5,1),Zx.translate(0,-.5,0)),this.position.copy(t),this.line=new qi(Im,new Nn({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gt(Zx,new Qn({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Q2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Q2,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class K2 extends _r{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new et;i.setAttribute("position",new Ye(t,3)),i.setAttribute("color",new Ye(r,3));const s=new Nn({vertexColors:!0,toneMapped:!1});super(i,s);this.type="AxesHelper"}setColors(e,t,r){const i=new ke,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $2{constructor(){this.type="ShapePath",this.color=new ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ld,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(g){const M=[];for(let S=0,b=g.length;S<b;S++){const C=g[S],T=new Ji;T.curves=C.curves,M.push(T)}return M}function i(g,M){const S=M.length;let b=!1;for(let C=S-1,T=0;T<S;C=T++){let L=M[C],P=M[T],O=P.x-L.x,D=P.y-L.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(L=M[T],O=-O,P=M[C],D=-D),g.y<L.y||g.y>P.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const k=D*(g.x-L.x)-O*(g.y-L.y);if(k===0)return!0;if(k<0)continue;b=!b}}else{if(g.y!==L.y)continue;if(P.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=P.x)return!0}}return b}const s=Zi.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return r(o);let a,l,u;const h=[];if(o.length===1)return l=o[0],u=new Ji,u.curves=l.curves,h.push(u),h;let m=!s(o[0].getPoints());m=e?!m:m;const d=[],p=[];let y=[],_=0,w;p[_]=void 0,y[_]=[];for(let g=0,M=o.length;g<M;g++)l=o[g],w=l.getPoints(),a=s(w),a=e?!a:a,a?(!m&&p[_]&&_++,p[_]={s:new Ji,p:w},p[_].s.curves=l.curves,m&&_++,y[_]=[]):y[_].push({h:l,p:w[0]});if(!p[0])return r(o);if(p.length>1){let g=!1;const M=[];for(let S=0,b=p.length;S<b;S++)d[S]=[];for(let S=0,b=p.length;S<b;S++){const C=y[S];for(let T=0;T<C.length;T++){const L=C[T];let P=!0;for(let O=0;O<p.length;O++)i(L.p,p[O].p)&&(S!==O&&M.push({froms:S,tos:O,hole:T}),P?(P=!1,d[O].push(L)):g=!0);P&&d[S].push(L)}}M.length>0&&(g||(y=d))}let v;for(let g=0,M=p.length;g<M;g++){u=p[g].s,h.push(u),v=y[g];for(let S=0,b=v.length;S<b;S++)u.holes.push(v[S].h)}return h}}const eA=new Float32Array(1),wO=new Int32Array(eA.buffer);class SO{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),eA[0]=e;const t=wO[0];let r=t>>16&32768,i=t>>12&2047;const s=t>>23&255;return s<103?r:s>142?(r|=31744,r|=(s==255?0:1)&&t&8388607,r):s<113?(i|=2048,r|=(i>>114-s)+(i>>113-s&1),r):(r|=s-112<<10|i>>1,r+=i&1,r)}}const MO=0,EO=1,TO=0,bO=1,AO=2;function CO(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function LO(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}function RO(n,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ru(n,e)}function PO(n){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new nm(n)}function IO(n,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ru(n,e)}function DO(n){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ho(n)}function FO(n){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ho(n)}function kO(n){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ho(n)}function NO(n,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new N(n,e,t)}function OO(n,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new _t(n,e).setUsage(ru)}function UO(n,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new UT(n,e)}function BO(n,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new BT(n,e)}function zO(n,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new zT(n,e)}function GO(n,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new GT(n,e)}function HO(n,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Op(n,e)}function VO(n,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new HT(n,e)}function WO(n,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Up(n,e)}function jO(n,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ye(n,e)}function XO(n,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new WT(n,e)}zr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(zr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};ld.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};function qO(n){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new K2(n)}function YO(n,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Z2(n,e)}function JO(n,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _r(new dx(n.geometry),new Nn({color:e!==void 0?e:16777215}))}q2.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};V2.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function ZO(n,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _r(new Mx(n.geometry),new Nn({color:e!==void 0?e:16777215}))}Kn.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ei.extractUrlBase(n)};Kn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function QO(n){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Gr(n)}function KO(n){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new d2(n)}ju.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};ju.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};ju.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};ju.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};yr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};yr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};yr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};yr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};yr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};Hi.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Vf.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};G2.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};Ln.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ln.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ln.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Ln.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Ln.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Ln.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};qe.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};qe.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};qe.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new N().setFromMatrixColumn(this,3)};qe.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};qe.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};qe.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};qe.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};qe.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};qe.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};qe.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};qe.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};qe.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};qe.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};qe.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};qe.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};qe.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};qe.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};qe.prototype.makeFrustum=function(n,e,t,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,s)};qe.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Wi.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Hn.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Hn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Ro.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Ro.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Ro.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};_n.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};_n.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};_n.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};_n.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};_n.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};_n.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),_n.getBarycoord(n,e,t,r,i)};_n.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),_n.getNormal(n,e,t,r)};Ji.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};Ji.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new wi(this,n)};Ji.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Va(this,n)};Se.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Se.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Se.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};N.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};N.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};N.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};N.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};N.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};N.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};N.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};N.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};N.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ct.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Ct.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};mt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};mt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};mt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};mt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};mt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(mt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Gt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Gt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),gT},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});ed.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};ln.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Mi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(_t.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ru},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ru)}}});_t.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?ru:nu),this};_t.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},_t.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};et.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};et.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new _t(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};et.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};et.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};et.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};et.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};et.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(et.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Bo.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?ru:nu),this};Bo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};wi.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};wi.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};wi.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Zf.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};bm.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(wn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ke}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Q0}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Rs.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});It.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)};It.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};It.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};It.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};It.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};It.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};It.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};It.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};It.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};It.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};It.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};It.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};It.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};It.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};It.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};It.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};It.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};It.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};It.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};It.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};It.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};It.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};It.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};It.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};It.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(It.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Nr:kn}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Tb.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function $O(n,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Yp(n,t)}Object.defineProperties(mi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});Wx.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new E2().load(n,function(r){e.setBuffer(r)}),this};I2.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};qp.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};qp.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)};Na.crossOrigin=void 0;Na.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Fx;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};Na.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new f2;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};Na.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Na.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function eU(){console.error("THREE.CanvasRenderer has been removed")}function tU(){console.error("THREE.JSONLoader has been removed.")}const nU={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function rU(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function iU(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new et}function sU(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new et}function oU(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function aU(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function lU(){console.error("THREE.ImmediateRenderObject has been removed.")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:q0}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=q0);var uU=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:sy,AddEquation:Aa,AddOperation:gE,AdditiveAnimationBlendMode:gy,AdditiveBlending:K0,AlphaFormat:AE,AlwaysDepth:uE,AlwaysStencilFunc:wT,AmbientLight:Ux,AmbientLightProbe:b2,AnimationClip:Wu,AnimationLoader:WN,AnimationMixer:k2,AnimationObjectGroup:F2,AnimationUtils:Xt,ArcCurve:hx,ArrayCamera:ix,ArrowHelper:_O,Audio:Wx,AudioAnalyser:I2,AudioContext:Hx,AudioListener:ZN,AudioLoader:E2,AxesHelper:K2,AxisHelper:qO,BackSide:yn,BasicDepthPacking:xT,BasicShadowMap:YR,BinaryTextureLoader:KO,Bone:td,BooleanKeyframeTrack:ja,BoundingBoxHelper:YO,Box2:ju,Box3:yr,Box3Helper:yO,BoxBufferGeometry:Vi,BoxGeometry:Vi,BoxHelper:Z2,BufferAttribute:_t,BufferGeometry:et,BufferGeometryLoader:w2,ByteType:wE,Cache:qa,Camera:Ba,CameraHelper:vO,CanvasRenderer:eU,CanvasTexture:Yb,CatmullRomCurve3:yx,CineonToneMapping:xE,CircleBufferGeometry:Pu,CircleGeometry:Pu,ClampToEdgeWrapping:zn,Clock:Vx,Color:ke,ColorKeyframeTrack:Ix,CompressedTexture:cx,CompressedTextureLoader:jN,ConeBufferGeometry:Iu,ConeGeometry:Iu,CubeCamera:qp,CubeReflectionMapping:Ca,CubeRefractionMapping:La,CubeTexture:xu,CubeTextureLoader:f2,CubeUVReflectionMapping:Ql,CubeUVRefractionMapping:Pf,CubicBezierCurve:pm,CubicBezierCurve3:xx,CubicInterpolant:a2,CullFaceBack:Y0,CullFaceFront:JM,CullFaceFrontBack:qR,CullFaceNone:YM,Curve:zr,CurvePath:Kb,CustomBlending:ZM,CustomToneMapping:_E,CylinderBufferGeometry:Vo,CylinderGeometry:Vo,Cylindrical:cO,DataTexture:zo,DataTexture2DArray:Kp,DataTexture3D:tx,DataTextureLoader:d2,DataUtils:SO,DecrementStencilOp:rP,DecrementWrapStencilOp:sP,DefaultLoadingManager:c2,DepthFormat:Pa,DepthStencilFormat:eu,DepthTexture:Jb,DirectionalLight:Mm,DirectionalLightHelper:gO,DiscreteInterpolant:l2,DodecahedronBufferGeometry:Du,DodecahedronGeometry:Du,DoubleSide:xs,DstAlphaFactor:rE,DstColorFactor:sE,DynamicBufferAttribute:OO,DynamicCopyUsage:xP,DynamicDrawUsage:ru,DynamicReadUsage:gP,EdgesGeometry:dx,EdgesHelper:JO,EllipseCurve:id,EqualDepth:fE,EqualStencilFunc:uP,EquirectangularReflectionMapping:Lf,EquirectangularRefractionMapping:Rf,Euler:Io,EventDispatcher:Es,ExtrudeBufferGeometry:wi,ExtrudeGeometry:wi,FaceColors:bO,FileLoader:Gr,FlatShading:Q0,Float16BufferAttribute:VT,Float32Attribute:jO,Float32BufferAttribute:Ye,Float64Attribute:XO,Float64BufferAttribute:WT,FloatType:Gi,Fog:Jf,FogExp2:Yf,Font:aU,FontLoader:oU,FrontSide:Mo,Frustum:Vf,GLBufferAttribute:O2,GLSL1:wP,GLSL3:Sy,GammaEncoding:Ep,GreaterDepth:hE,GreaterEqualDepth:dE,GreaterEqualStencilFunc:hP,GreaterStencilFunc:fP,GridHelper:q2,Group:_i,HalfFloatType:Ra,HemisphereLight:kx,HemisphereLightHelper:pO,HemisphereLightProbe:T2,IcosahedronBufferGeometry:ku,IcosahedronGeometry:ku,ImageBitmapLoader:Gx,ImageLoader:dd,ImageUtils:Na,ImmediateRenderObject:lU,IncrementStencilOp:nP,IncrementWrapStencilOp:iP,InstancedBufferAttribute:Go,InstancedBufferGeometry:Em,InstancedInterleavedBuffer:N2,InstancedMesh:ax,Int16Attribute:GO,Int16BufferAttribute:GT,Int32Attribute:VO,Int32BufferAttribute:HT,Int8Attribute:UO,Int8BufferAttribute:UT,IntType:ME,InterleavedBuffer:Bo,InterleavedBufferAttribute:Is,Interpolant:Qi,InterpolateDiscrete:tu,InterpolateLinear:Ia,InterpolateSmooth:Sp,InvertStencilOp:oP,JSONLoader:tU,KeepStencilOp:bp,KeyframeTrack:Si,LOD:Ib,LatheBufferGeometry:Nu,LatheGeometry:Nu,Layers:cu,LensFlare:rU,LessDepth:cE,LessEqualDepth:xp,LessEqualStencilFunc:cP,LessStencilFunc:lP,Light:Mi,LightProbe:pd,Line:qi,Line3:G2,LineBasicMaterial:Nn,LineCurve:ad,LineCurve3:Qb,LineDashedMaterial:Rx,LineLoop:am,LinePieces:EO,LineSegments:_r,LineStrip:MO,LinearEncoding:kn,LinearFilter:Kt,LinearInterpolant:Px,LinearMipMapLinearFilter:$R,LinearMipMapNearestFilter:KR,LinearMipmapLinearFilter:Ss,LinearMipmapNearestFilter:wp,LinearToneMapping:vE,Loader:Kn,LoaderUtils:Ei,LoadingManager:Dx,LogLuvEncoding:yT,LoopOnce:hT,LoopPingPong:mT,LoopRepeat:pT,LuminanceAlphaFormat:LE,LuminanceFormat:CE,MOUSE:jR,Material:wn,MaterialLoader:_2,Math:Ty,MathUtils:Ty,Matrix3:Ln,Matrix4:qe,MaxEquation:ny,Mesh:Gt,MeshBasicMaterial:Qn,MeshDepthMaterial:Xf,MeshDistanceMaterial:qf,MeshFaceMaterial:CO,MeshLambertMaterial:Cx,MeshMatcapMaterial:Lx,MeshNormalMaterial:Ax,MeshPhongMaterial:Tx,MeshPhysicalMaterial:Ds,MeshStandardMaterial:Wa,MeshToonMaterial:bx,MinEquation:ty,MirroredRepeatWrapping:Kl,MixOperation:mE,MultiMaterial:LO,MultiplyBlending:ey,MultiplyOperation:Cf,NearestFilter:xn,NearestMipMapLinearFilter:QR,NearestMipMapNearestFilter:ZR,NearestMipmapLinearFilter:Df,NearestMipmapNearestFilter:If,NeverDepth:lE,NeverStencilFunc:aP,NoBlending:_s,NoColors:TO,NoToneMapping:ws,NormalAnimationBlendMode:Mp,NormalBlending:Zl,NotEqualDepth:pE,NotEqualStencilFunc:dP,NumberKeyframeTrack:Hu,Object3D:mt,ObjectLoader:XN,ObjectSpaceNormalMap:_T,OctahedronBufferGeometry:Ha,OctahedronGeometry:Ha,OneFactor:eE,OneMinusDstAlphaFactor:iE,OneMinusDstColorFactor:oE,OneMinusSrcAlphaFactor:iy,OneMinusSrcColorFactor:nE,OrthographicCamera:Ps,PCFShadowMap:J0,PCFSoftShadowMap:Z0,PMREMGenerator:KT,ParametricGeometry:iU,Particle:PO,ParticleBasicMaterial:FO,ParticleSystem:IO,ParticleSystemMaterial:kO,Path:ld,PerspectiveCamera:ln,Plane:Wi,PlaneBufferGeometry:ji,PlaneGeometry:ji,PlaneHelper:xO,PointCloud:RO,PointCloudMaterial:DO,PointLight:Sm,PointLightHelper:dO,Points:Ru,PointsMaterial:Ho,PolarGridHelper:mO,PolyhedronBufferGeometry:Yi,PolyhedronGeometry:Yi,PositionalAudio:KN,PropertyBinding:Et,PropertyMixer:D2,QuadraticBezierCurve:mm,QuadraticBezierCurve3:gm,Quaternion:Hn,QuaternionKeyframeTrack:Xo,QuaternionLinearInterpolant:u2,REVISION:q0,RGBADepthPacking:wy,RGBAFormat:Gn,RGBAIntegerFormat:NE,RGBA_ASTC_10x10_Format:JE,RGBA_ASTC_10x5_Format:XE,RGBA_ASTC_10x6_Format:qE,RGBA_ASTC_10x8_Format:YE,RGBA_ASTC_12x10_Format:ZE,RGBA_ASTC_12x12_Format:QE,RGBA_ASTC_4x4_Format:UE,RGBA_ASTC_5x4_Format:BE,RGBA_ASTC_5x5_Format:zE,RGBA_ASTC_6x5_Format:GE,RGBA_ASTC_6x6_Format:HE,RGBA_ASTC_8x5_Format:VE,RGBA_ASTC_8x6_Format:WE,RGBA_ASTC_8x8_Format:jE,RGBA_BPTC_Format:KE,RGBA_ETC2_EAC_Format:my,RGBA_PVRTC_2BPPV1_Format:hy,RGBA_PVRTC_4BPPV1_Format:dy,RGBA_S3TC_DXT1_Format:ay,RGBA_S3TC_DXT3_Format:ly,RGBA_S3TC_DXT5_Format:uy,RGBDEncoding:_y,RGBEEncoding:Tp,RGBEFormat:RE,RGBFormat:To,RGBIntegerFormat:kE,RGBM16Encoding:xy,RGBM7Encoding:yy,RGB_ETC1_Format:OE,RGB_ETC2_Format:py,RGB_PVRTC_2BPPV1_Format:fy,RGB_PVRTC_4BPPV1_Format:cy,RGB_S3TC_DXT1_Format:oy,RGFormat:DE,RGIntegerFormat:FE,RawShaderMaterial:wu,Ray:Ro,Raycaster:qx,RectAreaLight:Bx,RedFormat:PE,RedIntegerFormat:IE,ReinhardToneMapping:yE,RepeatWrapping:Eo,ReplaceStencilOp:tP,ReverseSubtractEquation:KM,RingBufferGeometry:Ou,RingGeometry:Ou,SRGB8_ALPHA8_ASTC_10x10_Format:cT,SRGB8_ALPHA8_ASTC_10x5_Format:aT,SRGB8_ALPHA8_ASTC_10x6_Format:lT,SRGB8_ALPHA8_ASTC_10x8_Format:uT,SRGB8_ALPHA8_ASTC_12x10_Format:fT,SRGB8_ALPHA8_ASTC_12x12_Format:dT,SRGB8_ALPHA8_ASTC_4x4_Format:$E,SRGB8_ALPHA8_ASTC_5x4_Format:eT,SRGB8_ALPHA8_ASTC_5x5_Format:tT,SRGB8_ALPHA8_ASTC_6x5_Format:nT,SRGB8_ALPHA8_ASTC_6x6_Format:rT,SRGB8_ALPHA8_ASTC_8x5_Format:iT,SRGB8_ALPHA8_ASTC_8x6_Format:sT,SRGB8_ALPHA8_ASTC_8x8_Format:oT,Scene:Zf,SceneUtils:nU,ShaderChunk:gt,ShaderLib:xi,ShaderMaterial:Rs,ShadowMaterial:Ex,Shape:Ji,ShapeBufferGeometry:Va,ShapeGeometry:Va,ShapePath:$2,ShapeUtils:Zi,ShortType:SE,Skeleton:nd,SkeletonHelper:V2,SkinnedMesh:ed,SmoothShading:JR,Sphere:Hi,SphereBufferGeometry:jo,SphereGeometry:jo,Spherical:uO,SphericalHarmonics3:zx,SplineCurve:vm,SpotLight:wm,SpotLightHelper:fO,Sprite:nm,SpriteMaterial:$p,SrcAlphaFactor:ry,SrcAlphaSaturateFactor:aE,SrcColorFactor:tE,StaticCopyUsage:yP,StaticDrawUsage:nu,StaticReadUsage:mP,StereoCamera:YN,StreamCopyUsage:_P,StreamDrawUsage:pP,StreamReadUsage:vP,StringKeyframeTrack:Xa,SubtractEquation:QM,SubtractiveBlending:$0,TOUCH:XR,TangentSpaceNormalMap:bo,TetrahedronBufferGeometry:Uu,TetrahedronGeometry:Uu,TextGeometry:sU,Texture:an,TextureLoader:Fx,TorusBufferGeometry:Bu,TorusGeometry:Bu,TorusKnotBufferGeometry:zu,TorusKnotGeometry:zu,Triangle:_n,TriangleFanDrawMode:vy,TriangleStripDrawMode:vT,TrianglesDrawMode:gT,TubeBufferGeometry:Gu,TubeGeometry:Gu,UVMapping:_p,Uint16Attribute:HO,Uint16BufferAttribute:Op,Uint32Attribute:WO,Uint32BufferAttribute:Up,Uint8Attribute:BO,Uint8BufferAttribute:BT,Uint8ClampedAttribute:zO,Uint8ClampedBufferAttribute:zT,Uniform:bm,UniformsLib:Ue,UniformsUtils:Jy,UnsignedByteType:Ms,UnsignedInt248Type:$l,UnsignedIntType:kf,UnsignedShort4444Type:EE,UnsignedShort5551Type:TE,UnsignedShort565Type:bE,UnsignedShortType:Ff,VSMShadowMap:Jl,Vector2:Se,Vector3:N,Vector4:Ct,VectorKeyframeTrack:Vu,Vertex:NO,VertexColors:AO,VideoTexture:qb,WebGL1Renderer:Ab,WebGLCubeRenderTarget:Yp,WebGLMultipleRenderTargets:bT,WebGLMultisampleRenderTarget:Ay,WebGLRenderTarget:mi,WebGLRenderTargetCube:$O,WebGLRenderer:It,WebGLUtils:bb,WireframeGeometry:Mx,WireframeHelper:ZO,WrapAroundEnding:Nf,XHRLoader:QO,ZeroCurvatureEnding:Da,ZeroFactor:$M,ZeroSlopeEnding:Fa,ZeroStencilOp:eP,sRGBEncoding:Nr});function cU(n){let e;const t=new Set,r=(u,h)=>{const m=typeof u=="function"?u(e):u;if(m!==e){const d=e;e=h?m:Object.assign({},e,m),t.forEach(p=>p(e,d))}},i=()=>e,s=(u,h=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(e);function p(){const y=h(e);if(!m(d,y)){const _=d;u(d=y,_)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(u,h,m)=>h||m?s(u,h,m):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const fU=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),tA=fU?ge.exports.useEffect:ge.exports.useLayoutEffect;function dU(n){const e=typeof n=="function"?cU(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=ge.exports.useReducer(w=>w+1,0),o=e.getState(),a=ge.exports.useRef(o),l=ge.exports.useRef(r),u=ge.exports.useRef(i),h=ge.exports.useRef(!1),m=ge.exports.useRef();m.current===void 0&&(m.current=r(o));let d,p=!1;(a.current!==o||l.current!==r||u.current!==i||h.current)&&(d=r(o),p=!i(m.current,d)),tA(()=>{p&&(m.current=d),a.current=o,l.current=r,u.current=i,h.current=!1});const y=ge.exports.useRef(o);tA(()=>{const w=()=>{try{const g=e.getState(),M=l.current(g);u.current(m.current,M)||(a.current=g,m.current=M,s())}catch{h.current=!0,s()}},v=e.subscribe(w);return e.getState()!==y.current&&w(),v},[]);const _=p?d:m.current;return ge.exports.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var nA={exports:{}},rA={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(t){var r={},i=zg,s=ge.exports,o=_l.exports;function a(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=60103,h=60106,m=60107,d=60108,p=60114,y=60109,_=60110,w=60112,v=60113,g=60120,M=60115,S=60116,b=60121,C=60129,T=60130,L=60131;if(typeof Symbol=="function"&&Symbol.for){var P=Symbol.for;u=P("react.element"),h=P("react.portal"),m=P("react.fragment"),d=P("react.strict_mode"),p=P("react.profiler"),y=P("react.provider"),_=P("react.context"),w=P("react.forward_ref"),v=P("react.suspense"),g=P("react.suspense_list"),M=P("react.memo"),S=P("react.lazy"),b=P("react.block"),P("react.scope"),C=P("react.debug_trace_mode"),T=P("react.offscreen"),L=P("react.legacy_hidden")}var O=typeof Symbol=="function"&&Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=O&&c[O]||c["@@iterator"],typeof c=="function"?c:null)}function k(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case h:return"Portal";case p:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case _:return(c.displayName||"Context")+".Consumer";case y:return(c._context.displayName||"Context")+".Provider";case w:var f=c.render;return f=f.displayName||f.name||"",c.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case M:return k(c.type);case b:return k(c._render);case S:f=c._payload,c=c._init;try{return k(c(f))}catch{}}return null}function F(c){var f=c,x=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&1026)!=0&&(x=f.return),c=f.return;while(c)}return f.tag===3?x:null}function B(c){if(F(c)!==c)throw Error(a(188))}function W(c){var f=c.alternate;if(!f){if(f=F(c),f===null)throw Error(a(188));return f!==c?null:c}for(var x=c,E=f;;){var A=x.return;if(A===null)break;var R=A.alternate;if(R===null){if(E=A.return,E!==null){x=E;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===x)return B(A),c;if(R===E)return B(A),f;R=R.sibling}throw Error(a(188))}if(x.return!==E.return)x=A,E=R;else{for(var z=!1,Y=A.child;Y;){if(Y===x){z=!0,x=A,E=R;break}if(Y===E){z=!0,E=A,x=R;break}Y=Y.sibling}if(!z){for(Y=R.child;Y;){if(Y===x){z=!0,x=R,E=A;break}if(Y===E){z=!0,E=R,x=A;break}Y=Y.sibling}if(!z)throw Error(a(189))}}if(x.alternate!==E)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?c:f}function H(c){if(c=W(c),!c)return null;for(var f=c;;){if(f.tag===5||f.tag===6)return f;if(f.child)f.child.return=f,f=f.child;else{if(f===c)break;for(;!f.sibling;){if(!f.return||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}function X(c){if(c=W(c),!c)return null;for(var f=c;;){if(f.tag===5||f.tag===6)return f;if(f.child&&f.tag!==4)f.child.return=f,f=f.child;else{if(f===c)break;for(;!f.sibling;){if(!f.return||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}function ue(c,f){for(var x=c.alternate;f!==null;){if(f===c||f===x)return!0;f=f.return}return!1}var Me=t.getPublicInstance,Ae=t.getRootHostContext,V=t.getChildHostContext,te=t.prepareForCommit,q=t.resetAfterCommit,re=t.createInstance,ye=t.appendInitialChild,$=t.finalizeInitialChildren,Te=t.prepareUpdate,Le=t.shouldSetTextContent,Ee=t.createTextInstance,Re=t.scheduleTimeout,Ce=t.cancelTimeout,ce=t.noTimeout,xe=t.isPrimaryRenderer,_e=t.supportsMutation,Pe=t.supportsPersistence,be=t.supportsHydration,G=t.getInstanceFromNode,I=t.makeOpaqueHydratingObject,Q=t.makeClientId,ae=t.beforeActiveInstanceBlur,Z=t.afterActiveInstanceBlur,fe=t.preparePortalMount,le=t.supportsTestSelectors,se=t.findFiberRoot,pe=t.getBoundingRect,ve=t.getTextContent,j=t.isHiddenSubtree,K=t.matchAccessibilityRole,ie=t.setFocusIfFocusable,De=t.setupIntersectionObserver,Ie=t.appendChild,We=t.appendChildToContainer,ft=t.commitTextUpdate,je=t.commitMount,Xe=t.commitUpdate,nt=t.insertBefore,ut=t.insertInContainerBefore,Ft=t.removeChild,Ot=t.removeChildFromContainer,Dt=t.resetTextContent,Pr=t.hideInstance,fr=t.hideTextInstance,en=t.unhideInstance,Ti=t.unhideTextInstance,At=t.clearContainer,vt=t.cloneInstance,tn=t.createContainerChildSet,En=t.appendChildToContainerChildSet,Lt=t.finalizeContainerChildren,Tn=t.replaceContainerChildren,dr=t.cloneHiddenInstance,nn=t.cloneHiddenTextInstance,U=t.canHydrateInstance,ee=t.canHydrateTextInstance,de=t.isSuspenseInstancePending,oe=t.isSuspenseInstanceFallback,we=t.getNextHydratableSibling,Je=t.getFirstHydratableChild,$e=t.hydrateInstance,Ze=t.hydrateTextInstance,lt=t.getNextHydratableInstanceAfterSuspenseInstance,St=t.commitHydratedContainer,dt=t.commitHydratedSuspenseInstance,ct;function bt(c){if(ct===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);ct=f&&f[1]||""}return`
`+ct+c}var Ir=!1;function pt(c,f){if(!c||Ir)return"";Ir=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(he){var E=he}Reflect.construct(c,[],f)}else{try{f.call()}catch(he){E=he}c.call(f.prototype)}else{try{throw Error()}catch(he){E=he}c()}}catch(he){if(he&&E&&typeof he.stack=="string"){for(var A=he.stack.split(`
`),R=E.stack.split(`
`),z=A.length-1,Y=R.length-1;1<=z&&0<=Y&&A[z]!==R[Y];)Y--;for(;1<=z&&0<=Y;z--,Y--)if(A[z]!==R[Y]){if(z!==1||Y!==1)do if(z--,Y--,0>Y||A[z]!==R[Y])return`
`+A[z].replace(" at new "," at ");while(1<=z&&0<=Y);break}}}finally{Ir=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?bt(c):""}var wr=[],yt=-1;function bn(c){return{current:c}}function Fe(c){0>yt||(c.current=wr[yt],wr[yt]=null,yt--)}function xt(c,f){yt++,wr[yt]=c.current,c.current=f}var Rn={},at=bn(Rn),Zt=bn(!1),Qt=Rn;function ri(c,f){var x=c.type.contextTypes;if(!x)return Rn;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var A={},R;for(R in x)A[R]=f[R];return E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=A),A}function Pn(c){return c=c.childContextTypes,c!=null}function ea(){Fe(Zt),Fe(at)}function ta(c,f,x){if(at.current!==Rn)throw Error(a(168));xt(at,f),xt(Zt,x)}function ec(c,f,x){var E=c.stateNode;if(c=f.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var A in E)if(!(A in c))throw Error(a(108,k(f)||"Unknown",A));return i({},x,E)}function Bs(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Rn,Qt=at.current,xt(at,c),xt(Zt,Zt.current),!0}function tc(c,f,x){var E=c.stateNode;if(!E)throw Error(a(169));x?(c=ec(c,f,Qt),E.__reactInternalMemoizedMergedChildContext=c,Fe(Zt),Fe(at),xt(at,c)):Fe(Zt),xt(Zt,x)}var $i=null,ii=null,zs=o.unstable_now;zs();var Gs=0,Rt=8;function si(c){if((1&c)!=0)return Rt=15,1;if((2&c)!=0)return Rt=14,2;if((4&c)!=0)return Rt=13,4;var f=24&c;return f!==0?(Rt=12,f):(c&32)!=0?(Rt=11,32):(f=192&c,f!==0?(Rt=10,f):(c&256)!=0?(Rt=9,256):(f=3584&c,f!==0?(Rt=8,f):(c&4096)!=0?(Rt=7,4096):(f=4186112&c,f!==0?(Rt=6,f):(f=62914560&c,f!==0?(Rt=5,f):c&67108864?(Rt=4,67108864):(c&134217728)!=0?(Rt=3,134217728):(f=805306368&c,f!==0?(Rt=2,f):(1073741824&c)!=0?(Rt=1,1073741824):(Rt=8,c))))))}function na(c){switch(c){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function qm(c){switch(c){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,c))}}function bi(c,f){var x=c.pendingLanes;if(x===0)return Rt=0;var E=0,A=0,R=c.expiredLanes,z=c.suspendedLanes,Y=c.pingedLanes;if(R!==0)E=R,A=Rt=15;else if(R=x&134217727,R!==0){var he=R&~z;he!==0?(E=si(he),A=Rt):(Y&=R,Y!==0&&(E=si(Y),A=Rt))}else R=x&~z,R!==0?(E=si(R),A=Rt):Y!==0&&(E=si(Y),A=Rt);if(E===0)return 0;if(E=31-Wr(E),E=x&((0>E?0:1<<E)<<1)-1,f!==0&&f!==E&&(f&z)==0){if(si(f),A<=Rt)return f;Rt=A}if(f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=E;0<f;)x=31-Wr(f),A=1<<x,E|=c[x],f&=~A;return E}function ra(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Ai(c,f){switch(c){case 15:return 1;case 14:return 2;case 12:return c=es(24&~f),c===0?Ai(10,f):c;case 10:return c=es(192&~f),c===0?Ai(8,f):c;case 8:return c=es(3584&~f),c===0&&(c=es(4186112&~f),c===0&&(c=512)),c;case 2:return f=es(805306368&~f),f===0&&(f=268435456),f}throw Error(a(358,c))}function es(c){return c&-c}function Hs(c){for(var f=[],x=0;31>x;x++)f.push(c);return f}function ts(c,f,x){c.pendingLanes|=f;var E=f-1;c.suspendedLanes&=E,c.pingedLanes&=E,c=c.eventTimes,f=31-Wr(f),c[f]=x}var Wr=Math.clz32?Math.clz32:nc,Cd=Math.log,Ld=Math.LN2;function nc(c){return c===0?32:31-(Cd(c)/Ld|0)|0}var ia=o.unstable_runWithPriority,sl=o.unstable_scheduleCallback,Vs=o.unstable_cancelCallback,Ws=o.unstable_shouldYield,ns=o.unstable_requestPaint,rs=o.unstable_now,Rd=o.unstable_getCurrentPriorityLevel,Ci=o.unstable_ImmediatePriority,ol=o.unstable_UserBlockingPriority,al=o.unstable_NormalPriority,rc=o.unstable_LowPriority,js=o.unstable_IdlePriority,Xs={},Pd=ns!==void 0?ns:function(){},fn=null,qs=null,sa=!1,ic=rs(),dn=1e4>ic?rs:function(){return rs()-ic};function oi(){switch(Rd()){case Ci:return 99;case ol:return 98;case al:return 97;case rc:return 96;case js:return 95;default:throw Error(a(332))}}function sc(c){switch(c){case 99:return Ci;case 98:return ol;case 97:return al;case 96:return rc;case 95:return js;default:throw Error(a(332))}}function hr(c,f){return c=sc(c),ia(c,f)}function ai(c,f,x){return c=sc(c),sl(c,f,x)}function hn(){if(qs!==null){var c=qs;qs=null,Vs(c)}oc()}function oc(){if(!sa&&fn!==null){sa=!0;var c=0;try{var f=fn;hr(99,function(){for(;c<f.length;c++){var x=f[c];do x=x(!0);while(x!==null)}}),fn=null}catch(x){throw fn!==null&&(fn=fn.slice(c+1)),sl(Ci,hn),x}finally{sa=!1}}}var ac=l.ReactCurrentBatchConfig;function lc(c,f){return c===f&&(c!==0||1/c==1/f)||c!==c&&f!==f}var On=typeof Object.is=="function"?Object.is:lc,Id=Object.prototype.hasOwnProperty;function Li(c,f){if(On(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var x=Object.keys(c),E=Object.keys(f);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++)if(!Id.call(f,x[E])||!On(c[x[E]],f[x[E]]))return!1;return!0}function ll(c){switch(c.tag){case 5:return bt(c.type);case 16:return bt("Lazy");case 13:return bt("Suspense");case 19:return bt("SuspenseList");case 0:case 2:case 15:return c=pt(c.type,!1),c;case 11:return c=pt(c.type.render,!1),c;case 22:return c=pt(c.type._render,!1),c;case 1:return c=pt(c.type,!0),c;default:return""}}function Vt(c,f){if(c&&c.defaultProps){f=i({},f),c=c.defaultProps;for(var x in c)f[x]===void 0&&(f[x]=c[x]);return f}return f}var ul=bn(null),is=null,li=null,oa=null;function uc(){oa=li=is=null}function ss(c,f){c=c.type._context,xe?(xt(ul,c._currentValue),c._currentValue=f):(xt(ul,c._currentValue2),c._currentValue2=f)}function An(c){var f=ul.current;Fe(ul),c=c.type._context,xe?c._currentValue=f:c._currentValue2=f}function Sr(c,f){for(;c!==null;){var x=c.alternate;if((c.childLanes&f)===f){if(x===null||(x.childLanes&f)===f)break;x.childLanes|=f}else c.childLanes|=f,x!==null&&(x.childLanes|=f);c=c.return}}function pn(c,f){is=c,oa=li=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&f)!=0&&(ci=!0),c.firstContext=null)}function mn(c,f){if(oa!==c&&f!==!1&&f!==0)if((typeof f!="number"||f===1073741823)&&(oa=c,f=1073741823),f={context:c,observedBits:f,next:null},li===null){if(is===null)throw Error(a(308));li=f,is.dependencies={lanes:0,firstContext:f,responders:null}}else li=li.next=f;return xe?c._currentValue:c._currentValue2}var ui=!1;function Ym(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function R1(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ys(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function Js(c,f){if(c=c.updateQueue,c!==null){c=c.shared;var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}}function P1(c,f){var x=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var A=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var z={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};R===null?A=R=z:R=R.next=z,x=x.next}while(x!==null);R===null?A=R=f:R=R.next=f}else A=R=f;x={baseState:E.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:E.shared,effects:E.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=f:c.next=f,x.lastBaseUpdate=f}function cc(c,f,x,E){var A=c.updateQueue;ui=!1;var R=A.firstBaseUpdate,z=A.lastBaseUpdate,Y=A.shared.pending;if(Y!==null){A.shared.pending=null;var he=Y,Oe=he.next;he.next=null,z===null?R=Oe:z.next=Oe,z=he;var Qe=c.alternate;if(Qe!==null){Qe=Qe.updateQueue;var rt=Qe.lastBaseUpdate;rt!==z&&(rt===null?Qe.firstBaseUpdate=Oe:rt.next=Oe,Qe.lastBaseUpdate=he)}}if(R!==null){rt=A.baseState,z=0,Qe=Oe=he=null;do{Y=R.lane;var ze=R.eventTime;if((E&Y)===Y){Qe!==null&&(Qe=Qe.next={eventTime:ze,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var kt=c,qt=R;switch(Y=f,ze=x,qt.tag){case 1:if(kt=qt.payload,typeof kt=="function"){rt=kt.call(ze,rt,Y);break e}rt=kt;break e;case 3:kt.flags=kt.flags&-4097|64;case 0:if(kt=qt.payload,Y=typeof kt=="function"?kt.call(ze,rt,Y):kt,Y==null)break e;rt=i({},rt,Y);break e;case 2:ui=!0}}R.callback!==null&&(c.flags|=32,Y=A.effects,Y===null?A.effects=[R]:Y.push(R))}else ze={eventTime:ze,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Qe===null?(Oe=Qe=ze,he=rt):Qe=Qe.next=ze,z|=Y;if(R=R.next,R===null){if(Y=A.shared.pending,Y===null)break;R=Y.next,Y.next=null,A.lastBaseUpdate=Y,A.shared.pending=null}}while(1);Qe===null&&(he=rt),A.baseState=he,A.firstBaseUpdate=Oe,A.lastBaseUpdate=Qe,Ec|=z,c.lanes=z,c.memoizedState=rt}}function I1(c,f,x){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var E=c[f],A=E.callback;if(A!==null){if(E.callback=null,E=x,typeof A!="function")throw Error(a(191,A));A.call(E)}}}var D1=new s.Component().refs;function Dd(c,f,x,E){f=c.memoizedState,x=x(E,f),x=x==null?f:i({},f,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var Fd={isMounted:function(c){return(c=c._reactInternals)?F(c)===c:!1},enqueueSetState:function(c,f,x){c=c._reactInternals;var E=Tr(),A=Ks(c),R=Ys(E,A);R.payload=f,x!=null&&(R.callback=x),Js(c,R),cs(c,A,E)},enqueueReplaceState:function(c,f,x){c=c._reactInternals;var E=Tr(),A=Ks(c),R=Ys(E,A);R.tag=1,R.payload=f,x!=null&&(R.callback=x),Js(c,R),cs(c,A,E)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var x=Tr(),E=Ks(c),A=Ys(x,E);A.tag=2,f!=null&&(A.callback=f),Js(c,A),cs(c,E,x)}};function F1(c,f,x,E,A,R,z){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,R,z):f.prototype&&f.prototype.isPureReactComponent?!Li(x,E)||!Li(A,R):!0}function k1(c,f,x){var E=!1,A=Rn,R=f.contextType;return typeof R=="object"&&R!==null?R=mn(R):(A=Pn(f)?Qt:at.current,E=f.contextTypes,R=(E=E!=null)?ri(c,A):Rn),f=new f(x,R),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Fd,c.stateNode=f,f._reactInternals=c,E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=R),f}function N1(c,f,x,E){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,E),f.state!==c&&Fd.enqueueReplaceState(f,f.state,null)}function Jm(c,f,x,E){var A=c.stateNode;A.props=x,A.state=c.memoizedState,A.refs=D1,Ym(c);var R=f.contextType;typeof R=="object"&&R!==null?A.context=mn(R):(R=Pn(f)?Qt:at.current,A.context=ri(c,R)),cc(c,x,A,E),A.state=c.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(Dd(c,f,R,x),A.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(f=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),f!==A.state&&Fd.enqueueReplaceState(A,A.state,null),cc(c,x,A,E),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4)}var kd=Array.isArray;function fc(c,f,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var E=x.stateNode}if(!E)throw Error(a(147,c));var A=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===A?f.ref:(f=function(R){var z=E.refs;z===D1&&(z=E.refs={}),R===null?delete z[A]:z[A]=R},f._stringRef=A,f)}if(typeof c!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,c))}return c}function Nd(c,f){if(c.type!=="textarea")throw Error(a(31,Object.prototype.toString.call(f)==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":f))}function O1(c){function f(ne,J){if(c){var me=ne.lastEffect;me!==null?(me.nextEffect=J,ne.lastEffect=J):ne.firstEffect=ne.lastEffect=J,J.nextEffect=null,J.flags=8}}function x(ne,J){if(!c)return null;for(;J!==null;)f(ne,J),J=J.sibling;return null}function E(ne,J){for(ne=new Map;J!==null;)J.key!==null?ne.set(J.key,J):ne.set(J.index,J),J=J.sibling;return ne}function A(ne,J){return ne=eo(ne,J),ne.index=0,ne.sibling=null,ne}function R(ne,J,me){return ne.index=me,c?(me=ne.alternate,me!==null?(me=me.index,me<J?(ne.flags=2,J):me):(ne.flags=2,J)):J}function z(ne){return c&&ne.alternate===null&&(ne.flags=2),ne}function Y(ne,J,me,Be){return J===null||J.tag!==6?(J=Og(me,ne.mode,Be),J.return=ne,J):(J=A(J,me),J.return=ne,J)}function he(ne,J,me,Be){return J!==null&&J.elementType===me.type?(Be=A(J,me.props),Be.ref=fc(ne,J,me),Be.return=ne,Be):(Be=ch(me.type,me.key,me.props,null,ne.mode,Be),Be.ref=fc(ne,J,me),Be.return=ne,Be)}function Oe(ne,J,me,Be){return J===null||J.tag!==4||J.stateNode.containerInfo!==me.containerInfo||J.stateNode.implementation!==me.implementation?(J=Ug(me,ne.mode,Be),J.return=ne,J):(J=A(J,me.children||[]),J.return=ne,J)}function Qe(ne,J,me,Be,Ke){return J===null||J.tag!==7?(J=vl(me,ne.mode,Be,Ke),J.return=ne,J):(J=A(J,me),J.return=ne,J)}function rt(ne,J,me){if(typeof J=="string"||typeof J=="number")return J=Og(""+J,ne.mode,me),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case u:return me=ch(J.type,J.key,J.props,null,ne.mode,me),me.ref=fc(ne,null,J),me.return=ne,me;case h:return J=Ug(J,ne.mode,me),J.return=ne,J}if(kd(J)||D(J))return J=vl(J,ne.mode,me,null),J.return=ne,J;Nd(ne,J)}return null}function ze(ne,J,me,Be){var Ke=J!==null?J.key:null;if(typeof me=="string"||typeof me=="number")return Ke!==null?null:Y(ne,J,""+me,Be);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case u:return me.key===Ke?me.type===m?Qe(ne,J,me.props.children,Be,Ke):he(ne,J,me,Be):null;case h:return me.key===Ke?Oe(ne,J,me,Be):null}if(kd(me)||D(me))return Ke!==null?null:Qe(ne,J,me,Be,null);Nd(ne,me)}return null}function kt(ne,J,me,Be,Ke){if(typeof Be=="string"||typeof Be=="number")return ne=ne.get(me)||null,Y(J,ne,""+Be,Ke);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case u:return ne=ne.get(Be.key===null?me:Be.key)||null,Be.type===m?Qe(J,ne,Be.props.children,Ke,Be.key):he(J,ne,Be,Ke);case h:return ne=ne.get(Be.key===null?me:Be.key)||null,Oe(J,ne,Be,Ke)}if(kd(Be)||D(Be))return ne=ne.get(me)||null,Qe(J,ne,Be,Ke,null);Nd(J,Be)}return null}function qt(ne,J,me,Be){for(var Ke=null,Ut=null,ot=J,Pt=J=0,Cn=null;ot!==null&&Pt<me.length;Pt++){ot.index>Pt?(Cn=ot,ot=null):Cn=ot.sibling;var Mt=ze(ne,ot,me[Pt],Be);if(Mt===null){ot===null&&(ot=Cn);break}c&&ot&&Mt.alternate===null&&f(ne,ot),J=R(Mt,J,Pt),Ut===null?Ke=Mt:Ut.sibling=Mt,Ut=Mt,ot=Cn}if(Pt===me.length)return x(ne,ot),Ke;if(ot===null){for(;Pt<me.length;Pt++)ot=rt(ne,me[Pt],Be),ot!==null&&(J=R(ot,J,Pt),Ut===null?Ke=ot:Ut.sibling=ot,Ut=ot);return Ke}for(ot=E(ne,ot);Pt<me.length;Pt++)Cn=kt(ot,ne,Pt,me[Pt],Be),Cn!==null&&(c&&Cn.alternate!==null&&ot.delete(Cn.key===null?Pt:Cn.key),J=R(Cn,J,Pt),Ut===null?Ke=Cn:Ut.sibling=Cn,Ut=Cn);return c&&ot.forEach(function(to){return f(ne,to)}),Ke}function Yr(ne,J,me,Be){var Ke=D(me);if(typeof Ke!="function")throw Error(a(150));if(me=Ke.call(me),me==null)throw Error(a(151));for(var Ut=Ke=null,ot=J,Pt=J=0,Cn=null,Mt=me.next();ot!==null&&!Mt.done;Pt++,Mt=me.next()){ot.index>Pt?(Cn=ot,ot=null):Cn=ot.sibling;var to=ze(ne,ot,Mt.value,Be);if(to===null){ot===null&&(ot=Cn);break}c&&ot&&to.alternate===null&&f(ne,ot),J=R(to,J,Pt),Ut===null?Ke=to:Ut.sibling=to,Ut=to,ot=Cn}if(Mt.done)return x(ne,ot),Ke;if(ot===null){for(;!Mt.done;Pt++,Mt=me.next())Mt=rt(ne,Mt.value,Be),Mt!==null&&(J=R(Mt,J,Pt),Ut===null?Ke=Mt:Ut.sibling=Mt,Ut=Mt);return Ke}for(ot=E(ne,ot);!Mt.done;Pt++,Mt=me.next())Mt=kt(ot,ne,Pt,Mt.value,Be),Mt!==null&&(c&&Mt.alternate!==null&&ot.delete(Mt.key===null?Pt:Mt.key),J=R(Mt,J,Pt),Ut===null?Ke=Mt:Ut.sibling=Mt,Ut=Mt);return c&&ot.forEach(function(U3){return f(ne,U3)}),Ke}return function(ne,J,me,Be){var Ke=typeof me=="object"&&me!==null&&me.type===m&&me.key===null;Ke&&(me=me.props.children);var Ut=typeof me=="object"&&me!==null;if(Ut)switch(me.$$typeof){case u:e:{for(Ut=me.key,Ke=J;Ke!==null;){if(Ke.key===Ut){switch(Ke.tag){case 7:if(me.type===m){x(ne,Ke.sibling),J=A(Ke,me.props.children),J.return=ne,ne=J;break e}break;default:if(Ke.elementType===me.type){x(ne,Ke.sibling),J=A(Ke,me.props),J.ref=fc(ne,Ke,me),J.return=ne,ne=J;break e}}x(ne,Ke);break}else f(ne,Ke);Ke=Ke.sibling}me.type===m?(J=vl(me.props.children,ne.mode,Be,me.key),J.return=ne,ne=J):(Be=ch(me.type,me.key,me.props,null,ne.mode,Be),Be.ref=fc(ne,J,me),Be.return=ne,ne=Be)}return z(ne);case h:e:{for(Ke=me.key;J!==null;){if(J.key===Ke)if(J.tag===4&&J.stateNode.containerInfo===me.containerInfo&&J.stateNode.implementation===me.implementation){x(ne,J.sibling),J=A(J,me.children||[]),J.return=ne,ne=J;break e}else{x(ne,J);break}else f(ne,J);J=J.sibling}J=Ug(me,ne.mode,Be),J.return=ne,ne=J}return z(ne)}if(typeof me=="string"||typeof me=="number")return me=""+me,J!==null&&J.tag===6?(x(ne,J.sibling),J=A(J,me),J.return=ne,ne=J):(x(ne,J),J=Og(me,ne.mode,Be),J.return=ne,ne=J),z(ne);if(kd(me))return qt(ne,J,me,Be);if(D(me))return Yr(ne,J,me,Be);if(Ut&&Nd(ne,me),typeof me=="undefined"&&!Ke)switch(ne.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,k(ne.type)||"Component"))}return x(ne,J)}}var Od=O1(!0),U1=O1(!1),dc={},jr=bn(dc),hc=bn(dc),cl=bn(dc);function Ri(c){if(c===dc)throw Error(a(174));return c}function Zm(c,f){xt(cl,f),xt(hc,c),xt(jr,dc),c=Ae(f),Fe(jr),xt(jr,c)}function fl(){Fe(jr),Fe(hc),Fe(cl)}function B1(c){var f=Ri(cl.current),x=Ri(jr.current);f=V(x,c.type,f),x!==f&&(xt(hc,c),xt(jr,f))}function Qm(c){hc.current===c&&(Fe(jr),Fe(hc))}var rn=bn(0);function Ud(c){for(var f=c;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||de(x)||oe(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&64)!=0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var os=null,aa=null,Pi=!1;function z1(c,f){var x=qr(5,null,null,0);x.elementType="DELETED",x.type="DELETED",x.stateNode=f,x.return=c,x.flags=8,c.lastEffect!==null?(c.lastEffect.nextEffect=x,c.lastEffect=x):c.firstEffect=c.lastEffect=x}function G1(c,f){switch(c.tag){case 5:return f=U(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,!0):!1;case 6:return f=ee(f,c.pendingProps),f!==null?(c.stateNode=f,!0):!1;case 13:return!1;default:return!1}}function Km(c){if(Pi){var f=aa;if(f){var x=f;if(!G1(c,f)){if(f=we(x),!f||!G1(c,f)){c.flags=c.flags&-1025|2,Pi=!1,os=c;return}z1(os,x)}os=c,aa=Je(f)}else c.flags=c.flags&-1025|2,Pi=!1,os=c}}function H1(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;os=c}function Bd(c){if(!be||c!==os)return!1;if(!Pi)return H1(c),Pi=!0,!1;var f=c.type;if(c.tag!==5||f!=="head"&&f!=="body"&&!Le(f,c.memoizedProps))for(f=aa;f;)z1(c,f),f=we(f);if(H1(c),c.tag===13){if(!be)throw Error(a(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));aa=lt(c)}else aa=os?we(c.stateNode):null;return!0}function $m(){be&&(aa=os=null,Pi=!1)}var dl=[];function eg(){for(var c=0;c<dl.length;c++){var f=dl[c];xe?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}dl.length=0}var pc=l.ReactCurrentDispatcher,Xr=l.ReactCurrentBatchConfig,mc=0,gn=null,er=null,Wn=null,zd=!1,gc=!1;function Mr(){throw Error(a(321))}function tg(c,f){if(f===null)return!1;for(var x=0;x<f.length&&x<c.length;x++)if(!On(c[x],f[x]))return!1;return!0}function ng(c,f,x,E,A,R){if(mc=R,gn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,pc.current=c===null||c.memoizedState===null?f3:d3,c=x(E,A),gc){R=0;do{if(gc=!1,!(25>R))throw Error(a(301));R+=1,Wn=er=null,f.updateQueue=null,pc.current=h3,c=x(E,A)}while(gc)}if(pc.current=Wd,f=er!==null&&er.next!==null,mc=0,Wn=er=gn=null,zd=!1,f)throw Error(a(300));return c}function la(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?gn.memoizedState=Wn=c:Wn=Wn.next=c,Wn}function ua(){if(er===null){var c=gn.alternate;c=c!==null?c.memoizedState:null}else c=er.next;var f=Wn===null?gn.memoizedState:Wn.next;if(f!==null)Wn=f,er=c;else{if(c===null)throw Error(a(310));er=c,c={memoizedState:er.memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},Wn===null?gn.memoizedState=Wn=c:Wn=Wn.next=c}return Wn}function Ii(c,f){return typeof f=="function"?f(c):f}function vc(c){var f=ua(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=c;var E=er,A=E.baseQueue,R=x.pending;if(R!==null){if(A!==null){var z=A.next;A.next=R.next,R.next=z}E.baseQueue=A=R,x.pending=null}if(A!==null){A=A.next,E=E.baseState;var Y=z=R=null,he=A;do{var Oe=he.lane;if((mc&Oe)===Oe)Y!==null&&(Y=Y.next={lane:0,action:he.action,eagerReducer:he.eagerReducer,eagerState:he.eagerState,next:null}),E=he.eagerReducer===c?he.eagerState:c(E,he.action);else{var Qe={lane:Oe,action:he.action,eagerReducer:he.eagerReducer,eagerState:he.eagerState,next:null};Y===null?(z=Y=Qe,R=E):Y=Y.next=Qe,gn.lanes|=Oe,Ec|=Oe}he=he.next}while(he!==null&&he!==A);Y===null?R=E:Y.next=z,On(E,f.memoizedState)||(ci=!0),f.memoizedState=E,f.baseState=R,f.baseQueue=Y,x.lastRenderedState=E}return[f.memoizedState,x.dispatch]}function yc(c){var f=ua(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=c;var E=x.dispatch,A=x.pending,R=f.memoizedState;if(A!==null){x.pending=null;var z=A=A.next;do R=c(R,z.action),z=z.next;while(z!==A);On(R,f.memoizedState)||(ci=!0),f.memoizedState=R,f.baseQueue===null&&(f.baseState=R),x.lastRenderedState=R}return[R,E]}function V1(c,f,x){var E=f._getVersion;E=E(f._source);var A=xe?f._workInProgressVersionPrimary:f._workInProgressVersionSecondary;if(A!==null?c=A===E:(c=c.mutableReadLanes,(c=(mc&c)===c)&&(xe?f._workInProgressVersionPrimary=E:f._workInProgressVersionSecondary=E,dl.push(f))),c)return x(f._source);throw dl.push(f),Error(a(350))}function W1(c,f,x,E){var A=pr;if(A===null)throw Error(a(349));var R=f._getVersion,z=R(f._source),Y=pc.current,he=Y.useState(function(){return V1(A,f,x)}),Oe=he[1],Qe=he[0];he=Wn;var rt=c.memoizedState,ze=rt.refs,kt=ze.getSnapshot,qt=rt.source;rt=rt.subscribe;var Yr=gn;return c.memoizedState={refs:ze,source:f,subscribe:E},Y.useEffect(function(){ze.getSnapshot=x,ze.setSnapshot=Oe;var ne=R(f._source);if(!On(z,ne)){ne=x(f._source),On(Qe,ne)||(Oe(ne),ne=Ks(Yr),A.mutableReadLanes|=ne&A.pendingLanes),ne=A.mutableReadLanes,A.entangledLanes|=ne;for(var J=A.entanglements,me=ne;0<me;){var Be=31-Wr(me),Ke=1<<Be;J[Be]|=ne,me&=~Ke}}},[x,f,E]),Y.useEffect(function(){return E(f._source,function(){var ne=ze.getSnapshot,J=ze.setSnapshot;try{J(ne(f._source));var me=Ks(Yr);A.mutableReadLanes|=me&A.pendingLanes}catch(Be){J(function(){throw Be})}})},[f,E]),On(kt,x)&&On(qt,f)&&On(rt,E)||(c={pending:null,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:Qe},c.dispatch=Oe=og.bind(null,gn,c),he.queue=c,he.baseQueue=null,Qe=V1(A,f,x),he.memoizedState=he.baseState=Qe),Qe}function j1(c,f,x){var E=ua();return W1(E,c,f,x)}function xc(c){var f=la();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c=f.queue={pending:null,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:c},c=c.dispatch=og.bind(null,gn,c),[f.memoizedState,c]}function Gd(c,f,x,E){return c={tag:c,create:f,destroy:x,deps:E,next:null},f=gn.updateQueue,f===null?(f={lastEffect:null},gn.updateQueue=f,f.lastEffect=c.next=c):(x=f.lastEffect,x===null?f.lastEffect=c.next=c:(E=x.next,x.next=c,c.next=E,f.lastEffect=c)),c}function X1(c){var f=la();return c={current:c},f.memoizedState=c}function Hd(){return ua().memoizedState}function rg(c,f,x,E){var A=la();gn.flags|=c,A.memoizedState=Gd(1|f,x,void 0,E===void 0?null:E)}function ig(c,f,x,E){var A=ua();E=E===void 0?null:E;var R=void 0;if(er!==null){var z=er.memoizedState;if(R=z.destroy,E!==null&&tg(E,z.deps)){Gd(f,x,R,E);return}}gn.flags|=c,A.memoizedState=Gd(1|f,x,R,E)}function q1(c,f){return rg(516,4,c,f)}function Vd(c,f){return ig(516,4,c,f)}function Y1(c,f){return ig(4,2,c,f)}function J1(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Z1(c,f,x){return x=x!=null?x.concat([c]):null,ig(4,2,J1.bind(null,f,c),x)}function sg(){}function Q1(c,f){var x=ua();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&tg(f,E[1])?E[0]:(x.memoizedState=[c,f],c)}function K1(c,f){var x=ua();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&tg(f,E[1])?E[0]:(c=c(),x.memoizedState=[c,f],c)}function c3(c,f){var x=oi();hr(98>x?98:x,function(){c(!0)}),hr(97<x?97:x,function(){var E=Xr.transition;Xr.transition=1;try{c(!1),f()}finally{Xr.transition=E}})}function og(c,f,x){var E=Tr(),A=Ks(c),R={lane:A,action:x,eagerReducer:null,eagerState:null,next:null},z=f.pending;if(z===null?R.next=R:(R.next=z.next,z.next=R),f.pending=R,z=c.alternate,c===gn||z!==null&&z===gn)gc=zd=!0;else{if(c.lanes===0&&(z===null||z.lanes===0)&&(z=f.lastRenderedReducer,z!==null))try{var Y=f.lastRenderedState,he=z(Y,x);if(R.eagerReducer=z,R.eagerState=he,On(he,Y))return}catch{}finally{}cs(c,A,E)}}var Wd={readContext:mn,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useOpaqueIdentifier:Mr,unstable_isNewReconciler:!1},f3={readContext:mn,useCallback:function(c,f){return la().memoizedState=[c,f===void 0?null:f],c},useContext:mn,useEffect:q1,useImperativeHandle:function(c,f,x){return x=x!=null?x.concat([c]):null,rg(4,2,J1.bind(null,f,c),x)},useLayoutEffect:function(c,f){return rg(4,2,c,f)},useMemo:function(c,f){var x=la();return f=f===void 0?null:f,c=c(),x.memoizedState=[c,f],c},useReducer:function(c,f,x){var E=la();return f=x!==void 0?x(f):f,E.memoizedState=E.baseState=f,c=E.queue={pending:null,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},c=c.dispatch=og.bind(null,gn,c),[E.memoizedState,c]},useRef:X1,useState:xc,useDebugValue:sg,useDeferredValue:function(c){var f=xc(c),x=f[0],E=f[1];return q1(function(){var A=Xr.transition;Xr.transition=1;try{E(c)}finally{Xr.transition=A}},[c]),x},useTransition:function(){var c=xc(!1),f=c[0];return c=c3.bind(null,c[1]),X1(c),[c,f]},useMutableSource:function(c,f,x){var E=la();return E.memoizedState={refs:{getSnapshot:f,setSnapshot:null},source:c,subscribe:x},W1(E,c,f,x)},useOpaqueIdentifier:function(){if(Pi){var c=!1,f=I(function(){throw c||(c=!0,x(Q())),Error(a(355))}),x=xc(f)[1];return(gn.mode&2)==0&&(gn.flags|=516,Gd(5,function(){x(Q())},void 0,null)),f}return f=Q(),xc(f),f},unstable_isNewReconciler:!1},d3={readContext:mn,useCallback:Q1,useContext:mn,useEffect:Vd,useImperativeHandle:Z1,useLayoutEffect:Y1,useMemo:K1,useReducer:vc,useRef:Hd,useState:function(){return vc(Ii)},useDebugValue:sg,useDeferredValue:function(c){var f=vc(Ii),x=f[0],E=f[1];return Vd(function(){var A=Xr.transition;Xr.transition=1;try{E(c)}finally{Xr.transition=A}},[c]),x},useTransition:function(){var c=vc(Ii)[0];return[Hd().current,c]},useMutableSource:j1,useOpaqueIdentifier:function(){return vc(Ii)[0]},unstable_isNewReconciler:!1},h3={readContext:mn,useCallback:Q1,useContext:mn,useEffect:Vd,useImperativeHandle:Z1,useLayoutEffect:Y1,useMemo:K1,useReducer:yc,useRef:Hd,useState:function(){return yc(Ii)},useDebugValue:sg,useDeferredValue:function(c){var f=yc(Ii),x=f[0],E=f[1];return Vd(function(){var A=Xr.transition;Xr.transition=1;try{E(c)}finally{Xr.transition=A}},[c]),x},useTransition:function(){var c=yc(Ii)[0];return[Hd().current,c]},useMutableSource:j1,useOpaqueIdentifier:function(){return yc(Ii)[0]},unstable_isNewReconciler:!1},p3=l.ReactCurrentOwner,ci=!1;function Er(c,f,x,E){f.child=c===null?U1(f,null,x,E):Od(f,c.child,x,E)}function $1(c,f,x,E,A){x=x.render;var R=f.ref;return pn(f,A),E=ng(c,f,x,E,R,A),c!==null&&!ci?(f.updateQueue=c.updateQueue,f.flags&=-517,c.lanes&=~A,as(c,f,A)):(f.flags|=1,Er(c,f,E,A),f.child)}function e_(c,f,x,E,A,R){if(c===null){var z=x.type;return typeof z=="function"&&!kg(z)&&z.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=z,t_(c,f,z,E,A,R)):(c=ch(x.type,null,E,f,f.mode,R),c.ref=f.ref,c.return=f,f.child=c)}return z=c.child,(A&R)==0&&(A=z.memoizedProps,x=x.compare,x=x!==null?x:Li,x(A,E)&&c.ref===f.ref)?as(c,f,R):(f.flags|=1,c=eo(z,E),c.ref=f.ref,c.return=f,f.child=c)}function t_(c,f,x,E,A,R){if(c!==null&&Li(c.memoizedProps,E)&&c.ref===f.ref)if(ci=!1,(R&A)!=0)(c.flags&16384)!=0&&(ci=!0);else return f.lanes=c.lanes,as(c,f,R);return lg(c,f,x,E,R)}function ag(c,f,x){var E=f.pendingProps,A=E.children,R=c!==null?c.memoizedState:null;if(E.mode==="hidden"||E.mode==="unstable-defer-without-hiding")if((f.mode&4)==0)f.memoizedState={baseLanes:0},ah(f,x);else if((x&1073741824)!=0)f.memoizedState={baseLanes:0},ah(f,R!==null?R.baseLanes:x);else return c=R!==null?R.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c},ah(f,c),null;else R!==null?(E=R.baseLanes|x,f.memoizedState=null):E=x,ah(f,E);return Er(c,f,A,x),f.child}function n_(c,f){var x=f.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(f.flags|=128)}function lg(c,f,x,E,A){var R=Pn(x)?Qt:at.current;return R=ri(f,R),pn(f,A),x=ng(c,f,x,E,R,A),c!==null&&!ci?(f.updateQueue=c.updateQueue,f.flags&=-517,c.lanes&=~A,as(c,f,A)):(f.flags|=1,Er(c,f,x,A),f.child)}function r_(c,f,x,E,A){if(Pn(x)){var R=!0;Bs(f)}else R=!1;if(pn(f,A),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),k1(f,x,E),Jm(f,x,E,A),E=!0;else if(c===null){var z=f.stateNode,Y=f.memoizedProps;z.props=Y;var he=z.context,Oe=x.contextType;typeof Oe=="object"&&Oe!==null?Oe=mn(Oe):(Oe=Pn(x)?Qt:at.current,Oe=ri(f,Oe));var Qe=x.getDerivedStateFromProps,rt=typeof Qe=="function"||typeof z.getSnapshotBeforeUpdate=="function";rt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==E||he!==Oe)&&N1(f,z,E,Oe),ui=!1;var ze=f.memoizedState;z.state=ze,cc(f,E,z,A),he=f.memoizedState,Y!==E||ze!==he||Zt.current||ui?(typeof Qe=="function"&&(Dd(f,x,Qe,E),he=f.memoizedState),(Y=ui||F1(f,x,Y,E,ze,he,Oe))?(rt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4)):(typeof z.componentDidMount=="function"&&(f.flags|=4),f.memoizedProps=E,f.memoizedState=he),z.props=E,z.state=he,z.context=Oe,E=Y):(typeof z.componentDidMount=="function"&&(f.flags|=4),E=!1)}else{z=f.stateNode,R1(c,f),Y=f.memoizedProps,Oe=f.type===f.elementType?Y:Vt(f.type,Y),z.props=Oe,rt=f.pendingProps,ze=z.context,he=x.contextType,typeof he=="object"&&he!==null?he=mn(he):(he=Pn(x)?Qt:at.current,he=ri(f,he));var kt=x.getDerivedStateFromProps;(Qe=typeof kt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==rt||ze!==he)&&N1(f,z,E,he),ui=!1,ze=f.memoizedState,z.state=ze,cc(f,E,z,A);var qt=f.memoizedState;Y!==rt||ze!==qt||Zt.current||ui?(typeof kt=="function"&&(Dd(f,x,kt,E),qt=f.memoizedState),(Oe=ui||F1(f,x,Oe,E,ze,qt,he))?(Qe||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,qt,he),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,qt,he)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=256)):(typeof z.componentDidUpdate!="function"||Y===c.memoizedProps&&ze===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&ze===c.memoizedState||(f.flags|=256),f.memoizedProps=E,f.memoizedState=qt),z.props=E,z.state=qt,z.context=he,E=Oe):(typeof z.componentDidUpdate!="function"||Y===c.memoizedProps&&ze===c.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===c.memoizedProps&&ze===c.memoizedState||(f.flags|=256),E=!1)}return ug(c,f,x,E,R,A)}function ug(c,f,x,E,A,R){n_(c,f);var z=(f.flags&64)!=0;if(!E&&!z)return A&&tc(f,x,!1),as(c,f,R);E=f.stateNode,p3.current=f;var Y=z&&typeof x.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,c!==null&&z?(f.child=Od(f,c.child,null,R),f.child=Od(f,null,Y,R)):Er(c,f,Y,R),f.memoizedState=E.state,A&&tc(f,x,!0),f.child}function i_(c){var f=c.stateNode;f.pendingContext?ta(c,f.pendingContext,f.pendingContext!==f.context):f.context&&ta(c,f.context,!1),Zm(c,f.containerInfo)}var jd={dehydrated:null,retryLane:0};function s_(c,f,x){var E=f.pendingProps,A=rn.current,R=!1,z;return(z=(f.flags&64)!=0)||(z=c!==null&&c.memoizedState===null?!1:(A&2)!=0),z?(R=!0,f.flags&=-65):c!==null&&c.memoizedState===null||E.fallback===void 0||E.unstable_avoidThisFallback===!0||(A|=1),xt(rn,A&1),c===null?(E.fallback!==void 0&&Km(f),c=E.children,A=E.fallback,R?(c=o_(f,c,A,x),f.child.memoizedState={baseLanes:x},f.memoizedState=jd,c):typeof E.unstable_expectedLoadTime=="number"?(c=o_(f,c,A,x),f.child.memoizedState={baseLanes:x},f.memoizedState=jd,f.lanes=33554432,c):(x=Ng({mode:"visible",children:c},f.mode,x,null),x.return=f,f.child=x)):c.memoizedState!==null?R?(E=l_(c,f,E.children,E.fallback,x),R=f.child,A=c.child.memoizedState,R.memoizedState=A===null?{baseLanes:x}:{baseLanes:A.baseLanes|x},R.childLanes=c.childLanes&~x,f.memoizedState=jd,E):(x=a_(c,f,E.children,x),f.memoizedState=null,x):R?(E=l_(c,f,E.children,E.fallback,x),R=f.child,A=c.child.memoizedState,R.memoizedState=A===null?{baseLanes:x}:{baseLanes:A.baseLanes|x},R.childLanes=c.childLanes&~x,f.memoizedState=jd,E):(x=a_(c,f,E.children,x),f.memoizedState=null,x)}function o_(c,f,x,E){var A=c.mode,R=c.child;return f={mode:"hidden",children:f},(A&2)==0&&R!==null?(R.childLanes=0,R.pendingProps=f):R=Ng(f,A,0,null),x=vl(x,A,E,null),R.return=c,x.return=c,R.sibling=x,c.child=R,x}function a_(c,f,x,E){var A=c.child;return c=A.sibling,x=eo(A,{mode:"visible",children:x}),(f.mode&2)==0&&(x.lanes=E),x.return=f,x.sibling=null,c!==null&&(c.nextEffect=null,c.flags=8,f.firstEffect=f.lastEffect=c),f.child=x}function l_(c,f,x,E,A){var R=f.mode,z=c.child;c=z.sibling;var Y={mode:"hidden",children:x};return(R&2)==0&&f.child!==z?(x=f.child,x.childLanes=0,x.pendingProps=Y,z=x.lastEffect,z!==null?(f.firstEffect=x.firstEffect,f.lastEffect=z,z.nextEffect=null):f.firstEffect=f.lastEffect=null):x=eo(z,Y),c!==null?E=eo(c,E):(E=vl(E,R,A,null),E.flags|=2),E.return=f,x.return=f,x.sibling=E,f.child=x,E}function u_(c,f){c.lanes|=f;var x=c.alternate;x!==null&&(x.lanes|=f),Sr(c.return,f)}function cg(c,f,x,E,A,R){var z=c.memoizedState;z===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:A,lastEffect:R}:(z.isBackwards=f,z.rendering=null,z.renderingStartTime=0,z.last=E,z.tail=x,z.tailMode=A,z.lastEffect=R)}function c_(c,f,x){var E=f.pendingProps,A=E.revealOrder,R=E.tail;if(Er(c,f,E.children,x),E=rn.current,(E&2)!=0)E=E&1|2,f.flags|=64;else{if(c!==null&&(c.flags&64)!=0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&u_(c,x);else if(c.tag===19)u_(c,x);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if(xt(rn,E),(f.mode&2)==0)f.memoizedState=null;else switch(A){case"forwards":for(x=f.child,A=null;x!==null;)c=x.alternate,c!==null&&Ud(c)===null&&(A=x),x=x.sibling;x=A,x===null?(A=f.child,f.child=null):(A=x.sibling,x.sibling=null),cg(f,!1,A,x,R,f.lastEffect);break;case"backwards":for(x=null,A=f.child,f.child=null;A!==null;){if(c=A.alternate,c!==null&&Ud(c)===null){f.child=A;break}c=A.sibling,A.sibling=x,x=A,A=c}cg(f,!0,x,null,R,f.lastEffect);break;case"together":cg(f,!1,null,null,void 0,f.lastEffect);break;default:f.memoizedState=null}return f.child}function as(c,f,x){if(c!==null&&(f.dependencies=c.dependencies),Ec|=f.lanes,(x&f.childLanes)!=0){if(c!==null&&f.child!==c.child)throw Error(a(153));if(f.child!==null){for(c=f.child,x=eo(c,c.pendingProps),f.child=x,x.return=f;c.sibling!==null;)c=c.sibling,x=x.sibling=eo(c,c.pendingProps),x.return=f;x.sibling=null}return f.child}return null}function Di(c){c.flags|=4}var _c,wc,Xd,qd;if(_e)_c=function(c,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)ye(c,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},wc=function(){},Xd=function(c,f,x,E,A){if(c=c.memoizedProps,c!==E){var R=f.stateNode,z=Ri(jr.current);x=Te(R,x,c,E,A,z),(f.updateQueue=x)&&Di(f)}},qd=function(c,f,x,E){x!==E&&Di(f)};else if(Pe){_c=function(c,f,x,E){for(var A=f.child;A!==null;){if(A.tag===5){var R=A.stateNode;x&&E&&(R=dr(R,A.type,A.memoizedProps,A)),ye(c,R)}else if(A.tag===6)R=A.stateNode,x&&E&&(R=nn(R,A.memoizedProps,A)),ye(c,R);else if(A.tag!==4){if(A.tag===13&&(A.flags&4)!=0&&(R=A.memoizedState!==null)){var z=A.child;if(z!==null&&(z.child!==null&&(z.child.return=z,_c(c,z,!0,R)),R=z.sibling,R!==null)){R.return=A,A=R;continue}}if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var f_=function(c,f,x,E){for(var A=f.child;A!==null;){if(A.tag===5){var R=A.stateNode;x&&E&&(R=dr(R,A.type,A.memoizedProps,A)),En(c,R)}else if(A.tag===6)R=A.stateNode,x&&E&&(R=nn(R,A.memoizedProps,A)),En(c,R);else if(A.tag!==4){if(A.tag===13&&(A.flags&4)!=0&&(R=A.memoizedState!==null)){var z=A.child;if(z!==null&&(z.child!==null&&(z.child.return=z,f_(c,z,!0,R)),R=z.sibling,R!==null)){R.return=A,A=R;continue}}if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};wc=function(c){var f=c.stateNode;if(c.firstEffect!==null){var x=f.containerInfo,E=tn(x);f_(E,c,!1,!1),f.pendingChildren=E,Di(c),Lt(x,E)}},Xd=function(c,f,x,E,A){var R=c.stateNode,z=c.memoizedProps;if((c=f.firstEffect===null)&&z===E)f.stateNode=R;else{var Y=f.stateNode,he=Ri(jr.current),Oe=null;z!==E&&(Oe=Te(Y,x,z,E,A,he)),c&&Oe===null?f.stateNode=R:(R=vt(R,Oe,x,z,E,f,c,Y),$(R,x,E,A,he)&&Di(f),f.stateNode=R,c?Di(f):_c(R,f,!1,!1))}},qd=function(c,f,x,E){x!==E?(c=Ri(cl.current),x=Ri(jr.current),f.stateNode=Ee(E,c,x,f),Di(f)):f.stateNode=c.stateNode}}else wc=function(){},Xd=function(){},qd=function(){};function Sc(c,f){if(!Pi)switch(c.tailMode){case"hidden":f=c.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function m3(c,f,x){var E=f.pendingProps;switch(f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Pn(f.type)&&ea(),null;case 3:return fl(),Fe(Zt),Fe(at),eg(),E=f.stateNode,E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(c===null||c.child===null)&&(Bd(f)?Di(f):E.hydrate||(f.flags|=256)),wc(f),null;case 5:Qm(f);var A=Ri(cl.current);if(x=f.type,c!==null&&f.stateNode!=null)Xd(c,f,x,E,A),c.ref!==f.ref&&(f.flags|=128);else{if(!E){if(f.stateNode===null)throw Error(a(166));return null}if(c=Ri(jr.current),Bd(f)){if(!be)throw Error(a(175));c=$e(f.stateNode,f.type,f.memoizedProps,A,c,f),f.updateQueue=c,c!==null&&Di(f)}else{var R=re(x,E,A,c,f);_c(R,f,!1,!1),f.stateNode=R,$(R,x,E,A,c)&&Di(f)}f.ref!==null&&(f.flags|=128)}return null;case 6:if(c&&f.stateNode!=null)qd(c,f,c.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(a(166));if(c=Ri(cl.current),A=Ri(jr.current),Bd(f)){if(!be)throw Error(a(176));Ze(f.stateNode,f.memoizedProps,f)&&Di(f)}else f.stateNode=Ee(E,c,A,f)}return null;case 13:return Fe(rn),E=f.memoizedState,(f.flags&64)!=0?(f.lanes=x,f):(E=E!==null,A=!1,c===null?f.memoizedProps.fallback!==void 0&&Bd(f):A=c.memoizedState!==null,E&&!A&&(f.mode&2)!=0&&(c===null&&f.memoizedProps.unstable_avoidThisFallback!==!0||(rn.current&1)!=0?jn===0&&(jn=3):((jn===0||jn===3)&&(jn=4),pr===null||(Ec&134217727)==0&&(pl&134217727)==0||ml(pr,tr))),Pe&&E&&(f.flags|=4),_e&&(E||A)&&(f.flags|=4),null);case 4:return fl(),wc(f),c===null&&fe(f.stateNode.containerInfo),null;case 10:return An(f),null;case 17:return Pn(f.type)&&ea(),null;case 19:if(Fe(rn),E=f.memoizedState,E===null)return null;if(A=(f.flags&64)!=0,R=E.rendering,R===null)if(A)Sc(E,!1);else{if(jn!==0||c!==null&&(c.flags&64)!=0)for(c=f.child;c!==null;){if(R=Ud(c),R!==null){for(f.flags|=64,Sc(E,!1),c=R.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),E.lastEffect===null&&(f.firstEffect=null),f.lastEffect=E.lastEffect,c=x,E=f.child;E!==null;)A=E,x=c,A.flags&=2,A.nextEffect=null,A.firstEffect=null,A.lastEffect=null,R=A.alternate,R===null?(A.childLanes=0,A.lanes=x,A.child=null,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=R.childLanes,A.lanes=R.lanes,A.child=R.child,A.memoizedProps=R.memoizedProps,A.memoizedState=R.memoizedState,A.updateQueue=R.updateQueue,A.type=R.type,x=R.dependencies,A.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),E=E.sibling;return xt(rn,rn.current&1|2),f.child}c=c.sibling}E.tail!==null&&dn()>bg&&(f.flags|=64,A=!0,Sc(E,!1),f.lanes=33554432)}else{if(!A)if(c=Ud(R),c!==null){if(f.flags|=64,A=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Sc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!R.alternate&&!Pi)return f=f.lastEffect=E.lastEffect,f!==null&&(f.nextEffect=null),null}else 2*dn()-E.renderingStartTime>bg&&x!==1073741824&&(f.flags|=64,A=!0,Sc(E,!1),f.lanes=33554432);E.isBackwards?(R.sibling=f.child,f.child=R):(c=E.last,c!==null?c.sibling=R:f.child=R,E.last=R)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.lastEffect=f.lastEffect,E.renderingStartTime=dn(),c.sibling=null,f=rn.current,xt(rn,A?f&1|2:f&1),c):null;case 23:case 24:return Ig(),c!==null&&c.memoizedState!==null!=(f.memoizedState!==null)&&E.mode!=="unstable-defer-without-hiding"&&(f.flags|=4),null}throw Error(a(156,f.tag))}function g3(c){switch(c.tag){case 1:Pn(c.type)&&ea();var f=c.flags;return f&4096?(c.flags=f&-4097|64,c):null;case 3:if(fl(),Fe(Zt),Fe(at),eg(),f=c.flags,(f&64)!=0)throw Error(a(285));return c.flags=f&-4097|64,c;case 5:return Qm(c),null;case 13:return Fe(rn),f=c.flags,f&4096?(c.flags=f&-4097|64,c):null;case 19:return Fe(rn),null;case 4:return fl(),null;case 10:return An(c),null;case 23:case 24:return Ig(),null;default:return null}}function fg(c,f){try{var x="",E=f;do x+=ll(E),E=E.return;while(E);var A=x}catch(R){A=`
Error generating stack: `+R.message+`
`+R.stack}return{value:c,source:f,stack:A}}function dg(c,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var v3=typeof WeakMap=="function"?WeakMap:Map;function d_(c,f,x){x=Ys(-1,x),x.tag=3,x.payload={element:null};var E=f.value;return x.callback=function(){rh||(rh=!0,Ag=E),dg(c,f)},x}function h_(c,f,x){x=Ys(-1,x),x.tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var A=f.value;x.payload=function(){return dg(c,f),E(A)}}var R=c.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(x.callback=function(){typeof E!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this),dg(c,f));var z=f.stack;this.componentDidCatch(f.value,{componentStack:z!==null?z:""})}),x}var y3=typeof WeakSet=="function"?WeakSet:Set;function p_(c){var f=c.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){$s(c,x)}else f.current=null}function x3(c,f){switch(f.tag){case 0:case 11:case 15:case 22:return;case 1:if(f.flags&256&&c!==null){var x=c.memoizedProps,E=c.memoizedState;c=f.stateNode,f=c.getSnapshotBeforeUpdate(f.elementType===f.type?x:Vt(f.type,x),E),c.__reactInternalSnapshotBeforeUpdate=f}return;case 3:_e&&f.flags&256&&At(f.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(a(163))}function m_(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&c)===c){var E=x.destroy;x.destroy=void 0,E!==void 0&&E()}x=x.next}while(x!==f)}}function _3(c,f,x){switch(x.tag){case 0:case 11:case 15:case 22:if(f=x.updateQueue,f=f!==null?f.lastEffect:null,f!==null){c=f=f.next;do{if((c.tag&3)==3){var E=c.create;c.destroy=E()}c=c.next}while(c!==f)}if(f=x.updateQueue,f=f!==null?f.lastEffect:null,f!==null){c=f=f.next;do{var A=c;E=A.next,A=A.tag,(A&4)!=0&&(A&1)!=0&&(I_(x,c),L3(x,c)),c=E}while(c!==f)}return;case 1:c=x.stateNode,x.flags&4&&(f===null?c.componentDidMount():(E=x.elementType===x.type?f.memoizedProps:Vt(x.type,f.memoizedProps),c.componentDidUpdate(E,f.memoizedState,c.__reactInternalSnapshotBeforeUpdate))),f=x.updateQueue,f!==null&&I1(x,f,c);return;case 3:if(f=x.updateQueue,f!==null){if(c=null,x.child!==null)switch(x.child.tag){case 5:c=Me(x.child.stateNode);break;case 1:c=x.child.stateNode}I1(x,f,c)}return;case 5:c=x.stateNode,f===null&&x.flags&4&&je(c,x.type,x.memoizedProps,x);return;case 6:return;case 4:return;case 12:return;case 13:be&&x.memoizedState===null&&(x=x.alternate,x!==null&&(x=x.memoizedState,x!==null&&(x=x.dehydrated,x!==null&&dt(x))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function g_(c,f){if(_e)for(var x=c;;){if(x.tag===5){var E=x.stateNode;f?Pr(E):en(x.stateNode,x.memoizedProps)}else if(x.tag===6)E=x.stateNode,f?fr(E):Ti(E,x.memoizedProps);else if((x.tag!==23&&x.tag!==24||x.memoizedState===null||x===c)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return}x.sibling.return=x.return,x=x.sibling}}function v_(c,f){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount($i,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:case 22:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var x=c=c.next;do{var E=x,A=E.destroy;if(E=E.tag,A!==void 0)if((E&4)!=0)I_(f,x);else{E=f;try{A()}catch(R){$s(E,R)}}x=x.next}while(x!==c)}break;case 1:if(p_(f),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(R){$s(f,R)}break;case 5:p_(f);break;case 4:_e?S_(c,f):Pe&&Pe&&(f=f.stateNode.containerInfo,c=tn(f),Tn(f,c))}}function y_(c,f){for(var x=f;;)if(v_(c,x),x.child===null||_e&&x.tag===4){if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else x.child.return=x,x=x.child}function x_(c){c.alternate=null,c.child=null,c.dependencies=null,c.firstEffect=null,c.lastEffect=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.return=null,c.updateQueue=null}function __(c){return c.tag===5||c.tag===3||c.tag===4}function w_(c){if(_e){e:{for(var f=c.return;f!==null;){if(__(f))break e;f=f.return}throw Error(a(160))}var x=f;switch(f=x.stateNode,x.tag){case 5:var E=!1;break;case 3:f=f.containerInfo,E=!0;break;case 4:f=f.containerInfo,E=!0;break;default:throw Error(a(161))}x.flags&16&&(Dt(f),x.flags&=-17);e:t:for(x=c;;){for(;x.sibling===null;){if(x.return===null||__(x.return)){x=null;break e}x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue t;x.child.return=x,x=x.child}if(!(x.flags&2)){x=x.stateNode;break e}}E?hg(c,x,f):pg(c,x,f)}}function hg(c,f,x){var E=c.tag,A=E===5||E===6;if(A)c=A?c.stateNode:c.stateNode.instance,f?ut(x,c,f):We(x,c);else if(E!==4&&(c=c.child,c!==null))for(hg(c,f,x),c=c.sibling;c!==null;)hg(c,f,x),c=c.sibling}function pg(c,f,x){var E=c.tag,A=E===5||E===6;if(A)c=A?c.stateNode:c.stateNode.instance,f?nt(x,c,f):Ie(x,c);else if(E!==4&&(c=c.child,c!==null))for(pg(c,f,x),c=c.sibling;c!==null;)pg(c,f,x),c=c.sibling}function S_(c,f){for(var x=f,E=!1,A,R;;){if(!E){E=x.return;e:for(;;){if(E===null)throw Error(a(160));switch(A=E.stateNode,E.tag){case 5:R=!1;break e;case 3:A=A.containerInfo,R=!0;break e;case 4:A=A.containerInfo,R=!0;break e}E=E.return}E=!0}if(x.tag===5||x.tag===6)y_(c,x),R?Ot(A,x.stateNode):Ft(A,x.stateNode);else if(x.tag===4){if(x.child!==null){A=x.stateNode.containerInfo,R=!0,x.child.return=x,x=x.child;continue}}else if(v_(c,x),x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return,x.tag===4&&(E=!1)}x.sibling.return=x.return,x=x.sibling}}function mg(c,f){if(_e){switch(f.tag){case 0:case 11:case 14:case 15:case 22:m_(3,f);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var E=f.memoizedProps;c=c!==null?c.memoizedProps:E;var A=f.type,R=f.updateQueue;f.updateQueue=null,R!==null&&Xe(x,R,A,c,E,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));x=f.memoizedProps,ft(f.stateNode,c!==null?c.memoizedProps:x,x);return;case 3:be&&(f=f.stateNode,f.hydrate&&(f.hydrate=!1,St(f.containerInfo)));return;case 12:return;case 13:M_(f),Yd(f);return;case 19:Yd(f);return;case 17:return;case 23:case 24:g_(f,f.memoizedState!==null);return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:case 22:m_(3,f);return;case 12:return;case 13:M_(f),Yd(f);return;case 19:Yd(f);return;case 3:be&&(x=f.stateNode,x.hydrate&&(x.hydrate=!1,St(x.containerInfo)));break;case 23:case 24:return}e:if(Pe){switch(f.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:f=f.stateNode,Tn(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function M_(c){c.memoizedState!==null&&(Tg=dn(),_e&&g_(c.child,!0))}function Yd(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new y3),f.forEach(function(E){var A=I3.bind(null,c,E);x.has(E)||(x.add(E),E.then(A,A))})}}function w3(c,f){return c!==null&&(c=c.memoizedState,c===null||c.dehydrated!==null)?(f=f.memoizedState,f!==null&&f.dehydrated===null):!1}var Jd=0,Zd=1,Qd=2,Kd=3,$d=4;if(typeof Symbol=="function"&&Symbol.for){var Mc=Symbol.for;Jd=Mc("selector.component"),Zd=Mc("selector.has_pseudo_class"),Qd=Mc("selector.role"),Kd=Mc("selector.test_id"),$d=Mc("selector.text")}function gg(c){var f=G(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(c=se(c),c===null)throw Error(a(362));return c.stateNode.current}function vg(c,f){switch(f.$$typeof){case Jd:if(c.type===f.value)return!0;break;case Zd:e:{f=f.value,c=[c,0];for(var x=0;x<c.length;){var E=c[x++],A=c[x++],R=f[A];if(E.tag!==5||!j(E)){for(;R!=null&&vg(E,R);)A++,R=f[A];if(A===f.length){f=!0;break e}else for(E=E.child;E!==null;)c.push(E,A),E=E.sibling}}f=!1}return f;case Qd:if(c.tag===5&&K(c.stateNode,f.value))return!0;break;case $d:if((c.tag===5||c.tag===6)&&(c=ve(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Kd:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365,f))}return!1}function yg(c){switch(c.$$typeof){case Jd:return"<"+(k(c.value)||"Unknown")+">";case Zd:return":has("+(yg(c)||"")+")";case Qd:return'[role="'+c.value+'"]';case $d:return'"'+c.value+'"';case Kd:return'[data-testname="'+c.value+'"]';default:throw Error(a(365,c))}}function E_(c,f){var x=[];c=[c,0];for(var E=0;E<c.length;){var A=c[E++],R=c[E++],z=f[R];if(A.tag!==5||!j(A)){for(;z!=null&&vg(A,z);)R++,z=f[R];if(R===f.length)x.push(A);else for(A=A.child;A!==null;)c.push(A,R),A=A.sibling}}return x}function xg(c,f){if(!le)throw Error(a(363));c=gg(c),c=E_(c,f),f=[],c=Array.from(c);for(var x=0;x<c.length;){var E=c[x++];if(E.tag===5)j(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)c.push(E),E=E.sibling}return f}var eh=null;function S3(c){if(eh===null)try{var f=("require"+Math.random()).slice(0,7);eh=(n&&n[f]).call(n,"timers").setImmediate}catch{eh=function(E){var A=new MessageChannel;A.port1.onmessage=E,A.port2.postMessage(void 0)}}return eh(c)}var M3=Math.ceil,th=l.ReactCurrentDispatcher,_g=l.ReactCurrentOwner,wg=l.IsSomeRendererActing,tt=0,pr=null,In=null,tr=0,ca=0,Sg=bn(0),jn=0,nh=null,hl=0,Ec=0,pl=0,Mg=0,Eg=null,Tg=0,bg=1/0;function Zs(){bg=dn()+500}var He=null,rh=!1,Ag=null,Fi=null,Qs=!1,Tc=null,bc=90,Cg=[],Lg=[],ls=null,Ac=0,Rg=null,ih=-1,us=0,sh=0,Cc=null,Lc=!1;function Tr(){return(tt&48)!=0?dn():ih!==-1?ih:ih=dn()}function Ks(c){if(c=c.mode,(c&2)==0)return 1;if((c&4)==0)return oi()===99?1:2;if(us===0&&(us=hl),ac.transition!==0){sh!==0&&(sh=Eg!==null?Eg.pendingLanes:0),c=us;var f=4186112&~sh;return f&=-f,f===0&&(c=4186112&~c,f=c&-c,f===0&&(f=8192)),f}return c=oi(),(tt&4)!=0&&c===98?c=Ai(12,us):(c=na(c),c=Ai(c,us)),c}function cs(c,f,x){if(50<Ac)throw Ac=0,Rg=null,Error(a(185));if(c=oh(c,f),c===null)return null;ts(c,f,x),c===pr&&(pl|=f,jn===4&&ml(c,tr));var E=oi();f===1?(tt&8)!=0&&(tt&48)==0?Pg(c):(Dr(c,x),tt===0&&(Zs(),hn())):((tt&4)==0||E!==98&&E!==99||(ls===null?ls=new Set([c]):ls.add(c)),Dr(c,x)),Eg=c}function oh(c,f){c.lanes|=f;var x=c.alternate;for(x!==null&&(x.lanes|=f),x=c,c=c.return;c!==null;)c.childLanes|=f,x=c.alternate,x!==null&&(x.childLanes|=f),x=c,c=c.return;return x.tag===3?x.stateNode:null}function Dr(c,f){for(var x=c.callbackNode,E=c.suspendedLanes,A=c.pingedLanes,R=c.expirationTimes,z=c.pendingLanes;0<z;){var Y=31-Wr(z),he=1<<Y,Oe=R[Y];if(Oe===-1){if((he&E)==0||(he&A)!=0){Oe=f,si(he);var Qe=Rt;R[Y]=10<=Qe?Oe+250:6<=Qe?Oe+5e3:-1}}else Oe<=f&&(c.expiredLanes|=he);z&=~he}if(E=bi(c,c===pr?tr:0),f=Rt,E===0)x!==null&&(x!==Xs&&Vs(x),c.callbackNode=null,c.callbackPriority=0);else{if(x!==null){if(c.callbackPriority===f)return;x!==Xs&&Vs(x)}f===15?(x=Pg.bind(null,c),fn===null?(fn=[x],qs=sl(Ci,oc)):fn.push(x),x=Xs):f===14?x=ai(99,Pg.bind(null,c)):(x=qm(f),x=ai(x,T_.bind(null,c))),c.callbackPriority=f,c.callbackNode=x}}function T_(c){if(ih=-1,sh=us=0,(tt&48)!=0)throw Error(a(327));var f=c.callbackNode;if(fs()&&c.callbackNode!==f)return null;var x=bi(c,c===pr?tr:0);if(x===0)return null;var E=x,A=tt;tt|=16;var R=L_();(pr!==c||tr!==E)&&(Zs(),gl(c,E));do try{b3();break}catch(Y){C_(c,Y)}while(1);if(uc(),th.current=R,tt=A,In!==null?E=0:(pr=null,tr=0,E=jn),(hl&pl)!=0)gl(c,0);else if(E!==0){if(E===2&&(tt|=64,c.hydrate&&(c.hydrate=!1,At(c.containerInfo)),x=ra(c),x!==0&&(E=Rc(c,x))),E===1)throw f=nh,gl(c,0),ml(c,x),Dr(c,dn()),f;switch(c.finishedWork=c.current.alternate,c.finishedLanes=x,E){case 0:case 1:throw Error(a(345));case 2:fa(c);break;case 3:if(ml(c,x),(x&62914560)===x&&(E=Tg+500-dn(),10<E)){if(bi(c,0)!==0)break;if(A=c.suspendedLanes,(A&x)!==x){Tr(),c.pingedLanes|=c.suspendedLanes&A;break}c.timeoutHandle=Re(fa.bind(null,c),E);break}fa(c);break;case 4:if(ml(c,x),(x&4186112)===x)break;for(E=c.eventTimes,A=-1;0<x;){var z=31-Wr(x);R=1<<z,z=E[z],z>A&&(A=z),x&=~R}if(x=A,x=dn()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*M3(x/1960))-x,10<x){c.timeoutHandle=Re(fa.bind(null,c),x);break}fa(c);break;case 5:fa(c);break;default:throw Error(a(329))}}return Dr(c,dn()),c.callbackNode===f?T_.bind(null,c):null}function ml(c,f){for(f&=~Mg,f&=~pl,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var x=31-Wr(f),E=1<<x;c[x]=-1,f&=~E}}function Pg(c){if((tt&48)!=0)throw Error(a(327));if(fs(),c===pr&&(c.expiredLanes&tr)!=0){var f=tr,x=Rc(c,f);(hl&pl)!=0&&(f=bi(c,f),x=Rc(c,f))}else f=bi(c,0),x=Rc(c,f);if(c.tag!==0&&x===2&&(tt|=64,c.hydrate&&(c.hydrate=!1,At(c.containerInfo)),f=ra(c),f!==0&&(x=Rc(c,f))),x===1)throw x=nh,gl(c,0),ml(c,f),Dr(c,dn()),x;return c.finishedWork=c.current.alternate,c.finishedLanes=f,fa(c),Dr(c,dn()),null}function E3(){if(ls!==null){var c=ls;ls=null,c.forEach(function(f){f.expiredLanes|=24&f.pendingLanes,Dr(f,dn())})}hn()}function b_(c,f){var x=tt;tt|=1;try{return c(f)}finally{tt=x,tt===0&&(Zs(),hn())}}function A_(c,f){var x=tt;if((x&48)!=0)return c(f);tt|=1;try{if(c)return hr(99,c.bind(null,f))}finally{tt=x,hn()}}function ah(c,f){xt(Sg,ca),ca|=f,hl|=f}function Ig(){ca=Sg.current,Fe(Sg)}function gl(c,f){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==ce&&(c.timeoutHandle=ce,Ce(x)),In!==null)for(x=In.return;x!==null;){var E=x;switch(E.tag){case 1:E=E.type.childContextTypes,E!=null&&ea();break;case 3:fl(),Fe(Zt),Fe(at),eg();break;case 5:Qm(E);break;case 4:fl();break;case 13:Fe(rn);break;case 19:Fe(rn);break;case 10:An(E);break;case 23:case 24:Ig()}x=x.return}pr=c,In=eo(c.current,null),tr=ca=hl=f,jn=0,nh=null,Mg=pl=Ec=0}function C_(c,f){do{var x=In;try{if(uc(),pc.current=Wd,zd){for(var E=gn.memoizedState;E!==null;){var A=E.queue;A!==null&&(A.pending=null),E=E.next}zd=!1}if(mc=0,Wn=er=gn=null,gc=!1,_g.current=null,x===null||x.return===null){jn=1,nh=f,In=null;break}e:{var R=c,z=x.return,Y=x,he=f;if(f=tr,Y.flags|=2048,Y.firstEffect=Y.lastEffect=null,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Oe=he;if((Y.mode&2)==0){var Qe=Y.alternate;Qe?(Y.updateQueue=Qe.updateQueue,Y.memoizedState=Qe.memoizedState,Y.lanes=Qe.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var rt=(rn.current&1)!=0,ze=z;do{var kt;if(kt=ze.tag===13){var qt=ze.memoizedState;if(qt!==null)kt=qt.dehydrated!==null;else{var Yr=ze.memoizedProps;kt=Yr.fallback===void 0?!1:Yr.unstable_avoidThisFallback!==!0?!0:!rt}}if(kt){var ne=ze.updateQueue;if(ne===null){var J=new Set;J.add(Oe),ze.updateQueue=J}else ne.add(Oe);if((ze.mode&2)==0){if(ze.flags|=64,Y.flags|=16384,Y.flags&=-2981,Y.tag===1)if(Y.alternate===null)Y.tag=17;else{var me=Ys(-1,1);me.tag=2,Js(Y,me)}Y.lanes|=1;break e}he=void 0,Y=f;var Be=R.pingCache;if(Be===null?(Be=R.pingCache=new v3,he=new Set,Be.set(Oe,he)):(he=Be.get(Oe),he===void 0&&(he=new Set,Be.set(Oe,he))),!he.has(Y)){he.add(Y);var Ke=P3.bind(null,R,Oe,Y);Oe.then(Ke,Ke)}ze.flags|=4096,ze.lanes=f;break e}ze=ze.return}while(ze!==null);he=Error((k(Y.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}jn!==5&&(jn=2),he=fg(he,Y),ze=z;do{switch(ze.tag){case 3:R=he,ze.flags|=4096,f&=-f,ze.lanes|=f;var Ut=d_(ze,R,f);P1(ze,Ut);break e;case 1:R=he;var ot=ze.type,Pt=ze.stateNode;if((ze.flags&64)==0&&(typeof ot.getDerivedStateFromError=="function"||Pt!==null&&typeof Pt.componentDidCatch=="function"&&(Fi===null||!Fi.has(Pt)))){ze.flags|=4096,f&=-f,ze.lanes|=f;var Cn=h_(ze,R,f);P1(ze,Cn);break e}}ze=ze.return}while(ze!==null)}P_(x)}catch(Mt){f=Mt,In===x&&x!==null&&(In=x=x.return);continue}break}while(1)}function L_(){var c=th.current;return th.current=Wd,c===null?Wd:c}function Rc(c,f){var x=tt;tt|=16;var E=L_();pr===c&&tr===f||gl(c,f);do try{T3();break}catch(A){C_(c,A)}while(1);if(uc(),tt=x,th.current=E,In!==null)throw Error(a(261));return pr=null,tr=0,jn}function T3(){for(;In!==null;)R_(In)}function b3(){for(;In!==null&&!Ws();)R_(In)}function R_(c){var f=F_(c.alternate,c,ca);c.memoizedProps=c.pendingProps,f===null?P_(c):In=f,_g.current=null}function P_(c){var f=c;do{var x=f.alternate;if(c=f.return,(f.flags&2048)==0){if(x=m3(x,f,ca),x!==null){In=x;return}if(x=f,x.tag!==24&&x.tag!==23||x.memoizedState===null||(ca&1073741824)!=0||(x.mode&4)==0){for(var E=0,A=x.child;A!==null;)E|=A.lanes|A.childLanes,A=A.sibling;x.childLanes=E}c!==null&&(c.flags&2048)==0&&(c.firstEffect===null&&(c.firstEffect=f.firstEffect),f.lastEffect!==null&&(c.lastEffect!==null&&(c.lastEffect.nextEffect=f.firstEffect),c.lastEffect=f.lastEffect),1<f.flags&&(c.lastEffect!==null?c.lastEffect.nextEffect=f:c.firstEffect=f,c.lastEffect=f))}else{if(x=g3(f),x!==null){x.flags&=2047,In=x;return}c!==null&&(c.firstEffect=c.lastEffect=null,c.flags|=2048)}if(f=f.sibling,f!==null){In=f;return}In=f=c}while(f!==null);jn===0&&(jn=5)}function fa(c){var f=oi();return hr(99,A3.bind(null,c,f)),null}function A3(c,f){do fs();while(Tc!==null);if((tt&48)!=0)throw Error(a(327));var x=c.finishedWork;if(x===null)return null;if(c.finishedWork=null,c.finishedLanes=0,x===c.current)throw Error(a(177));c.callbackNode=null;var E=x.lanes|x.childLanes,A=E,R=c.pendingLanes&~A;c.pendingLanes=A,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=A,c.mutableReadLanes&=A,c.entangledLanes&=A,A=c.entanglements;for(var z=c.eventTimes,Y=c.expirationTimes;0<R;){var he=31-Wr(R),Oe=1<<he;A[he]=0,z[he]=-1,Y[he]=-1,R&=~Oe}if(ls!==null&&(E&24)==0&&ls.has(c)&&ls.delete(c),c===pr&&(In=pr=null,tr=0),1<x.flags?x.lastEffect!==null?(x.lastEffect.nextEffect=x,E=x.firstEffect):E=x:E=x.firstEffect,E!==null){A=tt,tt|=32,_g.current=null,Cc=te(c.containerInfo),Lc=!1,He=E;do try{C3()}catch(J){if(He===null)throw Error(a(330));$s(He,J),He=He.nextEffect}while(He!==null);Cc=null,He=E;do try{for(z=c;He!==null;){var Qe=He.flags;if(Qe&16&&_e&&Dt(He.stateNode),Qe&128){var rt=He.alternate;if(rt!==null){var ze=rt.ref;ze!==null&&(typeof ze=="function"?ze(null):ze.current=null)}}switch(Qe&1038){case 2:w_(He),He.flags&=-3;break;case 6:w_(He),He.flags&=-3,mg(He.alternate,He);break;case 1024:He.flags&=-1025;break;case 1028:He.flags&=-1025,mg(He.alternate,He);break;case 4:mg(He.alternate,He);break;case 8:Y=z,R=He,_e?S_(Y,R):y_(Y,R);var kt=R.alternate;x_(R),kt!==null&&x_(kt)}He=He.nextEffect}}catch(J){if(He===null)throw Error(a(330));$s(He,J),He=He.nextEffect}while(He!==null);Lc&&Z(),q(c.containerInfo),c.current=x,He=E;do try{for(Qe=c;He!==null;){var qt=He.flags;if(qt&36&&_3(Qe,He.alternate,He),qt&128){rt=void 0;var Yr=He.ref;if(Yr!==null){var ne=He.stateNode;switch(He.tag){case 5:rt=Me(ne);break;default:rt=ne}typeof Yr=="function"?Yr(rt):Yr.current=rt}}He=He.nextEffect}}catch(J){if(He===null)throw Error(a(330));$s(He,J),He=He.nextEffect}while(He!==null);He=null,Pd(),tt=A}else c.current=x;if(Qs)Qs=!1,Tc=c,bc=f;else for(He=E;He!==null;)f=He.nextEffect,He.nextEffect=null,He.flags&8&&(qt=He,qt.sibling=null,qt.stateNode=null),He=f;if(E=c.pendingLanes,E===0&&(Fi=null),E===1?c===Rg?Ac++:(Ac=0,Rg=c):Ac=0,x=x.stateNode,ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot($i,x,void 0,(x.current.flags&64)==64)}catch{}if(Dr(c,dn()),rh)throw rh=!1,c=Ag,Ag=null,c;return(tt&8)!=0||hn(),null}function C3(){for(;He!==null;){var c=He.alternate;Lc||Cc===null||((He.flags&8)!=0?ue(He,Cc)&&(Lc=!0,ae()):He.tag===13&&w3(c,He)&&ue(He,Cc)&&(Lc=!0,ae()));var f=He.flags;(f&256)!=0&&x3(c,He),(f&512)==0||Qs||(Qs=!0,ai(97,function(){return fs(),null})),He=He.nextEffect}}function fs(){if(bc!==90){var c=97<bc?97:bc;return bc=90,hr(c,R3)}return!1}function L3(c,f){Cg.push(f,c),Qs||(Qs=!0,ai(97,function(){return fs(),null}))}function I_(c,f){Lg.push(f,c),Qs||(Qs=!0,ai(97,function(){return fs(),null}))}function R3(){if(Tc===null)return!1;var c=Tc;if(Tc=null,(tt&48)!=0)throw Error(a(331));var f=tt;tt|=32;var x=Lg;Lg=[];for(var E=0;E<x.length;E+=2){var A=x[E],R=x[E+1],z=A.destroy;if(A.destroy=void 0,typeof z=="function")try{z()}catch(he){if(R===null)throw Error(a(330));$s(R,he)}}for(x=Cg,Cg=[],E=0;E<x.length;E+=2){A=x[E],R=x[E+1];try{var Y=A.create;A.destroy=Y()}catch(he){if(R===null)throw Error(a(330));$s(R,he)}}for(Y=c.current.firstEffect;Y!==null;)c=Y.nextEffect,Y.nextEffect=null,Y.flags&8&&(Y.sibling=null,Y.stateNode=null),Y=c;return tt=f,hn(),!0}function D_(c,f,x){f=fg(x,f),f=d_(c,f,1),Js(c,f),f=Tr(),c=oh(c,1),c!==null&&(ts(c,1,f),Dr(c,f))}function $s(c,f){if(c.tag===3)D_(c,c,f);else for(var x=c.return;x!==null;){if(x.tag===3){D_(x,c,f);break}else if(x.tag===1){var E=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Fi===null||!Fi.has(E))){c=fg(f,c);var A=h_(x,c,1);if(Js(x,A),A=Tr(),x=oh(x,1),x!==null)ts(x,1,A),Dr(x,A);else if(typeof E.componentDidCatch=="function"&&(Fi===null||!Fi.has(E)))try{E.componentDidCatch(f,c)}catch{}break}}x=x.return}}function P3(c,f,x){var E=c.pingCache;E!==null&&E.delete(f),f=Tr(),c.pingedLanes|=c.suspendedLanes&x,pr===c&&(tr&x)===x&&(jn===4||jn===3&&(tr&62914560)===tr&&500>dn()-Tg?gl(c,0):Mg|=x),Dr(c,f)}function I3(c,f){var x=c.stateNode;x!==null&&x.delete(f),f=0,f===0&&(f=c.mode,(f&2)==0?f=1:(f&4)==0?f=oi()===99?1:2:(us===0&&(us=hl),f=es(62914560&~us),f===0&&(f=4194304))),x=Tr(),c=oh(c,f),c!==null&&(ts(c,f,x),Dr(c,x))}var F_;F_=function(c,f,x){var E=f.lanes;if(c!==null)if(c.memoizedProps!==f.pendingProps||Zt.current)ci=!0;else if((x&E)!=0)ci=(c.flags&16384)!=0;else{switch(ci=!1,f.tag){case 3:i_(f),$m();break;case 5:B1(f);break;case 1:Pn(f.type)&&Bs(f);break;case 4:Zm(f,f.stateNode.containerInfo);break;case 10:ss(f,f.memoizedProps.value);break;case 13:if(f.memoizedState!==null)return(x&f.child.childLanes)!=0?s_(c,f,x):(xt(rn,rn.current&1),f=as(c,f,x),f!==null?f.sibling:null);xt(rn,rn.current&1);break;case 19:if(E=(x&f.childLanes)!=0,(c.flags&64)!=0){if(E)return c_(c,f,x);f.flags|=64}var A=f.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xt(rn,rn.current),E)break;return null;case 23:case 24:return f.lanes=0,ag(c,f,x)}return as(c,f,x)}else ci=!1;switch(f.lanes=0,f.tag){case 2:if(E=f.type,c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,A=ri(f,at.current),pn(f,x),A=ng(null,f,E,c,A,x),f.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,Pn(E)){var R=!0;Bs(f)}else R=!1;f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Ym(f);var z=E.getDerivedStateFromProps;typeof z=="function"&&Dd(f,E,z,c),A.updater=Fd,f.stateNode=A,A._reactInternals=f,Jm(f,E,c,x),f=ug(null,f,E,!0,R,x)}else f.tag=0,Er(null,f,A,x),f=f.child;return f;case 16:A=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,R=A._init,A=R(A._payload),f.type=A,R=f.tag=F3(A),c=Vt(A,c),R){case 0:f=lg(null,f,A,c,x);break e;case 1:f=r_(null,f,A,c,x);break e;case 11:f=$1(null,f,A,c,x);break e;case 14:f=e_(null,f,A,Vt(A.type,c),E,x);break e}throw Error(a(306,A,""))}return f;case 0:return E=f.type,A=f.pendingProps,A=f.elementType===E?A:Vt(E,A),lg(c,f,E,A,x);case 1:return E=f.type,A=f.pendingProps,A=f.elementType===E?A:Vt(E,A),r_(c,f,E,A,x);case 3:if(i_(f),E=f.updateQueue,c===null||E===null)throw Error(a(282));if(E=f.pendingProps,A=f.memoizedState,A=A!==null?A.element:null,R1(c,f),cc(f,E,null,x),E=f.memoizedState.element,E===A)$m(),f=as(c,f,x);else{if(A=f.stateNode,(R=A.hydrate)&&(be?(aa=Je(f.stateNode.containerInfo),os=f,R=Pi=!0):R=!1),R){if(be&&(c=A.mutableSourceEagerHydrationData,c!=null))for(A=0;A<c.length;A+=2)R=c[A],z=c[A+1],xe?R._workInProgressVersionPrimary=z:R._workInProgressVersionSecondary=z,dl.push(R);for(x=U1(f,null,E,x),f.child=x;x;)x.flags=x.flags&-3|1024,x=x.sibling}else Er(c,f,E,x),$m();f=f.child}return f;case 5:return B1(f),c===null&&Km(f),E=f.type,A=f.pendingProps,R=c!==null?c.memoizedProps:null,z=A.children,Le(E,A)?z=null:R!==null&&Le(E,R)&&(f.flags|=16),n_(c,f),Er(c,f,z,x),f.child;case 6:return c===null&&Km(f),null;case 13:return s_(c,f,x);case 4:return Zm(f,f.stateNode.containerInfo),E=f.pendingProps,c===null?f.child=Od(f,null,E,x):Er(c,f,E,x),f.child;case 11:return E=f.type,A=f.pendingProps,A=f.elementType===E?A:Vt(E,A),$1(c,f,E,A,x);case 7:return Er(c,f,f.pendingProps,x),f.child;case 8:return Er(c,f,f.pendingProps.children,x),f.child;case 12:return Er(c,f,f.pendingProps.children,x),f.child;case 10:e:{if(E=f.type._context,A=f.pendingProps,z=f.memoizedProps,R=A.value,ss(f,R),z!==null){var Y=z.value;if(R=On(Y,R)?0:(typeof E._calculateChangedBits=="function"?E._calculateChangedBits(Y,R):1073741823)|0,R===0){if(z.children===A.children&&!Zt.current){f=as(c,f,x);break e}}else for(Y=f.child,Y!==null&&(Y.return=f);Y!==null;){var he=Y.dependencies;if(he!==null){z=Y.child;for(var Oe=he.firstContext;Oe!==null;){if(Oe.context===E&&(Oe.observedBits&R)!=0){Y.tag===1&&(Oe=Ys(-1,x&-x),Oe.tag=2,Js(Y,Oe)),Y.lanes|=x,Oe=Y.alternate,Oe!==null&&(Oe.lanes|=x),Sr(Y.return,x),he.lanes|=x;break}Oe=Oe.next}}else z=Y.tag===10&&Y.type===f.type?null:Y.child;if(z!==null)z.return=Y;else for(z=Y;z!==null;){if(z===f){z=null;break}if(Y=z.sibling,Y!==null){Y.return=z.return,z=Y;break}z=z.return}Y=z}}Er(c,f,A.children,x),f=f.child}return f;case 9:return A=f.type,R=f.pendingProps,E=R.children,pn(f,x),A=mn(A,R.unstable_observedBits),E=E(A),f.flags|=1,Er(c,f,E,x),f.child;case 14:return A=f.type,R=Vt(A,f.pendingProps),R=Vt(A.type,R),e_(c,f,A,R,E,x);case 15:return t_(c,f,f.type,f.pendingProps,E,x);case 17:return E=f.type,A=f.pendingProps,A=f.elementType===E?A:Vt(E,A),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Pn(E)?(c=!0,Bs(f)):c=!1,pn(f,x),k1(f,E,A),Jm(f,E,A,x),ug(null,f,E,!0,c,x);case 19:return c_(c,f,x);case 23:return ag(c,f,x);case 24:return ag(c,f,x)}throw Error(a(156,f.tag))};var lh={current:!1},Dg=o.unstable_flushAllWithoutAsserting,k_=typeof Dg=="function";function Fg(){if(Dg!==void 0)return Dg();for(var c=!1;fs();)c=!0;return c}function N_(c){try{Fg(),S3(function(){Fg()?N_(c):c()})}catch(f){c(f)}}var uh=0,O_=!1;function D3(c,f,x,E){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(c,f,x,E){return new D3(c,f,x,E)}function kg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function F3(c){if(typeof c=="function")return kg(c)?1:0;if(c!=null){if(c=c.$$typeof,c===w)return 11;if(c===M)return 14}return 2}function eo(c,f){var x=c.alternate;return x===null?(x=qr(c.tag,f,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=f,x.type=c.type,x.flags=0,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null),x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,f=c.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function ch(c,f,x,E,A,R){var z=2;if(E=c,typeof c=="function")kg(c)&&(z=1);else if(typeof c=="string")z=5;else e:switch(c){case m:return vl(x.children,A,R,f);case C:z=8,A|=16;break;case d:z=8,A|=1;break;case p:return c=qr(12,x,f,A|8),c.elementType=p,c.type=p,c.lanes=R,c;case v:return c=qr(13,x,f,A),c.type=v,c.elementType=v,c.lanes=R,c;case g:return c=qr(19,x,f,A),c.elementType=g,c.lanes=R,c;case T:return Ng(x,A,R,f);case L:return c=qr(24,x,f,A),c.elementType=L,c.lanes=R,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case y:z=10;break e;case _:z=9;break e;case w:z=11;break e;case M:z=14;break e;case S:z=16,E=null;break e;case b:z=22;break e}throw Error(a(130,c==null?c:typeof c,""))}return f=qr(z,x,f,A),f.elementType=c,f.type=E,f.lanes=R,f}function vl(c,f,x,E){return c=qr(7,c,E,f),c.lanes=x,c}function Ng(c,f,x,E){return c=qr(23,c,E,f),c.elementType=T,c.lanes=x,c}function Og(c,f,x){return c=qr(6,c,null,f),c.lanes=x,c}function Ug(c,f,x){return f=qr(4,c.children!==null?c.children:[],c.key,f),f.lanes=x,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function k3(c,f,x){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.pendingContext=this.context=null,this.hydrate=x,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Hs(0),this.expirationTimes=Hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),be&&(this.mutableSourceEagerHydrationData=null)}function U_(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(a(188)):Error(a(268,Object.keys(c)));return c=H(f),c===null?null:c.stateNode}function B_(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<f?x:f}}function fh(c,f){B_(c,f),(c=c.alternate)&&B_(c,f)}function N3(c){return c=H(c),c===null?null:c.stateNode}function O3(){return null}return r.IsThisRendererActing=lh,r.act=function(c){function f(){uh--,wg.current=x,lh.current=E}O_===!1&&(O_=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),uh++;var x=wg.current,E=lh.current;wg.current=!0,lh.current=!0;try{var A=b_(c)}catch(R){throw f(),R}if(A!==null&&typeof A=="object"&&typeof A.then=="function")return{then:function(R,z){A.then(function(){1<uh||k_===!0&&x===!0?(f(),R()):N_(function(Y){f(),Y?z(Y):R()})},function(Y){f(),z(Y)})}};try{uh!==1||k_!==!1&&x!==!1||Fg(),f()}catch(R){throw f(),R}return{then:function(R){R()}}},r.attemptContinuousHydration=function(c){if(c.tag===13){var f=Tr();cs(c,67108864,f),fh(c,67108864)}},r.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Tr(),x=Ks(c);cs(c,x,f),fh(c,x)}},r.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.hydrate){var x=si(f.pendingLanes);f.expiredLanes|=x&f.pendingLanes,Dr(f,dn()),(tt&48)==0&&(Zs(),hn())}break;case 13:var E=Tr();A_(function(){return cs(c,1,E)}),fh(c,4)}},r.attemptUserBlockingHydration=function(c){if(c.tag===13){var f=Tr();cs(c,4,f),fh(c,4)}},r.batchedEventUpdates=function(c,f){var x=tt;tt|=2;try{return c(f)}finally{tt=x,tt===0&&(Zs(),hn())}},r.batchedUpdates=b_,r.createComponentSelector=function(c){return{$$typeof:Jd,value:c}},r.createContainer=function(c,f,x){return c=new k3(c,f,x),f=qr(3,null,null,f===2?7:f===1?3:0),c.current=f,f.stateNode=c,Ym(f),c},r.createHasPsuedoClassSelector=function(c){return{$$typeof:Zd,value:c}},r.createPortal=function(c,f,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:E==null?null:""+E,children:c,containerInfo:f,implementation:x}},r.createRoleSelector=function(c){return{$$typeof:Qd,value:c}},r.createTestNameSelector=function(c){return{$$typeof:Kd,value:c}},r.createTextSelector=function(c){return{$$typeof:$d,value:c}},r.deferredUpdates=function(c){return hr(97,c)},r.discreteUpdates=function(c,f,x,E,A){var R=tt;tt|=4;try{return hr(98,c.bind(null,f,x,E,A))}finally{tt=R,tt===0&&(Zs(),hn())}},r.findAllNodes=xg,r.findBoundingRects=function(c,f){if(!le)throw Error(a(363));f=xg(c,f),c=[];for(var x=0;x<f.length;x++)c.push(pe(f[x]));for(f=c.length-1;0<f;f--){x=c[f];for(var E=x.x,A=E+x.width,R=x.y,z=R+x.height,Y=f-1;0<=Y;Y--)if(f!==Y){var he=c[Y],Oe=he.x,Qe=Oe+he.width,rt=he.y,ze=rt+he.height;if(E>=Oe&&R>=rt&&A<=Qe&&z<=ze){c.splice(f,1);break}else if(E!==Oe||x.width!==he.width||ze<R||rt>z){if(!(R!==rt||x.height!==he.height||Qe<E||Oe>A)){Oe>E&&(he.width+=Oe-E,he.x=E),Qe<A&&(he.width=A-Oe),c.splice(f,1);break}}else{rt>R&&(he.height+=rt-R,he.y=R),ze<z&&(he.height=z-rt),c.splice(f,1);break}}}return c},r.findHostInstance=U_,r.findHostInstanceWithNoPortals=function(c){return c=X(c),c===null?null:c.tag===20?c.stateNode.instance:c.stateNode},r.findHostInstanceWithWarning=function(c){return U_(c)},r.flushControlled=function(c){var f=tt;tt|=1;try{hr(99,c)}finally{tt=f,tt===0&&(Zs(),hn())}},r.flushDiscreteUpdates=function(){(tt&49)==0&&(E3(),fs())},r.flushPassiveEffects=fs,r.flushSync=A_,r.focusWithin=function(c,f){if(!le)throw Error(a(363));for(c=gg(c),f=E_(c,f),f=Array.from(f),c=0;c<f.length;){var x=f[c++];if(!j(x)){if(x.tag===5&&ie(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return Gs},r.getFindAllNodesFailureDescription=function(c,f){if(!le)throw Error(a(363));var x=0,E=[];c=[gg(c),0];for(var A=0;A<c.length;){var R=c[A++],z=c[A++],Y=f[z];if((R.tag!==5||!j(R))&&(vg(R,Y)&&(E.push(yg(Y)),z++,z>x&&(x=z)),z<f.length))for(R=R.child;R!==null;)c.push(R,z),R=R.sibling}if(x<f.length){for(c=[];x<f.length;x++)c.push(yg(f[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},r.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Me(c.child.stateNode);default:return c.child.stateNode}},r.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:N3,findFiberByHostInstance:c.findFiberByHostInstance||O3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f.isDisabled&&f.supportsFiber)try{$i=f.inject(c),ii=f}catch{}c=!0}return c},r.observeVisibleRects=function(c,f,x,E){if(!le)throw Error(a(363));c=xg(c,f);var A=De(c,x,E).disconnect;return{disconnect:function(){A()}}},r.registerMutableSourceForHydration=function(c,f){var x=f._getVersion;x=x(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,x]:c.mutableSourceEagerHydrationData.push(f,x)},r.runWithPriority=function(c,f){var x=Gs;try{return Gs=c,f()}finally{Gs=x}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(c,f){var x=tt;tt&=-2,tt|=8;try{return c(f)}finally{tt=x,tt===0&&(Zs(),hn())}},r.updateContainer=function(c,f,x,E){var A=f.current,R=Tr(),z=Ks(A);e:if(x){x=x._reactInternals;t:{if(F(x)!==x||x.tag!==1)throw Error(a(170));var Y=x;do{switch(Y.tag){case 3:Y=Y.stateNode.context;break t;case 1:if(Pn(Y.type)){Y=Y.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Y=Y.return}while(Y!==null);throw Error(a(171))}if(x.tag===1){var he=x.type;if(Pn(he)){x=ec(x,he,Y);break e}}x=Y}else x=Rn;return f.context===null?f.context=x:f.pendingContext=x,f=Ys(R,z),f.payload={element:c},E=E===void 0?null:E,E!==null&&(f.callback=E),Js(A,f),cs(A,z,R),z},r}})(rA);nA.exports=rA.exports;var hU=nA.exports,Qx=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!=0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Dm=[];function iA(n,e,t,r=0,i=!1){for(const o of e)if(Qx(t,o.args)){if(i)return;if(o.error)throw o.error;if(o.response)return o.response;throw o.promise}const s={args:t,promise:n(...t).then(o=>s.response=o!=null?o:!0).catch(o=>s.error=o!=null?o:"unknown error").then(()=>{r>0&&setTimeout(()=>{const o=e.indexOf(s);o!==-1&&e.splice(o,1)},r)})};if(e.push(s),!i)throw s.promise}function pU(n,...e){if(e===void 0||e.length===0)n.splice(0,n.length);else{const t=n.find(r=>Qx(e,r.args));if(t){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}}function ks(n,...e){return iA(n,Dm,e,ks.lifespan)}ks.lifespan=0;ks.clear=(...n)=>pU(Dm,...n);ks.preload=(n,...e)=>void iA(n,Dm,e,ks.lifespan,!0);ks.peek=(...n)=>{var e;return(e=Dm.find(t=>Qx(n,t.args)))==null?void 0:e.response};function sA(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Kx(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?r=setTimeout(l,e-h):(r=null,t||(a=n.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var h=t&&!r;return r||(r=setTimeout(l,e)),h&&(a=n.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}Kx.debounce=Kx;var oA=Kx;function mU(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=ge.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ge.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,m=ge.exports.useRef(!1);ge.exports.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[d,p,y]=ge.exports.useMemo(()=>{const g=()=>{if(!l.current.element)return;const{left:M,top:S,width:b,height:C,bottom:T,right:L,x:P,y:O}=l.current.element.getBoundingClientRect(),D={left:M,top:S,width:b,height:C,bottom:T,right:L,x:P,y:O};l.current.element instanceof HTMLElement&&i&&(D.height=l.current.element.offsetHeight,D.width=l.current.element.offsetWidth),Object.freeze(D),m.current&&!xU(l.current.lastBounds,D)&&a(l.current.lastBounds=D)};return[g,h?oA(g,h):g,u?oA(g,u):g]},[a,i,u,h]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function w(){!l.current.element||(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(g=>g.addEventListener("scroll",y,{capture:!0,passive:!0})))}const v=g=>{!g||g===l.current.element||(_(),l.current.element=g,l.current.scrollContainers=aA(g),w())};return vU(y,Boolean(t)),gU(p),ge.exports.useEffect(()=>{_(),w()},[t,y,p]),ge.exports.useEffect(()=>_,[]),[v,o,d]}function gU(n){ge.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function vU(n,e){ge.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function aA(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...aA(n.parentElement)]}const yU=["x","y","top","bottom","left","right","width","height"],xU=(n,e)=>yU.every(t=>n[t]===e[t]),Nt={obj:n=>n===Object(n)&&!Nt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Nt.str(n)||Nt.num(n)||Nt.obj(n))return n===e;if(Nt.arr(n)&&n==e)return!0;let t;for(t in n)if(!(t in e))return!1;for(t in e)if(n[t]!==e[t])return!1;return Nt.und(t)?n===e:!0}};function $x(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function lA(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function _U(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{lA(t.capturedMap,e,r,i)})}function wU(n){const e=new N;function t(m){var d;const p=n.getState(),{raycaster:y,mouse:_,camera:w,size:v}=p,{offsetX:g,offsetY:M}=(d=y.computeOffsets==null?void 0:y.computeOffsets(m,p))!=null?d:m,{width:S,height:b}=v;_.set(g/S*2-1,-(M/b)*2+1),y.setFromCamera(_,w)}function r(m){const{internal:d}=n.getState(),p=m.offsetX-d.initialClick[0],y=m.offsetY-d.initialClick[1];return Math.round(Math.sqrt(p*p+y*y))}function i(m){return m.filter(d=>["Move","Over","Enter","Out","Leave"].some(p=>{var y;return(y=d.__r3f)==null?void 0:y.handlers["onPointer"+p]}))}function s(m){const d=n.getState(),{raycaster:p,internal:y}=d;if(!p.enabled)return[];const _=new Set,w=[],v=m?m(y.interaction):y.interaction;let g=p.intersectObjects(v,!0).filter(S=>{const b=$x(S);return _.has(b)?!1:(_.add(b),!0)});p.filter&&(g=p.filter(g,d));for(const S of g){let b=S.object;for(;b;){var M;(M=b.__r3f)!=null&&M.eventCount&&w.push(Dn(ht({},S),{eventObject:b})),b=b.parent}}return w}function o(m,d){const{internal:p}=n.getState();if("pointerId"in d&&p.capturedMap.has(d.pointerId))for(let y of p.capturedMap.get(d.pointerId).values())m.push(y.intersection);return m}function a(m,d,p,y){const{raycaster:_,mouse:w,camera:v,internal:g}=n.getState();if(m.length){const M=e.set(w.x,w.y,0).unproject(v),S={stopped:!1};for(const b of m){const C=D=>{var k,F;return(k=(F=g.capturedMap.get(D))==null?void 0:F.has(b.eventObject))!=null?k:!1},T=D=>{const k={intersection:b,target:d.target};g.capturedMap.has(D)?g.capturedMap.get(D).set(b.eventObject,k):g.capturedMap.set(D,new Map([[b.eventObject,k]])),d.target.setPointerCapture(D)},L=D=>{const k=g.capturedMap.get(D);k&&lA(g.capturedMap,b.eventObject,k,D)};let P={};for(let D in d){let k=d[D];typeof k!="function"&&(P[D]=k)}let O=Dn(ht(ht({},b),P),{spaceX:w.x,spaceY:w.y,intersections:m,stopped:S.stopped,delta:p,unprojectedPoint:M,ray:_.ray,camera:v,stopPropagation:()=>{const D="pointerId"in d&&g.capturedMap.get(d.pointerId);if((!D||D.has(b.eventObject))&&(O.stopped=S.stopped=!0,g.hovered.size&&Array.from(g.hovered.values()).find(k=>k.eventObject===b.eventObject))){const k=m.slice(0,m.indexOf(b));l([...k,b])}},target:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:L},currentTarget:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:L},sourceEvent:d,nativeEvent:d});if(y(O),S.stopped===!0)break}}return m}function l(m){const{internal:d}=n.getState();Array.from(d.hovered.values()).forEach(p=>{if(!m.length||!m.find(y=>y.object===p.object&&y.index===p.index&&y.instanceId===p.instanceId)){const _=p.eventObject.__r3f,w=_==null?void 0:_.handlers;if(d.hovered.delete($x(p)),_!=null&&_.eventCount){const v=Dn(ht({},p),{intersections:m||[]});w.onPointerOut==null||w.onPointerOut(v),w.onPointerLeave==null||w.onPointerLeave(v)}}})}const u=m=>{switch(m){case"onPointerLeave":case"onPointerCancel":return()=>l([]);case"onLostPointerCapture":return d=>{const{internal:p}=n.getState();"pointerId"in d&&!p.capturedMap.has(d.pointerId)&&(p.capturedMap.delete(d.pointerId),l([]))}}return d=>{const{onPointerMissed:p,internal:y}=n.getState();t(d),y.lastEvent.current=d;const _=m==="onPointerMove",w=m==="onClick"||m==="onContextMenu"||m==="onDoubleClick",g=o(s(_?i:void 0),d),M=w?r(d):0;m==="onPointerDown"&&(y.initialClick=[d.offsetX,d.offsetY],y.initialHits=g.map(S=>S.eventObject)),w&&!g.length&&M<=2&&(h(d,y.interaction),p&&p(d)),_&&l(g),a(g,d,M,S=>{const b=S.eventObject,C=b.__r3f,T=C==null?void 0:C.handlers;if(!!(C!=null&&C.eventCount))if(_){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const L=$x(S),P=y.hovered.get(L);P?P.stopped&&S.stopPropagation():(y.hovered.set(L,S),T.onPointerOver==null||T.onPointerOver(S),T.onPointerEnter==null||T.onPointerEnter(S))}T.onPointerMove==null||T.onPointerMove(S)}else{const L=T[m];L?(!w||y.initialHits.includes(b))&&(h(d,y.interaction.filter(P=>!y.initialHits.includes(P))),L(S)):w&&y.initialHits.includes(b)&&h(d,y.interaction.filter(P=>!y.initialHits.includes(P)))}})}};function h(m,d){d.forEach(p=>{var y;return(y=p.__r3f)==null||y.handlers.onPointerMissed==null?void 0:y.handlers.onPointerMissed(m)})}return{handlePointer:u}}const SU=n=>n&&!!n.memoized&&!!n.changes,Fm=n=>n&&!!n.getState,e1=(n,e)=>{var t,r;return{root:Fm(n)?n:(t=(r=n.__r3f)==null?void 0:r.root)!=null?t:e.__r3f.root,container:Fm(n)?n.getState().scene:n}},uA="__default",MU={};let EU={};function TU(n,e){return!!(Nt.arr(n)&&Nt.equ(n,e)||n===e)}function Xu(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f=ht({root:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},e)),n}function bU(n){function e(d,C,L={},b=!1){var T=C,{children:p,key:y,ref:_}=T,w=mr(T,["children","key","ref"]);var P=L,{children:v,key:g,ref:M}=P,S=mr(P,["children","key","ref"]);var O;const D=(O=d==null?void 0:d.__r3f)!=null?O:{},k=Object.entries(w),F=[];if(b){const W=Object.keys(S);for(let H=0;H<W.length;H++)w.hasOwnProperty(W[H])||k.unshift([W[H],uA+"remove"])}k.forEach(([W,H])=>{var X;if((X=d.__r3f)!=null&&X.primitive&&W==="object"||TU(H,S[W]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(W))return F.push([W,H,!0,[]]);let ue=[];W.includes("-")&&(ue=W.split("-")),F.push([W,H,!1,ue])});const B=ht({},w);return D.memoizedProps&&D.memoizedProps.args&&(B.args=D.memoizedProps.args),D.memoizedProps&&D.memoizedProps.attach&&(B.attach=D.memoizedProps.attach),{accumulative:b,memoized:B,changes:F}}function t(d,p){var y,_,w;const v=(y=d==null?void 0:d.__r3f)!=null?y:{},g=v.root,M=(_=g==null||g.getState==null?void 0:g.getState())!=null?_:{},{memoized:S,changes:b}=SU(p)?p:e(d,p),C=v.eventCount;if(d.__r3f&&(d.__r3f.memoizedProps=S),b.forEach(([T,L,P,O])=>{var D;let k=d,F=k[T];if(O.length&&(F=O.reduce((W,H)=>W[H],d),!(F&&F.set))){const[W,...H]=O.reverse();k=H.reverse().reduce((X,ue)=>X[ue],d),T=W}if(L===uA+"remove")if(F&&F.constructor)L=new F.constructor(S.args);else if(k.constructor){const W=new k.constructor(k.__r3f.memoizedProps.args);L=W[F],W.dispose&&W.dispose()}else L=0;const B=(M==null||(D=M.gl)==null?void 0:D.outputEncoding)===kn;if(P)L?v.handlers[T]=L:delete v.handlers[T],v.eventCount=Object.keys(v.handlers).length;else if(F&&F.set&&(F.copy||F instanceof cu)){if(Array.isArray(L))F.fromArray?F.fromArray(L):F.set(...L);else if(F.copy&&L&&L.constructor&&F.constructor.name===L.constructor.name)F.copy(L);else if(L!==void 0){const W=F instanceof ke;!W&&F.setScalar?F.setScalar(L):F instanceof cu&&L instanceof cu?F.mask=L.mask:F.set(L),!B&&W&&F.convertSRGBToLinear()}}else k[T]=L,!B&&k[T]instanceof an&&(k[T].encoding=Nr);r(d)}),v.parent&&M.internal&&d.raycast&&C!==v.eventCount){const T=M.internal.interaction.indexOf(d);T>-1&&M.internal.interaction.splice(T,1),v.eventCount&&M.internal.interaction.push(d)}return b.length&&(w=d.__r3f)!=null&&w.parent&&i(d),d}function r(d){var p,y;const _=(p=d.__r3f)==null||(y=p.root)==null||y.getState==null?void 0:y.getState();_&&_.internal.frames===0&&_.invalidate()}function i(d){d.onUpdate==null||d.onUpdate(d)}function s(d,g,_,w,v){var M=g,{args:p=[]}=M,y=mr(M,["args"]);let S=`${d[0].toUpperCase()}${d.slice(1)}`,b;if(!Fm(_)&&v){const C=T=>T.return?C(T.return):T.stateNode&&T.stateNode.containerInfo;_=C(v)}if(!_||!Fm(_))throw`No valid root for ${S}!`;if(d==="primitive"){if(y.object===void 0)throw"Primitives without 'object' are invalid!";const C=y.object;b=Xu(C,{root:_,primitive:!0})}else{const C=EU[S]||uU[S];if(!C)throw`${S} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;if(!Array.isArray(p))throw"The args prop must be an array!";b=Xu(new C(...p),{root:_,memoizedProps:{args:p.length===0?null:p}})}return"attachFns"in y||(S.endsWith("Geometry")?y=ht({attach:"geometry"},y):S.endsWith("Material")&&(y=ht({attach:"material"},y))),t(b,y),b}function o(d,p){let y=!1;if(p){if(p.attachArray)Nt.arr(d[p.attachArray])||(d[p.attachArray]=[]),d[p.attachArray].push(p);else if(p.attachObject)Nt.obj(d[p.attachObject[0]])||(d[p.attachObject[0]]={}),d[p.attachObject[0]][p.attachObject[1]]=p;else if(p.attach&&!Nt.fun(p.attach))d[p.attach]=p;else if(Nt.arr(p.attachFns)){const[_]=p.attachFns;Nt.str(_)&&Nt.fun(d[_])?d[_](p):Nt.fun(_)&&_(p,d)}else p.isObject3D&&d.isObject3D&&(d.add(p),y=!0);y||d.__r3f.objects.push(p),p.__r3f||Xu(p,{}),p.__r3f.parent=d,i(p),r(p)}}function a(d,p,y){let _=!1;if(p){if(p.attachArray){const w=d[p.attachArray];Nt.arr(w)||(d[p.attachArray]=[]),w.splice(w.indexOf(y),0,p)}else{if(p.attachObject||p.attach&&!Nt.fun(p.attach))return o(d,p);if(p.isObject3D&&d.isObject3D){p.parent=d,p.dispatchEvent({type:"added"});const w=d.children.filter(g=>g!==p),v=w.indexOf(y);d.children=[...w.slice(0,v),p,...w.slice(v)],_=!0}}_||d.__r3f.objects.push(p),p.__r3f||Xu(p,{}),p.__r3f.parent=d,i(p),r(p)}}function l(d,p,y=!1){d&&[...d].forEach(_=>u(p,_,y))}function u(d,p,y){if(p){var _,w;if(p.__r3f&&(p.__r3f.parent=null),(_=d.__r3f)!=null&&_.objects&&(d.__r3f.objects=d.__r3f.objects.filter(b=>b!==p)),p.attachArray)d[p.attachArray]=d[p.attachArray].filter(b=>b!==p);else if(p.attachObject)delete d[p.attachObject[0]][p.attachObject[1]];else if(p.attach&&!Nt.fun(p.attach)&&d[p.attach]===p)d[p.attach]=null;else if(Nt.arr(p.attachFns)){const[,b]=p.attachFns;Nt.str(b)&&Nt.fun(d[b])?d[b](p):Nt.fun(b)&&b(p,d)}else if(p.isObject3D&&d.isObject3D){var v;d.remove(p),(v=p.__r3f)!=null&&v.root&&_U(p.__r3f.root,p)}const M=(w=p.__r3f)==null?void 0:w.primitive,S=y===void 0?p.dispose!==null&&!M:y;if(!M){var g;l((g=p.__r3f)==null?void 0:g.objects,p,S),l(p.children,p,S)}p.__r3f&&(delete p.__r3f.root,delete p.__r3f.objects,delete p.__r3f.handlers,delete p.__r3f.memoizedProps,M||delete p.__r3f),S&&p.dispose&&p.type!=="Scene"&&_l.exports.unstable_runWithPriority(_l.exports.unstable_IdlePriority,()=>{try{p.dispose()}catch{}}),r(d)}}function h(d,p,y,_){var w;const v=(w=d.__r3f)==null?void 0:w.parent;if(!v)return;const g=s(p,y,d.__r3f.root);p!=="primitive"&&d.children&&(d.children.forEach(M=>o(g,M)),d.children=[]),d.__r3f.objects.forEach(M=>o(g,M)),d.__r3f.objects=[],u(v,d),o(v,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[_,_.alternate].forEach(M=>{M!==null&&(M.stateNode=g,M.ref&&(typeof M.ref=="function"?M.ref(g):M.ref.current=g))})}return{reconciler:hU({now:_l.exports.unstable_now,createInstance:s,removeChild:u,appendChild:o,appendInitialChild:o,insertBefore:a,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:Nt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Nt.fun(clearTimeout)?clearTimeout:void 0,setTimeout:Nt.fun(setTimeout)?setTimeout:void 0,clearTimeout:Nt.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(d,p)=>{const{container:y,root:_}=e1(d,p);y.__r3f.root=_,o(y,p)},removeChildFromContainer:(d,p)=>u(e1(d,p).container,p),insertInContainerBefore:(d,p,y)=>a(e1(d,p).container,p,y),prepareUpdate(d,p,y,_){if(d.__r3f.primitive&&_.object&&_.object!==d)return[!0];{const w=_,{args:g=[],children:M}=w,S=mr(w,["args","children"]),v=y,{args:b=[],children:C}=v,T=mr(v,["args","children"]);if(!Array.isArray(g))throw"The args prop must be an array!";if(g.some((P,O)=>P!==b[O]))return[!0];const L=e(d,S,T,!0);if(L.changes.length)return[!1,L];if(d.attach&&typeof d.attach!="function"){const O=d.__r3f.parent;O&&O[d.attach]!==d&&o(O,d)}return null}},commitUpdate(d,[p,y],_,w,v,g){p?h(d,_,v,g):t(d,y)},hideInstance(d){d.isObject3D&&(d.visible=!1,r(d))},unhideInstance(d,p){(d.isObject3D&&p.visible==null||p.visible)&&(d.visible=!0,r(d))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(d){return d},getRootHostContext(d){return MU},getChildHostContext(d){return d},createTextInstance(){},finalizeInitialChildren(d){var p;return!!((p=d==null?void 0:d.__r3f)!=null?p:{}).handlers},commitMount(d){var p;const y=(p=d==null?void 0:d.__r3f)!=null?p:{};d.raycast&&y.handlers&&y.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(d){Xu(d)},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:t}}const AU=n=>!!(n!=null&&n.render),cA=n=>n&&n.isOrthographicCamera;function t1(n){return Array.isArray(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const fA=ge.exports.createContext(null),CU=(n,e,t,r)=>{const{gl:i,size:s,shadows:o=!1,linear:a=!1,flat:l=!1,vr:u=!1,orthographic:h=!1,frameloop:m="always",dpr:d=1,performance:p,clock:y=new Vx,raycaster:_,camera:w,onPointerMissed:v}=r;o&&(i.shadowMap.enabled=!0,typeof o=="object"?Object.assign(i.shadowMap,o):i.shadowMap.type=Z0),a&&(i.outputEncoding=kn),l&&(i.toneMapping=ws),m==="never"&&(y.stop(),y.elapsedTime=0);const g=dU((C,T)=>{const L=new qx,Ae=_||{},{params:P}=Ae,O=mr(Ae,["params"]);n(L,Dn(ht({enabled:!0},O),{params:ht(ht({},L.params),P)}));const D=w instanceof Ba,k=D?w:h?new Ps(0,0,0,0,.1,1e3):new ln(75,0,.1,1e3);D||(k.position.z=5,w&&n(k,w),w!=null&&w.rotation||k.lookAt(0,0,0));const F=t1(d),B=new N,W=new N,H=new N;function X(V=T().camera,te=W,q=T().size){const{width:re,height:ye}=q,$=re/ye;te instanceof N?H.copy(te):H.set(...te);const Te=V.getWorldPosition(B).distanceTo(H);if(cA(V))return{width:re/V.zoom,height:ye/V.zoom,factor:1,distance:Te,aspect:$};{const Le=V.fov*Math.PI/180,Ee=2*Math.tan(Le/2)*Te,Re=Ee*(re/ye);return{width:Re,height:Ee,factor:re/Re,distance:Te,aspect:$}}}let ue;const Me=V=>C(te=>({performance:Dn(ht({},te.performance),{current:V})}));return{gl:i,set:C,get:T,invalidate:()=>e(T()),advance:(V,te)=>t(V,te,T()),linear:a,flat:l,scene:Xu(new Zf),camera:k,controls:null,raycaster:L,clock:y,mouse:new Se,vr:u,frameloop:m,onPointerMissed:v,performance:Dn(ht({current:1,min:.5,max:1,debounce:200},p),{regress:()=>{const V=T();ue&&clearTimeout(ue),V.performance.current!==V.performance.min&&Me(V.performance.min),ue=setTimeout(()=>Me(T().performance.max),V.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:F,dpr:F,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:X},setSize:(V,te)=>{const q={width:V,height:te};C(re=>({size:q,viewport:ht(ht({},re.viewport),X(k,W,q))}))},setDpr:V=>C(te=>({viewport:Dn(ht({},te.viewport),{dpr:t1(V)})})),setFrameloop:(V="always")=>C(()=>({frameloop:V})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:r,lastEvent:ge.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(V,te=0)=>(C(({internal:q})=>({internal:Dn(ht({},q),{priority:q.priority+(te>0?1:0),subscribers:[...q.subscribers,{ref:V,priority:te}].sort((re,ye)=>re.priority-ye.priority)})})),()=>{C(({internal:q})=>({internal:Dn(ht({},q),{priority:q.priority-(te>0?1:0),subscribers:q.subscribers.filter(re=>re.ref!==V)})}))})}}}),M=g.getState();let S=M.size,b=M.viewport.dpr;return g.subscribe(()=>{const{camera:C,size:T,viewport:L,internal:P}=g.getState();(T!==S||L.dpr!==b)&&(!C.manual&&!(P.lastProps.camera instanceof Ba)&&(cA(C)?(C.left=T.width/-2,C.right=T.width/2,C.top=T.height/2,C.bottom=T.height/-2):C.aspect=T.width/T.height,C.updateProjectionMatrix(),C.updateMatrixWorld()),i.setPixelRatio(L.dpr),i.setSize(T.width,T.height),S=T,b=L.dpr)}),s&&M.setSize(s.width,s.height),g.subscribe(C=>e(C)),g};let Yo,dA=[],hA=[],LU=[];function md(n,e){for(Yo=0;Yo<n.length;Yo++)n[Yo](e)}function n1(n,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(t=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Yo=0;Yo<e.internal.subscribers.length;Yo++)e.internal.subscribers[Yo].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function RU(n){let e=!1,t;function r(o){if(e=!0,t=0,md(dA,o),n.forEach(a=>{const l=a.store.getState();l.internal.active&&(l.frameloop==="always"||l.internal.frames>0)&&(t+=n1(o,l))}),md(hA,o),t>0)return requestAnimationFrame(r);md(LU,o),e=!1}function i(o){if(!o)return n.forEach(a=>i(a.store.getState()));o.vr||!o.internal.active||o.frameloop==="never"||(o.internal.frames=Math.min(60,o.internal.frames+1),e||(e=!0,requestAnimationFrame(r)))}function s(o,a=!0,l){a&&md(dA,o),l?n1(o,l):n.forEach(u=>n1(o,u.store.getState())),a&&md(hA,o)}return{loop:r,invalidate:i,advance:s}}function PU(n){const{handlePointer:e}=wU(n),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((r,i)=>Dn(ht({},r),{[i]:e(i)}),{}),connect:r=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(a=>({events:Dn(ht({},a.events),{connected:r})})),Object.entries((i=o==null?void 0:o.handlers)!=null?i:[]).forEach(([a,l])=>{const[u,h]=t[a];r.addEventListener(u,l,{passive:h})})},disconnect:()=>{const{set:r,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,a])=>{if(i&&i.connected instanceof HTMLElement){const[l]=t[o];i.connected.removeEventListener(l,a)}}),r(o=>({events:Dn(ht({},o.events),{connected:!1})}))}}}}const r1=typeof window!="undefined"?ge.exports.useLayoutEffect:ge.exports.useEffect;function IU({set:n}){return r1(()=>(n(new Promise(()=>null)),()=>n(!1)),[]),null}class pA extends ge.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}pA.getDerivedStateFromError=()=>({error:!0});const DU=ge.exports.forwardRef(function(m,h){var d=m,{children:e,fallback:t,tabIndex:r,resize:i,id:s,style:o,className:a,events:l}=d,u=mr(d,["children","fallback","tabIndex","resize","id","style","className","events"]);const[p,{width:y,height:_}]=mU(ht({scroll:!0,debounce:{scroll:50,resize:0}},i)),w=ge.exports.useRef(null),[v,g]=ge.exports.useState(!1),[M,S]=ge.exports.useState(!1);if(v)throw v;if(M)throw M;return r1(()=>{y>0&&_>0&&OU(ge.exports.createElement(pA,{set:S},ge.exports.createElement(ge.exports.Suspense,{fallback:ge.exports.createElement(IU,{set:g})},e)),w.current,Dn(ht({},u),{size:{width:y,height:_},events:l||PU}))},[y,_,e]),r1(()=>{const b=w.current;return()=>wA(b)},[]),ge.exports.createElement("div",{ref:p,id:s,className:a,tabIndex:r,style:ht({position:"relative",width:"100%",height:"100%",overflow:"hidden"},o)},ge.exports.createElement("canvas",{ref:sA([w,h]),style:{display:"block"}},t))});function mA(){const n=ge.exports.useContext(fA);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n}function Hr(n=t=>t,e){return mA()(n,e)}function i1(n,e=0){const t=mA().getState().internal.subscribe,r=ge.exports.useRef(n);return ge.exports.useLayoutEffect(()=>void(r.current=n),[n]),ge.exports.useLayoutEffect(()=>t(r,e),[e,t]),null}function FU(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function gA(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,FU(l.scene)),o(l)},e,l=>a(`Could not load ${s}: ${l.message}`)))))}}function vA(n,e,t,r){const i=Array.isArray(e)?e:[e],s=ks(gA(t,r),n,...i);return Array.isArray(e)?s:s[0]}vA.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return ks.preload(gA(t),n,...r)};vA.clear=function(n,e){const t=Array.isArray(e)?e:[e];return ks.clear(n,...t)};const gd=new Map,yA=["legacy","blocking","concurrent"],{invalidate:kU,advance:xA}=RU(gd),{reconciler:vd,applyProps:_A}=bU(),NU=(n,e)=>{const t=typeof n=="function"?n(e):n;if(AU(t))return t;const r=new It(ht({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},n));return r.outputEncoding=Nr,r.toneMapping=sy,n&&_A(r,n),r};function OU(n,e,l={}){var u=l,{gl:t,size:r,mode:i=yA[1],events:s,onCreated:o}=u,a=mr(u,["gl","size","mode","events","onCreated"]);var h;if(!r){var m,d,p,y;r={width:(m=(d=e.parentElement)==null?void 0:d.clientWidth)!=null?m:0,height:(p=(y=e.parentElement)==null?void 0:y.clientHeight)!=null?p:0}}let _=gd.get(e),w=_==null?void 0:_.fiber,v=_==null?void 0:_.store,g=(h=v)==null?void 0:h.getState();if(w&&g&&(a.dpr!==void 0&&!Nt.equ(g.viewport.dpr,t1(a.dpr))&&g.setDpr(a.dpr),(g.size.width!==r.width||g.size.height!==r.height)&&g.setSize(r.width,r.height),g.frameloop!==a.frameloop&&g.setFrameloop(a.frameloop),a.linear!==g.internal.lastProps.linear&&(wA(e),w=void 0)),!w){const M=NU(t,e);a.vr&&(M.xr.enabled=!0,M.setAnimationLoop(b=>xA(b,!0))),v=CU(_A,kU,xA,ht({gl:M,size:r},a));const S=v.getState();w=vd.createContainer(v,yA.indexOf(i),!1,null),gd.set(e,{fiber:w,store:v}),s&&S.set({events:s(v)})}if(v&&w)return vd.updateContainer(ge.exports.createElement(UU,{store:v,element:n,onCreated:o,target:e}),w,null,()=>{}),v;throw"Error creating root!"}function UU({store:n,element:e,onCreated:t,target:r}){return ge.exports.useEffect(()=>{const i=n.getState();i.set(s=>({internal:Dn(ht({},s.internal),{active:!0})})),i.events.connect==null||i.events.connect(r),t&&t(i)},[]),ge.exports.createElement(fA.Provider,{value:n},e)}function wA(n,e){const t=gd.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),vd.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{var s,o,a;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),BU(i),gd.delete(n),e&&e(n)},500)})}}function BU(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const r in n){var e,t;(e=(t=r).dispose)==null||e.call(t),delete n[r]}}vd.act;vd.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});class zU extends Kn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new WU(t)}),this.register(function(t){return new ZU(t)}),this.register(function(t){return new QU(t)}),this.register(function(t){return new jU(t)}),this.register(function(t){return new XU(t)}),this.register(function(t){return new qU(t)}),this.register(function(t){return new YU(t)}),this.register(function(t){return new JU(t)}),this.register(function(t){return new HU(t)}),this.register(function(t){return new KU(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Ei.extractUrlBase(e),this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Gr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=e;else if(Ei.decodeText(new Uint8Array(e,0,4))===SA){try{o[wt.KHR_BINARY_GLTF]=new $U(e)}catch(m){i&&i(m);return}s=o[wt.KHR_BINARY_GLTF].content}else s=Ei.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new f4(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const m=this.pluginCallbacks[h](u);a[m.name]=m,o[m.name]=!0}if(l.extensionsUsed)for(let h=0;h<l.extensionsUsed.length;++h){const m=l.extensionsUsed[h],d=l.extensionsRequired||[];switch(m){case wt.KHR_MATERIALS_UNLIT:o[m]=new VU;break;case wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[m]=new n4;break;case wt.KHR_DRACO_MESH_COMPRESSION:o[m]=new e4(l,this.dracoLoader);break;case wt.KHR_TEXTURE_TRANSFORM:o[m]=new t4;break;case wt.KHR_MESH_QUANTIZATION:o[m]=new r4;break;default:d.indexOf(m)>=0&&a[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(r,i)}}function GU(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const wt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class HU{constructor(e){this.parser=e,this.name=wt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new ke(16777215);l.color!==void 0&&h.fromArray(l.color);const m=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new Mm(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Sm(h),u.distance=m;break;case"spot":u=new wm(h),u.distance=m,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class VU{constructor(){this.name=wt.KHR_MATERIALS_UNLIT}getMaterialType(){return Qn}extendParams(e,t,r){const i=[];e.color=new ke(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(i)}}class WU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Se(a,a)}return Promise.all(s)}}class jU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class XU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class qU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ke(a[0],a[1],a[2]),Promise.all(s)}}class YU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class JU{constructor(e){this.parser=e,this.name=wt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ds}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ke(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture).then(function(l){l.encoding=Nr})),Promise.all(s)}}class ZU{constructor(e){this.parser=e,this.name=wt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=r.images[s.source],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class QU{constructor(e){this.parser=e,this.name=wt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,a,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class KU{constructor(e){this.name=wt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,h=i.count,m=i.byteStride,d=new ArrayBuffer(h*m),p=new Uint8Array(a[0],l,u);return o.decodeGltfBuffer(new Uint8Array(d),h,m,p,i.mode,i.filter),d})}else return null}}const SA="glTF",yd=12,MA={JSON:1313821514,BIN:5130562};class $U{constructor(e){this.name=wt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,yd);if(this.header={magic:Ei.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==SA)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-yd,i=new DataView(e,yd);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===MA.JSON){const l=new Uint8Array(e,yd+s,o);this.content=Ei.decodeText(l)}else if(a===MA.BIN){const l=yd+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class e4{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=wt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const m=o1[h]||h.toLowerCase();a[m]=o[h]}for(const h in e.attributes){const m=o1[h]||h.toLowerCase();if(o[h]!==void 0){const d=r.accessors[e.attributes[h]],p=xd[d.componentType];u[m]=p,l[m]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(m){i.decodeDracoFile(h,function(d){for(const p in d.attributes){const y=d.attributes[p],_=l[p];_!==void 0&&(y.normalized=_)}m(d)},a,u)})})}}class t4{constructor(){this.name=wt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class s1 extends Wa{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ke().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const u in a)l.uniforms[u]=a[u];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class n4{constructor(){this.name=wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return s1}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new ke(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new ke(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new ke(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new s1(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=bo,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class r4{constructor(){this.name=wt.KHR_MESH_QUANTIZATION}}class Ka extends Qi{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}}Ka.prototype.beforeStart_=Ka.prototype.copySampleValue_;Ka.prototype.afterEnd_=Ka.prototype.copySampleValue_;Ka.prototype.interpolate_=function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,u=r-e,h=(t-e)/u,m=h*h,d=m*h,p=n*l,y=p-l,_=-2*d+3*m,w=d-m,v=1-_,g=w-m+h;for(let M=0;M!==o;M++){const S=s[y+M+o],b=s[y+M+a]*u,C=s[p+M+o],T=s[p+M]*u;i[M]=v*S+g*b+_*C+w*T}return i};const i4=new Hn;class s4 extends Ka{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return i4.fromArray(s).normalize().toArray(s),s}}const Ns={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},xd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},EA={9728:xn,9729:Kt,9984:If,9985:wp,9986:Df,9987:Ss},TA={33071:zn,33648:Kl,10497:Eo},bA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},o1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Jo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},o4={CUBICSPLINE:void 0,LINEAR:Ia,STEP:tu},a1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function a4(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Wa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Mo})),n.DefaultMaterial}function _d(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function $a(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function l4(n,e,t){let r=!1,i=!1;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(n);const s=[],o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];if(r){const h=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;s.push(h)}if(i){const h=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;o.push(h)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(a){const l=a[0],u=a[1];return r&&(n.morphAttributes.position=l),i&&(n.morphAttributes.normal=u),n.morphTargetsRelative=!0,n})}function u4(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function c4(n){const e=n.extensions&&n.extensions[wt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+AA(e.attributes):t=n.indices+":"+AA(n.attributes)+":"+n.mode,t}function AA(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function l1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class f4{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GU,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new Gx(this.options.manager):this.textureLoader=new Fx(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};_d(s,a,i),$a(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[wt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Ei.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=bA[i.type],u=xd[i.componentType],h=u.BYTES_PER_ELEMENT,m=h*l,d=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,y=i.normalized===!0;let _,w;if(p&&p!==m){const v=Math.floor(d/p),g="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let M=t.cache.get(g);M||(_=new u(a,v*p,i.count*p/h),M=new Bo(_,p/h),t.cache.add(g,M)),w=new Is(M,l,d%p/h,y)}else a===null?_=new u(i.count*l):_=new u(a,d,i.count*l),w=new _t(_,l,y);if(i.sparse!==void 0){const v=bA.SCALAR,g=xd[i.sparse.indices.componentType],M=i.sparse.indices.byteOffset||0,S=i.sparse.values.byteOffset||0,b=new g(o[1],M,i.sparse.count*v),C=new u(o[2],S,i.sparse.count*l);a!==null&&(w=new _t(w.array.slice(),w.itemSize,w.normalized));for(let T=0,L=b.length;T<L;T++){const P=b[T];if(w.setX(P,C[T*l]),l>=2&&w.setY(P,C[T*l+1]),l>=3&&w.setZ(P,C[T*l+2]),l>=4&&w.setW(P,C[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e],s=t.images[i.source];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=this.options,a=s.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=self.URL||self.webkitURL;let h=t.uri||"",m=!1;if(t.bufferView!==void 0)h=i.getDependency("bufferView",t.bufferView).then(function(p){m=!0;const y=new Blob([p],{type:t.mimeType});return h=u.createObjectURL(y),h});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(h).then(function(p){return new Promise(function(y,_){let w=y;r.isImageBitmapLoader===!0&&(w=function(v){const g=new an(v);g.needsUpdate=!0,y(g)}),r.load(Ei.resolveURL(p,o.path),w,void 0,_)})}).then(function(p){m===!0&&u.revokeObjectURL(h),p.flipY=!1,a.name&&(p.name=a.name);const _=(s.samplers||{})[a.sampler]||{};return p.magFilter=EA[_.magFilter]||Kt,p.minFilter=EA[_.minFilter]||Ss,p.wrapS=TA[_.wrapS]||Eo,p.wrapT=TA[_.wrapT]||Eo,i.associations.set(p,{textures:e}),p}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",h),null});return this.textureCache[l]=d,d}assignTexture(e,t,r){const i=this;return this.getDependency("texture",r.index).then(function(s){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[wt.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[wt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=i.associations.get(s);s=i.extensions[wt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),i.associations.set(s,a)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Ho,wn.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Nn,wn.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Wa}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const m=i[wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=m.getMaterialType(),u.push(m.extendParams(a,s,t))}else if(l[wt.KHR_MATERIALS_UNLIT]){const m=i[wt.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),u.push(m.extendParams(a,s,t))}else{const m=s.pbrMetallicRoughness||{};if(a.color=new ke(1,1,1),a.opacity=1,Array.isArray(m.baseColorFactor)){const d=m.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}m.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",m.baseColorTexture)),a.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,a.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",m.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=xs);const h=s.alphaMode||a1.OPAQUE;if(h===a1.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.format=To,a.transparent=!1,h===a1.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Qn&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Se(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;a.normalScale.set(m,m)}return s.occlusionTexture!==void 0&&o!==Qn&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Qn&&(a.emissive=new ke().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Qn&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture)),Promise.all(u).then(function(){let m;return o===s1?m=i[wt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):m=new o(a),s.name&&(m.name=s.name),m.map&&(m.map.encoding=Nr),m.emissiveMap&&(m.emissiveMap.encoding=Nr),$a(m,s),t.associations.set(m,{materials:e}),s.extensions&&_d(i,m,s),m})}createUniqueName(e){const t=Et.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[wt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return LA(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=c4(u),m=i[h];if(m)o.push(m.promise);else{let d;u.extensions&&u.extensions[wt.KHR_DRACO_MESH_COMPRESSION]?d=s(u):d=LA(new et,u,t),i[h]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?a4(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],m=[];for(let p=0,y=h.length;p<y;p++){const _=h[p],w=o[p];let v;const g=u[p];if(w.mode===Ns.TRIANGLES||w.mode===Ns.TRIANGLE_STRIP||w.mode===Ns.TRIANGLE_FAN||w.mode===void 0)v=s.isSkinnedMesh===!0?new ed(_,g):new Gt(_,g),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),w.mode===Ns.TRIANGLE_STRIP?v.geometry=RA(v.geometry,vT):w.mode===Ns.TRIANGLE_FAN&&(v.geometry=RA(v.geometry,vy));else if(w.mode===Ns.LINES)v=new _r(_,g);else if(w.mode===Ns.LINE_STRIP)v=new qi(_,g);else if(w.mode===Ns.LINE_LOOP)v=new am(_,g);else if(w.mode===Ns.POINTS)v=new Ru(_,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(v.geometry.morphAttributes).length>0&&u4(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),$a(v,s),w.extensions&&_d(i,v,w),t.assignFinalMaterial(v),m.push(v)}for(let p=0,y=m.length;p<y;p++)t.associations.set(m[p],{meshes:e,primitives:p});if(m.length===1)return m[0];const d=new _i;t.associations.set(d,{meshes:e});for(let p=0,y=m.length;p<y;p++)d.add(m[p]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ln(Ty.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Ps(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),$a(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let u=0,h=r.channels.length;u<h;u++){const m=r.channels[u],d=r.samplers[m.sampler],p=m.target,y=p.node!==void 0?p.node:p.id,_=r.parameters!==void 0?r.parameters[d.input]:d.input,w=r.parameters!==void 0?r.parameters[d.output]:d.output;i.push(this.getDependency("node",y)),s.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",w)),a.push(d),l.push(p)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],m=u[1],d=u[2],p=u[3],y=u[4],_=[];for(let v=0,g=h.length;v<g;v++){const M=h[v],S=m[v],b=d[v],C=p[v],T=y[v];if(M===void 0)continue;M.updateMatrix(),M.matrixAutoUpdate=!0;let L;switch(Jo[T.path]){case Jo.weights:L=Hu;break;case Jo.rotation:L=Xo;break;case Jo.position:case Jo.scale:default:L=Vu;break}const P=M.name?M.name:M.uuid,O=C.interpolation!==void 0?o4[C.interpolation]:Ia,D=[];Jo[T.path]===Jo.weights?M.traverse(function(F){F.isMesh===!0&&F.morphTargetInfluences&&D.push(F.name?F.name:F.uuid)}):D.push(P);let k=b.array;if(b.normalized){const F=l1(k.constructor),B=new Float32Array(k.length);for(let W=0,H=k.length;W<H;W++)B[W]=k[W]*F;k=B}for(let F=0,B=D.length;F<B;F++){const W=new L(D[F]+"."+Jo[T.path],S.array,k,O);C.interpolation==="CUBICSPLINE"&&(W.createInterpolant=function(X){const ue=this instanceof Xo?s4:Ka;return new ue(this.times,this.values,this.getValueSize()/3,X)},W.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push(W)}}const w=r.name?r.name:"animation_"+e;return new Wu(w,void 0,_)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new td:a.length>1?l=new _i:a.length===1?l=a[0]:l=new mt,l!==a[0])for(let u=0,h=a.length;u<h;u++)l.add(a[u]);if(s.name&&(l.userData.name=s.name,l.name=o),$a(l,s),s.extensions&&_d(r,l,s),s.matrix!==void 0){const u=new qe;u.fromArray(s.matrix),l.applyMatrix4(u)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new _i;i.name&&(o.name=s.createUniqueName(i.name)),$a(o,i),i.extensions&&_d(r,o,i);const a=i.nodes||[],l=[];for(let u=0,h=a.length;u<h;u++)l.push(CA(a[u],o,t,s));return Promise.all(l).then(function(){const u=h=>{const m=new Map;for(const[d,p]of s.associations)(d instanceof wn||d instanceof an)&&m.set(d,p);return h.traverse(d=>{const p=s.associations.get(d);p!=null&&m.set(d,p)}),m};return s.associations=u(o),o})}}function CA(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const l=[];for(let u=0,h=o.joints.length;u<h;u++)l.push(r.getDependency("node",o.joints[u]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const u=[],h=[];for(let m=0,d=a.length;m<d;m++){const p=a[m];if(p){u.push(p);const y=new qe;o.inverseBindMatrices!==void 0&&y.fromArray(o.inverseBindMatrices.array,m*16),h.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[m])}l.bind(new nd(u,h),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let l=0,u=a.length;l<u;l++){const h=a[l];o.push(CA(h,s,t,r))}}return Promise.all(o)})}function d4(n,e,t){const r=e.attributes,i=new yr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new N(l[0],l[1],l[2]),new N(u[0],u[1],u[2])),a.normalized){const h=l1(xd[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new N,l=new N;for(let u=0,h=s.length;u<h;u++){const m=s[u];if(m.POSITION!==void 0){const d=t.json.accessors[m.POSITION],p=d.min,y=d.max;if(p!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(y[2]))),d.normalized){const _=l1(xd[d.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Hi;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function LA(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=o1[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return $a(n,e),d4(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?l4(n,e.targets,t):n})}function RA(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===vy)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2==0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}const cn={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function PA(n){const e=await fetch(n);if(e.ok)return e.json();throw new Error(e.statusText)}async function h4(n){if(!n)throw new Error("No basePath supplied");return await PA(`${n}/profilesList.json`)}async function p4(n,e,t=null,r=!0){if(!n)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const i=await h4(e);let s;if(n.profiles.some(l=>{const u=i[l];return u&&(s={profileId:l,profilePath:`${e}/${u.path}`,deprecated:!!u.deprecated}),!!s}),!s){if(!t)throw new Error("No matching profile name found");const l=i[t];if(!l)throw new Error(`No matching profile name found and default profile "${t}" missing.`);s={profileId:t,profilePath:`${e}/${l.path}`,deprecated:!!l.deprecated}}const o=await PA(s.profilePath);let a;if(r){let l;if(n.handedness==="any"?l=o.layouts[Object.keys(o.layouts)[0]]:l=o.layouts[n.handedness],!l)throw new Error(`No matching handedness, ${n.handedness}, in profile ${s.profileId}`);l.assetPath&&(a=s.profilePath.replace("profile.json",l.assetPath))}return{profile:o,assetPath:a}}const m4={xAxis:0,yAxis:0,button:0,state:cn.ComponentState.DEFAULT};function g4(n=0,e=0){let t=n,r=e;if(Math.sqrt(n*n+e*e)>1){const o=Math.atan2(e,n);t=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:t*.5+.5,normalizedYAxis:r*.5+.5}}class v4{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===cn.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(m4)}updateFromComponent({xAxis:e,yAxis:t,button:r,state:i}){const{normalizedXAxis:s,normalizedYAxis:o}=g4(e,t);switch(this.componentProperty){case cn.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?s:.5;break;case cn.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?o:.5;break;case cn.ComponentProperty.BUTTON:this.value=this.states.includes(i)?r:0;break;case cn.ComponentProperty.STATE:this.valueNodeProperty===cn.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class y4{constructor(e,t){if(!e||!t||!t.visualResponses||!t.gamepadIndices||Object.keys(t.gamepadIndices).length===0)throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(r=>{const i=new v4(t.visualResponses[r]);this.visualResponses[r]=i}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:cn.ComponentState.DEFAULT,button:this.gamepadIndices.button!==void 0?0:void 0,xAxis:this.gamepadIndices.xAxis!==void 0?0:void 0,yAxis:this.gamepadIndices.yAxis!==void 0?0:void 0}}get data(){return ht({id:this.id},this.values)}updateFromGamepad(e){if(this.values.state=cn.ComponentState.DEFAULT,this.gamepadIndices.button!==void 0&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||this.values.button===1?this.values.state=cn.ComponentState.PRESSED:(t.touched||this.values.button>cn.ButtonTouchThreshold)&&(this.values.state=cn.ComponentState.TOUCHED)}this.gamepadIndices.xAxis!==void 0&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===cn.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>cn.AxisTouchThreshold&&(this.values.state=cn.ComponentState.TOUCHED)),this.gamepadIndices.yAxis!==void 0&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===cn.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>cn.AxisTouchThreshold&&(this.values.state=cn.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class x4{constructor(e,t,r){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=r,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(i=>{const s=this.layoutDescription.components[i];this.components[i]=new y4(i,s)}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}var km={exports:{}},wd={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _4=ge.exports,IA=60103;wd.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var DA=Symbol.for;IA=DA("react.element"),wd.Fragment=DA("react.fragment")}var w4=_4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S4=Object.prototype.hasOwnProperty,M4={key:!0,ref:!0,__self:!0,__source:!0};function FA(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)S4.call(e,r)&&!M4.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IA,type:n,key:s,ref:o,props:i,_owner:w4.current}}wd.jsx=FA;wd.jsxs=FA;km.exports=wd;const Zo=km.exports.jsx,E4=km.exports.jsxs,G5=km.exports.Fragment;class T4{static createButton(e,t={}){const r=document.createElement("button");function i(){if(t.domOverlay===void 0){const m=document.createElement("div");m.style.display="none",document.body.appendChild(m);const d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",38),d.setAttribute("height",38),d.style.position="absolute",d.style.right="20px",d.style.top="20px",d.addEventListener("click",function(){l.end()}),m.appendChild(d);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),d.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:m}}let l=null;async function u(m){m.addEventListener("end",h),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(m),r.textContent="STOP AR",t.domOverlay.root.style.display="",l=m}function h(){l.removeEventListener("end",h),r.textContent="START AR",t.domOverlay.root.style.display="none",l=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){l===null?navigator.xr.requestSession("immersive-ar",t).then(u):l.end()}}function s(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function o(){s(),r.textContent="AR NOT SUPPORTED"}function a(l){l.style.position="absolute",l.style.bottom="20px",l.style.padding="12px 6px",l.style.border="1px solid #fff",l.style.borderRadius="4px",l.style.background="rgba(0,0,0,0.1)",l.style.color="#fff",l.style.font="normal 13px sans-serif",l.style.textAlign="center",l.style.opacity="0.5",l.style.outline="none",l.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",a(r),navigator.xr.isSessionSupported("immersive-ar").then(function(l){l?i():o()}).catch(o),r;{const l=document.createElement("a");return window.isSecureContext===!1?(l.href=document.location.href.replace(/^http:/,"https:"),l.innerHTML="WEBXR NEEDS HTTPS"):(l.href="https://immersiveweb.dev/",l.innerHTML="WEBXR NOT AVAILABLE"),l.style.left="calc(50% - 90px)",l.style.width="180px",l.style.textDecoration="none",a(l),l}}}class b4{static createButton(e,t={}){const r=document.createElement("button");function i(){let l=null;async function u(m){m.addEventListener("end",h),await e.xr.setSession(m),r.textContent="EXIT VR",l=m}function h(){l.removeEventListener("end",h),r.textContent="ENTER VR",l=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){if(l===null){const m=[t.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);t.optionalFeatures=navigator.xr.requestSession("immersive-vr",Dn(ht({},t),{optionalFeatures:m})).then(u)}else l.end()}}function s(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function o(){s(),r.textContent="VR NOT SUPPORTED"}function a(l){l.style.position="absolute",l.style.bottom="20px",l.style.padding="12px 6px",l.style.border="1px solid #fff",l.style.borderRadius="4px",l.style.background="rgba(0,0,0,0.1)",l.style.color="#fff",l.style.font="normal 13px sans-serif",l.style.textAlign="center",l.style.opacity="0.5",l.style.outline="none",l.style.zIndex="999"}if("xr"in navigator)return r.id="VRButton",r.style.display="none",a(r),navigator.xr.isSessionSupported("immersive-vr").then(function(l){l?i():o()}),r;{const l=document.createElement("a");return window.isSecureContext===!1?(l.href=document.location.href.replace(/^http:/,"https:"),l.innerHTML="WEBXR NEEDS HTTPS"):(l.href="https://immersiveweb.dev/",l.innerHTML="WEBXR NOT AVAILABLE"),l.style.left="calc(50% - 90px)",l.style.width="180px",l.style.textDecoration="none",a(l),l}}}const A4={make:(n,e,t,r)=>{const i=e.xr.getController(n),s=e.xr.getControllerGrip(n),o=e.xr.getHand(n),a={inputSource:void 0,grip:s,controller:i,hand:o};s.userData.name="grip",i.userData.name="controller",o.userData.name="hand",i.addEventListener("connected",l=>{l.fake||(a.inputSource=l.data,t(a))}),i.addEventListener("disconnected",l=>{r(a)})}},el={make:function(){return new Map},add:function(n,e,t,r){n.has(e)||n.set(e,{key:[r]});const i=n.get(e);i[t]||(i[t]=[]),i[t].push(r)},delete:function(n,e,t,r){const i=n.get(e);!i||!i[t]||(i[t]=i[t].filter(s=>s!==r),i[t].length===0&&delete i[t],Object.keys(i).length===0&&n.delete(e))},has:function(n,e,t){const r=n.get(e);return!!(r&&r[t])},get:function(n,e,t){const r=n.get(e);return r&&r[t]}},qu=(n,e,{handedness:t}={})=>{const r=di.useRef(e);di.useEffect(()=>{r.current=e},[e]);const{controllers:i}=Nm();di.useEffect(()=>{const s=t?i.filter(a=>a.inputSource.handedness===t):i,o=[];return s.forEach(a=>{const l=u=>r.current({originalEvent:u,controller:a});a.controller.addEventListener(n,l),o.push(()=>a.controller.removeEventListener(n,l))}),()=>o.forEach(a=>a())},[n,i,t])},u1=di.createContext({});function C4({children:n}){const{controllers:e}=Nm(),[t]=di.useState(()=>({left:new Map,right:new Map,none:new Map})),[r]=di.useState(()=>el.make()),i=di.useCallback((h,m,d)=>{el.add(r,h,m,d)},[r]),s=di.useCallback((h,m,d)=>{el.delete(r,h,m,d)},[r]),[o]=di.useState(()=>new qx),a=di.useCallback(h=>{const m=Array.from(r.keys()),d=new qe;return d.identity().extractRotation(h.matrixWorld),o.ray.origin.setFromMatrixPosition(h.matrixWorld),o.ray.direction.set(0,0,-1).applyMatrix4(d),o.intersectObjects(m,!0)},[r,o]);i1(()=>{r.size!==0&&e.forEach(h=>{const{controller:m}=h,d=h.inputSource.handedness,p=t[d],y=new Set;a(m).forEach(v=>{let g=v.object;for(;g;){if(el.has(r,g,"onHover")&&!p.has(g)){var M;(M=el.get(r,g,"onHover"))==null||M.forEach(S=>S({controller:h,intersection:v}))}p.set(g,v),y.add(g.id),g=g.parent}});for(const v of p.keys())if(!y.has(v.id)){var w;(w=el.get(r,v,"onBlur"))==null||w.forEach(g=>g({controller:h})),p.delete(v)}})});const l=h=>m=>{const d=t[m.controller.inputSource.handedness];for(const y of d.keys()){var p;(p=el.get(r,y,h))==null||p.forEach(_=>_({controller:m.controller}))}};qu("select",l("onSelect")),qu("selectstart",l("onSelectStart")),qu("selectend",l("onSelectEnd")),qu("squeeze",l("onSqueeze")),qu("squeezeend",l("onSqueezeEnd")),qu("squeezestart",l("onSqueezeStart"));const u=ge.exports.useMemo(()=>({addInteraction:i,removeInteraction:s,hoverState:t}),[i,s,t]);return Zo(u1.Provider,{value:u,children:n})}const Qo=(n,e,t)=>{const{addInteraction:r,removeInteraction:i}=ge.exports.useContext(u1),s=t!==void 0,o=ge.exports.useRef(t);ge.exports.useEffect(()=>{o.current=t},[t]),ge.exports.useEffect(()=>{if(!s)return;const a=u=>{o.current(u)};r(n.current,e,a);const l=n.current;return()=>i(l,e,a)},[e,r,i,s,n])};ge.exports.forwardRef((n,e)=>{const t=ge.exports.useRef();return Qo(t,"onHover",n.onHover),Qo(t,"onBlur",n.onBlur),Qo(t,"onSelectStart",n.onSelectStart),Qo(t,"onSelectEnd",n.onSelectEnd),Qo(t,"onSelect",n.onSelect),Qo(t,"onSqueezeStart",n.onSqueezeStart),Qo(t,"onSqueezeEnd",n.onSqueezeEnd),Qo(t,"onSqueeze",n.onSqueeze),Zo("group",{ref:sA([e,t]),children:n.children})});const kA=ge.exports.createContext({}),L4=n=>{const{gl:e}=Hr(),[t,r]=ge.exports.useState([]);return ge.exports.useEffect(()=>{[0,1].forEach(s=>{A4.make(s,e,o=>{n.add(o.controller),n.add(o.grip),n.add(o.hand),r(a=>[...a,o])},o=>{n.remove(o.controller),n.remove(o.grip),n.remove(o.hand),r(a=>a.filter(l=>l!==o))})})},[e,n]),t};function R4({foveation:n=0,children:e}){const{gl:t,camera:r}=Hr(),[i,s]=ge.exports.useState(()=>t.xr.isPresenting),[o,a]=ge.exports.useState(!1),[l]=ge.exports.useState(()=>new _i),u=L4(l);ge.exports.useEffect(()=>{const m=t.xr,d=()=>s(m.isPresenting);return m.addEventListener("sessionstart",d),m.addEventListener("sessionend",d),()=>{m.removeEventListener("sessionstart",d),m.removeEventListener("sessionend",d)}},[t]),ge.exports.useEffect(()=>{const m=t.xr;m.setFoveation&&m.setFoveation(n)},[t,n]),ge.exports.useEffect(()=>{var m;const d=t.xr.getSession(),p=y=>a(Object.values(y.session.inputSources).some(_=>_.hand));return d==null||d.addEventListener("inputsourceschange",p),a(Object.values((m=d==null?void 0:d.inputSources)!=null?m:[]).some(y=>y.hand)),()=>{d==null||d.removeEventListener("inputsourceschange",p)}},[i]);const h=ge.exports.useMemo(()=>({controllers:u,isPresenting:i,isHandTracking:o,player:l}),[u,i,o,l]);return E4(kA.Provider,{value:h,children:[Zo("primitive",{object:l,dispose:null,children:Zo("primitive",{object:r,dispose:null})}),e]})}function P4(r){var i=r,{foveation:n,children:e}=i,t=mr(i,["foveation","children"]);return Zo(DU,Dn(ht({vr:!0},t),{children:Zo(R4,{foveation:n,children:Zo(C4,{children:e})})}))}const I4=(n,e,t)=>{const r=n==="AR"?T4:b4,i=n==="AR"?"#ARButton":"#VRButton";document.querySelector(i)===null&&document.body.appendChild(r.createButton(e,t))};function H5(i){var s=i,{children:n,sessionInit:e,onCreated:t}=s,r=mr(s,["children","sessionInit","onCreated"]);return Zo(P4,Dn(ht({onCreated:o=>{t==null||t(o),I4("VR",o.gl,e)}},r),{children:n}))}const Nm=()=>{const n=ge.exports.useContext(kA),e=ge.exports.useContext(u1);return ge.exports.useMemo(()=>ht(ht({},n),e),[n,e])},V5=n=>{const{controllers:e}=Nm();return ge.exports.useMemo(()=>e.find(r=>r.inputSource.handedness===n),[n,e])},D4="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",F4="generic-trigger";class k4 extends mt{constructor(){super();this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e?this:(this.envMap=e,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)}),this)}updateMatrixWorld(e){super.updateMatrixWorld(e),!!this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(r=>{const{valueNode:i,minNode:s,maxNode:o,value:a,valueNodeProperty:l}=r;!i||(l===cn.VisualResponseProperty.VISIBILITY?i.visible=a:l===cn.VisualResponseProperty.TRANSFORM&&(i.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),i.position.lerpVectors(s.position,o.position,a)))})}))}}function N4(n,e){Object.values(n.components).forEach(t=>{const{type:r,touchPointNodeName:i,visualResponses:s}=t;if(r===cn.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(i),t.touchPointNode){const o=new jo(.001),a=new Qn({color:255}),l=new Gt(o,a);t.touchPointNode.add(l)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:l,maxNodeName:u,valueNodeProperty:h}=o;if(h===cn.VisualResponseProperty.TRANSFORM){if(o.minNode=e.getObjectByName(l),o.maxNode=e.getObjectByName(u),!o.minNode){console.warn(`Could not find ${l} in the model`);return}if(!o.maxNode){console.warn(`Could not find ${u} in the model`);return}}o.valueNode=e.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})}function NA(n,e){N4(n.motionController,e),n.envMap&&e.traverse(t=>{t.isMesh&&(t.material.envMap=n.envMap,t.material.needsUpdate=!0)}),n.add(e)}class O4{constructor(e=null){this.gltfLoader=e,this.path=D4,this._assetCache={},this.gltfLoader||(this.gltfLoader=new zU)}createControllerModel(e){const t=new k4;let r=null;return e.addEventListener("connected",i=>{const s=i.data;s.targetRayMode!=="tracked-pointer"||!s.gamepad||p4(s,this.path,F4).then(({profile:o,assetPath:a})=>{t.motionController=new x4(s,o,a);const l=this._assetCache[t.motionController.assetUrl];if(l)r=l.scene.clone(),NA(t,r);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,u=>{this._assetCache[t.motionController.assetUrl]=u,r=u.scene.clone(),NA(t,r)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(o=>{console.warn(o)})}),e.addEventListener("disconnected",()=>{t.motionController=null,t.remove(r),r=null}),t}}const U4=new O4,c1=new WeakMap;function W5({rayMaterial:n={}}){const{scene:e}=Hr(),{controllers:t,hoverState:r}=Nm(),[i]=di.useState(new Map);return i1(()=>{t.forEach(s=>{const o=i.get(s.controller.id);if(!o)return;const a=r[s.inputSource.handedness].values().next().value;if(!a||s.inputSource.handedness==="none"){o.visible=!1;return}const l=a.distance,u=-.01;o.visible=!0,o.scale.y=l+u,o.position.z=-l/2-u})}),ge.exports.useEffect(()=>{const s=[];return t.forEach(({controller:o,grip:a,inputSource:l})=>{let u;c1.has(o)?u=c1.get(o):(u=U4.createControllerModel(o),o.dispatchEvent({type:"connected",data:l,fake:!0}),c1.set(o,u)),a.add(u);const h=new Gt;h.rotation.set(Math.PI/2,0,0),h.material=new Qn(ht({color:new ke(16777215),opacity:.8,transparent:!0},n)),h.geometry=new Vi(.002,1,.002),i.set(o.id,h),o.add(h),s.push(()=>{a.remove(u),o.remove(h),i.delete(o.id)})}),()=>{s.forEach(o=>o())}},[t,e,i,JSON.stringify(n)]),null}var tl,f1=tl||(tl={});f1.Pop="POP";f1.Push="PUSH";f1.Replace="REPLACE";var OA=function(n){return n};function UA(n){n.preventDefault(),n.returnValue=""}function BA(){var n=[];return{get length(){return n.length},push:function(e){return n.push(e),function(){n=n.filter(function(t){return t!==e})}},call:function(e){n.forEach(function(t){return t&&t(e)})}}}function B4(){return Math.random().toString(36).substr(2,8)}function z4(n){var e=n.pathname;e=e===void 0?"/":e;var t=n.search;return t=t===void 0?"":t,n=n.hash,n=n===void 0?"":n,t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yu(n){var e={};if(n){var t=n.indexOf("#");0<=t&&(e.hash=n.substr(t),n=n.substr(0,t)),t=n.indexOf("?"),0<=t&&(e.search=n.substr(t),n=n.substr(0,t)),n&&(e.pathname=n)}return e}function G4(n){function e(){var w=l.location,v=u.state||{};return[v.idx,OA({pathname:w.pathname,search:w.search,hash:w.hash,state:v.usr||null,key:v.key||"default"})]}function t(w){return typeof w=="string"?w:z4(w)}function r(w,v){return v===void 0&&(v=null),OA(ba({pathname:p.pathname,hash:"",search:""},typeof w=="string"?Yu(w):w,{state:v,key:B4()}))}function i(w){m=w,w=e(),d=w[0],p=w[1],y.call({action:m,location:p})}function s(w,v){function g(){s(w,v)}var M=tl.Push,S=r(w,v);if(!_.length||(_.call({action:M,location:S,retry:g}),!1)){var b=[{usr:S.state,key:S.key,idx:d+1},t(S)];S=b[0],b=b[1];try{u.pushState(S,"",b)}catch{l.location.assign(b)}i(M)}}function o(w,v){function g(){o(w,v)}var M=tl.Replace,S=r(w,v);_.length&&(_.call({action:M,location:S,retry:g}),1)||(S=[{usr:S.state,key:S.key,idx:d},t(S)],u.replaceState(S[0],"",S[1]),i(M))}function a(w){u.go(w)}n===void 0&&(n={}),n=n.window;var l=n===void 0?document.defaultView:n,u=l.history,h=null;l.addEventListener("popstate",function(){if(h)_.call(h),h=null;else{var w=tl.Pop,v=e(),g=v[0];if(v=v[1],_.length){if(g!=null){var M=d-g;M&&(h={action:w,location:v,retry:function(){a(-1*M)}},a(M))}}else i(w)}});var m=tl.Pop;n=e();var d=n[0],p=n[1],y=BA(),_=BA();return d==null&&(d=0,u.replaceState(ba({},u.state,{idx:d}),"")),{get action(){return m},get location(){return p},createHref:t,push:s,replace:o,go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(w){return y.push(w)},block:function(w){var v=_.push(w);return _.length===1&&l.addEventListener("beforeunload",UA),function(){v(),_.length||l.removeEventListener("beforeunload",UA)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(n,e){if(!n)throw new Error(e)}const zA=ge.exports.createContext(null),d1=ge.exports.createContext(null),Om=ge.exports.createContext({outlet:null,matches:[]});function H4(n){return X4(n.context)}function V4(n){Os(!1)}function W4(n){let{basename:e="/",children:t=null,location:r,navigationType:i=tl.Pop,navigator:s,static:o=!1}=n;Um()&&Os(!1);let a=dB(e),l=ge.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Yu(r));let{pathname:u="/",search:h="",hash:m="",state:d=null,key:p="default"}=r,y=ge.exports.useMemo(()=>{let _=WA(u,a);return _==null?null:{pathname:_,search:h,hash:m,state:d,key:p}},[a,u,h,m,d,p]);return y==null?null:ge.exports.createElement(zA.Provider,{value:l},ge.exports.createElement(d1.Provider,{children:t,value:{location:y,navigationType:i}}))}function j5(n){let{children:e,location:t}=n;return q4(h1(e),t)}function Um(){return ge.exports.useContext(d1)!=null}function GA(){return Um()||Os(!1),ge.exports.useContext(d1).location}function X5(){Um()||Os(!1);let{basename:n,navigator:e}=ge.exports.useContext(zA),{matches:t}=ge.exports.useContext(Om),{pathname:r}=GA(),i=JSON.stringify(t.map(a=>a.pathnameBase)),s=ge.exports.useRef(!1);return ge.exports.useEffect(()=>{s.current=!0}),ge.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let u=fB(a,JSON.parse(i),r);n!=="/"&&(u.pathname=nl([n,u.pathname])),(l.replace?e.replace:e.push)(u,l.state)},[n,e,i,r])}const j4=ge.exports.createContext(null);function X4(n){let e=ge.exports.useContext(Om).outlet;return e&&ge.exports.createElement(j4.Provider,{value:n},e)}function q4(n,e){Um()||Os(!1);let{matches:t}=ge.exports.useContext(Om),r=t[t.length-1],i=r?r.params:{};r&&r.pathname;let s=r?r.pathnameBase:"/";r&&r.route;let o=GA(),a;if(e){var l;let d=typeof e=="string"?Yu(e):e;s==="/"||((l=d.pathname)==null?void 0:l.startsWith(s))||Os(!1),a=d}else a=o;let u=a.pathname||"/",h=s==="/"?u:u.slice(s.length)||"/",m=Y4(n,{pathname:h});return sB(m&&m.map(d=>Object.assign({},d,{params:Object.assign({},i,d.params),pathname:nl([s,d.pathname]),pathnameBase:d.pathnameBase==="/"?s:nl([s,d.pathnameBase])})),t)}function h1(n){let e=[];return ge.exports.Children.forEach(n,t=>{if(!ge.exports.isValidElement(t))return;if(t.type===ge.exports.Fragment){e.push.apply(e,h1(t.props.children));return}t.type!==V4&&Os(!1);let r={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(r.children=h1(t.props.children)),e.push(r)}),e}function Y4(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Yu(e):e,i=WA(r.pathname||"/",t);if(i==null)return null;let s=HA(n);J4(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=iB(s[a],i);return o}function HA(n,e,t,r){return e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r=""),n.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||Os(!1),o.relativePath=o.relativePath.slice(r.length));let a=nl([r,o.relativePath]),l=t.concat(o);i.children&&i.children.length>0&&(i.index===!0&&Os(!1),HA(i.children,e,l,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:nB(a,i.index),routesMeta:l})}),e}function J4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Z4=/^:\w+$/,Q4=3,K4=2,$4=1,eB=10,tB=-2,VA=n=>n==="*";function nB(n,e){let t=n.split("/"),r=t.length;return t.some(VA)&&(r+=tB),e&&(r+=K4),t.filter(i=>!VA(i)).reduce((i,s)=>i+(Z4.test(s)?Q4:s===""?$4:eB),r)}function rB(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function iB(n,e){let{routesMeta:t}=n,r={},i="/",s=[];for(let o=0;o<t.length;++o){let a=t[o],l=o===t.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=oB({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!h)return null;Object.assign(r,h.params);let m=a.route;s.push({params:r,pathname:nl([i,h.pathname]),pathnameBase:nl([i,h.pathnameBase]),route:m}),h.pathnameBase!=="/"&&(i=nl([i,h.pathnameBase]))}return s}function sB(n,e){return e===void 0&&(e=[]),n==null?null:n.reduceRight((t,r,i)=>ge.exports.createElement(Om.Provider,{children:r.route.element!==void 0?r.route.element:ge.exports.createElement(H4,null),value:{outlet:t,matches:e.concat(n.slice(0,i+1))}}),null)}function oB(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=aB(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,m)=>{if(h==="*"){let d=a[m]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[h]=lB(a[m]||""),u},{}),pathname:s,pathnameBase:o,pattern:n}}function aB(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return n.endsWith("*")?(r.push("*"),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=t?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}function lB(n,e){try{return decodeURIComponent(n)}catch{return n}}function uB(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Yu(n):n;return{pathname:t?t.startsWith("/")?t:cB(t,e):e,search:hB(r),hash:pB(i)}}function cB(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function fB(n,e,t){let r=typeof n=="string"?Yu(n):n,i=n===""||r.pathname===""?"/":r.pathname,s;if(i==null)s=t;else{let a=e.length-1;if(i.startsWith("..")){let l=i.split("/");for(;l[0]==="..";)l.shift(),a-=1;r.pathname=l.join("/")}s=a>=0?e[a]:"/"}let o=uB(r,s);return i&&i!=="/"&&i.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function WA(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=n.charAt(e.length);return t&&t!=="/"?null:n.slice(e.length)||"/"}const nl=n=>n.join("/").replace(/\/\/+/g,"/"),dB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,pB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function q5(n){let{basename:e,children:t,window:r}=n,i=ge.exports.useRef();i.current==null&&(i.current=G4({window:r}));let s=i.current,[o,a]=ge.exports.useState({action:s.action,location:s.location});return ge.exports.useLayoutEffect(()=>s.listen(a),[s]),ge.exports.createElement(W4,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}const Sd=new N,p1=new N,mB=new N;function gB(n,e,t){const r=Sd.setFromMatrixPosition(n.matrixWorld);r.project(e);const i=t.width/2,s=t.height/2;return[r.x*i+i,-(r.y*s)+s]}function vB(n,e){const t=Sd.setFromMatrixPosition(n.matrixWorld),r=p1.setFromMatrixPosition(e.matrixWorld),i=t.sub(r),s=e.getWorldDirection(mB);return i.angleTo(s)>Math.PI/2}function yB(n,e,t,r){const i=Sd.setFromMatrixPosition(n.matrixWorld),s=i.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(t.ray.origin)<a}return!0}function xB(n,e){if(e instanceof Ps)return e.zoom;if(e instanceof ln){const t=Sd.setFromMatrixPosition(n.matrixWorld),r=p1.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=t.distanceTo(r),o=2*Math.tan(i/2)*s;return 1/o}else return 1}function _B(n,e,t){if(e instanceof ln||e instanceof Ps){const r=Sd.setFromMatrixPosition(n.matrixWorld),i=p1.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const m1=n=>Math.abs(n)<1e-10?0:n;function jA(n,e,t=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=m1(e[i]*n.elements[i])+(i!==15?",":")");return t+r}const wB=(n=>e=>jA(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),SB=(n=>(e,t)=>jA(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),Y5=ge.exports.forwardRef((M,g)=>{var S=M,{children:n,eps:e=.001,style:t,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:m,onOcclude:d,zIndexRange:p=[16777271,0],calculatePosition:y=gB,as:_="div",pointerEvents:w="auto"}=S,v=mr(S,["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","pointerEvents"]);var b;const C=Hr(({gl:V})=>V),T=Hr(({camera:V})=>V),L=Hr(({scene:V})=>V),P=Hr(({size:V})=>V),O=Hr(({raycaster:V})=>V),[D]=ge.exports.useState(()=>document.createElement(_)),k=ge.exports.useRef(null),F=ge.exports.useRef(0),B=ge.exports.useRef([0,0]),W=ge.exports.useRef(null),H=ge.exports.useRef(null),X=(b=a==null?void 0:a.current)!==null&&b!==void 0?b:C.domElement.parentNode;ge.exports.useEffect(()=>{if(k.current){if(L.updateMatrixWorld(),h)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const V=y(k.current,T,P);D.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${V[0]}px,${V[1]}px,0);transform-origin:0 0;`}return X&&(i?X.prepend(D):X.appendChild(D)),()=>{X&&X.removeChild(D),Ic.exports.unmountComponentAtNode(D)}}},[X,h]);const ue=ge.exports.useMemo(()=>h?{position:"absolute",top:0,left:0,width:P.width,height:P.height,transformStyle:"preserve-3d",pointerEvents:"none"}:ht(ht({position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none"},o&&{top:-P.height/2,left:-P.width/2,width:P.width,height:P.height}),t),[t,s,o,P,h]),Me=ge.exports.useMemo(()=>({position:"absolute",pointerEvents:w}),[w]);ge.exports.useLayoutEffect(()=>{h?Ic.exports.render(ge.exports.createElement("div",{ref:W,style:ue},ge.exports.createElement("div",{ref:H,style:Me},ge.exports.createElement("div",{ref:g,className:r,style:t,children:n}))),D):Ic.exports.render(ge.exports.createElement("div",{ref:g,style:ue,className:r,children:n}),D)});const Ae=ge.exports.useRef(!0);return i1(()=>{if(k.current){T.updateMatrixWorld(),k.current.updateWorldMatrix(!0,!1);const V=h?B.current:y(k.current,T,P);if(h||Math.abs(F.current-T.zoom)>e||Math.abs(B.current[0]-V[0])>e||Math.abs(B.current[1]-V[1])>e){const te=vB(k.current,T);let q=!1;typeof m=="boolean"?m===!0&&(q=[L]):Array.isArray(m)&&(q=m.map(ye=>ye.current));const re=Ae.current;if(q){const ye=yB(k.current,T,O,q);Ae.current=ye&&!te}else Ae.current=!te;if(re!==Ae.current&&(d?d(!Ae.current):D.style.display=Ae.current?"block":"none"),D.style.zIndex=`${_B(k.current,T,p)}`,h){const[ye,$]=[P.width/2,P.height/2],Te=T.projectionMatrix.elements[5]*$,{isOrthographicCamera:Le,top:Ee,left:Re,bottom:Ce,right:ce}=T,xe=wB(T.matrixWorldInverse),_e=Le?`scale(${Te})translate(${m1(-(ce+Re)/2)}px,${m1((Ee+Ce)/2)}px)`:`translateZ(${Te}px)`;let Pe=k.current.matrixWorld;u&&(Pe=T.matrixWorldInverse.clone().transpose().copyPosition(Pe).scale(k.current.scale),Pe.elements[3]=Pe.elements[7]=Pe.elements[11]=0,Pe.elements[15]=1),D.style.width=P.width+"px",D.style.height=P.height+"px",D.style.perspective=Le?"":`${Te}px`,W.current&&H.current&&(W.current.style.transform=`${_e}${xe}translate(${ye}px,${$}px)`,H.current.style.transform=SB(Pe,1/((l||10)/400)))}else{const ye=l===void 0?1:xB(k.current,T)*l;D.style.transform=`translate3d(${V[0]}px,${V[1]}px,0) scale(${ye})`}B.current=V,F.current=T.zoom}}}),ge.exports.createElement("group",ba({},v,{ref:k}))});function Jt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class MB extends Es{constructor(e,t){super();Jt(this,"camera",void 0),Jt(this,"domElement",void 0),Jt(this,"isLocked",!1),Jt(this,"minPolarAngle",0),Jt(this,"maxPolarAngle",Math.PI),Jt(this,"changeEvent",{type:"change"}),Jt(this,"lockEvent",{type:"lock"}),Jt(this,"unlockEvent",{type:"unlock"}),Jt(this,"euler",new Io(0,0,0,"YXZ")),Jt(this,"PI_2",Math.PI/2),Jt(this,"vec",new N),Jt(this,"onMouseMove",r=>{if(this.isLocked===!1)return;const i=r.movementX||r.mozMovementX||r.webkitMovementX||0,s=r.movementY||r.mozMovementY||r.webkitMovementY||0;this.euler.setFromQuaternion(this.camera.quaternion),this.euler.y-=i*.002,this.euler.x-=s*.002,this.euler.x=Math.max(this.PI_2-this.maxPolarAngle,Math.min(this.PI_2-this.minPolarAngle,this.euler.x)),this.camera.quaternion.setFromEuler(this.euler),this.dispatchEvent(this.changeEvent)}),Jt(this,"onPointerlockChange",()=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(this.lockEvent),this.isLocked=!0):(this.dispatchEvent(this.unlockEvent),this.isLocked=!1)}),Jt(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),Jt(this,"connect",()=>{this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}),Jt(this,"disconnect",()=>{this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}),Jt(this,"dispose",()=>{this.disconnect()}),Jt(this,"getObject",()=>this.camera),Jt(this,"direction",new N(0,0,-1)),Jt(this,"getDirection",r=>r.copy(this.direction).applyQuaternion(this.camera.quaternion)),Jt(this,"moveForward",r=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.vec.crossVectors(this.camera.up,this.vec),this.camera.position.addScaledVector(this.vec,r)}),Jt(this,"moveRight",r=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vec,r)}),Jt(this,"lock",()=>{this.domElement.requestPointerLock()}),Jt(this,"unlock",()=>{this.domElement.ownerDocument.exitPointerLock()}),t===void 0&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.camera=e,this.connect()}}function g1(){var n=0,e=[],t,r=0,i=0;function s(v,g){var M=g1();function S(){var b=n>0?v:g;if(_(b))try{var C=b(t);C===M&&y();var T=d(C);T?T.call(C,M.resolve,M.reject):M.resolve(C)}catch(L){M.reject(L)}else M[n>0?"resolve":"reject"](t)}return e.push(S),n&&u(),M}var o=p(function(v){i||l(1,v)}),a=p(function(v){i||l(-1,v)});function l(v,g){i++;var M=0;try{g===w&&y();var S=v>0&&d(g);S?S.call(g,p(function(b){M++,l(1,b)}),p(function(b){M++,l(-1,b)})):(n=v,t=g,u())}catch(b){!n&&!M&&l(-1,b)}}function u(){r||(setTimeout(h,0),r=1)}function h(){var v=e;r=0,e=[],v.forEach(m)}function m(v){v()}function d(v){var g=v&&(_(v)||typeof v=="object")&&v.then;return _(g)&&g}function p(v){var g=0;return function(){for(var M=[],S=arguments.length;S--;)M[S]=arguments[S];g++||v.apply(this,M)}}function y(){throw new TypeError("Chaining cycle detected")}var _=function(v){return typeof v=="function"},w={then:s,resolve:o,reject:a};return w}function XA(){var n,e,t=new Promise(function(r,i){n=r,e=i});return{then:t.then.bind(t),resolve:n,reject:e}}g1.all=XA.all=function(n){var e=0,t=[],r=Ju();return n.length===0?r.resolve([]):n.forEach(function(i,s){var o=Ju();o.resolve(i),o.then(function(a){e++,t[s]=a,e===n.length&&r.resolve(t)},r.reject)}),r};var Ju=typeof Promise=="function"?XA:g1;function EB(){var n=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var h=i.getTransferables;if(h===void 0&&(h=null),!n[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(p){if(p instanceof Error)throw p}),d=n[d.id].value),d}),u=r("<"+a+">.init",u),h&&(h=r("<"+a+">.getTransferables",h));var m=null;typeof u=="function"?m=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:m,getTransferables:h},s(m)}catch(d){d&&d.noLog||console.error(d),s(d)}}function t(i,s){var o,a=i.id,l=i.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(h,function(m){return s(m instanceof Error?m:new Error(""+m))}):h(u)}catch(m){s(m)}function h(m){try{var d=n[a].getTransferables&&n[a].getTransferables(m);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(m,d)}catch(p){console.error(p),s(p)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,h){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function TB(n){var e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,r=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Ju.all(t).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var qA=function(){var n=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return qA=function(){return n},n},bB=0,AB=0,v1=!1,Md=Object.create(null),Ed=Object.create(null),y1=Object.create(null);function Zu(n){if((!n||typeof n.init!="function")&&!v1)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,r=n.getTransferables,i=n.workerId;if(!qA())return TB(n);i==null&&(i="#default");var s="workerModule"+ ++bB,o=n.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(v1=!0,u=Zu({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Bm(u)+`
)}`}),v1=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],h=arguments.length;h--;)u[h]=arguments[h];if(!a){a=YA(i,"registerModule",l.workerModuleData);var m=function(){a=null,Ed[i].delete(m)};(Ed[i]||(Ed[i]=new Set)).add(m)}return a.then(function(d){var p=d.isCallable;if(p)return YA(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Bm(t),getTransferables:r&&Bm(r)},l}function CB(n){Ed[n]&&Ed[n].forEach(function(e){e()}),Md[n]&&(Md[n].terminate(),delete Md[n])}function Bm(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function LB(n){var e=Md[n];if(!e){var t=Bm(EB);e=Md[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=y1[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete y1[s],o(i)}}return e}function YA(n,e,t){var r=Ju(),i=++AB;return y1[i]=function(s){s.success?r.resolve(s.result):r.reject(new Error("Error in worker "+e+" call: "+s.error))},LB(n).postMessage({messageId:i,action:e,data:t}),r}var RB=Zu({name:"Thenable",dependencies:[Ju],init:function(n){return n}});function PB(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(t).forEach(function(I,Q){r[I]=1<<Q+1,i[r[I]]=I}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,h=null;function m(){if(!h){h=new Map;var I=function(ae){if(t.hasOwnProperty(ae)){var Z=0;t[ae].split(",").forEach(function(fe){var le=fe.split("+"),se=le[0],pe=le[1];se=parseInt(se,36),pe=pe?parseInt(pe,36):0,h.set(Z+=se,r[ae]);for(var ve=0;ve<pe;ve++)h.set(++Z,r[ae])})}};for(var Q in t)I(Q)}}function d(I){return m(),h.get(I.codePointAt(0))||r.L}function p(I){return i[d(I)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function _(I,Q){var ae=36,Z=0,fe=new Map,le=Q&&new Map,se;return I.split(",").forEach(function pe(ve){if(ve.indexOf("+")!==-1)for(var j=+ve;j--;)pe(se);else{se=ve;var K=ve.split(">"),ie=K[0],De=K[1];ie=String.fromCodePoint(Z+=parseInt(ie,ae)),De=String.fromCodePoint(Z+=parseInt(De,ae)),fe.set(ie,De),Q&&le.set(De,ie)}}),{map:fe,reverseMap:le}}var w,v,g;function M(){if(!w){var I=_(y.pairs,!0),Q=I.map,ae=I.reverseMap;w=Q,v=ae,g=_(y.canonical,!1).map}}function S(I){return M(),w.get(I)||null}function b(I){return M(),v.get(I)||null}function C(I){return M(),g.get(I)||null}var T=r.L,L=r.R,P=r.EN,O=r.ES,D=r.ET,k=r.AN,F=r.CS,B=r.B,W=r.S,H=r.ON,X=r.BN,ue=r.NSM,Me=r.AL,Ae=r.LRO,V=r.RLO,te=r.LRE,q=r.RLE,re=r.PDF,ye=r.LRI,$=r.RLI,Te=r.FSI,Le=r.PDI;function Ee(I,Q){for(var ae=125,Z=new Uint32Array(I.length),fe=0;fe<I.length;fe++)Z[fe]=d(I[fe]);var le=new Map;function se(An,Sr){var pn=Z[An];Z[An]=Sr,le.set(pn,le.get(pn)-1),pn&a&&le.set(a,le.get(a)-1),le.set(Sr,(le.get(Sr)||0)+1),Sr&a&&le.set(a,(le.get(a)||0)+1)}for(var pe=new Uint8Array(I.length),ve=new Map,j=[],K=null,ie=0;ie<I.length;ie++)K||j.push(K={start:ie,end:I.length-1,level:Q==="rtl"?1:Q==="ltr"?0:oa(ie,!1)}),Z[ie]&B&&(K.end=ie,K=null);for(var De=q|te|V|Ae|s|Le|re|B,Ie=function(An){return An+(An&1?1:2)},We=function(An){return An+(An&1?2:1)},ft=0;ft<j.length;ft++){K=j[ft];var je=[{_level:K.level,_override:0,_isolate:0}],Xe=void 0,nt=0,ut=0,Ft=0;le.clear();for(var Ot=K.start;Ot<=K.end;Ot++){var Dt=Z[Ot];if(Xe=je[je.length-1],le.set(Dt,(le.get(Dt)||0)+1),Dt&a&&le.set(a,(le.get(a)||0)+1),Dt&De)if(Dt&(q|te)){pe[Ot]=Xe._level;var Pr=(Dt===q?We:Ie)(Xe._level);Pr<=ae&&!nt&&!ut?je.push({_level:Pr,_override:0,_isolate:0}):nt||ut++}else if(Dt&(V|Ae)){pe[Ot]=Xe._level;var fr=(Dt===V?We:Ie)(Xe._level);fr<=ae&&!nt&&!ut?je.push({_level:fr,_override:Dt&V?L:T,_isolate:0}):nt||ut++}else if(Dt&s){Dt&Te&&(Dt=oa(Ot+1,!0)===1?$:ye),pe[Ot]=Xe._level,Xe._override&&se(Ot,Xe._override);var en=(Dt===$?We:Ie)(Xe._level);en<=ae&&nt===0&&ut===0?(Ft++,je.push({_level:en,_override:0,_isolate:1,_isolInitIndex:Ot})):nt++}else if(Dt&Le){if(nt>0)nt--;else if(Ft>0){for(ut=0;!je[je.length-1]._isolate;)je.pop();var Ti=je[je.length-1]._isolInitIndex;Ti!=null&&(ve.set(Ti,Ot),ve.set(Ot,Ti)),je.pop(),Ft--}Xe=je[je.length-1],pe[Ot]=Xe._level,Xe._override&&se(Ot,Xe._override)}else Dt&re?(nt===0&&(ut>0?ut--:!Xe._isolate&&je.length>1&&(je.pop(),Xe=je[je.length-1])),pe[Ot]=Xe._level):Dt&B&&(pe[Ot]=K.level);else pe[Ot]=Xe._level,Xe._override&&Dt!==X&&se(Ot,Xe._override)}for(var At=[],vt=null,tn=K.start;tn<=K.end;tn++){var En=Z[tn];if(!(En&l)){var Lt=pe[tn],Tn=En&s,dr=En===Le;vt&&Lt===vt._level?(vt._end=tn,vt._endsWithIsolInit=Tn):At.push(vt={_start:tn,_end:tn,_level:Lt,_startsWithPDI:dr,_endsWithIsolInit:Tn})}}for(var nn=[],U=0;U<At.length;U++){var ee=At[U];if(!ee._startsWithPDI||ee._startsWithPDI&&!ve.has(ee._start)){for(var de=[vt=ee],oe=void 0;vt&&vt._endsWithIsolInit&&(oe=ve.get(vt._end))!=null;)for(var we=U+1;we<At.length;we++)if(At[we]._start===oe){de.push(vt=At[we]);break}for(var Je=[],$e=0;$e<de.length;$e++)for(var Ze=de[$e],lt=Ze._start;lt<=Ze._end;lt++)Je.push(lt);for(var St=pe[Je[0]],dt=K.level,ct=Je[0]-1;ct>=0;ct--)if(!(Z[ct]&l)){dt=pe[ct];break}var bt=Je[Je.length-1],Ir=pe[bt],pt=K.level;if(!(Z[bt]&s)){for(var wr=bt+1;wr<=K.end;wr++)if(!(Z[wr]&l)){pt=pe[wr];break}}nn.push({_seqIndices:Je,_sosType:Math.max(dt,St)%2?L:T,_eosType:Math.max(pt,Ir)%2?L:T})}}for(var yt=0;yt<nn.length;yt++){var bn=nn[yt],Fe=bn._seqIndices,xt=bn._sosType,Rn=bn._eosType;if(le.get(ue))for(var at=0;at<Fe.length;at++){var Zt=Fe[at];if(Z[Zt]&ue){for(var Qt=xt,ri=at-1;ri>=0;ri--)if(!(Z[Fe[ri]]&l)){Qt=Z[Fe[ri]];break}se(Zt,Qt&(s|Le)?H:Qt)}}if(le.get(P))for(var Pn=0;Pn<Fe.length;Pn++){var ea=Fe[Pn];if(Z[ea]&P)for(var ta=Pn-1;ta>=-1;ta--){var ec=ta===-1?xt:Z[Fe[ta]];if(ec&o){ec===Me&&se(ea,k);break}}}if(le.get(Me))for(var Bs=0;Bs<Fe.length;Bs++){var tc=Fe[Bs];Z[tc]&Me&&se(tc,L)}if(le.get(O)||le.get(F))for(var $i=1;$i<Fe.length-1;$i++){var ii=Fe[$i];if(Z[ii]&(O|F)){for(var zs=0,Gs=0,Rt=$i-1;Rt>=0&&(zs=Z[Fe[Rt]],!!(zs&l));Rt--);for(var si=$i+1;si<Fe.length&&(Gs=Z[Fe[si]],!!(Gs&l));si++);zs===Gs&&(Z[ii]===O?zs===P:zs&(P|k))&&se(ii,zs)}}if(le.get(P))for(var na=0;na<Fe.length;na++){var qm=Fe[na];if(Z[qm]&P){for(var bi=na-1;bi>=0&&Z[Fe[bi]]&(D|l);bi--)se(Fe[bi],P);for(var ra=na+1;ra<Fe.length&&Z[Fe[ra]]&(D|l);ra++)se(Fe[ra],P)}}if(le.get(D)||le.get(O)||le.get(F))for(var Ai=0;Ai<Fe.length;Ai++){var es=Fe[Ai];if(Z[es]&(D|O|F)){se(es,H);for(var Hs=Ai-1;Hs>=0&&Z[Fe[Hs]]&l;Hs--)se(Fe[Hs],H);for(var ts=Ai+1;ts<Fe.length&&Z[Fe[ts]]&l;ts++)se(Fe[ts],H)}}if(le.get(P))for(var Wr=0,Cd=xt;Wr<Fe.length;Wr++){var Ld=Fe[Wr],nc=Z[Ld];nc&P?Cd===T&&se(Ld,T):nc&o&&(Cd=nc)}if(le.get(a)){var ia=L|P|k,sl=ia|T,Vs=[];{for(var Ws=[],ns=0;ns<Fe.length;ns++)if(Z[Fe[ns]]&a){var rs=I[Fe[ns]],Rd=void 0;if(S(rs)!==null)if(Ws.length<63)Ws.push({char:rs,seqIndex:ns});else break;else if((Rd=b(rs))!==null)for(var Ci=Ws.length-1;Ci>=0;Ci--){var ol=Ws[Ci].char;if(ol===Rd||ol===b(C(rs))||S(C(ol))===rs){Vs.push([Ws[Ci].seqIndex,ns]),Ws.length=Ci;break}}}Vs.sort(function(An,Sr){return An[0]-Sr[0]})}for(var al=0;al<Vs.length;al++){for(var rc=Vs[al],js=rc[0],Xs=rc[1],Pd=!1,fn=0,qs=js+1;qs<Xs;qs++){var sa=Fe[qs];if(Z[sa]&sl){Pd=!0;var ic=Z[sa]&ia?L:T;if(ic===ss(sa)){fn=ic;break}}}if(Pd&&!fn){fn=xt;for(var dn=js-1;dn>=0;dn--){var oi=Fe[dn];if(Z[oi]&sl){var sc=Z[oi]&ia?L:T;sc!==ss(oi)?fn=sc:fn=ss(oi);break}}}if(fn){if(Z[Fe[js]]=Z[Fe[Xs]]=fn,fn!==ss(Fe[js])){for(var hr=js+1;hr<Fe.length;hr++)if(!(Z[Fe[hr]]&l)){d(I[Fe[hr]])&ue&&(Z[Fe[hr]]=fn);break}}if(fn!==ss(Fe[Xs])){for(var ai=Xs+1;ai<Fe.length;ai++)if(!(Z[Fe[ai]]&l)){d(I[Fe[ai]])&ue&&(Z[Fe[ai]]=fn);break}}}}for(var hn=0;hn<Fe.length;hn++)if(Z[Fe[hn]]&a){for(var oc=hn,ac=hn,lc=xt,On=hn-1;On>=0;On--)if(Z[Fe[On]]&l)oc=On;else{lc=Z[Fe[On]]&ia?L:T;break}for(var Id=Rn,Li=hn+1;Li<Fe.length;Li++)if(Z[Fe[Li]]&(a|l))ac=Li;else{Id=Z[Fe[Li]]&ia?L:T;break}for(var ll=oc;ll<=ac;ll++)Z[Fe[ll]]=lc===Id?lc:ss(Fe[ll]);hn=ac}}}for(var Vt=K.start;Vt<=K.end;Vt++){var ul=pe[Vt],is=Z[Vt];if(ul&1?is&(T|P|k)&&pe[Vt]++:is&L?pe[Vt]++:is&(k|P)&&(pe[Vt]+=2),is&l&&(pe[Vt]=Vt===0?K.level:pe[Vt-1]),Vt===K.end||d(I[Vt])&(W|B))for(var li=Vt;li>=0&&d(I[li])&u;li--)pe[li]=K.level}}return{levels:pe,paragraphs:j};function oa(An,Sr){for(var pn=An;pn<I.length;pn++){var mn=Z[pn];if(mn&(L|Me))return 1;if(mn&(B|T)||Sr&&mn===Le)return 0;if(mn&s){var ui=uc(pn);pn=ui===-1?I.length:ui}}return 0}function uc(An){for(var Sr=1,pn=An+1;pn<I.length;pn++){var mn=Z[pn];if(mn&B)break;if(mn&Le){if(--Sr==0)return pn}else mn&s&&Sr++}return-1}function ss(An){return pe[An]&1?L:T}}var Re="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ce;function ce(){if(!Ce){var I=_(Re,!0),Q=I.map,ae=I.reverseMap;ae.forEach(function(Z,fe){Q.set(fe,Z)}),Ce=Q}}function xe(I){return ce(),Ce.get(I)||null}function _e(I,Q,ae,Z){var fe=I.length;ae=Math.max(0,ae==null?0:+ae),Z=Math.min(fe-1,Z==null?fe-1:+Z);for(var le=new Map,se=ae;se<=Z;se++)if(Q[se]&1){var pe=xe(I[se]);pe!==null&&le.set(se,pe)}return le}function Pe(I,Q,ae,Z){var fe=I.length;ae=Math.max(0,ae==null?0:+ae),Z=Math.min(fe-1,Z==null?fe-1:+Z);var le=[];return Q.paragraphs.forEach(function(se){var pe=Math.max(ae,se.start),ve=Math.min(Z,se.end);if(pe<ve){for(var j=Q.levels.slice(pe,ve+1),K=ve;K>=pe&&d(I[K])&u;K--)j[K]=se.level;for(var ie=se.level,De=1/0,Ie=0;Ie<j.length;Ie++){var We=j[Ie];We>ie&&(ie=We),We<De&&(De=We|1)}for(var ft=ie;ft>=De;ft--)for(var je=0;je<j.length;je++)if(j[je]>=ft){for(var Xe=je;je+1<j.length&&j[je+1]>=ft;)je++;je>Xe&&le.push([Xe+ae,je+ae])}}}),le}function be(I,Q,ae,Z){var fe=G(I,Q,ae,Z),le=[].concat(I);return fe.forEach(function(se,pe){le[pe]=(Q.levels[se]&1?xe(I[se]):null)||I[se]}),le.join("")}function G(I,Q,ae,Z){for(var fe=Pe(I,Q,ae,Z),le=[],se=0;se<I.length;se++)le[se]=se;return fe.forEach(function(pe){for(var ve=pe[0],j=pe[1],K=le.slice(ve,j+1),ie=K.length;ie--;)le[j-ie]=K[ie]}),le}return e.closingToOpeningBracket=b,e.getBidiCharType=d,e.getBidiCharTypeName=p,e.getCanonicalBracket=C,e.getEmbeddingLevels=Ee,e.getMirroredCharacter=xe,e.getMirroredCharactersMap=_e,e.getReorderSegments=Pe,e.getReorderedIndices=G,e.getReorderedString=be,e.openingToClosingBracket=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const JA=/\bvoid\s+main\s*\(\s*\)\s*{/g;function x1(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(r,i){let s=gt[i];return s?x1(s):r}return n.replace(e,t)}const $n=[];for(let n=0;n<256;n++)$n[n]=(n<16?"0":"")+n.toString(16);function IB(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return($n[n&255]+$n[n>>8&255]+$n[n>>16&255]+$n[n>>24&255]+"-"+$n[e&255]+$n[e>>8&255]+"-"+$n[e>>16&15|64]+$n[e>>24&255]+"-"+$n[t&63|128]+$n[t>>8&255]+"-"+$n[t>>16&255]+$n[t>>24&255]+$n[r&255]+$n[r>>8&255]+$n[r>>16&255]+$n[r>>24&255]).toUpperCase()}const rl=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let r=arguments[e];if(r)for(let i in r)r.hasOwnProperty(i)&&(n[i]=r[i])}return n},DB=Date.now(),ZA=new WeakMap,QA=new Map;let FB=1e10;function _1(n,e){const t=UB(e);let r=ZA.get(n);if(r||ZA.set(n,r=Object.create(null)),r[t])return new r[t];const i=`_onBeforeCompile${t}`,s=function(u){n.onBeforeCompile.call(this,u);const h=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let m=QA[h];if(!m){const d=kB(u,e,t);m=QA[h]=d}u.vertexShader=m.vertexShader,u.fragmentShader=m.fragmentShader,rl(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-DB}}),this[i]&&this[i](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const h=Object.create(u,l);return Object.defineProperty(h,"baseMaterial",{value:n}),Object.defineProperty(h,"id",{value:FB++}),h.uuid=IB(),h.uniforms=rl({},u.uniforms,e.uniforms),h.defines=rl({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",h.extensions=rl({},u.extensions,e.extensions),h._listeners=void 0,h},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(rl(this.extensions,u.extensions),rl(this.defines,u.defines),rl(this.uniforms,Jy.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=_1(n.isDerivedMaterial?n.getDepthMaterial():new Xf({depthPacking:wy}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=_1(n.isDerivedMaterial?n.getDistanceMaterial():new qf,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),n.dispose.call(this)}}};return r[t]=o,new o}function kB({vertexShader:n,fragmentShader:e},t,r){let{vertexDefs:i,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:m,customRewriter:d,timeUniform:p}=t;if(i=i||"",s=s||"",o=o||"",l=l||"",u=u||"",h=h||"",(a||d)&&(n=x1(n)),(m||d)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=x1(e)),d){let y=d({vertexShader:n,fragmentShader:e});n=y.vertexShader,e=y.fragmentShader}if(m){let y=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(y.push(_),"")),h=`${m}
${y.join(`
`)}
${h}`}if(p){const y=`
uniform float ${p};
`;i=y+i,l=y+l}return a&&(n=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${n}
`,i=`${i}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,n=n.replace(/\b(position|normal|uv)\b/g,(y,_,w,v)=>/\battribute\s+vec[23]\s+$/.test(v.substr(0,w))?_:`troika_${_}_${r}`)),n=KA(n,r,i,s,o),e=KA(e,r,l,u,h),{vertexShader:n,fragmentShader:e}}function KA(n,e,t,r,i){return(r||i||t)&&(n=n.replace(JA,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),n}function NB(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let OB=0;const $A=new Map;function UB(n){const e=JSON.stringify(n,NB);let t=$A.get(e);return t==null&&$A.set(e,t=++OB),t}function BB(n){const e=16;function t(o,a,l,u,h,m,d){const p=1-d;return{x:p*p*o+2*p*d*l+d*d*h,y:p*p*a+2*p*d*u+d*d*m}}function r(o,a,l,u,h,m,d,p,y){const _=1-y;return{x:_*_*_*o+3*_*_*y*l+3*_*y*y*h+y*y*y*d,y:_*_*_*a+3*_*_*y*u+3*_*y*y*m+y*y*y*p}}function i(){return(self.performance||Date).now()}function s(o,a,l,u,h,m=1){const d=i(),p=new Uint8Array(o*a),y=u[2]-u[0],_=u[3]-u[1],w=n(u),v=/([MLQCZ])([^MLQCZ]*)/g;let g,M,S,b,C;for(;g=v.exec(l);){const T=g[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(L=>parseFloat(L));switch(g[1]){case"M":b=M=T[0],C=S=T[1];break;case"L":(T[0]!==b||T[1]!==C)&&w.addLineSegment(b,C,b=T[0],C=T[1]);break;case"Q":{let L={x:b,y:C};for(let P=1;P<e;P++){let O=t(b,C,T[0],T[1],T[2],T[3],P/(e-1));w.addLineSegment(L.x,L.y,O.x,O.y),L=O}b=T[2],C=T[3];break}case"C":{let L={x:b,y:C};for(let P=1;P<e;P++){let O=r(b,C,T[0],T[1],T[2],T[3],T[4],T[5],P/(e-1));w.addLineSegment(L.x,L.y,O.x,O.y),L=O}b=T[4],C=T[5];break}case"Z":(b!==M||C!==S)&&w.addLineSegment(b,C,M,S);break}}for(let T=0;T<o;T++)for(let L=0;L<a;L++){const P=w.findNearestSignedDistance(u[0]+y*(T+.5)/o,u[1]+_*(L+.5)/a,h);let O=Math.pow(1-Math.abs(P)/h,m)/2;P<0&&(O=1-O),O=Math.max(0,Math.min(255,Math.round(O*255))),p[L*o+T]=O}return{textureData:p,timing:i()-d}}return s}function zB(n,e,t){const{defaultFontURL:r}=t,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(v,g){function M(){const S=b=>{console.error(`Failure loading font ${v}${v===r?"":"; trying fallback"}`,b),v!==r&&(v=r,M())};try{const b=new XMLHttpRequest;b.open("get",v,!0),b.responseType="arraybuffer",b.onload=function(){if(b.status>=400)S(new Error(b.statusText));else if(b.status>0)try{const C=n(b.response);g(C)}catch(C){S(C)}},b.onerror=S,b.send()}catch(b){S(b)}}M()}function u(v,g){v||(v=r);let M=i[v];M?M.pending?M.pending.push(g):g(M):(i[v]={pending:[g]},l(v,S=>{let b=i[v].pending;i[v]=S,b.forEach(C=>C(S))}))}function h({text:v="",font:g=r,sdfGlyphSize:M=64,fontSize:S=1,letterSpacing:b=0,lineHeight:C="normal",maxWidth:T=s,direction:L,textAlign:P="left",textIndent:O=0,whiteSpace:D="normal",overflowWrap:k="normal",anchorX:F=0,anchorY:B=0,includeCaretPositions:W=!1,chunkedBoundsSize:H=8192,colorRanges:X=null},ue,Me=!1){const Ae=y(),V={fontLoad:0,typesetting:0};v.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),v=v.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),S=+S,b=+b,T=+T,C=C||"normal",O=+O,u(g,te=>{const q=isFinite(T);let re=null,ye=null,$=null,Te=null,Le=null,Ee=null,Re=null,Ce=0,ce=0,xe=D!=="nowrap";const{ascender:_e,descender:Pe,unitsPerEm:be}=te;V.fontLoad=y()-Ae;const G=y(),I=S/be;C==="normal"&&(C=(_e-Pe)/be),C=C*S;const Q=(C-(_e-Pe)*I)/2,ae=-(_e*I+Q),Z=Math.min(C,(_e-Pe)*I),fe=(_e+Pe)/2*I-Z/2;let le=O,se=new _;const pe=[se];te.forEachGlyph(v,S,b,(K,ie,De)=>{const Ie=v.charAt(De),We=K.advanceWidth*I,ft=se.count;let je;if("isEmpty"in K||(K.isWhitespace=!!Ie&&/\s/.test(Ie),K.canBreakAfter=!!Ie&&a.test(Ie),K.isEmpty=K.xMin===K.xMax||K.yMin===K.yMax||o.test(Ie)),!K.isWhitespace&&!K.isEmpty&&ce++,xe&&q&&!K.isWhitespace&&ie+We+le>T&&ft){if(se.glyphAt(ft-1).glyphObj.canBreakAfter)je=new _,le=-ie;else for(let nt=ft;nt--;)if(nt===0&&k==="break-word"){je=new _,le=-ie;break}else if(se.glyphAt(nt).glyphObj.canBreakAfter){je=se.splitAt(nt+1);const ut=je.glyphAt(0).x;le-=ut;for(let Ft=je.count;Ft--;)je.glyphAt(Ft).x-=ut;break}je&&(se.isSoftWrapped=!0,se=je,pe.push(se),Ce=T)}let Xe=se.glyphAt(se.count);Xe.glyphObj=K,Xe.x=ie+le,Xe.width=We,Xe.charIndex=De,Ie===`
`&&(se=new _,pe.push(se),le=-(ie+We+b*S)+O)}),pe.forEach(K=>{for(let ie=K.count;ie--;){let{glyphObj:De,x:Ie,width:We}=K.glyphAt(ie);if(!De.isWhitespace){K.width=Ie+We,K.width>Ce&&(Ce=K.width);return}}});let ve=0,j=0;if(F&&(typeof F=="number"?ve=-F:typeof F=="string"&&(ve=-Ce*(F==="left"?0:F==="center"?.5:F==="right"?1:d(F)))),B){if(typeof B=="number")j=-B;else if(typeof B=="string"){let K=pe.length*C;j=B==="top"?0:B==="top-baseline"?-ae:B==="middle"?K/2:B==="bottom"?K:B==="bottom-baseline"?K-Q+Pe*I:d(B)*K}}if(!Me){const K=e.getEmbeddingLevels(v,L);re=new Uint16Array(ce),ye=new Float32Array(ce*2),$={},Ee=[s,s,-s,-s],Re=[];let ie=ae;W&&(Le=new Float32Array(v.length*3)),X&&(Te=new Uint8Array(ce*3));let De=0,Ie=-1,We=-1,ft,je;if(pe.forEach((Xe,nt)=>{let{count:ut,width:Ft}=Xe;if(ut>0){let Ot=0;for(let At=ut;At--&&Xe.glyphAt(At).glyphObj.isWhitespace;)Ot++;let Dt=0,Pr=0;if(P==="center")Dt=(Ce-Ft)/2;else if(P==="right")Dt=Ce-Ft;else if(P==="justify"&&Xe.isSoftWrapped){let At=0;for(let vt=ut-Ot;vt--;)Xe.glyphAt(vt).glyphObj.isWhitespace&&At++;Pr=(Ce-Ft)/At}if(Pr||Dt){let At=0;for(let vt=0;vt<ut;vt++){let tn=Xe.glyphAt(vt);const En=tn.glyphObj;tn.x+=Dt+At,Pr!==0&&En.isWhitespace&&vt<ut-Ot&&(At+=Pr,tn.width+=Pr)}}const fr=e.getReorderSegments(v,K,Xe.glyphAt(0).charIndex,Xe.glyphAt(Xe.count-1).charIndex);for(let At=0;At<fr.length;At++){const[vt,tn]=fr[At];let En=1/0,Lt=-1/0;for(let Tn=0;Tn<ut;Tn++)if(Xe.glyphAt(Tn).charIndex>=vt){let dr=Tn,nn=Tn;for(;nn<ut;nn++){let U=Xe.glyphAt(nn);if(U.charIndex>tn)break;nn<ut-Ot&&(En=Math.min(En,U.x),Lt=Math.max(Lt,U.x+U.width))}for(let U=dr;U<nn;U++){const ee=Xe.glyphAt(U);ee.x=Lt-(ee.x+ee.width-En)}break}}let en;const Ti=At=>en=At;for(let At=0;At<ut;At++){let vt=Xe.glyphAt(At);en=vt.glyphObj;const tn=en.index,En=K.levels[vt.charIndex]&1;if(En){const Lt=e.getMirroredCharacter(v[vt.charIndex]);Lt&&te.forEachGlyph(Lt,0,0,Ti)}if(W){const{charIndex:Lt}=vt,Tn=vt.x+ve,dr=vt.x+vt.width+ve;Le[Lt*3]=En?dr:Tn,Le[Lt*3+1]=En?Tn:dr,Le[Lt*3+2]=ie+fe+j;const nn=Lt-Ie;nn>1&&p(Le,Ie,nn),Ie=Lt}if(X){const{charIndex:Lt}=vt;for(;Lt>We;)We++,X.hasOwnProperty(We)&&(je=X[We])}if(!en.isWhitespace&&!en.isEmpty){const Lt=De++;$[tn]||($[tn]={path:en.path,pathBounds:[en.xMin,en.yMin,en.xMax,en.yMax]});const Tn=vt.x+ve,dr=ie+j;ye[Lt*2]=Tn,ye[Lt*2+1]=dr;const nn=Tn+en.xMin*I,U=dr+en.yMin*I,ee=Tn+en.xMax*I,de=dr+en.yMax*I;nn<Ee[0]&&(Ee[0]=nn),U<Ee[1]&&(Ee[1]=U),ee>Ee[2]&&(Ee[2]=ee),de>Ee[3]&&(Ee[3]=de),Lt%H==0&&(ft={start:Lt,end:Lt,rect:[s,s,-s,-s]},Re.push(ft)),ft.end++;const oe=ft.rect;if(nn<oe[0]&&(oe[0]=nn),U<oe[1]&&(oe[1]=U),ee>oe[2]&&(oe[2]=ee),de>oe[3]&&(oe[3]=de),re[Lt]=tn,X){const we=Lt*3;Te[we]=je>>16&255,Te[we+1]=je>>8&255,Te[we+2]=je&255}}}}ie-=C}),Le){const Xe=v.length-Ie;Xe>1&&p(Le,Ie,Xe)}}V.typesetting=y()-G,ue({glyphIds:re,glyphPositions:ye,glyphData:$,caretPositions:Le,caretHeight:Z,glyphColors:Te,chunkedBounds:Re,fontSize:S,unitsPerEm:be,ascender:_e*I,descender:Pe*I,lineHeight:C,topBaseline:ae,blockBounds:[ve,j-pe.length*C,ve+Ce,j],visibleBounds:Ee,timings:V})})}function m(v,g){h(v,M=>{const[S,b,C,T]=M.blockBounds;g({width:C-S,height:T-b})},{metricsOnly:!0})}function d(v){let g=v.match(/^([\d.]+)%$/),M=g?parseFloat(g[1]):NaN;return isNaN(M)?0:M/100}function p(v,g,M){const S=v[g*3],b=v[g*3+1],C=v[g*3+2],T=(b-S)/M;for(let L=0;L<M;L++){const P=(g+L)*3;v[P]=S+T*L,v[P+1]=S+T*(L+1),v[P+2]=C}}function y(){return(self.performance||Date).now()}function _(){this.data=[]}const w=["glyphObj","x","width","charIndex"];return _.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/w.length)},glyphAt(v){let g=_.flyweight;return g.data=this.data,g.index=v,g},splitAt(v){let g=new _;return g.data=this.data.splice(v*w.length),g}},_.flyweight=w.reduce((v,g,M,S)=>(Object.defineProperty(v,g,{get(){return this.data[this.index*w.length+M]},set(b){this.data[this.index*w.length+M]=b}}),v),{data:null,index:0}),{typeset:h,measure:m,loadFont:u}}function GB(n){let e=!1;const t=[];function r(){e&&(t.sort(function(l,u){return l.maxX-u.maxX}),e=!1)}function i(l,u,h,m){const d={x0:l,y0:u,x1:h,y1:m,minX:Math.min(l,h),minY:Math.min(u,m),maxX:Math.max(l,h),maxY:Math.max(u,m)};t.push(d),e=!0}function s(l,u){r();let h=1/0,m=1/0;for(let d=t.length;d--;){const p=t[d];if(p.maxX+m<=l)break;if(l+m>p.minX&&u-m<p.maxY&&u+m>p.minY){const y=a(l,u,p.x0,p.y0,p.x1,p.y1);y<h&&(h=y,m=Math.sqrt(h))}}return o(l,u)&&(m=-m),m}function o(l,u){r();let h=!1;for(let m=t.length;m--;){const d=t[m];if(d.maxX<=l)break;d.minY<u&&d.maxY>u&&d.y0>u!=d.y1>u&&l<(d.x1-d.x0)*(u-d.y0)/(d.y1-d.y0)+d.x0&&(h=!h)}return h}function a(l,u,h,m,d,p){const y=d-h,_=p-m,w=y*y+_*_,v=w?Math.max(0,Math.min(1,((l-h)*y+(u-m)*_)/w)):0,g=l-(h+v*y),M=u-(m+v*_);return g*g+M*M}return{addLineSegment:i,findNearestSignedDistance:s}}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function HB(){return typeof window=="undefined"&&(self.window=self),function(n){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],h=0;h<l;h++){var m=s.readUint(o,a);a+=4,u.push(e._readFont(o,m))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],h={_data:i,_offset:a},m={},d=0;d<l;d++){var p=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var y=o.readUint(i,s);s+=4;var _=o.readUint(i,s);s+=4,m[p]={offset:y,length:_}}for(d=0;d<u.length;d++){var w=u[d];m[w]&&(h[w.trim()]=e[w.trim()].parse(i,m[w].offset,m[w].length,h))}return h},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,h=0;h<l;h++){var m=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var d=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,m==s)return d}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,h={},m=s;u.readFixed(i,s),s+=4;var d=u.readUshort(i,s);s+=2;var p=u.readUshort(i,s);s+=2;var y=u.readUshort(i,s);return s+=2,h.scriptList=e._lctf.readScriptList(i,m+d),h.featureList=e._lctf.readFeatureList(i,m+p),h.lookupList=e._lctf.readLookupList(i,m+y,l),h},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],h=a.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var d=a.readUshort(i,s);s+=2;var p=e._lctf.readLookupTable(i,l+d,o);u.push(p)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var h=a.readUshort(i,s);s+=2;for(var m=u.ltype,d=0;d<h;d++){var p=a.readUshort(i,s);s+=2;var y=o(i,m,l+p,u);u.tabs.push(y)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++)a.push(u+m),a.push(u+m),a.push(o.readUshort(i,s)),s+=2}if(l==2){var d=o.readUshort(i,s);for(s+=2,m=0;m<d;m++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var h=0;h<u;h++){var m=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2;var p=e._lctf.readFeatureTable(i,a+d);p.tag=m.trim(),l.push(p)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var h=o.readUshort(i,s);s+=2,l.tab=[];for(var m=0;m<h;m++)l.tab.push(o.readUshort(i,s+2*m));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var h=0;h<u;h++){var m=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2,l[m.trim()]=e._lctf.readScriptTable(i,a+d)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var h=o.readUshort(i,s);s+=2;for(var m=0;m<h;m++){var d=o.readASCII(i,s,4);s+=4;var p=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(i,a+p)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],h=0;h<l.length-1;h++)u.push(a.readASCII(i,s+l[h],l[h+1]-l[h]));s+=l[l.length-1];var m=[];s=e.CFF.readIndex(i,s,m);var d=[];for(h=0;h<m.length-1;h++)d.push(e.CFF.readDict(i,s+m[h],s+m[h+1]));s+=m[m.length-1];var p=d[0],y=[];s=e.CFF.readIndex(i,s,y);var _=[];for(h=0;h<y.length-1;h++)_.push(a.readASCII(i,s+y[h],y[h+1]-y[h]));if(s+=y[y.length-1],e.CFF.readSubrs(i,s,p),p.CharStrings){s=p.CharStrings,y=[],s=e.CFF.readIndex(i,s,y);var w=[];for(h=0;h<y.length-1;h++)w.push(a.readBytes(i,s+y[h],y[h+1]-y[h]));p.CharStrings=w}if(p.ROS){s=p.FDArray;var v=[];for(s=e.CFF.readIndex(i,s,v),p.FDArray=[],h=0;h<v.length-1;h++){var g=e.CFF.readDict(i,s+v[h],s+v[h+1]);e.CFF._readFDict(i,g,_),p.FDArray.push(g)}s+=v[v.length-1],s=p.FDSelect,p.FDSelect=[];var M=i[s];if(s++,M!=3)throw M;var S=a.readUshort(i,s);for(s+=2,h=0;h<S+1;h++)p.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(i,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(i,p.charset,p.CharStrings.length)),e.CFF._readFDict(i,p,_),p},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,h=l.length;u=h<1240?107:h<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var m=0;m<l.length-1;m++)o.Subrs.push(a.readBytes(i,s+l[m],l[m+1]-l[m]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var h=0;h<u;h++)a.push(i[s+h]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var h=0;h<o;h++){var m=a.readUshort(i,s);s+=2,l.push(m)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){m=a.readUshort(i,s),s+=2;var d=0;for(u==1?(d=i[s],s++):(d=a.readUshort(i,s),s+=2),h=0;h<=d;h++)l.push(m),m++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var h=0;h<l;h++)o.push(i[s+h]);else if(u==2)for(h=0;h<l;h++)o.push(a.readUshort(i,s+2*h));else if(u==3)for(h=0;h<l;h++)o.push(16777215&a.readUint(i,s+3*h-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,m=null,d=null;l<=20&&(m=l,h=1),l==12&&(m=100*l+u,h=2),21<=l&&l<=27&&(m=l,h=1),l==28&&(d=a.readShort(i,s+1),h=3),29<=l&&l<=31&&(m=l,h=1),32<=l&&l<=246&&(d=l-139,h=1),247<=l&&l<=250&&(d=256*(l-247)+u+108,h=2),251<=l&&l<=254&&(d=256*-(l-251)-u-108,h=2),l==255&&(d=a.readInt(i,s+1)/65535,h=5),o.val=d!=null?d:"o"+m,o.size=h},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var h=i[s],m=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,p=null,y=null;h<=20&&(p=h,d=1),h==12&&(p=100*h+m,d=2),h!=19&&h!=20||(p=h,d=2),21<=h&&h<=27&&(p=h,d=1),h==28&&(y=l.readShort(i,s+1),d=3),29<=h&&h<=31&&(p=h,d=1),32<=h&&h<=246&&(y=h-139,d=1),247<=h&&h<=250&&(y=256*(h-247)+m+108,d=2),251<=h&&h<=254&&(y=256*-(h-251)-m-108,d=2),h==255&&(y=l.readInt(i,s+1)/65535,d=5),u.push(y!=null?y:"o"+p),s+=d}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var h=i[s],m=i[s+1];i[s+2],i[s+3],i[s+4];var d=1,p=null,y=null;if(h==28&&(y=a.readShort(i,s+1),d=3),h==29&&(y=a.readInt(i,s+1),d=5),32<=h&&h<=246&&(y=h-139,d=1),247<=h&&h<=250&&(y=256*(h-247)+m+108,d=2),251<=h&&h<=254&&(y=256*-(h-251)-m-108,d=2),h==255)throw y=a.readInt(i,s+1)/65535,d=5,"unknown number";if(h==30){var _=[];for(d=1;;){var w=i[s+d];d++;var v=w>>4,g=15&w;if(v!=15&&_.push(v),g!=15&&_.push(g),g==15)break}for(var M="",S=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],b=0;b<_.length;b++)M+=S[_[b]];y=parseFloat(M)}h<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],d=1,h==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][m],d=2)),p!=null?(l[p]=u.length==1?u[0]:u,u=[]):u.push(y),s+=d}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var h=[];l.tables=[];for(var m=0;m<u;m++){var d=a.readUshort(i,s);s+=2;var p=a.readUshort(i,s);s+=2;var y=a.readUint(i,s);s+=4;var _="p"+d+"e"+p,w=h.indexOf(y);if(w==-1){var v;w=l.tables.length,h.push(y);var g=a.readUshort(i,y);g==0?v=e.cmap.parse0(i,y):g==4?v=e.cmap.parse4(i,y):g==6?v=e.cmap.parse6(i,y):g==12?v=e.cmap.parse12(i,y):console.debug("unknown format: "+g,d,p,y),l.tables.push(v)}if(l[_]!=null)throw"multiple tables for one platform+encoding";l[_]=w}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var h=o.readUshort(i,s);s+=2;var m=h/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,m),s+=2*m,s+=2,l.startCount=o.readUshorts(i,s,m),s+=2*m,l.idDelta=[];for(var d=0;d<m;d++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,m),s+=2*m,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var h=s+12*u,m=o.readUint(i,h+0),d=o.readUint(i,h+4),p=o.readUint(i,h+8);a.groups.push([m,d,p])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(o.readUshort(a,l)),l+=2;var m=o.readUshort(a,l);if(l+=2,a.length-l<m)return null;u.instructions=o.readBytes(a,l,m),l+=m;var d=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<d;h++){var p=a[l];if(l++,u.flags.push(p),(8&p)!=0){var y=a[l];l++;for(var _=0;_<y;_++)u.flags.push(p),h++}}for(u.xs=[],h=0;h<d;h++){var w=(2&u.flags[h])!=0,v=(16&u.flags[h])!=0;w?(u.xs.push(v?a[l]:-a[l]),l++):v?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],h=0;h<d;h++)w=(4&u.flags[h])!=0,v=(32&u.flags[h])!=0,w?(u.ys.push(v?a[l]:-a[l]),l++):v?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var g=0,M=0;for(h=0;h<d;h++)g+=u.xs[h],M+=u.ys[h],u.xs[h]=g,u.ys[h]=M}else{var S;u.parts=[];do{S=o.readUshort(a,l),l+=2;var b={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(b),b.glyphIndex=o.readUshort(a,l),l+=2,1&S){var C=o.readShort(a,l);l+=2;var T=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,T=o.readInt8(a,l),l++;2&S?(b.m.tx=C,b.m.ty=T):(b.p1=C,b.p2=T),8&S?(b.m.a=b.m.d=o.readF2dot14(a,l),l+=2):64&S?(b.m.a=o.readF2dot14(a,l),l+=2,b.m.d=o.readF2dot14(a,l),l+=2):128&S&&(b.m.a=o.readF2dot14(a,l),l+=2,b.m.b=o.readF2dot14(a,l),l+=2,b.m.c=o.readF2dot14(a,l),l+=2,b.m.d=o.readF2dot14(a,l),l+=2)}while(32&S);if(256&S){var L=o.readUshort(a,l);for(l+=2,u.instr=[],h=0;h<L;h++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,h={};if(h.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&h.fmt<=2){var m=l.readUshort(i,o);o+=2,h.coverage=e._lctf.readCoverage(i,m+u)}if(s==1&&h.fmt==1){var d=l.readUshort(i,o);o+=2;var p=e._lctf.numOfOnes(d);d!=0&&(h.pos=e.GPOS.readValueRecord(i,o,d))}else if(s==2&&h.fmt>=1&&h.fmt<=2){d=l.readUshort(i,o),o+=2;var y=l.readUshort(i,o);o+=2,p=e._lctf.numOfOnes(d);var _=e._lctf.numOfOnes(y);if(h.fmt==1){h.pairsets=[];var w=l.readUshort(i,o);o+=2;for(var v=0;v<w;v++){var g=u+l.readUshort(i,o);o+=2;var M=l.readUshort(i,g);g+=2;for(var S=[],b=0;b<M;b++){var C=l.readUshort(i,g);g+=2,d!=0&&(k=e.GPOS.readValueRecord(i,g,d),g+=2*p),y!=0&&(F=e.GPOS.readValueRecord(i,g,y),g+=2*_),S.push({gid2:C,val1:k,val2:F})}h.pairsets.push(S)}}if(h.fmt==2){var T=l.readUshort(i,o);o+=2;var L=l.readUshort(i,o);o+=2;var P=l.readUshort(i,o);o+=2;var O=l.readUshort(i,o);for(o+=2,h.classDef1=e._lctf.readClassDef(i,u+T),h.classDef2=e._lctf.readClassDef(i,u+L),h.matrix=[],v=0;v<P;v++){var D=[];for(b=0;b<O;b++){var k=null,F=null;d!=0&&(k=e.GPOS.readValueRecord(i,o,d),o+=2*p),y!=0&&(F=e.GPOS.readValueRecord(i,o,y),o+=2*_),D.push({val1:k,val2:F})}h.matrix.push(D)}}}else{if(s==9&&h.fmt==1){var B=l.readUshort(i,o);o+=2;var W=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=B;else if(a.ltype!=B)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+W)}console.debug("unsupported GPOS table LookupType",s,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,h={};if(h.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&h.fmt<=2||s==6&&h.fmt<=2){var m=l.readUshort(i,o);o+=2,h.coverage=e._lctf.readCoverage(i,u+m)}if(s==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=l.readShort(i,o),o+=2;else if(h.fmt==2){var d=l.readUshort(i,o);o+=2,h.newg=l.readUshorts(i,o,d),o+=2*h.newg.length}}else if(s==4){h.vals=[],d=l.readUshort(i,o),o+=2;for(var p=0;p<d;p++){var y=l.readUshort(i,o);o+=2,h.vals.push(e.GSUB.readLigatureSet(i,u+y))}}else if(s==5&&h.fmt==2){if(h.fmt==2){var _=l.readUshort(i,o);o+=2,h.cDef=e._lctf.readClassDef(i,u+_),h.scset=[];var w=l.readUshort(i,o);for(o+=2,p=0;p<w;p++){var v=l.readUshort(i,o);o+=2,h.scset.push(v==0?null:e.GSUB.readSubClassSet(i,u+v))}}}else if(s==6&&h.fmt==3){if(h.fmt==3){for(p=0;p<3;p++){d=l.readUshort(i,o),o+=2;for(var g=[],M=0;M<d;M++)g.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*M)));o+=2*d,p==0&&(h.backCvg=g),p==1&&(h.inptCvg=g),p==2&&(h.ahedCvg=g)}d=l.readUshort(i,o),o+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(i,o,d)}}else{if(s==7&&h.fmt==1){var S=l.readUshort(i,o);o+=2;var b=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=S;else if(a.ltype!=S)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+b)}console.debug("unsupported GSUB table LookupType",s,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var h=0;h<u;h++){var m=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+m))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var h=0;h<l-1;h++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var h=0;h<u;h++){var m=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+m))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var h=o.readUshort(i,s);s+=2,u==1&&h--,a[l[u]]=o.readUshorts(i,s,h),s+=2*a[l[u]].length}return h=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*h),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var h=0;h<u;h++){var m=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+m))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},h=0,m=0,d=0;d<a.maxp.numGlyphs;d++)d<a.hhea.numberOfHMetrics&&(h=l.readUshort(i,s),s+=2,m=l.readShort(i,s),s+=2),u.aWidth.push(h),u.lsBearing.push(m);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var h=l.readUshort(i,s);s+=2;for(var m={glyph1:[],rval:[]},d=0;d<h;d++){s+=2,o=l.readUshort(i,s),s+=2;var p=l.readUshort(i,s);s+=2;var y=p>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(i,s,m)}return m},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var h={glyph1:[],rval:[]},m=0;m<u;m++){l.readUint(i,s),s+=4;var d=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,h)}return h},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var h=0;h<u;h++){var m=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;var p=a.readShort(i,s);s+=2,m!=l&&(o.glyph1.push(m),o.rval.push({glyph2:[],vals:[]}));var y=o.rval[o.rval.length-1];y.glyph2.push(d),y.vals.push(p),l=m}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],h=a.head.indexToLocFormat,m=a.maxp.numGlyphs+1;if(h==0)for(var d=0;d<m;d++)u.push(l.readUshort(i,s+(d<<1))<<1);if(h==1)for(d=0;d<m;d++)u.push(l.readUint(i,s+(d<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var h,m=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,p=0;p<u;p++){var y=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var w=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var M=a.readUshort(i,s);s+=2;var S,b=m[v],C=d+12*u+M;if(y==0)S=a.readUnicode(i,C,g/2);else if(y==3&&_==0)S=a.readUnicode(i,C,g/2);else if(_==0)S=a.readASCII(i,C,g);else if(_==1)S=a.readUnicode(i,C,g/2);else if(_==3)S=a.readUnicode(i,C,g/2);else{if(y!=1)throw"unknown encoding "+_+", platformID: "+y;S=a.readASCII(i,C,g),console.debug("reading unknown MAC encoding "+_+" as ASCII")}var T="p"+y+","+w.toString(16);l[T]==null&&(l[T]={}),l[T][b!==void 0?b:v]=S,l[T]._lang=w}for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==1033)return l[L];for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==0)return l[L];for(var L in l)if(l[L].postScriptName!=null&&l[L]._lang==3084)return l[L];for(var L in l)if(l[L].postScriptName!=null)return l[L];for(var L in l){h=L;break}return console.debug("returning name table with languageID "+l[h]._lang),l[h]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,h=0;h<l.endCount.length;h++)if(s<=l.endCount[h]){u=h;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(h=0;h<l.groups.length;h++){var m=l.groups[h];if(m[0]<=s&&s<=m[1])return m[2]+(s-m[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,h=i.CFF.Private;if(u.ROS){for(var m=0;u.FDSelect[m+2]<=s;)m+=2;h=u.FDArray[u.FDSelect[m+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,h,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var h=u==a?l:u-1,m=u==l?a:u+1,d=1&i.flags[u],p=1&i.flags[h],y=1&i.flags[m],_=i.xs[u],w=i.ys[u];if(u==a)if(d){if(!p){e.U.P.moveTo(s,_,w);continue}e.U.P.moveTo(s,i.xs[h],i.ys[h])}else p?e.U.P.moveTo(s,i.xs[h],i.ys[h]):e.U.P.moveTo(s,(i.xs[h]+_)/2,(i.ys[h]+w)/2);d?p&&e.U.P.lineTo(s,_,w):y?e.U.P.qcurveTo(s,_,w,i.xs[m],i.ys[m]):e.U.P.qcurveTo(s,_,w,(_+i.xs[m])/2,(w+i.ys[m])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var h=u.m,m=0;m<l.crds.length;m+=2){var d=l.crds[m],p=l.crds[m+1];o.crds.push(d*h.a+p*h.b+h.tx),o.crds.push(d*h.c+p*h.d+h.ty)}for(m=0;m<l.cmds.length;m++)o.cmds.push(l.cmds[m])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=0;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,h=l.featureList,m=[],d=0;d<h.length;d++){var p=h[d];if(p.tag=="kern"){for(var y=0;y<p.tab.length;y++)if(!m[p.tab[y]]){m[p.tab[y]]=!0;for(var _=u[p.tab[y]],w=0;w<_.tabs.length;w++)if(_.tabs[w]!=null){var v,g=_.tabs[w];if((!g.coverage||(v=e._lctf.coverageIndex(g.coverage,s))!=-1)&&_.ltype!=1){if(_.ltype==2){var M;if(g.fmt==1){var S=g.pairsets[v];for(d=0;d<S.length;d++)S[d].gid2==o&&(M=S[d])}else if(g.fmt==2){var b=e.U._getGlyphClass(s,g.classDef1),C=e.U._getGlyphClass(o,g.classDef2);M=g.matrix[b][C]}M&&M.val1&&M.val1[2]&&(a+=M.val1[2]),M&&M.val2&&M.val2[0]&&(a+=M.val2[0])}}}}}}if(i.kern){var T=i.kern.glyph1.indexOf(s);if(T!=-1){var L=i.kern.rval[T].glyph2.indexOf(o);L!=-1&&(a+=i.kern.rval[T].vals[L])}}return a},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var h,m=o.tabs[u];if(!m.coverage||(h=e._lctf.coverageIndex(m.coverage,i[s]))!=-1){if(o.ltype==1)i[s],m.fmt==1?i[s]=i[s]+m.delta:i[s]=m.newg[h];else if(o.ltype==4)for(var d=m.vals[h],p=0;p<d.length;p++){var y=d[p],_=y.chain.length;if(!(_>l)){for(var w=!0,v=0,g=0;g<_;g++){for(;i[s+v+(1+g)]==-1;)v++;y.chain[g]!=i[s+v+(1+g)]&&(w=!1)}if(w){for(i[s]=y.nglyph,g=0;g<_+v;g++)i[s+g+1]=-1;break}}}else if(o.ltype==5&&m.fmt==2)for(var M=e._lctf.getInterval(m.cDef,i[s]),S=m.cDef[M+2],b=m.scset[S],C=0;C<b.length;C++){var T=b[C],L=T.input;if(!(L.length>l)){for(w=!0,g=0;g<L.length;g++){var P=e._lctf.getInterval(m.cDef,i[s+1+g]);if(M==-1&&m.cDef[P+2]!=L[g]){w=!1;break}}if(w){var O=T.substLookupRecords;for(p=0;p<O.length;p+=2)O[p],O[p+1]}}}else if(o.ltype==6&&m.fmt==3){if(!e.U._glsCovered(i,m.backCvg,s-m.backCvg.length)||!e.U._glsCovered(i,m.inptCvg,s)||!e.U._glsCovered(i,m.ahedCvg,s+m.inptCvg.length))continue;var D=m.lookupRec;for(C=0;C<D.length;C+=2){M=D[C];var k=a[D[C+1]];e.U._applySubs(i,s+M,k,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var h=s[u];if(h!=-1){for(var m=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,d=e.U.glyphToPath(i,h),p=0;p<d.crds.length;p+=2)a.crds.push(d.crds[p]+l),a.crds.push(d.crds[p+1]);for(o&&a.cmds.push(o),p=0;p<d.cmds.length;p++)a.cmds.push(d.cmds[p]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[h],u<s.length-1&&(l+=e.U.getPairAdjustment(i,h,m))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,h){i.cmds.push("C"),i.crds.push(s,o,a,l,u,h)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,h=s.nStems,m=s.haveWidth,d=s.width,p=s.open,y=0,_=s.x,w=s.y,v=0,g=0,M=0,S=0,b=0,C=0,T=0,L=0,P=0,O=0,D={val:0,size:0};y<i.length;){e.CFF.getCharString(i,y,D);var k=D.val;if(y+=D.size,k=="o1"||k=="o18")u.length%2!=0&&!m&&(d=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,m=!0;else if(k=="o3"||k=="o23")u.length%2!=0&&!m&&(d=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,m=!0;else if(k=="o4")u.length>1&&!m&&(d=u.shift()+a.nominalWidthX,m=!0),p&&e.U.P.closePath(l),w+=u.pop(),e.U.P.moveTo(l,_,w),p=!0;else if(k=="o5")for(;u.length>0;)_+=u.shift(),w+=u.shift(),e.U.P.lineTo(l,_,w);else if(k=="o6"||k=="o7")for(var F=u.length,B=k=="o6",W=0;W<F;W++){var H=u.shift();B?_+=H:w+=H,B=!B,e.U.P.lineTo(l,_,w)}else if(k=="o8"||k=="o24"){F=u.length;for(var X=0;X+6<=F;)v=_+u.shift(),g=w+u.shift(),M=v+u.shift(),S=g+u.shift(),_=M+u.shift(),w=S+u.shift(),e.U.P.curveTo(l,v,g,M,S,_,w),X+=6;k=="o24"&&(_+=u.shift(),w+=u.shift(),e.U.P.lineTo(l,_,w))}else{if(k=="o11")break;if(k=="o1234"||k=="o1235"||k=="o1236"||k=="o1237")k=="o1234"&&(g=w,M=(v=_+u.shift())+u.shift(),O=S=g+u.shift(),C=S,L=w,_=(T=(b=(P=M+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,v,g,M,S,P,O),e.U.P.curveTo(l,b,C,T,L,_,w)),k=="o1235"&&(v=_+u.shift(),g=w+u.shift(),M=v+u.shift(),S=g+u.shift(),P=M+u.shift(),O=S+u.shift(),b=P+u.shift(),C=O+u.shift(),T=b+u.shift(),L=C+u.shift(),_=T+u.shift(),w=L+u.shift(),u.shift(),e.U.P.curveTo(l,v,g,M,S,P,O),e.U.P.curveTo(l,b,C,T,L,_,w)),k=="o1236"&&(v=_+u.shift(),g=w+u.shift(),M=v+u.shift(),O=S=g+u.shift(),C=S,T=(b=(P=M+u.shift())+u.shift())+u.shift(),L=C+u.shift(),_=T+u.shift(),e.U.P.curveTo(l,v,g,M,S,P,O),e.U.P.curveTo(l,b,C,T,L,_,w)),k=="o1237"&&(v=_+u.shift(),g=w+u.shift(),M=v+u.shift(),S=g+u.shift(),P=M+u.shift(),O=S+u.shift(),b=P+u.shift(),C=O+u.shift(),T=b+u.shift(),L=C+u.shift(),Math.abs(T-_)>Math.abs(L-w)?_=T+u.shift():w=L+u.shift(),e.U.P.curveTo(l,v,g,M,S,P,O),e.U.P.curveTo(l,b,C,T,L,_,w));else if(k=="o14"){if(u.length>0&&!m&&(d=u.shift()+o.nominalWidthX,m=!0),u.length==4){var ue=u.shift(),Me=u.shift(),Ae=u.shift(),V=u.shift(),te=e.CFF.glyphBySE(o,Ae),q=e.CFF.glyphBySE(o,V);e.U._drawCFF(o.CharStrings[te],s,o,a,l),s.x=ue,s.y=Me,e.U._drawCFF(o.CharStrings[q],s,o,a,l)}p&&(e.U.P.closePath(l),p=!1)}else if(k=="o19"||k=="o20")u.length%2!=0&&!m&&(d=u.shift()+a.nominalWidthX),h+=u.length>>1,u.length=0,m=!0,y+=h+7>>3;else if(k=="o21")u.length>2&&!m&&(d=u.shift()+a.nominalWidthX,m=!0),w+=u.pop(),_+=u.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,_,w),p=!0;else if(k=="o22")u.length>1&&!m&&(d=u.shift()+a.nominalWidthX,m=!0),_+=u.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,_,w),p=!0;else if(k=="o25"){for(;u.length>6;)_+=u.shift(),w+=u.shift(),e.U.P.lineTo(l,_,w);v=_+u.shift(),g=w+u.shift(),M=v+u.shift(),S=g+u.shift(),_=M+u.shift(),w=S+u.shift(),e.U.P.curveTo(l,v,g,M,S,_,w)}else if(k=="o26")for(u.length%2&&(_+=u.shift());u.length>0;)v=_,g=w+u.shift(),_=M=v+u.shift(),w=(S=g+u.shift())+u.shift(),e.U.P.curveTo(l,v,g,M,S,_,w);else if(k=="o27")for(u.length%2&&(w+=u.shift());u.length>0;)g=w,M=(v=_+u.shift())+u.shift(),S=g+u.shift(),_=M+u.shift(),w=S,e.U.P.curveTo(l,v,g,M,S,_,w);else if(k=="o10"||k=="o29"){var re=k=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var ye=u.pop(),$=re.Subrs[ye+re.Bias];s.x=_,s.y=w,s.nStems=h,s.haveWidth=m,s.width=d,s.open=p,e.U._drawCFF($,s,o,a,l),_=s.x,w=s.y,h=s.nStems,m=s.haveWidth,d=s.width,p=s.open}}else if(k=="o30"||k=="o31"){var Te=u.length,Le=(X=0,k=="o31");for(X+=Te-(F=-3&Te);X<F;)Le?(g=w,M=(v=_+u.shift())+u.shift(),w=(S=g+u.shift())+u.shift(),F-X==5?(_=M+u.shift(),X++):_=M,Le=!1):(v=_,g=w+u.shift(),M=v+u.shift(),S=g+u.shift(),_=M+u.shift(),F-X==5?(w=S+u.shift(),X++):w=S,Le=!0),e.U.P.curveTo(l,v,g,M,S,_,w),X+=4}else{if((k+"").charAt(0)=="o")throw console.debug("Unknown operation: "+k,i),k;u.push(k)}}}s.x=_,s.y=w,s.nStems=h,s.haveWidth=m,s.width=d,s.open=p};var t=e,r={Typr:t};return n.Typr=t,n.default=r,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function VB(){return function(n){var e=Uint8Array,t=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(k,F){for(var B=new t(31),W=0;W<31;++W)B[W]=F+=1<<k[W-1];var H=new r(B[30]);for(W=1;W<30;++W)for(var X=B[W];X<B[W+1];++X)H[X]=X-B[W]<<5|W;return[B,H]},l=a(i,2),u=l[0],h=l[1];u[28]=258,h[258]=28;for(var m=a(s,0)[0],d=new t(32768),p=0;p<32768;++p){var y=(43690&p)>>>1|(21845&p)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,d[p]=((65280&y)>>>8|(255&y)<<8)>>>1}var _=function(k,F,B){for(var W=k.length,H=0,X=new t(F);H<W;++H)++X[k[H]-1];var ue,Me=new t(F);for(H=0;H<F;++H)Me[H]=Me[H-1]+X[H-1]<<1;if(B){ue=new t(1<<F);var Ae=15-F;for(H=0;H<W;++H)if(k[H])for(var V=H<<4|k[H],te=F-k[H],q=Me[k[H]-1]++<<te,re=q|(1<<te)-1;q<=re;++q)ue[d[q]>>>Ae]=V}else for(ue=new t(W),H=0;H<W;++H)k[H]&&(ue[H]=d[Me[k[H]-1]++]>>>15-k[H]);return ue},w=new e(288);for(p=0;p<144;++p)w[p]=8;for(p=144;p<256;++p)w[p]=9;for(p=256;p<280;++p)w[p]=7;for(p=280;p<288;++p)w[p]=8;var v=new e(32);for(p=0;p<32;++p)v[p]=5;var g=_(w,9,1),M=_(v,5,1),S=function(k){for(var F=k[0],B=1;B<k.length;++B)k[B]>F&&(F=k[B]);return F},b=function(k,F,B){var W=F/8|0;return(k[W]|k[W+1]<<8)>>(7&F)&B},C=function(k,F){var B=F/8|0;return(k[B]|k[B+1]<<8|k[B+2]<<16)>>(7&F)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(k,F,B){var W=new Error(F||T[k]);if(W.code=k,Error.captureStackTrace&&Error.captureStackTrace(W,L),!B)throw W;return W},P=function(k,F,B){var W=k.length;if(!W||B&&!B.l&&W<5)return F||new e(0);var H=!F||B,X=!B||B.i;B||(B={}),F||(F=new e(3*W));var ue,Me=function(Xe){var nt=F.length;if(Xe>nt){var ut=new e(Math.max(2*nt,Xe));ut.set(F),F=ut}},Ae=B.f||0,V=B.p||0,te=B.b||0,q=B.l,re=B.d,ye=B.m,$=B.n,Te=8*W;do{if(!q){B.f=Ae=b(k,V,1);var Le=b(k,V+1,3);if(V+=3,!Le){var Ee=k[(ae=((ue=V)/8|0)+(7&ue&&1)+4)-4]|k[ae-3]<<8,Re=ae+Ee;if(Re>W){X&&L(0);break}H&&Me(te+Ee),F.set(k.subarray(ae,Re),te),B.b=te+=Ee,B.p=V=8*Re;continue}if(Le==1)q=g,re=M,ye=9,$=5;else if(Le==2){var Ce=b(k,V,31)+257,ce=b(k,V+10,15)+4,xe=Ce+b(k,V+5,31)+1;V+=14;for(var _e=new e(xe),Pe=new e(19),be=0;be<ce;++be)Pe[o[be]]=b(k,V+3*be,7);V+=3*ce;var G=S(Pe),I=(1<<G)-1,Q=_(Pe,G,1);for(be=0;be<xe;){var ae,Z=Q[b(k,V,I)];if(V+=15&Z,(ae=Z>>>4)<16)_e[be++]=ae;else{var fe=0,le=0;for(ae==16?(le=3+b(k,V,3),V+=2,fe=_e[be-1]):ae==17?(le=3+b(k,V,7),V+=3):ae==18&&(le=11+b(k,V,127),V+=7);le--;)_e[be++]=fe}}var se=_e.subarray(0,Ce),pe=_e.subarray(Ce);ye=S(se),$=S(pe),q=_(se,ye,1),re=_(pe,$,1)}else L(1);if(V>Te){X&&L(0);break}}H&&Me(te+131072);for(var ve=(1<<ye)-1,j=(1<<$)-1,K=V;;K=V){var ie=(fe=q[C(k,V)&ve])>>>4;if((V+=15&fe)>Te){X&&L(0);break}if(fe||L(2),ie<256)F[te++]=ie;else{if(ie==256){K=V,q=null;break}var De=ie-254;if(ie>264){var Ie=i[be=ie-257];De=b(k,V,(1<<Ie)-1)+u[be],V+=Ie}var We=re[C(k,V)&j],ft=We>>>4;if(We||L(3),V+=15&We,pe=m[ft],ft>3&&(Ie=s[ft],pe+=C(k,V)&(1<<Ie)-1,V+=Ie),V>Te){X&&L(0);break}H&&Me(te+131072);for(var je=te+De;te<je;te+=4)F[te]=F[te-pe],F[te+1]=F[te+1-pe],F[te+2]=F[te+2-pe],F[te+3]=F[te+3-pe];te=je}}B.l=q,B.p=K,B.b=te,q&&(Ae=1,B.m=ye,B.d=re,B.n=$)}while(!Ae);return te==F.length?F:function(Xe,nt,ut){(nt==null||nt<0)&&(nt=0),(ut==null||ut>Xe.length)&&(ut=Xe.length);var Ft=new(Xe instanceof t?t:Xe instanceof r?r:e)(ut-nt);return Ft.set(Xe.subarray(nt,ut)),Ft}(F,0,te)},O=new e(0),D=typeof TextDecoder!="undefined"&&new TextDecoder;try{D.decode(O,{stream:!0})}catch{}return n.convert_streams=function(k){var F=new DataView(k),B=0;function W(){var Ce=F.getUint16(B);return B+=2,Ce}function H(){var Ce=F.getUint32(B);return B+=4,Ce}function X(Ce){Ee.setUint16(Re,Ce),Re+=2}function ue(Ce){Ee.setUint32(Re,Ce),Re+=4}for(var Me={signature:H(),flavor:H(),length:H(),numTables:W(),reserved:W(),totalSfntSize:H(),majorVersion:W(),minorVersion:W(),metaOffset:H(),metaLength:H(),metaOrigLength:H(),privOffset:H(),privLength:H()},Ae=0;Math.pow(2,Ae)<=Me.numTables;)Ae++;Ae--;for(var V=16*Math.pow(2,Ae),te=16*Me.numTables-V,q=12,re=[],ye=0;ye<Me.numTables;ye++)re.push({tag:H(),offset:H(),compLength:H(),origLength:H(),origChecksum:H()}),q+=16;var $,Te=new Uint8Array(12+16*re.length+re.reduce(function(Ce,ce){return Ce+ce.origLength+4},0)),Le=Te.buffer,Ee=new DataView(Le),Re=0;return ue(Me.flavor),X(Me.numTables),X(V),X(Ae),X(te),re.forEach(function(Ce){ue(Ce.tag),ue(Ce.origChecksum),ue(q),ue(Ce.origLength),Ce.outOffset=q,(q+=Ce.origLength)%4!=0&&(q+=4-q%4)}),re.forEach(function(Ce){var ce,xe=k.slice(Ce.offset,Ce.offset+Ce.compLength);if(Ce.compLength!=Ce.origLength){var _e=new Uint8Array(Ce.origLength);ce=new Uint8Array(xe,2),P(ce,_e)}else _e=new Uint8Array(xe);Te.set(_e,Ce.outOffset);var Pe=0;(q=Ce.outOffset+Ce.origLength)%4!=0&&(Pe=4-q%4),Te.set(new Uint8Array(Pe).buffer,Ce.outOffset+Ce.origLength),$=q+Pe}),Le.slice(0,$)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function WB(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let h;function m(S){if(!h){const b={R:s,L:i,D:o,C:l,U:u,T:a};h=new Map;for(let C in r){let T=0;r[C].split(",").forEach(L=>{let[P,O]=L.split("+");P=parseInt(P,36),O=O?parseInt(O,36):0,h.set(T+=P,b[C]);for(let D=O;D--;)h.set(++T,b[C])})}}return h.get(S)||u}const d=1,p=2,y=3,_=4,w=[null,"isol","init","fina","medi"];function v(S){const b=new Uint8Array(S.length);let C=u,T=d,L=-1;for(let P=0;P<S.length;P++){const O=S.codePointAt(P);let D=m(O)|0,k=d;D&a||(C&(i|o|l)?D&(s|o|l)?(k=y,(T===d||T===y)&&b[L]++):D&(i|u)&&(T===p||T===_)&&b[L]--:C&(s|u)&&(T===p||T===_)&&b[L]--,T=b[P]=k,C=D,L=P,O>65535&&P++)}return b}function g(S,b){const C=[];for(let L=0;L<b.length;L++){const P=b.codePointAt(L);P>65535&&L++,C.push(n.U.codeToGlyph(S,P))}const T=S.GSUB;if(T){const{lookupList:L,featureList:P}=T;let O;const D=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,k=[];P.forEach(F=>{if(D.test(F.tag))for(let B=0;B<F.tab.length;B++){if(k[F.tab[B]])continue;k[F.tab[B]]=!0;const W=L[F.tab[B]],H=/^(isol|init|fina|medi)$/.test(F.tag);H&&!O&&(O=v(b));for(let X=0;X<C.length;X++)(!O||!H||w[O[X]]===F.tag)&&n.U._applySubs(C,X,W,L)}})}return C}function M(S){const b=Object.create(null),C={unitsPerEm:S.head.unitsPerEm,ascender:S.hhea.ascender,descender:S.hhea.descender,forEachGlyph(T,L,P,O){let D=0;const k=1/C.unitsPerEm*L,F=g(S,T);let B=0,W=-1;return F.forEach((H,X)=>{if(H!==-1){let ue=b[H];if(!ue){const{cmds:Me,crds:Ae}=n.U.glyphToPath(S,H);let V="",te=0;for(let Te=0,Le=Me.length;Te<Le;Te++){const Ee=t[Me[Te]];V+=Me[Te];for(let Re=1;Re<=Ee;Re++)V+=(Re>1?",":"")+Ae[te++]}let q,re,ye,$;if(Ae.length){q=re=1/0,ye=$=-1/0;for(let Te=0,Le=Ae.length;Te<Le;Te+=2){let Ee=Ae[Te],Re=Ae[Te+1];Ee<q&&(q=Ee),Re<re&&(re=Re),Ee>ye&&(ye=Ee),Re>$&&($=Re)}}else q=ye=re=$=0;ue=b[H]={index:H,advanceWidth:S.hmtx.aWidth[H],xMin:q,yMin:re,xMax:ye,yMax:$,path:V,pathCommandCount:Me.length}}W!==-1&&(D+=n.U.getPairAdjustment(S,W,H)*k),O.call(null,ue,D,B),ue.advanceWidth&&(D+=ue.advanceWidth*k),P&&(D+=P*L),W=H}B+=T.codePointAt(B)>65535?2:1}),D}};return C}return function(b){const C=new Uint8Array(b,0,4),T=n._bin.readASCII(C,0,4);if(T==="wOFF")b=e(b);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return M(n.parse(b)[0])}}const jB=Zu({name:"Typr Font Parser",dependencies:[HB,VB,WB],init(n,e,t){const r=n(),i=e();return t(r,i)}}),il={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},XB=new ke;function Qu(){return(self.performance||Date).now()}const eC=Object.create(null);function qB(n,e){n=YB({},n);const t=Qu();if(n.font=JB(n.font||il.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||il.sdfGlyphSize,n.colorRanges!=null){let l={};for(let u in n.colorRanges)if(n.colorRanges.hasOwnProperty(u)){let h=n.colorRanges[u];typeof h!="number"&&(h=XB.set(h).getHex()),l[u]=h}n.colorRanges=l}Object.freeze(n);const{textureWidth:r,sdfExponent:i}=il,{sdfGlyphSize:s}=n;let o=`${n.font}@${s}`,a=eC[o];a||(a=eC[o]={count:0,glyphs:new Map,sdfTexture:new zo(new Uint8Array(s*r*4),r,s,Gn,void 0,void 0,void 0,void 0,Kt,Kt)},a.sdfTexture.font=n.font),KB(n).then(l=>{const{glyphIds:u,glyphPositions:h,fontSize:m,unitsPerEm:d,timings:p}=l,y=[],_=new Float32Array(u.length*4),w=m/d;let v=0,g=0;const M=Qu();u.forEach((b,C)=>{let T=a.glyphs.get(b);if(!T){const{path:D,pathBounds:k}=l.glyphData[b],F=Math.max(k[2]-k[0],k[3]-k[1])/s*(il.sdfMargin*s+.5),B=a.count++,W=[k[0]-F,k[1]-F,k[2]+F,k[3]+F];a.glyphs.set(b,T={path:D,atlasIndex:B,sdfViewBox:W}),y.push(T)}const{sdfViewBox:L}=T,P=h[g++],O=h[g++];_[v++]=P+L[0]*w,_[v++]=O+L[1]*w,_[v++]=P+L[2]*w,_[v++]=O+L[3]*w,u[C]=T.atlasIndex}),p.quads=(p.quads||0)+(Qu()-M);const S=Qu();p.sdf={},Ju.all(y.map(({path:b,atlasIndex:C,sdfViewBox:T})=>{const L=Math.max(T[2]-T[0],T[3]-T[1]);return QB(s,s,b,T,L,il.sdfExponent).then(({textureData:P,timing:O})=>(p.sdf[C]=O,{atlasIndex:C,textureData:P,timing:O}))})).then(b=>{b.length&&(b.forEach(({atlasIndex:C,textureData:T,timing:L})=>{const P=a.sdfTexture.image;for(;P.data.length<(C+1)*s*s;){const F=new Uint8Array(P.data.length*2);F.set(P.data),P.data=F,P.height*=2}const O=Math.floor(C/4),D=P.width/s,k=Math.floor(O/D)*P.width*s*4+O%D*s*4+C%4;for(let F=0;F<s;F++){const B=F*s,W=k+F*P.width*4;for(let H=0;H<s;H++)P.data[W+H*4]=T[B+H]}}),a.sdfTexture.needsUpdate=!0),p.sdfTotal=Qu()-S,p.total=Qu()-t,e(Object.freeze({parameters:n,sdfTexture:a.sdfTexture,sdfGlyphSize:s,sdfExponent:i,glyphBounds:_,glyphAtlasIndices:u,glyphColors:l.glyphColors,caretPositions:l.caretPositions,caretHeight:l.caretHeight,chunkedBounds:l.chunkedBounds,ascender:l.ascender,descender:l.descender,lineHeight:l.lineHeight,topBaseline:l.topBaseline,blockBounds:l.blockBounds,visibleBounds:l.visibleBounds,timings:l.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),l.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[C,T,L,P]=l.blockBounds;return[L-C,P-T]}}))})})}function YB(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let zm;function JB(n){return zm||(zm=typeof document=="undefined"?{}:document.createElement("a")),zm.href=n,zm.href}const ZB=Zu({name:"Typesetter",dependencies:[il,jB,zB,PB],init(n,e,t,r){const{defaultFontURL:i}=n;return t(e,r(),{defaultFontURL:i})}}),QB=function(){const n=4,e=2e3,t={};let r=0;return function(...i){const s="TroikaTextSDFGenerator_"+r++%n;let o=t[s];return o||(o=t[s]={workerModule:Zu({name:s,workerId:s,dependencies:[il,GB,BB],init(a,l,u){const{sdfExponent:h,sdfMargin:m}=a;return u(l,{sdfExponent:h,sdfMargin:m})},getTransferables(a){return[a.textureData.buffer]}}),requests:0,idleTimer:null}),o.requests++,clearTimeout(o.idleTimer),o.workerModule(...i).then(a=>(--o.requests==0&&(o.idleTimer=setTimeout(()=>{CB(s)},e)),a))}}(),KB=Zu({name:"Typesetter",dependencies:[ZB,RB],init(n,e){return function(t){const r=new e;return n.typeset(t,r.resolve),r}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),e}}),$B=(()=>{const n={};function e(l){let u=n[l];return u||(u=n[l]=new ji(1,1,l,l).translate(.5,.5,0)),u}new N;const t="aTroikaGlyphBounds",r="aTroikaGlyphIndex",i="aTroikaGlyphColor";class s extends Em{constructor(){super();this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Hi,this.boundingBox=new yr}computeBoundingSphere(){}computeBoundingBox(){}set detail(u){if(u!==this._detail){this._detail=u,(typeof u!="number"||u<1)&&(u=1);let h=e(u);["position","normal","uv"].forEach(m=>{this.attributes[m]=h.attributes[m].clone()}),this.setIndex(h.getIndex().clone())}}get detail(){return this._detail}set curveRadius(u){u!==this._curveRadius&&(this._curveRadius=u,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(u,h,m,d,p){o(this,t,u,4),o(this,r,h,1),o(this,i,p,3),this._blockBounds=m,this._chunkedBounds=d,a(this,h.length),this._updateBounds()}_updateBounds(){const u=this._blockBounds;if(u){const{curveRadius:h,boundingBox:m}=this;if(h){const{PI:d,floor:p,min:y,max:_,sin:w,cos:v}=Math,g=d/2,M=d*2,S=Math.abs(h),b=u[0]/S,C=u[2]/S,T=p((b+g)/M)!==p((C+g)/M)?-S:y(w(b)*S,w(C)*S),L=p((b-g)/M)!==p((C-g)/M)?S:_(w(b)*S,w(C)*S),P=p((b+d)/M)!==p((C+d)/M)?S*2:_(S-v(b)*S,S-v(C)*S);m.min.set(T,u[1],h<0?-P:0),m.max.set(L,u[3],h<0?0:P)}else m.min.set(u[0],u[1],0),m.max.set(u[2],u[3],0);m.getBoundingSphere(this.boundingSphere)}}applyClipRect(u){let h=this.getAttribute(r).count,m=this._chunkedBounds;if(m)for(let d=m.length;d--;){h=m[d].end;let p=m[d].rect;if(p[1]<u.w&&p[3]>u.y&&p[0]<u.z&&p[2]>u.x)break}a(this,h)}}s.prototype.setAttribute||(s.prototype.setAttribute=function(l,u){return this.attributes[l]=u,this});function o(l,u,h,m){const d=l.getAttribute(u);h?d&&d.array.length===h.length?(d.array.set(h),d.needsUpdate=!0):(l.setAttribute(u,new Go(h,m)),delete l._maxInstanceCount,l.dispose()):d&&l.deleteAttribute(u)}function a(l,u){l[l.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=u}return s})(),ez=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,tz=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,nz=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of encoding in SDFGenerator.js
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,rz=`
float aaDist = troikaGetAADist();
float distance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  distance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function iz(n){const e=_1(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Se},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ct(0,0,0,0)},uTroikaClipRect:{value:new Ct(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Se},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ke},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ln},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:ez,vertexTransform:tz,fragmentDefs:nz,fragmentColorTransform:rz,customRewriter({vertexShader:t,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(t)||(t=t.replace(JA,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const sz=(()=>{const n=new Qn({color:16777215,side:xs,transparent:!0}),e=8421504,t=new qe,r=new N,i=new N,s=[],o=new N,a="+x+y";function l(v){return Array.isArray(v)?v[0]:v}let u=()=>{const v=new Gt(new ji(1,1),n);return u=()=>v,v},h=()=>{const v=new Gt(new ji(1,1,32,1),n);return h=()=>v,v};const m={type:"syncstart"},d={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],y=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class _ extends Gt{constructor(){const g=new $B;super(g,null);this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=e,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=a,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}sync(g){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(g):(this._isSyncing=!0,this.dispatchEvent(m),qB({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},M=>{this._isSyncing=!1,this._textRenderInfo=M,this.geometry.updateGlyphs(M.glyphBounds,M.glyphAtlasIndices,M.blockBounds,M.chunkedBounds,M.glyphColors);const S=this._queuedSyncs;S&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{S.forEach(b=>b&&b())})),this.dispatchEvent(d),g&&g()})))}onBeforeRender(g,M,S,b,C,T){this.sync(),C.isTroikaTextMaterial&&this._prepareForRender(C)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let g=this._derivedMaterial;const M=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=n.clone());if((!g||g.baseMaterial!==M)&&(g=this._derivedMaterial=iz(M),M.addEventListener("dispose",function S(){M.removeEventListener("dispose",S),g.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let S=g._outlineMtl;return S||(S=g._outlineMtl=Object.create(g,{id:{value:g.id+.1}}),S.isTextOutlineMaterial=!0,S.depthWrite=!1,S.map=null,g.addEventListener("dispose",function b(){g.removeEventListener("dispose",b),S.dispose()})),[S,g]}else return g}set material(g){g&&g.isTroikaTextMaterial?(this._derivedMaterial=g,this._baseMaterial=g.baseMaterial):this._baseMaterial=g}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(g){this.geometry.detail=g}get curveRadius(){return this.geometry.curveRadius}set curveRadius(g){this.geometry.curveRadius=g}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(g){const M=g.isTextOutlineMaterial,S=g.uniforms,b=this.textRenderInfo;if(b){const{sdfTexture:L,blockBounds:P}=b;S.uTroikaSDFTexture.value=L,S.uTroikaSDFTextureSize.value.set(L.image.width,L.image.height),S.uTroikaSDFGlyphSize.value=b.sdfGlyphSize,S.uTroikaSDFExponent.value=b.sdfExponent,S.uTroikaTotalBounds.value.fromArray(P),S.uTroikaUseGlyphColors.value=!M&&!!b.glyphColors;let O=0,D=0,k=0,F,B,W,H=0,X=0;if(M){let{outlineWidth:Me,outlineOffsetX:Ae,outlineOffsetY:V,outlineBlur:te,outlineOpacity:q}=this;O=this._parsePercent(Me)||0,D=Math.max(0,this._parsePercent(te)||0),F=q,H=this._parsePercent(Ae)||0,X=this._parsePercent(V)||0}else k=Math.max(0,this._parsePercent(this.strokeWidth)||0),k&&(W=this.strokeColor,S.uTroikaStrokeColor.value.set(W==null?e:W),B=this.strokeOpacity,B==null&&(B=1)),F=this.fillOpacity;S.uTroikaDistanceOffset.value=O,S.uTroikaPositionOffset.value.set(H,X),S.uTroikaBlurRadius.value=D,S.uTroikaStrokeWidth.value=k,S.uTroikaStrokeOpacity.value=B,S.uTroikaFillOpacity.value=F==null?1:F,S.uTroikaCurveRadius.value=this.curveRadius||0;let ue=this.clipRect;if(ue&&Array.isArray(ue)&&ue.length===4)S.uTroikaClipRect.value.fromArray(ue);else{const Me=(this.fontSize||.1)*100;S.uTroikaClipRect.value.set(P[0]-Me,P[1]-Me,P[2]+Me,P[3]+Me)}this.geometry.applyClipRect(S.uTroikaClipRect.value)}S.uTroikaSDFDebug.value=!!this.debugSDF,g.polygonOffset=!!this.depthOffset,g.polygonOffsetFactor=g.polygonOffsetUnits=this.depthOffset||0;const C=M?this.outlineColor||0:this.color;if(C==null)delete g.color;else{const L=g.hasOwnProperty("color")?g.color:g.color=new ke;(C!==L._input||typeof C=="object")&&L.set(L._input=C)}let T=this.orientation||a;if(T!==g._orientation){let L=S.uTroikaOrient.value;T=T.replace(/[^-+xyz]/g,"");let P=T!==a&&T.match(/^([-+])([xyz])([-+])([xyz])$/);if(P){let[,O,D,k,F]=P;r.set(0,0,0)[D]=O==="-"?1:-1,i.set(0,0,0)[F]=k==="-"?-1:1,t.lookAt(o,r.cross(i),i),L.setFromMatrix4(t)}else L.identity();g._orientation=T}}_parsePercent(g){if(typeof g=="string"){let M=g.match(/^(-?[\d.]+)%$/),S=M?parseFloat(M[1]):NaN;g=(isNaN(S)?0:S/100)*this.fontSize}return g}localPositionToTextCoords(g,M=new Se){M.copy(g);const S=this.curveRadius;return S&&(M.x=Math.atan2(g.x,Math.abs(S)-Math.abs(g.z))*Math.abs(S)),M}worldPositionToTextCoords(g,M=new Se){return r.copy(g),this.localPositionToTextCoords(this.worldToLocal(r),M)}raycast(g,M){const{textRenderInfo:S,curveRadius:b}=this;if(S){const C=S.blockBounds,T=b?h():u(),L=T.geometry,{position:P,uv:O}=L.attributes;for(let D=0;D<O.count;D++){let k=C[0]+O.getX(D)*(C[2]-C[0]);const F=C[1]+O.getY(D)*(C[3]-C[1]);let B=0;b&&(B=b-Math.cos(k/b)*b,k=Math.sin(k/b)*b),P.setXYZ(D,k,F,B)}L.boundingSphere=this.geometry.boundingSphere,L.boundingBox=this.geometry.boundingBox,T.matrixWorld=this.matrixWorld,T.material.side=this.material.side,s.length=0,T.raycast(g,s);for(let D=0;D<s.length;D++)s[D].object=this,M.push(s[D])}}copy(g){const M=this.geometry;return super.copy(g),this.geometry=M,y.forEach(S=>{this[S]=g[S]}),this}clone(){return new this.constructor().copy(this)}}p.forEach(v=>{const g="_private_"+v;Object.defineProperty(_.prototype,v,{get(){return this[g]},set(M){M!==this[g]&&(this[g]=M,this._needsSync=!0)}})});let w=!1;return Object.defineProperty(_.prototype,"anchor",{get(){return this._deprecated_anchor},set(v){this._deprecated_anchor=v,w||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),w=!0),Array.isArray(v)?(this.anchorX=`${(+v[0]||0)*100}%`,this.anchorY=`${(+v[1]||0)*100}%`):this.anchorX=this.anchorY=0}}),_})(),J5=ge.exports.forwardRef((o,s)=>{var a=o,{anchorX:n="center",anchorY:e="middle",children:t,onSync:r}=a,i=mr(a,["anchorX","anchorY","children","onSync"]);const l=Hr(({invalidate:d})=>d),[u]=ge.exports.useState(()=>new sz),[h,m]=ge.exports.useMemo(()=>{const d=[];let p="";return ge.exports.Children.forEach(t,y=>{typeof y=="string"||typeof y=="number"?p+=y:d.push(y)}),[d,p]},[t]);return ge.exports.useLayoutEffect(()=>void u.sync(()=>{l(),r&&r(u)})),ge.exports.useEffect(()=>()=>u.dispose(),[u]),ge.exports.createElement("primitive",ba({object:u,ref:s,text:m,anchorX:n,anchorY:e},i),h)}),Z5=ge.exports.forwardRef((o,s)=>{var a=o,{selector:n,onChange:e,onLock:t,onUnlock:r}=a,i=mr(a,["selector","onChange","onLock","onUnlock"]);const _=i,{camera:l}=_,u=mr(_,["camera"]),h=Hr(({gl:w})=>w),m=Hr(({camera:w})=>w),d=Hr(({invalidate:w})=>w),p=l||m,[y]=ge.exports.useState(()=>new MB(p,h.domElement));return ge.exports.useEffect(()=>{const w=v=>{d(),e&&e(v)};return y==null||y.addEventListener==null||y.addEventListener("change",w),t&&(y==null||y.addEventListener==null||y.addEventListener("lock",t)),r&&(y==null||y.addEventListener==null||y.addEventListener("unlock",r)),()=>{y==null||y.removeEventListener==null||y.removeEventListener("change",w),t&&(y==null||y.addEventListener==null||y.addEventListener("lock",t)),r&&(y==null||y.addEventListener==null||y.addEventListener("unlock",r))}},[e,t,r,y,d]),ge.exports.useEffect(()=>{const w=()=>y==null?void 0:y.lock(),v=n?Array.from(document.querySelectorAll(n)):[document];return v.forEach(g=>g&&g.addEventListener("click",w)),()=>{v.forEach(g=>g?g.removeEventListener("click",w):void 0)}},[y,n]),y?ge.exports.createElement("primitive",ba({ref:s,dispose:void 0,object:y},u)):null});function Q5(n,e,t=1){const r=Hr(o=>o.viewport),i=e*(r.aspect>n/e?r.width/n:r.height/e);return[n*(r.aspect>n/e?r.width/n:r.height/e)*t,i*t,1]}var w1={},Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.VERSION=void 0;Gm.VERSION="0.0.5";/**
 * @package      npmjs.com/package/@yandeu/events (events.min.js)
 *
 * @author       Arnout Kazemier (https://github.com/3rd-Eden)
 * @copyright    Copyright (c) 2014 Arnout Kazemier
 * @license      {@link https://github.com/primus/eventemitter3/blob/master/LICENSE|MIT}
 *
 * @author       Yannick Deubel (https://github.com/yandeu)
 * @copyright    Copyright (c) 2021 Yannick Deubel; Project Url: https://github.com/yandeu/events
 * @license      {@link https://github.com/yandeu/events/blob/master/LICENSE|MIT}
 */var tC=Bg&&Bg.__spreadArray||function(n,e){for(var t=0,r=e.length,i=n.length;t<r;t++,i++)n[i]=e[t];return n};Object.defineProperty(w1,"__esModule",{value:!0});var nC=w1.Events=void 0,oz=Gm,az=function(){function n(e,t,r){r===void 0&&(r=!1),this.fn=e,this.context=t,this.once=r}return n}(),rC=function(n,e,t,r,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new az(t,r||n,i);return n._events.has(e)?n._events.get(e).fn?n._events.set(e,[n._events.get(e),s]):n._events.get(e).push(s):(n._events.set(e,s),n._eventsCount++),n},Hm=function(n,e){--n._eventsCount==0?n._events=new Map:n._events.delete(e)},lz=function(){function n(){this._events=new Map,this._eventsCount=0}return Object.defineProperty(n,"VERSION",{get:function(){return oz.VERSION},enumerable:!1,configurable:!0}),n.prototype.eventNames=function(){return Array.from(this._events.keys())},n.prototype.listeners=function(e){var t=this._events.get(e);if(!t)return[];if(t.fn)return[t.fn];for(var r=0,i=t.length,s=new Array(i);r<i;r++)s[r]=t[r].fn;return s},n.prototype.listenerCount=function(e){var t=this._events.get(e);return t?t.fn?1:t.length:0},n.prototype.emit=function(e){for(var t,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(!this._events.has(e))return!1;var o=this._events.get(e),a;if(o.fn)return o.once&&this.removeListener(e,o.fn,void 0,!0),(t=o.fn).call.apply(t,tC([o.context],i)),!0;var l=o.length;for(a=0;a<l;a++)o[a].once&&this.removeListener(e,o[a].fn,void 0,!0),(r=o[a].fn).call.apply(r,tC([o[a].context],i));return!0},n.prototype.on=function(e,t,r){return rC(this,e,t,r,!1)},n.prototype.once=function(e,t,r){return rC(this,e,t,r,!0)},n.prototype.removeListener=function(e,t,r,i){if(!this._events.has(e))return this;if(!t)return Hm(this,e),this;var s=this._events.get(e);if(s.fn)s.fn===t&&(!i||s.once)&&(!r||s.context===r)&&Hm(this,e);else{for(var o=0,a=[],l=s.length;o<l;o++)(s[o].fn!==t||i&&!s[o].once||r&&s[o].context!==r)&&a.push(s[o]);a.length?this._events.set(e,a.length===1?a[0]:a):Hm(this,e)}return this},n.prototype.removeAllListeners=function(e){return e?this._events.delete(e)&&Hm(this,e):(this._events=new Map,this._eventsCount=0),this},Object.defineProperty(n.prototype,"off",{get:function(){return this.removeListener},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"addListener",{get:function(){return this.on},enumerable:!1,configurable:!0}),n}();nC=w1.Events=lz;class iC{constructor(){this.eventEmitter=new nC}emit(e,t,r={}){this.eventEmitter.emit(e,t,r)}on(e,t){return this.eventEmitter.on(e,(r,i)=>{t(r,i)})}removeAllListeners(){this.eventEmitter.removeAllListeners()}}new iC;const Us={CONNECT:"connect",CONNECTION:"connection",DATA_CHANNEL_IS_OPEN:"dataChannelIsOpen",DISCONNECT:"disconnect",DISCONNECTED:"disconnected",DROP:"dropped",ERROR:"error",RAW_MESSAGE:"rawMessage",RECEIVED_FROM_DATA_CHANNEL:"receiveFromDataChannel",SEND_OVER_DATA_CHANNEL:"sendOverDataChannel"},sC={BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED",COULD_NOT_PARSE_MESSAGE:"COULD_NOT_PARSE_MESSAGE",DROPPED_FROM_BUFFERING:"DROPPED_FROM_BUFFERING",MAX_MESSAGE_SIZE_EXCEEDED:"MAX_MESSAGE_SIZE_EXCEEDED"},uz=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)).constructor;typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());const oC=n=>typeof n=="string",S1=n=>n instanceof ArrayBuffer||n instanceof uz,cz=n=>{try{return typeof n!="string"||!isNaN(parseInt(n))?!1:(JSON.parse(n),!0)}catch{return!1}},fz=n=>{let{data:e}=n;e||(e=n);const t=S1(e),r=cz(e),i=oC(e);if(r){const s=JSON.parse(e),o=Object.keys(s)[0],a=s[o];return{key:o,data:a}}return t?{key:Us.RAW_MESSAGE,data:e}:i?{key:Us.RAW_MESSAGE,data:e}:{key:"error",data:new Error(sC.COULD_NOT_PARSE_MESSAGE)}},dz=(n,e,t,r=null)=>{var i;const s=(o,a)=>{var l;const u=(l=o.byteLength)!==null&&l!==void 0?l:o.length*2;if(typeof e=="number"&&u>e)throw new Error(`maxMessageSize of ${e} exceeded`);Promise.resolve().then(()=>{n.send?n.send(o):a?n.sendMessageBinary(Buffer.from(o)):n.sendMessage(o)}).catch(h=>{console.log("error",h)})};if(!!n&&(n.readyState==="open"||((i=n.isOpen)===null||i===void 0?void 0:i.call(n))))try{t===Us.RAW_MESSAGE&&r!==null&&(oC(r)||S1(r))?s(r,S1(r)):s(JSON.stringify({[t]:r}),!1)}catch(o){return console.error("Error in sendMessage.ts: ",o.message),o}};class hz{constructor(e,t,r,i){this.url=e,this.authorization=t,this.label=r,this.rtcConfiguration=i,this.bridge=new iC,this.onDataChannel=s=>{const{channel:o}=s;o.label===this.label&&(this.dataChannel=o,this.dataChannel.binaryType="arraybuffer",this.dataChannel.onmessage=a=>{const{key:l,data:u}=fz(a);this.bridge.emit(l,u)})}}emit(e,t=null){dz(this.dataChannel,this.maxMessageSize,e,t)}async fetchAdditionalCandidates(e,t){const r=await fetch(`${e}/connections/${t}/additional-candidates`,{method:"GET",headers:{"Content-Type":"application/json"}});r.ok&&(await r.json()).forEach(s=>{this.localPeerConnection.addIceCandidate(s)})}async connect(){const e=`${this.url}/.wrtc/v2`;let t={"Content-Type":"application/json"};this.authorization&&(t=Dn(ht({},t),{Authorization:this.authorization}));let r={};try{const u=await fetch(`${e}/connections`,{method:"POST",headers:t});if(u.status>=300)throw{name:"Error",message:`Connection failed with status code ${u.status}.`,status:u.status,statusText:u.statusText};const h=await u.json();r=h.userData,this.remotePeerConnection=h}catch(u){return console.error(u.message),{error:u}}const{id:i,localDescription:s}=this.remotePeerConnection,o=ht({sdpSemantics:"unified-plan"},this.rtcConfiguration),a=RTCPeerConnection||webkitRTCPeerConnection;this.localPeerConnection=new a(o),((u=10,h=50,m=1.8,d=20)=>Array(u).fill(0).map((p,y)=>parseInt((h*m**y).toString())+parseInt((Math.random()*d).toString())))().forEach(u=>{setTimeout(()=>{this.fetchAdditionalCandidates(e,i).catch(()=>{})},u)});try{await this.localPeerConnection.setRemoteDescription(s),this.localPeerConnection.addEventListener("datachannel",this.onDataChannel,{once:!0});const u=await this.localPeerConnection.createAnswer(),h=new RTCSessionDescription({type:"answer",sdp:u.sdp});await this.localPeerConnection.setLocalDescription(h);try{await fetch(`${e}/connections/${i}/remote-description`,{method:"POST",body:JSON.stringify(this.localPeerConnection.localDescription),headers:{"Content-Type":"application/json"}})}catch(d){return console.error(d.message),{error:d}}const m=()=>new Promise(d=>{this.localPeerConnection.addEventListener("datachannel",()=>{d()},{once:!0})});return this.dataChannel||await m(),{userData:r,localPeerConnection:this.localPeerConnection,dataChannel:this.dataChannel,id:i}}catch(u){return console.error(u.message),this.localPeerConnection.close(),{error:u}}}}class pz{async connect(e){if(RTCPeerConnection||webkitRTCPeerConnection){const{localPeerConnection:r,dataChannel:i,id:s,userData:o,error:a}=await e.connect();return a?{error:a}:!r||!i||!s||!o?{error:new Error('Something went wrong in "await connectionsManager.connect()"')}:(this.localPeerConnection=r,this.dataChannel=i,this.id=s,{userData:o})}else{const r=new Error(sC.BROWSER_NOT_SUPPORTED);return console.error(r.message),{error:r}}}}const mz=(n=24)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},gz=(n=200,e=1,t)=>{let r=0;if(typeof t!="function"){console.error("You have to define your callback function!");return}const i=setInterval(()=>{t(),r++,r===e-1&&clearInterval(i)},n);t()},vz=(n,e)=>{const{interval:t=150,runs:r=10}=n,i=mz(24);gz(t,r,()=>{e(i)})};class yz{constructor(e,t,r,i,s){this.userData={},this.receivedReliableMessages=[],this.url=r?`${e}:${r}`:e,this.connectionsManager=new hz(this.url,t,i,s),this.bridge=this.connectionsManager.bridge,this.bridge.on(Us.DISCONNECTED,()=>this.bridge.removeAllListeners())}onconnectionstatechange(){const e=this.peerConnection.localPeerConnection;e.onconnectionstatechange=()=>{(e.connectionState==="disconnected"||e.connectionState==="closed")&&this.bridge.emit(Us.DISCONNECTED)}}get id(){return this.peerConnection.id}close(){this.peerConnection.localPeerConnection.close(),this.bridge.emit(Us.DISCONNECTED);try{const e=`${this.url}/.wrtc/v2`;fetch(`${e}/connections/${this.id}/close`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(e){console.error(e.message)}}emit(e,t=null,r){r&&r.reliable?vz(r,i=>this.connectionsManager.emit(e,{MESSAGE:t,RELIABLE:1,ID:i})):this.connectionsManager.emit(e,t)}get raw(){return{emit:e=>this.emit(Us.RAW_MESSAGE,e)}}onRaw(e){this.bridge.on(Us.RAW_MESSAGE,t=>{(i=>e(i))(t)})}async onConnect(e){var t;this.peerConnection=new pz;const r=await this.peerConnection.connect(this.connectionsManager);r.error?e(r.error):(r.userData&&(this.userData=r.userData),this.maxMessageSize=this.connectionsManager.maxMessageSize=(t=this.peerConnection.localPeerConnection.sctp)===null||t===void 0?void 0:t.maxMessageSize,this.onconnectionstatechange(),e())}onDisconnect(e){this.bridge.on(Us.DISCONNECTED,e)}on(e,t){this.bridge.on(e,r=>{const i=r&&r.RELIABLE===1&&r.ID!=="undefined",s=15e3;i?((()=>{const a=new Date().getTime();this.receivedReliableMessages.forEach((l,u,h)=>{l.expire<=a&&h.splice(u,1)})})(),this.receivedReliableMessages.filter(a=>a.id===r.ID).length===0&&(this.receivedReliableMessages.push({id:r.ID,timestamp:new Date,expire:new Date().getTime()+s}),t(r.MESSAGE))):t(r)})}}const K5=(n={})=>{const{authorization:e=void 0,iceServers:t=[],iceTransportPolicy:r="all",label:i="geckos.io",port:s=9208,url:o=`${location.protocol}//${location.hostname}`}=n;return new yz(o,e,s,i,{iceServers:t,iceTransportPolicy:r})};var Ge={},M1={exports:{}};(function(n,e){(function(t,r){var i="0.7.31",s="",o="?",a="function",l="undefined",u="object",h="string",m="major",d="model",p="name",y="type",_="vendor",w="version",v="architecture",g="console",M="mobile",S="tablet",b="smarttv",C="wearable",T="embedded",L=255,P="Amazon",O="Apple",D="ASUS",k="BlackBerry",F="Browser",B="Chrome",W="Edge",H="Firefox",X="Google",ue="Huawei",Me="LG",Ae="Microsoft",V="Motorola",te="Opera",q="Samsung",re="Sony",ye="Xiaomi",$="Zebra",Te="Facebook",Le=function(fe,le){var se={};for(var pe in fe)le[pe]&&le[pe].length%2==0?se[pe]=le[pe].concat(fe[pe]):se[pe]=fe[pe];return se},Ee=function(fe){for(var le={},se=0;se<fe.length;se++)le[fe[se].toUpperCase()]=fe[se];return le},Re=function(fe,le){return typeof fe===h?Ce(le).indexOf(Ce(fe))!==-1:!1},Ce=function(fe){return fe.toLowerCase()},ce=function(fe){return typeof fe===h?fe.replace(/[^\d\.]/g,s).split(".")[0]:r},xe=function(fe,le){if(typeof fe===h)return fe=fe.replace(/^\s\s*/,s).replace(/\s\s*$/,s),typeof le===l?fe:fe.substring(0,L)},_e=function(fe,le){for(var se=0,pe,ve,j,K,ie,De;se<le.length&&!ie;){var Ie=le[se],We=le[se+1];for(pe=ve=0;pe<Ie.length&&!ie;)if(ie=Ie[pe++].exec(fe),ie)for(j=0;j<We.length;j++)De=ie[++ve],K=We[j],typeof K===u&&K.length>0?K.length===2?typeof K[1]==a?this[K[0]]=K[1].call(this,De):this[K[0]]=K[1]:K.length===3?typeof K[1]===a&&!(K[1].exec&&K[1].test)?this[K[0]]=De?K[1].call(this,De,K[2]):r:this[K[0]]=De?De.replace(K[1],K[2]):r:K.length===4&&(this[K[0]]=De?K[3].call(this,De.replace(K[1],K[2])):r):this[K]=De||r;se+=2}},Pe=function(fe,le){for(var se in le)if(typeof le[se]===u&&le[se].length>0){for(var pe=0;pe<le[se].length;pe++)if(Re(le[se][pe],fe))return se===o?r:se}else if(Re(le[se],fe))return se===o?r:se;return fe},be={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},I={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,w],[/opios[\/ ]+([\w\.]+)/i],[w,[p,te+" Mini"]],[/\bopr\/([\w\.]+)/i],[w,[p,te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,w],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[p,"UC"+F]],[/\bqbcore\/([\w\.]+)/i],[w,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[w,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+F],w],[/\bfocus\/([\w\.]+)/i],[w,[p,H+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[p,te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[p,te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[p,"MIUI "+F]],[/fxios\/([-\w\.]+)/i],[w,[p,H]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+F]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+F],w],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,w],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,Te],w],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[p,B+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,B+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[p,"Android "+F]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,w],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[w,[p,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[w,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[w,Pe,be]],[/(webkit|khtml)\/([\w\.]+)/i],[p,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[p,H+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,Ce]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,s,Ce]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,Ce]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[_,q],[y,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[_,q],[y,M]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[_,O],[y,M]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[_,O],[y,S]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[_,ue],[y,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[d,[_,ue],[y,M]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[_,ye],[y,M]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[_,ye],[y,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[_,"OPPO"],[y,M]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[_,"Vivo"],[y,M]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[_,"Realme"],[y,M]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[_,V],[y,M]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[_,V],[y,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[_,Me],[y,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[_,Me],[y,M]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[_,"Lenovo"],[y,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[_,"Nokia"],[y,M]],[/(pixel c)\b/i],[d,[_,X],[y,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[_,X],[y,M]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[_,re],[y,M]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[_,re],[y,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[_,"OnePlus"],[y,M]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[_,P],[y,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[_,P],[y,M]],[/(playbook);[-\w\),; ]+(rim)/i],[d,_,[y,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[_,k],[y,M]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[_,D],[y,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[_,D],[y,M]],[/(nexus 9)/i],[d,[_,"HTC"],[y,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[_,[d,/_/g," "],[y,M]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[_,"Acer"],[y,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[_,"Meizu"],[y,M]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[_,"Sharp"],[y,M]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,d,[y,M]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,d,[y,S]],[/(surface duo)/i],[d,[_,Ae],[y,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[_,"Fairphone"],[y,M]],[/(u304aa)/i],[d,[_,"AT&T"],[y,M]],[/\bsie-(\w*)/i],[d,[_,"Siemens"],[y,M]],[/\b(rct\w+) b/i],[d,[_,"RCA"],[y,S]],[/\b(venue[\d ]{2,7}) b/i],[d,[_,"Dell"],[y,S]],[/\b(q(?:mv|ta)\w+) b/i],[d,[_,"Verizon"],[y,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[_,"Barnes & Noble"],[y,S]],[/\b(tm\d{3}\w+) b/i],[d,[_,"NuVision"],[y,S]],[/\b(k88) b/i],[d,[_,"ZTE"],[y,S]],[/\b(nx\d{3}j) b/i],[d,[_,"ZTE"],[y,M]],[/\b(gen\d{3}) b.+49h/i],[d,[_,"Swiss"],[y,M]],[/\b(zur\d{3}) b/i],[d,[_,"Swiss"],[y,S]],[/\b((zeki)?tb.*\b) b/i],[d,[_,"Zeki"],[y,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],d,[y,S]],[/\b(ns-?\w{0,9}) b/i],[d,[_,"Insignia"],[y,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[_,"NextBook"],[y,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],d,[y,M]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],d,[y,M]],[/\b(ph-1) /i],[d,[_,"Essential"],[y,M]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[_,"Envizen"],[y,S]],[/\b(trio[-\w\. ]+) b/i],[d,[_,"MachSpeed"],[y,S]],[/\btu_(1491) b/i],[d,[_,"Rotor"],[y,S]],[/(shield[\w ]+) b/i],[d,[_,"Nvidia"],[y,S]],[/(sprint) (\w+)/i],[_,d,[y,M]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[_,Ae],[y,M]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[_,$],[y,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[_,$],[y,M]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,d,[y,g]],[/droid.+; (shield) bui/i],[d,[_,"Nvidia"],[y,g]],[/(playstation [345portablevi]+)/i],[d,[_,re],[y,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[_,Ae],[y,g]],[/smart-tv.+(samsung)/i],[_,[y,b]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[_,q],[y,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,Me],[y,b]],[/(apple) ?tv/i],[_,[d,O+" TV"],[y,b]],[/crkey/i],[[d,B+"cast"],[_,X],[y,b]],[/droid.+aft(\w)( bui|\))/i],[d,[_,P],[y,b]],[/\(dtv[\);].+(aquos)/i],[d,[_,"Sharp"],[y,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[_,xe],[d,xe],[y,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,b]],[/((pebble))app/i],[_,d,[y,C]],[/droid.+; (glass) \d/i],[d,[_,X],[y,C]],[/droid.+; (wt63?0{2,3})\)/i],[d,[_,$],[y,C]],[/(quest( 2)?)/i],[d,[_,Te],[y,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[y,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[y,M]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[y,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,S]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[y,M]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[p,W+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,w],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[w,Pe,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[w,Pe,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[w,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,w],[/\(bb(10);/i],[w,[p,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[p,H+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[w,[p,B+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],w],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,w],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,w]]},Q=function(fe,le){if(typeof fe===u&&(le=fe,fe=r),!(this instanceof Q))return new Q(fe,le).getResult();var se=fe||(typeof t!==l&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),pe=le?Le(I,le):I;return this.getBrowser=function(){var ve={};return ve[p]=r,ve[w]=r,_e.call(ve,se,pe.browser),ve.major=ce(ve.version),ve},this.getCPU=function(){var ve={};return ve[v]=r,_e.call(ve,se,pe.cpu),ve},this.getDevice=function(){var ve={};return ve[_]=r,ve[d]=r,ve[y]=r,_e.call(ve,se,pe.device),ve},this.getEngine=function(){var ve={};return ve[p]=r,ve[w]=r,_e.call(ve,se,pe.engine),ve},this.getOS=function(){var ve={};return ve[p]=r,ve[w]=r,_e.call(ve,se,pe.os),ve},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return se},this.setUA=function(ve){return se=typeof ve===h&&ve.length>L?xe(ve,L):ve,this},this.setUA(se),this};Q.VERSION=i,Q.BROWSER=Ee([p,w,m]),Q.CPU=Ee([v]),Q.DEVICE=Ee([d,_,y,g,M,b,S,C,T]),Q.ENGINE=Q.OS=Ee([p,w]),n.exports&&(e=n.exports=Q),e.UAParser=Q;var ae=typeof t!==l&&(t.jQuery||t.Zepto);if(ae&&!ae.ua){var Z=new Q;ae.ua=Z.getResult(),ae.ua.get=function(){return Z.getUA()},ae.ua.set=function(fe){Z.setUA(fe);var le=Z.getResult();for(var se in le)ae.ua[se]=le[se]}}})(typeof window=="object"?window:Bg)})(M1,M1.exports);Object.defineProperty(Ge,"__esModule",{value:!0});function xz(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var lr=ge.exports,Ht=xz(lr),aC=M1.exports,Ko=new aC,ur=Ko.getBrowser(),_z=Ko.getCPU(),Vr=Ko.getDevice(),E1=Ko.getEngine(),$o=Ko.getOS(),Td=Ko.getUA(),lC=function(e){return Ko.setUA(e)},bd=function(e){if(!e){console.error("No userAgent string was provided");return}var t=new aC(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(i){return t.setUA(i)}}},uC=Object.freeze({ClientUAInstance:Ko,browser:ur,cpu:_z,device:Vr,engine:E1,os:$o,ua:Td,setUa:lC,parseUserAgent:bd});function cC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wz(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cC(Object(t),!0).forEach(function(r){Ez(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cC(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ad(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ad=function(e){return typeof e}:Ad=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(n)}function Sz(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fC(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Mz(n,e,t){return e&&fC(n.prototype,e),t&&fC(n,t),n}function Ez(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T1(){return T1=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},T1.apply(this,arguments)}function Tz(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&A1(n,e)}function b1(n){return b1=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b1(n)}function A1(n,e){return A1=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},A1(n,e)}function bz(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ni(n,e){if(n==null)return{};var t=bz(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}function Vm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Az(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vm(n)}function Cz(n,e){return Lz(n)||Rz(n,e)||Pz(n,e)||Iz()}function Lz(n){if(Array.isArray(n))return n}function Rz(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function Pz(n,e){if(!!n){if(typeof n=="string")return dC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dC(n,e)}}function dC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Iz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cr={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},Rr={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},Ku={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},Dz={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},Fz=function(e){switch(e){case cr.Mobile:return{isMobile:!0};case cr.Tablet:return{isTablet:!0};case cr.SmartTv:return{isSmartTV:!0};case cr.Console:return{isConsole:!0};case cr.Wearable:return{isWearable:!0};case cr.Browser:return{isBrowser:!0};case cr.Embedded:return{isEmbedded:!0};default:return Dz}},kz=function(e){return lC(e)},st=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||t},C1=function(){return typeof window!="undefined"&&(window.navigator||navigator)?window.navigator||navigator:!1},L1=function(e){var t=C1();return t&&t.platform&&(t.platform.indexOf(e)!==-1||t.platform==="MacIntel"&&t.maxTouchPoints>1&&!window.MSStream)},Nz=function(e,t,r,i,s){return{isBrowser:e,browserMajorVersion:st(t.major),browserFullVersion:st(t.version),browserName:st(t.name),engineName:st(r.name),engineVersion:st(r.version),osName:st(i.name),osVersion:st(i.version),userAgent:st(s)}},hC=function(e,t,r,i){return wz({},e,{vendor:st(t.vendor),model:st(t.model),os:st(r.name),osVersion:st(r.version),ua:st(i)})},Oz=function(e,t,r,i){return{isSmartTV:e,engineName:st(t.name),engineVersion:st(t.version),osName:st(r.name),osVersion:st(r.version),userAgent:st(i)}},Uz=function(e,t,r,i){return{isConsole:e,engineName:st(t.name),engineVersion:st(t.version),osName:st(r.name),osVersion:st(r.version),userAgent:st(i)}},Bz=function(e,t,r,i){return{isWearable:e,engineName:st(t.name),engineVersion:st(t.version),osName:st(r.name),osVersion:st(r.version),userAgent:st(i)}},zz=function(e,t,r,i,s){return{isEmbedded:e,vendor:st(t.vendor),model:st(t.model),engineName:st(r.name),engineVersion:st(r.version),osName:st(i.name),osVersion:st(i.version),userAgent:st(s)}};function Gz(n){var e=n?bd(n):uC,t=e.device,r=e.browser,i=e.engine,s=e.os,o=e.ua,a=Fz(t.type),l=a.isBrowser,u=a.isMobile,h=a.isTablet,m=a.isSmartTV,d=a.isConsole,p=a.isWearable,y=a.isEmbedded;if(l)return Nz(l,r,i,s,o);if(m)return Oz(m,i,s,o);if(d)return Uz(d,i,s,o);if(u||h)return hC(a,t,s,o);if(p)return Bz(p,i,s,o);if(y)return zz(y,t,i,s,o)}var pC=function(e){var t=e.type;return t===cr.Mobile},mC=function(e){var t=e.type;return t===cr.Tablet},gC=function(e){var t=e.type;return t===cr.Mobile||t===cr.Tablet},vC=function(e){var t=e.type;return t===cr.SmartTv},Wm=function(e){var t=e.type;return t===cr.Browser},yC=function(e){var t=e.type;return t===cr.Wearable},xC=function(e){var t=e.type;return t===cr.Console},_C=function(e){var t=e.type;return t===cr.Embedded},wC=function(e){var t=e.vendor;return st(t)},SC=function(e){var t=e.model;return st(t)},MC=function(e){var t=e.type;return st(t,"browser")},EC=function(e){var t=e.name;return t===Ku.Android},TC=function(e){var t=e.name;return t===Ku.Windows},bC=function(e){var t=e.name;return t===Ku.MAC_OS},AC=function(e){var t=e.name;return t===Ku.WindowsPhone},CC=function(e){var t=e.name;return t===Ku.IOS},LC=function(e){var t=e.version;return st(t)},RC=function(e){var t=e.name;return st(t)},PC=function(e){var t=e.name;return t===Rr.Chrome},IC=function(e){var t=e.name;return t===Rr.Firefox},DC=function(e){var t=e.name;return t===Rr.Chromium},jm=function(e){var t=e.name;return t===Rr.Edge},FC=function(e){var t=e.name;return t===Rr.Yandex},kC=function(e){var t=e.name;return t===Rr.Safari||t===Rr.MobileSafari},NC=function(e){var t=e.name;return t===Rr.MobileSafari},OC=function(e){var t=e.name;return t===Rr.Opera},UC=function(e){var t=e.name;return t===Rr.InternetExplorer||t===Rr.Ie},BC=function(e){var t=e.name;return t===Rr.MIUI},zC=function(e){var t=e.name;return t===Rr.SamsungBrowser},GC=function(e){var t=e.version;return st(t)},HC=function(e){var t=e.major;return st(t)},VC=function(e){var t=e.name;return st(t)},WC=function(e){var t=e.name;return st(t)},jC=function(e){var t=e.version;return st(t)},XC=function(){var e=C1(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof t=="string"?/electron/.test(t):!1},$u=function(e){return typeof e=="string"&&e.indexOf("Edg/")!==-1},qC=function(){var e=C1();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},Ki=function(){return L1("iPad")},YC=function(){return L1("iPhone")},JC=function(){return L1("iPod")},ZC=function(e){return st(e)};function QC(n){var e=n||uC,t=e.device,r=e.browser,i=e.os,s=e.engine,o=e.ua;return{isSmartTV:vC(t),isConsole:xC(t),isWearable:yC(t),isEmbedded:_C(t),isMobileSafari:NC(r)||Ki(),isChromium:DC(r),isMobile:gC(t)||Ki(),isMobileOnly:pC(t),isTablet:mC(t)||Ki(),isBrowser:Wm(t),isDesktop:Wm(t),isAndroid:EC(i),isWinPhone:AC(i),isIOS:CC(i)||Ki(),isChrome:PC(r),isFirefox:IC(r),isSafari:kC(r),isOpera:OC(r),isIE:UC(r),osVersion:LC(i),osName:RC(i),fullBrowserVersion:GC(r),browserVersion:HC(r),browserName:VC(r),mobileVendor:wC(t),mobileModel:SC(t),engineName:WC(s),engineVersion:jC(s),getUA:ZC(o),isEdge:jm(r)||$u(o),isYandex:FC(r),deviceType:MC(t),isIOS13:qC(),isIPad13:Ki(),isIPhone13:YC(),isIPod13:JC(),isElectron:XC(),isEdgeChromium:$u(o),isLegacyEdge:jm(r)&&!$u(o),isWindows:TC(i),isMacOs:bC(i),isMIUI:BC(r),isSamsungBrowser:zC(r)}}var KC=vC(Vr),$C=xC(Vr),e3=yC(Vr),Hz=_C(Vr),Vz=NC(ur)||Ki(),Wz=DC(ur),Xm=gC(Vr)||Ki(),t3=pC(Vr),n3=mC(Vr)||Ki(),r3=Wm(Vr),jz=Wm(Vr),i3=EC($o),s3=AC($o),o3=CC($o)||Ki(),Xz=PC(ur),qz=IC(ur),Yz=kC(ur),Jz=OC(ur),a3=UC(ur),Zz=LC($o),Qz=RC($o),Kz=GC(ur),$z=HC(ur),e5=VC(ur),t5=wC(Vr),n5=SC(Vr),r5=WC(E1),i5=jC(E1),s5=ZC(Td),o5=jm(ur)||$u(Td),a5=FC(ur),l5=MC(Vr),u5=qC(),c5=Ki(),f5=YC(),d5=JC(),h5=XC(),p5=$u(Td),m5=jm(ur)&&!$u(Td),g5=TC($o),v5=bC($o),y5=BC(ur),x5=zC(ur),_5=function(e){if(!e||typeof e!="string"){console.error("No valid user agent string was provided");return}var t=bd(e),r=t.device,i=t.browser,s=t.os,o=t.engine,a=t.ua;return QC({device:r,browser:i,os:s,engine:o,ua:a})},w5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return i3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},S5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return r3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},M5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return a3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},E5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return o3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},T5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return Xm?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},b5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return n3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},A5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return s3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},C5=function(e){var t=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=ni(e,["renderWithFragment","children","viewClassName","style"]);return t3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},L5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return KC?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},R5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return $C?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},P5=function(e){var t=e.renderWithFragment,r=e.children,i=ni(e,["renderWithFragment","children"]);return e3?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",i,r):null},I5=function(e){var t=e.renderWithFragment,r=e.children;e.viewClassName,e.style;var i=e.condition,s=ni(e,["renderWithFragment","children","viewClassName","style","condition"]);return i?t?Ht.createElement(lr.Fragment,null,r):Ht.createElement("div",s,r):null};function D5(n){return function(e){Tz(t,e);function t(r){var i;return Sz(this,t),i=Az(this,b1(t).call(this,r)),i.isEventListenerAdded=!1,i.handleOrientationChange=i.handleOrientationChange.bind(Vm(i)),i.onOrientationChange=i.onOrientationChange.bind(Vm(i)),i.onPageLoad=i.onPageLoad.bind(Vm(i)),i.state={isLandscape:!1,isPortrait:!1},i}return Mz(t,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var i=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:i===0,isLandscape:i===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window=="undefined"?"undefined":Ad(window))!==void 0&&Xm&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return Ht.createElement(n,T1({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),t}(Ht.Component)}function F5(){var n=lr.useState(function(){var s=window.innerWidth>window.innerHeight?90:0;return{isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"}}),e=Cz(n,2),t=e[0],r=e[1],i=lr.useCallback(function(){var s=window.innerWidth>window.innerHeight?90:0,o={isPortrait:s===0,isLandscape:s===90,orientation:s===0?"portrait":"landscape"};t.orientation!==o.orientation&&r(o)},[t.orientation]);return lr.useEffect(function(){return(typeof window=="undefined"?"undefined":Ad(window))!==void 0&&Xm&&(i(),window.addEventListener("load",i,!1),window.addEventListener("resize",i,!1)),function(){window.removeEventListener("resize",i,!1),window.removeEventListener("load",i,!1)}},[i]),t}function l3(n){var e=n||window.navigator.userAgent;return bd(e)}function k5(n){var e=n||window.navigator.userAgent,t=l3(e),r=QC(t);return[r,t]}Ge.AndroidView=w5;Ge.BrowserTypes=Rr;Ge.BrowserView=S5;Ge.ConsoleView=R5;Ge.CustomView=I5;Ge.IEView=M5;Ge.IOSView=E5;Ge.MobileOnlyView=C5;Ge.MobileView=T5;Ge.OsTypes=Ku;Ge.SmartTVView=L5;Ge.TabletView=b5;Ge.WearableView=P5;Ge.WinPhoneView=A5;var $5=Ge.browserName=e5;Ge.browserVersion=$z;Ge.deviceDetect=Gz;Ge.deviceType=l5;Ge.engineName=r5;Ge.engineVersion=i5;Ge.fullBrowserVersion=Kz;Ge.getSelectorsByUserAgent=_5;Ge.getUA=s5;Ge.isAndroid=i3;Ge.isBrowser=r3;Ge.isChrome=Xz;Ge.isChromium=Wz;Ge.isConsole=$C;Ge.isDesktop=jz;Ge.isEdge=o5;Ge.isEdgeChromium=p5;Ge.isElectron=h5;Ge.isEmbedded=Hz;Ge.isFirefox=qz;Ge.isIE=a3;Ge.isIOS=o3;Ge.isIOS13=u5;Ge.isIPad13=c5;Ge.isIPhone13=f5;Ge.isIPod13=d5;Ge.isLegacyEdge=m5;Ge.isMIUI=y5;Ge.isMacOs=v5;Ge.isMobile=Xm;Ge.isMobileOnly=t3;Ge.isMobileSafari=Vz;Ge.isOpera=Jz;Ge.isSafari=Yz;Ge.isSamsungBrowser=x5;Ge.isSmartTV=KC;Ge.isTablet=n3;Ge.isWearable=e3;Ge.isWinPhone=s3;Ge.isWindows=g5;Ge.isYandex=a5;Ge.mobileModel=n5;Ge.mobileVendor=t5;Ge.osName=Qz;Ge.osVersion=Zz;Ge.parseUserAgent=bd;Ge.setUserAgent=kz;Ge.useDeviceData=l3;Ge.useDeviceSelectors=k5;Ge.useMobileOrientation=F5;Ge.withOrientationChange=D5;class eG extends Kn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Gr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){let l;try{l=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),l=JSON.parse(a.substring(65,a.length-2))}const u=s.parse(l);t&&t(u)},r,i)}parse(e){return new u3(e)}}class u3{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const r=[],i=N5(e,t,this.data);for(let s=0,o=i.length;s<o;s++)Array.prototype.push.apply(r,i[s].toShapes());return r}}function N5(n,e,t){const r=Array.from(n),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,o=[];let a=0,l=0;for(let u=0;u<r.length;u++){const h=r[u];if(h===`
`)a=0,l-=s;else{const m=O5(h,i,a,l,t);a+=m.offsetX,o.push(m.path)}}return o}function O5(n,e,t,r,i){const s=i.glyphs[n]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+i.familyName+".");return}const o=new $2;let a,l,u,h,m,d,p,y;if(s.o){const _=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let w=0,v=_.length;w<v;)switch(_[w++]){case"m":a=_[w++]*e+t,l=_[w++]*e+r,o.moveTo(a,l);break;case"l":a=_[w++]*e+t,l=_[w++]*e+r,o.lineTo(a,l);break;case"q":u=_[w++]*e+t,h=_[w++]*e+r,m=_[w++]*e+t,d=_[w++]*e+r,o.quadraticCurveTo(m,d,u,h);break;case"b":u=_[w++]*e+t,h=_[w++]*e+r,m=_[w++]*e+t,d=_[w++]*e+r,p=_[w++]*e+t,y=_[w++]*e+r,o.bezierCurveTo(m,d,p,y,u,h);break}}return{offsetX:s.ha*e,path:o}}u3.prototype.isFont=!0;class tG extends wi{constructor(e,t={}){const r=t.font;if(!(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new et;const i=r.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1);super(i,t);this.type="TextGeometry"}}export{_O as A,Vi as B,ke as C,W5 as D,q5 as E,G5 as F,_i as G,Y5 as H,di as I,j5 as J,V4 as K,Kt as L,Ax as M,Z5 as P,Hn as Q,qx as R,jo as S,J5 as T,N as V,Nm as a,E4 as b,vA as c,yn as d,Fx as e,i1 as f,K5 as g,qu as h,$5 as i,Zo as j,V5 as k,Qn as l,Pu as m,Gt as n,eG as o,tG as p,Q5 as q,ge as r,an as s,xs as t,Hr as u,ji as v,GA as w,X5 as x,H5 as y,B5 as z};
